<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>网站更新日志（2024/08/26~）</title>
      <link href="/posts/17241f42/"/>
      <url>/posts/17241f42/</url>
      
        <content type="html"><![CDATA[<details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-09-19]-服务器&Hexo博客</summary><div class="toggle-content"><p><strong>网站删除</strong></p><blockquote><p>删除<a href="proxy.insectm.cn">proxy.insectmk.cn</a>：V2rayA代理</p></blockquote><p><strong>头像更新</strong></p><blockquote><p>更新为本人（与她的）合照AI</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-08-31]-Hexo博客-Waline评论系统</summary><div class="toggle-content"><p><strong>Waline评论系统</strong></p><blockquote><p>Waline评论系统出问题了，出现在服务端，不知道是否是我服务器的问题，现在又该成<a href="https://vercel.com/">vercel</a>部署了，并在<code>_config.xxx.yml</code>配置种修改Waline Server域名如下：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">waline:</span></span><br><span class="line">  <span class="attr">serverURL:</span> <span class="string">https://waline-server.insectmk.top/</span></span><br></pre></td></tr></table></figure></blockquote><p><strong>永久链接</strong></p><blockquote><p>复制文章的时候一定要注意文章头部的<code>abbrlink</code>，清空它，让插件重新生成。</p></blockquote><p><strong>文章隐藏</strong></p><blockquote><p>文章隐藏插件有些问题，跟其他插件有冲突，会在编译时报错，对页面无影响</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-08-26]-Hexo博客-豆瓣页面插件</summary><div class="toggle-content"><p><strong>生成页面报错</strong></p><blockquote><p>执行<code>hexo douban</code>时报错，具体内容看<a href="https://github.com/mythsman/hexo-douban/issues/178">生成页面时报错：Unhandled rejection SyntaxError: Unexpected token ‘&lt;’, “<html> &lt;h”… is not valid JSON #178</a>。</p></blockquote></div></details><!-- flag of hidden posts -->]]></content>
      
      
      <categories>
          
          <category> 日志 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 个人网站 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>美化你的Github个人主页</title>
      <link href="/posts/98f3f974/"/>
      <url>/posts/98f3f974/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>最近在逛Github时，又看到别人炫酷的主页了，所以自己也想美化美化自己的<a href="https://github.com/insectmk">Github个人主页</a>，稍微做了一点点改变，后面用空再详细折腾啦~</p><h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><h3 id="新建"><a href="#新建" class="headerlink" title="新建"></a>新建</h3><p>到<a href="https://github.com/new">Github仓库新建页</a>新建与用户名相同的仓库（新建时会提示为特殊仓库），勾选<code>Add a README file</code>复选框：</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/github/profile-diy/image-20240730105448541.png" alt="image-20240730105448541"></p><h3 id="编辑"><a href="#编辑" class="headerlink" title="编辑"></a>编辑</h3><p>只需要编辑仓库的<code>README.md</code>文件即可，这个文件就是我们的主页源码。</p><p><strong>推荐内容</strong>：</p><ol><li><p><a href="https://github.com/anuraghazra/github-readme-stats">仓库状态统计</a></p></li><li><p>主页访问量统计：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![<span class="string">Visitor Count</span>](<span class="link">https://profile-counter.glitch.me/你的Github用户名/count.svg</span>)</span><br></pre></td></tr></table></figure></li><li><p>常用语言占比统计：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![<span class="string">Top Langs</span>](<span class="link">https://github-readme-stats.vercel.app/api/top-langs/?username=你的Github用户名&amp;layout=compact&amp;theme=tokyonight</span>)</span><br></pre></td></tr></table></figure></li><li><p>Github活动统计图，<a href="https://github.com/Ashutosh00710/github-readme-activity-graph">更多活动统计图主题</a>：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![](<span class="link">https://github-readme-activity-graph.cyclic.app/graph?username=你的Github用户名&amp;theme=dracula</span>)</span><br></pre></td></tr></table></figure></li><li><p>常用标签设计网址：<a href="https://shields.io/">shields.io(标签)</a> 、 <a href="https://dev.to/envoy_/150-badges-for-github-pnk">dev.to(LOGO)</a></p></li><li><p>常用Markdown表情：<a href="https://gist.github.com/rxaviers/7360908">Markdown表情大全原址</a></p></li></ol><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><h3 id="教程"><a href="#教程" class="headerlink" title="教程"></a>教程</h3><p><a href="https://blog.csdn.net/qq_44231797/article/details/129251980">GitHub美化主页设计（保姆教程 &amp;&amp; Markdown表情）</a></p><h3 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h3><p><a href="https://github.com/anuraghazra/github-readme-stats">仓库状态统计</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Github </tag>
            
            <tag> 美化 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>我的Hexo博客多主题同时部署的实现思路（Butterfly+安知鱼）</title>
      <link href="/posts/10d64ca8/"/>
      <url>/posts/10d64ca8/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>最近看到好多Hexo博客都在使用<a href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu">安知鱼主题</a>，不得不说，这个主题确实好看，满满的科技感。</p><p>并且它是一款基于<a href="https://github.com/jerryc127/hexo-theme-butterfly">hexo-theme-butterfly</a>修改的主題，对本来就使用<code>Butterfly主题</code>的我来说，配置起来也是特别方便。</p><p>但是博客对<code>Butterfly</code>做了些绑定主题的修改，所以不想直接替换为<code>安知鱼主题</code>，所以就萌生了一个博客多个主题同时部署的想法，正好可以把之前的<a href="https://halo.insectmk.cn/">Halo博客</a>给替换掉了。</p><p>这样<a href="https://insectmk.cn/">insectmk.top</a>域名跟<a href="https://insectmk.cn/">insectmk.cn</a>域名的博客不仅内容一致，还能有所区别，简直是太合适了！！！</p><h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><h3 id="安知鱼"><a href="#安知鱼" class="headerlink" title="安知鱼"></a>安知鱼</h3><p>首先，根据<a href="https://docs.anheyu.com/initall.html">主题安装|安知鱼主题官方文档</a>安装主题，这里推荐使用<strong>npm安装</strong>的方式，使用以下步骤进行安装：</p><ol><li><p>在博客根目录下打开<code>cmd</code>执行以下内容：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i hexo-theme-anzhiyu</span><br></pre></td></tr></table></figure></li><li><p>安装<code>pug</code>和<code>stylus</code>渲染插件，当然，如果之前使用的是<code>Butterfly主题</code>，那一定是安装了的:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-renderer-pug hexo-renderer-stylus --save</span><br></pre></td></tr></table></figure></li><li><p>复制安知鱼配置：复制<code>node_modules/hexo-theme-butterfly/_config.yml</code>到博客根目录并更名为<code>_config.anzhiyu.yml</code>，当然，你还需要根据<a href="https://docs.anheyu.com/global/base.html">基础配置|安知鱼主题官方文档</a>来修改你的配置，这个配置文件与<code>Butterfly主题</code>的配置文件内容大体一致，可以将相同配置内容粘贴过来。</p></li></ol><h3 id="配置分离"><a href="#配置分离" class="headerlink" title="配置分离"></a>配置分离</h3><p>目前我们的博客已经有两个主题了，当然，如果加上Hexo的默认主题的话也就是三个。</p><p>想要博客生成两个静态网站，并且这两个静态网站互不冲突并且同时存在，就需要进行配置分离啦。</p><p>首先说一下我的解决思路，之前的主题（Butterfly）配置就不做修改了，只做扩展，也就是<strong>默认使用的是Butterfly的配置</strong>，如果需要编译安知鱼主题的话，则需要在<code>hexo</code>命令上指定扩展的配置文件。</p><p>我们在博客根目录下新建一个<code>_config.anzhiyu.build.yml</code>配置文件，这个文件用于替换根目录下<code>_config.yml</code>配置的部分内容和一些插件的开关，我的<code>_config.anzhiyu.build.yml</code>配置文件内容如下：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 冲突配置</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">&quot;InsectMk的个人空间&quot;</span></span><br><span class="line"><span class="attr">subtitle:</span> <span class="string">&quot;今天特别开心！&quot;</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">&quot;每天都要微笑&quot;</span>     <span class="comment"># 签名</span></span><br><span class="line"><span class="attr">keywords:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;个人博客&quot;</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;InsectMk&quot;</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">&quot;InsectMk&quot;</span></span><br><span class="line"><span class="attr">language:</span> <span class="string">zh-CN</span></span><br><span class="line"><span class="attr">timezone:</span> <span class="string">Asia/Shanghai</span>    <span class="comment">#中国的时区</span></span><br><span class="line"><span class="attr">email:</span> <span class="string">&quot;3067836615@qq.com&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 多博客区分配置</span></span><br><span class="line"><span class="attr">url:</span> <span class="string">https://insectmk.top</span></span><br><span class="line"><span class="attr">public_dir:</span> <span class="string">public_anzhiyu</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">anzhiyu</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/one-command-deployment</span></span><br><span class="line"><span class="comment"># 发布</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="comment"># Gitee上传</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">    <span class="attr">repo:</span> <span class="string">https://gitee.com/insectmk/hexo-blog-anzhiyu.git</span></span><br><span class="line">    <span class="attr">branch:</span> <span class="string">master</span></span><br><span class="line">    <span class="attr">message:</span> <span class="comment"># &#x27;blog update&#x27;</span></span><br><span class="line">  <span class="comment"># Github上传</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">    <span class="attr">repo:</span> <span class="string">https://github.com/insectmk/hexo-blog-anzhiyu.git</span></span><br><span class="line">    <span class="attr">branch:</span> <span class="string">master</span></span><br><span class="line">    <span class="attr">message:</span> <span class="comment"># &#x27;blog update&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 部分插件的关闭</span></span><br><span class="line"><span class="comment">## 首页轮播图</span></span><br><span class="line"><span class="attr">swiper:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">false</span> <span class="comment"># 开关</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>好了，到了这一步，配置分离已经完成了，我们可以通过在博客根目录下执行以下两组命令来分别生成<code>Butterfly主题</code>的博客与<code>安知鱼主题</code>的博客：</p><p><strong>Butterfly</strong>：直接像以前一样Hexo三连即可</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 清理静态网站文件夹</span></span><br><span class="line">hexo clean </span><br><span class="line"><span class="comment"># 生成静态网站</span></span><br><span class="line">hexo generate</span><br><span class="line"><span class="comment"># 部署到Git</span></span><br><span class="line">hexo deploy</span><br></pre></td></tr></table></figure><p><strong>安知鱼</strong>：</p><p>指定配置文件的Hexo三连，越靠右的配置优先级越高。</p><p>指定配置文件会在项目根目录生成一个<code>_multiconfig.yml</code>配置整合文件，可以将这个文件加入<code>.gitignore</code>忽略文件哟~</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 清理静态网站文件夹</span></span><br><span class="line">hexo clean --config _config.yml,_config.butterfly.yml,_config.anzhiyu.yml,_config.anzhiyu.build.yml</span><br><span class="line"><span class="comment"># 生成静态网站</span></span><br><span class="line">hexo generate --config _config.yml,_config.butterfly.yml,_config.anzhiyu.yml,_config.anzhiyu.build.yml</span><br><span class="line"><span class="comment"># 部署到Git</span></span><br><span class="line">hexo deploy --config _config.yml,_config.butterfly.yml,_config.anzhiyu.yml,_config.anzhiyu.build.yml</span><br></pre></td></tr></table></figure><h3 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h3><p>如果每次都这样一行一行执行是很累的，我们可以定义两个部署脚本，一个用于发布<code>Butterfly主题</code>，一个用于发布<code>安知鱼主题</code>，我的<strong>Windows脚本</strong>内容如下：</p><p><code>Butterfly主题</code>部署脚本，<code>deploy.bat</code>：</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="keyword">call</span> hexo clean </span><br><span class="line"># 这个是豆瓣插件啦，没有的就不加了嗷，https://github.com/mythsman/hexo-douban</span><br><span class="line"><span class="keyword">call</span> hexo douban</span><br><span class="line"><span class="keyword">call</span> hexo generate</span><br><span class="line"># 这个是Algolia在线搜索哟，没有也不加噢</span><br><span class="line"><span class="keyword">call</span> hexo algolia</span><br><span class="line"><span class="keyword">call</span> hexo deploy</span><br><span class="line"><span class="built_in">pause</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>安知鱼主题</code>部署脚本，<code>deploy-anzhiyu.bat</code>：</p><figure class="highlight bat"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="keyword">call</span> hexo clean --config _config.yml,_config.butterfly.yml,_config.anzhiyu.yml,_config.anzhiyu.build.yml</span><br><span class="line"># 这个是豆瓣插件啦，没有的就不加了嗷，https://github.com/mythsman/hexo-douban</span><br><span class="line"><span class="keyword">call</span> hexo douban --config _config.yml,_config.butterfly.yml,_config.anzhiyu.yml,_config.anzhiyu.build.yml</span><br><span class="line"><span class="keyword">call</span> hexo generate --config _config.yml,_config.butterfly.yml,_config.anzhiyu.yml,_config.anzhiyu.build.yml</span><br><span class="line"><span class="keyword">call</span> hexo deploy --config _config.yml,_config.butterfly.yml,_config.anzhiyu.yml,_config.anzhiyu.build.yml</span><br><span class="line"><span class="built_in">pause</span></span><br></pre></td></tr></table></figure><h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><ol><li><code>Butterfly</code>与<code>安知鱼</code>的<strong>图标规则</strong>不一样噢，需要在<code>_config.anzhiyu.yml</code>配置文件中重新配置一下，不要盲目复制啦。</li><li>两个主题的部署脚本不能同时执行哟，它们会同时操作<code>.deploy_git</code>文件夹，会报错的！需要分别执行！</li></ol><h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>我的两个主题分别部署在了<a href="https://insectmk.cn/">Butterfly主题</a>与<a href="https://insectmk.top/">安知鱼主题</a>，可以看看有啥区别哟~</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://www.hozen.site/archives/67/">Hexo 的多主题自动化部署</a></p><p><a href="https://docs.anheyu.com/">安知鱼主题官方文档</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Butterfly </tag>
            
            <tag> 个人博客 </tag>
            
            <tag> 安知鱼 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用Spring AI对接Ollama搭建自己的智能问答网站</title>
      <link href="/posts/129b7f4a/"/>
      <url>/posts/129b7f4a/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>已经是2024年的下半年了，<a href="https://www.aigc.cn/">AIGC</a>的应用特别广泛，不仅好玩儿也很实用，之前有使用过<a href="https://www.rwkv.com/">RWKV</a>做过一个<a href="https://gitee.com/insectmk/chatbot-web">智能问答网站</a>，但那时<a href="https://springframework.org.cn/projects/spring-ai/">Spring AI</a>还不是很流行。</p><p>现在Spring AI已经比较成熟了，想体验一下Spring AI到底是啥样的，并且由于<a href="https://openai.com/">Open AI</a>在国内的限制，看了看Spring AI所支持的模型，选择了<a href="https://ollama.com/">可本地运行的Ollama模型</a>。</p><h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><h3 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h3><p>在开始前需要确定开发环境，我的开发环境如下：</p><table><thead><tr><th>软件</th><th>版本</th></tr></thead><tbody><tr><td>JDK</td><td><code>17.0.11</code> 2024-04-16 LTS，<a href="https://www.oracle.com/cn/java/technologies/downloads/#java17">下载地址</a></td></tr><tr><td>Maven</td><td><code>3.8.8</code>， <a href="https://maven.apache.org/download.cgi">下载地址</a></td></tr><tr><td>IntelliJ IDEA</td><td>IntelliJ IDEA 2024.1.4 (Ultimate Edition)，<a href="https://www.jetbrains.com/zh-cn/idea/download/?section=windows">下载地址</a></td></tr><tr><td>Ollama</td><td><code>0.2.5</code>，<a href="https://ollama.com/download">下载地址</a></td></tr></tbody></table><h3 id="Ollama"><a href="#Ollama" class="headerlink" title="Ollama"></a>Ollama</h3><p>参考<a href="https://blog.csdn.net/qq_40999403/article/details/139320266">Ollama全面指南：安装、使用与高级定制</a>.</p><p><strong>Windows安装步骤：</strong></p><ol><li><p>到<a href="https://ollama.com/download">Ollama下载页</a>下载安装程序，执行安装程序，默认会安装到<code>C:\Users\&#123;Windows账户名&#125;\AppData\Local\Programs\Ollama</code>下。</p></li><li><p>如果不想下载的模型安装到C盘，可以通过设置<code>OLLAMA_MODELS</code>环境变量更改模型下载路径，我的变量值为<code>E:\LM\ollama</code>，设置好后记得重启Ollama。</p></li><li><p>安装完成后使用<code>ollama -v</code>查看是否安装成功，如果没有运行模型则输出信息大致如下：</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Warning: could not connect to a running Ollama instance</span><br><span class="line">Warning: client version is 0.2.5</span><br></pre></td></tr></table></figure></li></ol><p><strong>运行一个模型：</strong></p><p>可以到<a href="https://ollama.com/library">library | Ollama</a>查看你的电脑适合的模型，这里我选择<a href="https://ollama.fan/models/chinese/qwen/#__tabbed_1_8">通义千问0.5b模型</a>。</p><p>打开<code>cmd</code>，键入以下命令下载并运行模型：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ollama run qwen:0.5b</span><br></pre></td></tr></table></figure><p>模型运行成功后等待输入，我们可以让它介绍一下自己，终端完整执行过程如下：</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">C:<span class="keyword">\Users</span><span class="keyword">\makun</span>&gt;ollama run qwen:0.5b</span><br><span class="line">pulling manifest</span><br><span class="line">pulling fad2a06e4cc7... 100<span class="comment">% ▕████████████████████████████████████████████████████████▏ 394 MB</span></span><br><span class="line">pulling 41c2cf8c272f... 100<span class="comment">% ▕████████████████████████████████████████████████████████▏ 7.3 KB</span></span><br><span class="line">pulling 1da0581fd4ce... 100<span class="comment">% ▕████████████████████████████████████████████████████████▏  130 B</span></span><br><span class="line">pulling f02dd72bb242... 100<span class="comment">% ▕████████████████████████████████████████████████████████▏   59 B</span></span><br><span class="line">pulling ea0a531a015b... 100<span class="comment">% ▕████████████████████████████████████████████████████████▏  485 B</span></span><br><span class="line">verifying sha256 digest</span><br><span class="line">writing manifest</span><br><span class="line">removing any unused layers</span><br><span class="line">success</span><br><span class="line">&gt;&gt;&gt; 请介绍一下你自己</span><br><span class="line">我是来自阿里云的大规模语言模型，我叫通义千问。作为一个AI助手，我的目标是帮助用户获取准确、有用的信息，解决他们的问题</span><br><span class="line">和困惑。我会不断地学习新的知识和技能，不断提高自己的能力和效率，更好地服务于用户。</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; Send a message (/? for help)</span><br></pre></td></tr></table></figure><p>如果不想聊天，想关闭模型，输入聊天内容<code>/bye</code>即可，其他聊天命令可以使用<code>/?</code>进行查看。</p><p><strong>其他说明：</strong>如果Ollama模型被其他程序启动了，没有关闭，再用其他程序调用Ollama模型的话，可能出现异常（没有响应），可以到Windows任务栏的隐藏图标托盘<code>^</code>处<code>右键</code>Ollama，<code>Quit Ollama</code>即可。</p><h3 id="Spring-AI"><a href="#Spring-AI" class="headerlink" title="Spring AI"></a>Spring AI</h3><p>可以参考<a href="https://springframework.org.cn/projects/spring-ai/">Spring AI - Spring 中文</a>创建Spring AI项目。</p><p><strong>创建步骤：</strong></p><ol><li><p>直接使用IDEA的<a href="https://start.spring.io/">Spring Initializr</a>（即创建Project时的<code>Spring Boot</code>）引导，快速创建Spring AI项目。</p><ol><li><p>项目参数（<strong>按需参考</strong>）：</p><table><thead><tr><th>参数名</th><th>参数值</th></tr></thead><tbody><tr><td>Name</td><td>spring-ai-demo</td></tr><tr><td>Location</td><td>~\Desktop\temp\project-demo</td></tr><tr><td>Language</td><td>Java</td></tr><tr><td>Type</td><td>Maven</td></tr><tr><td>Group</td><td>cn.insectmk.demo</td></tr><tr><td>Artifact</td><td>spring-ai-demo</td></tr><tr><td>Package Name</td><td>cn.insectmk.demo.springaidemo</td></tr><tr><td>JDK</td><td>17</td></tr><tr><td>Java</td><td>17</td></tr><tr><td>Packaging</td><td>Jar</td></tr></tbody></table></li><li><p>项目依赖（<strong>按需参考</strong>）：</p><p>Spring Boot：<code>3.3.2</code></p><p>Dependencies：<code>Web - Spring Web</code>、<code>AI - Ollama</code></p></li></ol></li><li><p>参考<a href="https://docs.springframework.org.cn/spring-ai/reference/api/chat/ollama-chat.html">Ollama聊天::Spring AI参考-Spring中文</a>，编写<code>@Controller</code>类，案例代码如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.insectmk.demo.springai.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.messages.UserMessage;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.model.ChatResponse;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.prompt.Prompt;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.ollama.OllamaChatModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Flux;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ChatController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> OllamaChatModel chatModel;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ChatController</span><span class="params">(OllamaChatModel chatModel)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.chatModel = chatModel;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/ai/generate&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Map <span class="title function_">generate</span><span class="params">(<span class="meta">@RequestParam(value = &quot;message&quot;, defaultValue = &quot;Tell me a joke&quot;)</span> String message)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Map.of(<span class="string">&quot;generation&quot;</span>, chatModel.call(message));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/ai/generateStream&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Flux&lt;ChatResponse&gt; <span class="title function_">generateStream</span><span class="params">(<span class="meta">@RequestParam(value = &quot;message&quot;, defaultValue = &quot;Tell me a joke&quot;)</span> String message)</span> &#123;</span><br><span class="line">        <span class="type">Prompt</span> <span class="variable">prompt</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Prompt</span>(<span class="keyword">new</span> <span class="title class_">UserMessage</span>(message));</span><br><span class="line">        <span class="keyword">return</span> chatModel.stream(prompt);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>编写<code>src/main/resources/application.properties</code>，加入以下内容配置<code>Ollama</code>模型的内容：</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.ai.ollama.base-url</span>=<span class="string">http://localhost:11434</span></span><br><span class="line"><span class="attr">spring.ai.ollama.chat.model</span>=<span class="string">qwen:0.5b</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h3><p>执行以下步骤以启动程序：</p><ol><li>先将<code>Ollama</code>关闭：Windows任务栏右侧隐藏托盘 -&gt; Ollama（羊驼图标）-&gt; <code>鼠标右键</code> -&gt; <code>Quit Ollama</code></li><li>打开<code>cmd</code>终端，键入<code>ollama run qwen:0.5b</code>以启动通义千问0.5b模型</li><li>IDEA运行项目启动类</li></ol><p><strong>测试：</strong></p><ol><li><p>访问<a href="http://localhost:8080/ai/generate">http://localhost:8080/ai/generate</a>以测试对话.</p><p>当然，你也可以自定义问题参数，使用案例如：<a href="http://localhost:8080/ai/generate?message=%E7%BB%99%E6%88%91%E8%AE%B2%E4%B8%AA%E7%AC%91%E8%AF%9D">http://localhost:8080/ai/generate?message=给我讲个笑话</a></p></li><li><p>访问<a href="http://localhost:8080/ai/generateStream">http://localhost:8080/ai/generateStream</a>以测试流式对话</p><p>同上，使用案例如：<a href="http://localhost:8080/ai/generateStream?message=%E7%BB%99%E6%88%91%E8%AE%B2%E4%B8%AA%E7%AC%91%E8%AF%9D">http://localhost:8080/ai/generateStream?message=给我讲个笑话</a></p></li></ol><h2 id="后语"><a href="#后语" class="headerlink" title="后语"></a>后语</h2><p>好了，现在你已经学会如何让你的Java程序对接AIGC了，快去升级你的程序吧！</p><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a href="https://springframework.org.cn/projects/spring-ai/">Spring AI - Spring 中文</a></p><p><a href="https://github.com/ollama/ollama/">Ollama官方仓库</a></p><p><a href="https://blog.csdn.net/qq_40999403/article/details/139320266">Ollama全面指南：安装、使用与高级定制</a></p><p><a href="https://docs.springframework.org.cn/spring-ai/reference/api/chat/ollama-chat.html">Ollama聊天::Spring AI参考-Spring中文</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> LM </tag>
            
            <tag> Ollama </tag>
            
            <tag> Spring AI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>无需更改源码！让你的Hexo的文章在首页隐藏</title>
      <link href="/posts/9c83ed78/"/>
      <url>/posts/9c83ed78/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>由于此博客不仅仅用于发布文章，还有日志记录与学习记录的需求，并且日志也是发布为文章来记录的，这样就会导致日志的内容出现在博客首页，特别影响博客的美观性。</p><p>故此想增加文章隐藏的功能，在网络上搜索了一下，有<a href="https://blog.zhheo.com/p/451ff5e9.html">修改主题源代码的</a>，还有<a href="https://github.com/im0o/hexo-generator-index-custom/blob/master/README_zh.md">替换首页生成器插件的</a>。</p><p>但作为一名开发者，为了降低博客的维护难度，还是想使用增量更新，而不是修改原来的内容，稍微筛选了一下搜索结果。</p><p>终于！找到了<a href="https://github.com/prinsss/hexo-hide-posts">hexo-hide-posts</a>这个Hexo 插件，它能够隐藏指定的文章，并使它们仅可通过链接访问。</p><h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><p>可以直接参考<a href="https://github.com/prinsss/hexo-hide-posts/blob/master/README_ZH.md">README_ZH | hexo-hide-posts</a>来进行配置，这里记录我的配置步骤。</p><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>在项目目录执行以下命令安装插件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-hide-posts</span><br></pre></td></tr></table></figure><p>安装完成后在项目根目录的<code>_config.yml</code>中添加如下内容：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 文章隐藏：https://github.com/prinsss/hexo-hide-posts</span></span><br><span class="line"><span class="attr">hide_posts:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment"># 是否启用 hexo-hide-posts</span></span><br><span class="line">  <span class="attr">filter:</span> <span class="string">hidden</span> <span class="comment"># 隐藏文章的 front-matter 标识，也可以改成其他你喜欢的名字</span></span><br><span class="line">  <span class="attr">noindex:</span> <span class="literal">true</span> <span class="comment"># 为隐藏的文章添加 noindex meta 标签，阻止搜索引擎收录</span></span><br><span class="line">  <span class="comment"># 设置白名单，白名单中的 generator 可以访问隐藏文章</span></span><br><span class="line">  <span class="comment"># 常见的 generators 有：index, tag, category, archive, sitemap, feed, etc.</span></span><br><span class="line">  <span class="comment"># allowlist_generators: []</span></span><br><span class="line">  <span class="attr">allowlist_generators:</span> [<span class="string">&#x27;*&#x27;</span>]</span><br><span class="line">  </span><br><span class="line">  <span class="comment"># 设置黑名单，黑名单中的 generator 不可以访问隐藏文章</span></span><br><span class="line">  <span class="comment"># 如果同时设置了黑名单和白名单，白名单的优先级更高</span></span><br><span class="line">  <span class="comment"># blocklist_generators: [&#x27;*&#x27;]</span></span><br><span class="line">  <span class="attr">blocklist_generators:</span> [<span class="string">&#x27;index&#x27;</span>, <span class="string">&#x27;feed&#x27;</span>]</span><br></pre></td></tr></table></figure><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><h3 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h3><p>如果在<code>_config.yml</code>中的配置为<code>filter: hidden</code>，则在文章的 <a href="https://hexo.io/docs/front-matter">front-matter</a> 中添加 <code>hidden: true</code> 即可隐藏文章，如：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: &#x27;被隐藏的文章&#x27;</span><br><span class="line">date: &#x27;2024-07-20 00:21:14&#x27;</span><br><span class="line"><span class="section">hidden: true</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure><h3 id="高级使用"><a href="#高级使用" class="headerlink" title="高级使用"></a>高级使用</h3><p>插件提供了黑白名单控制，只需要在<code>_config.yml</code>中配置<code>allowlist_generators</code>与<code>blocklist_generators</code>参数即可，案例如下：</p><p><strong>示例1</strong>：让所有隐藏文章在存档页面和分类页面中可见，其他地方不可见</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hide_posts:</span><br><span class="line">  enable: true</span><br><span class="line">  allowlist_generators: [&#x27;archive&#x27;, &#x27;category&#x27;]</span><br></pre></td></tr></table></figure><p><strong>示例2</strong>：仅在首页和 RSS 隐藏部分文章，其他地方可见</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hide_posts:</span><br><span class="line">  enable: true</span><br><span class="line">  allowlist_generators: [&#x27;*&#x27;]</span><br><span class="line">  blocklist_generators: [&#x27;index&#x27;, &#x27;feed&#x27;]</span><br></pre></td></tr></table></figure><p>更多黑白名单的高级配置示例，可以在 <a href="https://github.com/prinsss/hexo-hide-posts/blob/master/lib/isGeneratorAllowed.test.js">isGeneratorAllowed.test.js</a> 文件中查看。</p><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a href="https://github.com/prinsss/hexo-hide-posts/blob/master/README_ZH.md">README_ZH | hexo-hide-posts</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 个人博客 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用Cloudflare加速Docker镜像下载</title>
      <link href="/posts/9348d5be/"/>
      <url>/posts/9348d5be/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>最近国内有些DockerDocker镜像源下架了，例如<a href="https://www.landiannews.com/archives/104354.html">上海交通大学开源镜像站</a>。</p><p>有点儿害怕后面下载不了镜像了，刚好1Panel社区就有帖子说明如何自建Docker镜像加速了（<strong>还是免费的哟</strong>），所以想自建一个镜像加速以自用。</p><h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><ol><li>一个域名：本文演示的域名通过腾讯云购买</li><li>Cloudflare账号</li></ol><h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><h3 id="Cloudflare"><a href="#Cloudflare" class="headerlink" title="Cloudflare"></a>Cloudflare</h3><p>到<a href="https://dash.cloudflare.com/">Cloudflare官网</a>注册账号。</p><p>点击<code>添加站点</code>，按照步骤将自己的网站添加进去。</p><ol><li><p>域：添加自己的域名。</p></li><li><p>计划：选择最后的<code>Free</code>即可。</p></li><li><p>DNS：等Cloudflare扫描一下就好啦。</p></li><li><p>激活：需要到域名注册机构修改一下DNS服务，<strong>下一节配置</strong>：</p><p><em>您的已分配的 Cloudflare 名称服务器：</em></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gabriella.ns.cloudflare.com</span><br></pre></td></tr></table></figure><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vern.ns.cloudflare.com</span><br></pre></td></tr></table></figure></li><li><p>检查：点击<code>继续前往xxxx.xxx概览</code>就能到网站控制台了。</p></li></ol><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/docker-cloudflare/image-20240613164132812.png" alt="image-20240613164132812"></p><p>依次走完这5步就添加网站成功了，还需要激活DNS代理，</p><h3 id="域名"><a href="#域名" class="headerlink" title="域名"></a>域名</h3><p>这里演示腾讯云域名如何配置Cloudflare的DNS服务器。</p><p>在腾讯云控制台找到<code>域名注册</code>-&gt;<code>我的域名</code>以进入<a href="https://console.cloud.tencent.com/domain/all-domain/all">域名控制台</a>，点击<code>更多</code>-&gt;<code>修改 DNS 服务器</code>-&gt;<code>自定义DNS</code>，填上上一节第四步分配的 Cloudflare 名称服务器。</p><p><em>您的已分配的 Cloudflare 名称服务器：</em></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gabriella.ns.cloudflare.com</span><br></pre></td></tr></table></figure><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vern.ns.cloudflare.com</span><br></pre></td></tr></table></figure><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/docker-cloudflare/image-20240613165908095.png" alt="image-20240613165908095"></p><p>接下来就是等待Cloudflare发送域名激活成功的邮件。</p><h3 id="Cloudflare-Workers"><a href="#Cloudflare-Workers" class="headerlink" title="Cloudflare Workers"></a>Cloudflare Workers</h3><p>最关键的部分来了，到<a href="https://dash.cloudflare.com/">cloudflare控制台</a>的<code>Workers 和 Pages</code>页面，点击<code>创建</code>-&gt;<code>创建 Worker</code>，为项目命名后点击<code>保存</code>、<code>完成</code>，然后点击<code>编辑代码</code>，写入以下内容（<strong>一定要将“你的域名”替换掉！</strong>）：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> hub_host = <span class="string">&#x27;registry-1.docker.io&#x27;</span></span><br><span class="line"><span class="keyword">const</span> auth_url = <span class="string">&#x27;https://auth.docker.io&#x27;</span></span><br><span class="line"><span class="keyword">const</span> workers_url = <span class="string">&#x27;https://你的域名&#x27;</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* static files (404.html, sw.js, conf.js)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/** <span class="doctag">@type</span> &#123;<span class="type">RequestInit</span>&#125; */</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PREFLIGHT_INIT</span> = &#123;</span><br><span class="line">    <span class="comment">// status: 204,</span></span><br><span class="line">    <span class="attr">headers</span>: <span class="keyword">new</span> <span class="title class_">Headers</span>(&#123;</span><br><span class="line">        <span class="string">&#x27;access-control-allow-origin&#x27;</span>: <span class="string">&#x27;*&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;access-control-allow-methods&#x27;</span>: <span class="string">&#x27;GET,POST,PUT,PATCH,TRACE,DELETE,HEAD,OPTIONS&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;access-control-max-age&#x27;</span>: <span class="string">&#x27;1728000&#x27;</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> &#123;<span class="type">any</span>&#125; <span class="variable">body</span></span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">status</span></span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> &#123;<span class="type">Object&lt;string, string&gt;</span>&#125; <span class="variable">headers</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">makeRes</span>(<span class="params">body, status = <span class="number">200</span>, headers = &#123;&#125;</span>) &#123;</span><br><span class="line">    headers[<span class="string">&#x27;access-control-allow-origin&#x27;</span>] = <span class="string">&#x27;*&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(body, &#123; status, headers &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">urlStr</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">newUrl</span>(<span class="params">urlStr</span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title function_">URL</span>(urlStr)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title function_">addEventListener</span>(<span class="string">&#x27;fetch&#x27;</span>, <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> ret = <span class="title function_">fetchHandler</span>(e)</span><br><span class="line">        .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> <span class="title function_">makeRes</span>(<span class="string">&#x27;cfworker error:\n&#x27;</span> + err.<span class="property">stack</span>, <span class="number">502</span>))</span><br><span class="line">    e.<span class="title function_">respondWith</span>(ret)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> &#123;<span class="type">FetchEvent</span>&#125; <span class="variable">e</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fetchHandler</span>(<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">getReqHeader</span> = (<span class="params">key</span>) =&gt; e.<span class="property">request</span>.<span class="property">headers</span>.<span class="title function_">get</span>(key);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> url = <span class="keyword">new</span> <span class="title function_">URL</span>(e.<span class="property">request</span>.<span class="property">url</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 修改 pre head get 请求</span></span><br><span class="line">    <span class="comment">// 是否含有 %2F ，用于判断是否具有用户名与仓库名之间的连接符</span></span><br><span class="line">    <span class="comment">// 同时检查 %3A 的存在</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="regexp">/%2F/</span>.<span class="title function_">test</span>(url.<span class="property">search</span>) &amp;&amp; <span class="regexp">/%3A/</span>.<span class="title function_">test</span>(url.<span class="title function_">toString</span>())) &#123;</span><br><span class="line">        <span class="keyword">let</span> modifiedUrl = url.<span class="title function_">toString</span>().<span class="title function_">replace</span>(<span class="regexp">/%3A(?=.*?&amp;)/</span>, <span class="string">&#x27;%3Alibrary%2F&#x27;</span>);</span><br><span class="line">        url = <span class="keyword">new</span> <span class="title function_">URL</span>(modifiedUrl);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`handle_url: <span class="subst">$&#123;url&#125;</span>`</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (url.<span class="property">pathname</span> === <span class="string">&#x27;/token&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> token_parameter = &#123;</span><br><span class="line">            <span class="attr">headers</span>: &#123;</span><br><span class="line">                <span class="string">&#x27;Host&#x27;</span>: <span class="string">&#x27;auth.docker.io&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;User-Agent&#x27;</span>: <span class="title function_">getReqHeader</span>(<span class="string">&quot;User-Agent&quot;</span>),</span><br><span class="line">                <span class="string">&#x27;Accept&#x27;</span>: <span class="title function_">getReqHeader</span>(<span class="string">&quot;Accept&quot;</span>),</span><br><span class="line">                <span class="string">&#x27;Accept-Language&#x27;</span>: <span class="title function_">getReqHeader</span>(<span class="string">&quot;Accept-Language&quot;</span>),</span><br><span class="line">                <span class="string">&#x27;Accept-Encoding&#x27;</span>: <span class="title function_">getReqHeader</span>(<span class="string">&quot;Accept-Encoding&quot;</span>),</span><br><span class="line">                <span class="string">&#x27;Connection&#x27;</span>: <span class="string">&#x27;keep-alive&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;Cache-Control&#x27;</span>: <span class="string">&#x27;max-age=0&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">let</span> token_url = auth_url + url.<span class="property">pathname</span> + url.<span class="property">search</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">fetch</span>(<span class="keyword">new</span> <span class="title class_">Request</span>(token_url, e.<span class="property">request</span>), token_parameter)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 修改 head 请求</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="regexp">/^\/v2\/[^/]+\/[^/]+\/[^/]+$/</span>.<span class="title function_">test</span>(url.<span class="property">pathname</span>) &amp;&amp; !<span class="regexp">/^\/v2\/library/</span>.<span class="title function_">test</span>(url.<span class="property">pathname</span>)) &#123;</span><br><span class="line">        url.<span class="property">pathname</span> = url.<span class="property">pathname</span>.<span class="title function_">replace</span>(<span class="regexp">/\/v2\//</span>, <span class="string">&#x27;/v2/library/&#x27;</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`modified_url: <span class="subst">$&#123;url.pathname&#125;</span>`</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    url.<span class="property">hostname</span> = hub_host;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> parameter = &#123;</span><br><span class="line">        <span class="attr">headers</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;Host&#x27;</span>: hub_host,</span><br><span class="line">            <span class="string">&#x27;User-Agent&#x27;</span>: <span class="title function_">getReqHeader</span>(<span class="string">&quot;User-Agent&quot;</span>),</span><br><span class="line">            <span class="string">&#x27;Accept&#x27;</span>: <span class="title function_">getReqHeader</span>(<span class="string">&quot;Accept&quot;</span>),</span><br><span class="line">            <span class="string">&#x27;Accept-Language&#x27;</span>: <span class="title function_">getReqHeader</span>(<span class="string">&quot;Accept-Language&quot;</span>),</span><br><span class="line">            <span class="string">&#x27;Accept-Encoding&#x27;</span>: <span class="title function_">getReqHeader</span>(<span class="string">&quot;Accept-Encoding&quot;</span>),</span><br><span class="line">            <span class="string">&#x27;Connection&#x27;</span>: <span class="string">&#x27;keep-alive&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;Cache-Control&#x27;</span>: <span class="string">&#x27;max-age=0&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">cacheTtl</span>: <span class="number">3600</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (e.<span class="property">request</span>.<span class="property">headers</span>.<span class="title function_">has</span>(<span class="string">&quot;Authorization&quot;</span>)) &#123;</span><br><span class="line">        parameter.<span class="property">headers</span>.<span class="property">Authorization</span> = <span class="title function_">getReqHeader</span>(<span class="string">&quot;Authorization&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> original_response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="keyword">new</span> <span class="title class_">Request</span>(url, e.<span class="property">request</span>), parameter)</span><br><span class="line">    <span class="keyword">let</span> original_response_clone = original_response.<span class="title function_">clone</span>();</span><br><span class="line">    <span class="keyword">let</span> original_text = original_response_clone.<span class="property">body</span>;</span><br><span class="line">    <span class="keyword">let</span> response_headers = original_response.<span class="property">headers</span>;</span><br><span class="line">    <span class="keyword">let</span> new_response_headers = <span class="keyword">new</span> <span class="title class_">Headers</span>(response_headers);</span><br><span class="line">    <span class="keyword">let</span> status = original_response.<span class="property">status</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (new_response_headers.<span class="title function_">get</span>(<span class="string">&quot;Www-Authenticate&quot;</span>)) &#123;</span><br><span class="line">        <span class="keyword">let</span> auth = new_response_headers.<span class="title function_">get</span>(<span class="string">&quot;Www-Authenticate&quot;</span>);</span><br><span class="line">        <span class="keyword">let</span> re = <span class="keyword">new</span> <span class="title class_">RegExp</span>(auth_url, <span class="string">&#x27;g&#x27;</span>);</span><br><span class="line">        new_response_headers.<span class="title function_">set</span>(<span class="string">&quot;Www-Authenticate&quot;</span>, response_headers.<span class="title function_">get</span>(<span class="string">&quot;Www-Authenticate&quot;</span>).<span class="title function_">replace</span>(re, workers_url));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (new_response_headers.<span class="title function_">get</span>(<span class="string">&quot;Location&quot;</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_">httpHandler</span>(e.<span class="property">request</span>, new_response_headers.<span class="title function_">get</span>(<span class="string">&quot;Location&quot;</span>))</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> response = <span class="keyword">new</span> <span class="title class_">Response</span>(original_text, &#123;</span><br><span class="line">        status,</span><br><span class="line">        <span class="attr">headers</span>: new_response_headers</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> &#123;<span class="type">Request</span>&#125; <span class="variable">req</span></span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">pathname</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">httpHandler</span>(<span class="params">req, pathname</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> reqHdrRaw = req.<span class="property">headers</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// preflight</span></span><br><span class="line">    <span class="keyword">if</span> (req.<span class="property">method</span> === <span class="string">&#x27;OPTIONS&#x27;</span> &amp;&amp;</span><br><span class="line">        reqHdrRaw.<span class="title function_">has</span>(<span class="string">&#x27;access-control-request-headers&#x27;</span>)</span><br><span class="line">    ) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(<span class="literal">null</span>, <span class="variable constant_">PREFLIGHT_INIT</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> rawLen = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> reqHdrNew = <span class="keyword">new</span> <span class="title class_">Headers</span>(reqHdrRaw)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> refer = reqHdrNew.<span class="title function_">get</span>(<span class="string">&#x27;referer&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> urlStr = pathname</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> urlObj = <span class="title function_">newUrl</span>(urlStr)</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** <span class="doctag">@type</span> &#123;<span class="type">RequestInit</span>&#125; */</span></span><br><span class="line">    <span class="keyword">const</span> reqInit = &#123;</span><br><span class="line">        <span class="attr">method</span>: req.<span class="property">method</span>,</span><br><span class="line">        <span class="attr">headers</span>: reqHdrNew,</span><br><span class="line">        <span class="attr">redirect</span>: <span class="string">&#x27;follow&#x27;</span>,</span><br><span class="line">        <span class="attr">body</span>: req.<span class="property">body</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">proxy</span>(urlObj, reqInit, rawLen)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> &#123;<span class="type">URL</span>&#125; <span class="variable">urlObj</span></span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> &#123;<span class="type">RequestInit</span>&#125; <span class="variable">reqInit</span></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">proxy</span>(<span class="params">urlObj, reqInit, rawLen</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(urlObj.<span class="property">href</span>, reqInit)</span><br><span class="line">    <span class="keyword">const</span> resHdrOld = res.<span class="property">headers</span></span><br><span class="line">    <span class="keyword">const</span> resHdrNew = <span class="keyword">new</span> <span class="title class_">Headers</span>(resHdrOld)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// verify</span></span><br><span class="line">    <span class="keyword">if</span> (rawLen) &#123;</span><br><span class="line">        <span class="keyword">const</span> newLen = resHdrOld.<span class="title function_">get</span>(<span class="string">&#x27;content-length&#x27;</span>) || <span class="string">&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">const</span> badLen = (rawLen !== newLen)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (badLen) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="title function_">makeRes</span>(res.<span class="property">body</span>, <span class="number">400</span>, &#123;</span><br><span class="line">                <span class="string">&#x27;--error&#x27;</span>: <span class="string">`bad len: <span class="subst">$&#123;newLen&#125;</span>, except: <span class="subst">$&#123;rawLen&#125;</span>`</span>,</span><br><span class="line">                <span class="string">&#x27;access-control-expose-headers&#x27;</span>: <span class="string">&#x27;--error&#x27;</span>,</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> status = res.<span class="property">status</span></span><br><span class="line">    resHdrNew.<span class="title function_">set</span>(<span class="string">&#x27;access-control-expose-headers&#x27;</span>, <span class="string">&#x27;*&#x27;</span>)</span><br><span class="line">    resHdrNew.<span class="title function_">set</span>(<span class="string">&#x27;access-control-allow-origin&#x27;</span>, <span class="string">&#x27;*&#x27;</span>)</span><br><span class="line">    resHdrNew.<span class="title function_">set</span>(<span class="string">&#x27;Cache-Control&#x27;</span>, <span class="string">&#x27;max-age=1500&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    resHdrNew.<span class="title function_">delete</span>(<span class="string">&#x27;content-security-policy&#x27;</span>)</span><br><span class="line">    resHdrNew.<span class="title function_">delete</span>(<span class="string">&#x27;content-security-policy-report-only&#x27;</span>)</span><br><span class="line">    resHdrNew.<span class="title function_">delete</span>(<span class="string">&#x27;clear-site-data&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Response</span>(res.<span class="property">body</span>, &#123;</span><br><span class="line">        status,</span><br><span class="line">        <span class="attr">headers</span>: resHdrNew</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>更改完成后点击<code>部署</code>-&gt;<code>保存并部署</code>，此时Worker就创建成功了，现在需要绑定域名使用。</p><p>返回<code>Workers 和 Pages</code> -&gt; <code>你的项目</code>，点击<code>设置</code>-&gt;<code>触发器</code>-&gt;<code>添加自定义域</code>，可以添加一个二级域名，Cloudflare会自动生成DNS解析</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/docker-cloudflare/image-20240613170852571.png" alt="image-20240613170852571"></p><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>到现在就可以测试是否可以使用了，执行以下代码测试是否能够下载镜像（<strong>一定要将“你的域名”替换掉！</strong>）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull 你的域名/hello-world</span><br></pre></td></tr></table></figure><p>拉取成功就说明配置成功啦！</p><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><h4 id="1Panel"><a href="#1Panel" class="headerlink" title="1Panel"></a>1Panel</h4><p>根据<a href="https://1panel.cn/docs/user_manual/containers/setting/">1Panel文档-功能手册-容器-配置</a>，把自己的域名配置上去就可以了，访问速度很快。</p><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://bbs.fit2cloud.com/t/topic/5902">使用Cloudflare Workers自建docker镜像加速</a></p><p><a href="https://cloud.tencent.com/developer/article/2133878">给网站套上Cloudflare（以腾讯云为例）</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> Cloudflare </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>个人电脑更新记录（2024-06-06~）</title>
      <link href="/posts/e8b927d9/"/>
      <url>/posts/e8b927d9/</url>
      
        <content type="html"><![CDATA[<details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-08-27]-Y7000P2022-更新显卡驱动</summary><div class="toggle-content"><p><strong>显卡驱动</strong></p><blockquote><p><code>Game Ready 560.81</code> -&gt; <code>Game Ready 560.94</code></p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-08-26]-Y7000P2022-增加tabby终端软件</summary><div class="toggle-content"><p><strong>tabby</strong></p><blockquote><p>看到室友推荐的，就想着下来看看。官网地址 -&gt; <a href="https://tabby.sh/">Tabby</a></p><p><a href="https://github.com/Eugeny/tabby/releases/">Tabby发布地址</a></p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-08-14]-Y7000P2022-更新显卡驱动</summary><div class="toggle-content"><p><strong>显卡驱动</strong></p><blockquote><p><code>Game Ready 556.12</code> -&gt; <code>Game Ready 560.81</code></p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-08-13]-Y7000P2022-增加软件</summary><div class="toggle-content"><p><strong>Clash Verge</strong></p><blockquote><p>Clash For Windows 的同等产品 <a href="https://github.com/clash-verge-rev/clash-verge-rev">Clash Verge</a></p><p>目前我的订阅链接失效了，还不知道这个好不好用。</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-08-06]-Y7000P2022-更新软件</summary><div class="toggle-content"><p><strong>Android Studio</strong></p><blockquote><p>安装了一下<a href="https://developer.android.google.cn/studio?hl=zh-cn">Android Studio</a>，希望能入门开发一个安卓应用。</p><p>参考：<a href="https://blog.csdn.net/qq_38436214/article/details/105073213">Android Studio 安装配置教程 - Windows(详细版)</a></p></blockquote><p><strong>Navicat Lite 17</strong></p><blockquote><p>Navicat更新到<a href="https://www.navicat.com.cn/download/navicat-premium-lite">Navicat Lite 17</a>（PS：因为16无限试用过期了……）</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-07-29]-傻瓜超人K66-维修显卡</summary><div class="toggle-content"><p><strong>MSI 2060 super</strong></p><blockquote><p>前几天主题突然开不了机了，真的很头痛啊！</p><p>自己排查，查到了是显卡的问题（咸鱼买了张20的亮机卡-CS2大厅6帧），然后就到<code>成都@世界电脑城</code>维修去了，花了120块大洋，心疼。</p><p>还从朋友那儿把小米240Hz的显示器要回来了，还是这个用着爽！！！</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-07-25]-Y7000P2022-npm代理</summary><div class="toggle-content"><blockquote><p>参考<a href="https://blog.dejavu.moe/posts/git-npm-yarn-proxy/">使用本地代理给 Git 和 NPM 加速</a>，配置如下（Clash）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> proxy http://127.0.0.1:7890</span><br><span class="line">npm config <span class="built_in">set</span> https-proxy http://127.0.0.1:7890</span><br></pre></td></tr></table></figure><p>取消代理如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm config delete proxy</span><br><span class="line">npm config delete https-proxy</span><br></pre></td></tr></table></figure></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-07-18]-Y7000P2022-更新软件</summary><div class="toggle-content"><blockquote><p><strong>开发软件</strong></p><blockquote><p><a href="https://gradle.org/releases/">Gradle-8.9</a></p><p>JDK-8 -&gt; <a href="https://www.oracle.com/cn/java/technologies/downloads/#java17">JDK-17</a></p><p>Maven-3.6.3 -&gt; <a href="https://maven.apache.org/download.cgi">Maven-3.8</a></p><p><a href="https://docs.springframework.org.cn/spring-cli/reference/installation.html">spring-cli</a>：还不知道怎么用</p></blockquote></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-07-15]-Y7000P2022-新增软件</summary><div class="toggle-content"><blockquote><p>新增<a href="https://ollama.com/">ollama</a>，还是想玩儿一下语言模型，想开发一个语言模型应用玩玩儿。</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-07-05]-Y7000P2022-新增软件</summary><div class="toggle-content"><blockquote><p>新装远程连接工具软件<code>1Remote</code>，微软应用商店直接下载的，目前感觉连接Windows电脑不如Windows自带的远程连接。</p><p>电脑新装软件的路径改成了E盘。</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-06-27]-Y7000P2022-更换网卡</summary><div class="toggle-content"><blockquote><p>网卡从<code>AX211</code>升级到&#96;AX411，速度嘎嘎快。（PS：她买的，嘿嘿~）</p><p>还有Steam地平线4打折，花了60多买了个终极版，血赚！！！下载了有空玩儿！</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-06-06]-Y7000P2022-增加msi小飞机</summary><div class="toggle-content"><blockquote><p>最近朋友换了个360Hz的屏幕，主机不能稳帧，在200~400之间跳跃，不知道怎么办，我说搞个监控软件看下是什么东西出现问题了，然后自己也想下个玩玩儿。</p><p>到<a href="https://www.msi.com/Landing/afterburner/graphics-cards">msi afterburner下载页</a>下载即可。</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-06-06]-Y7000P2022-更新一些软件</summary><div class="toggle-content"><p><strong>git</strong></p><blockquote><p>当初Git是绿色安装的（解压再加个环境变量）。</p><p>现在更新只需要重新到<a href="https://git-scm.com/download/win">Git下载页</a>下载<code>64-bit Git for Windows Portable</code>版本的压缩包（双击直接解压）。</p><p>然后覆盖之前的Git文件夹就行了，可以CMD输入个<code>git -v</code>看下是否更新，目前Windows最新版本是<code>2.45.2.windows.1</code>。</p></blockquote><p><strong>VMware Workstation Pro</strong></p><blockquote><p>VMware Workstation Pro 17向个人用户免费开放了，不用再找激活码了，升级一下。</p><p>到<a href="https://support.broadcom.com/group/ecx/productdownloads?subfamily=VMware+Workstation+Pro">BROADCOM ProductDownloads</a>下载个人版本就可以了。</p><p>注册时千万千万不要用中文，目前网站好像还不支持中文编码。</p></blockquote><p><strong>SwitchHosts</strong></p><blockquote><p>一个管理、切换多个hosts方案的工具，并且一个免费开源，对开发人员来说简直不要太好用。</p><p><a href="https://switchhosts.vercel.app/zh">SwitchHosts官网</a></p><p><a href="https://github.com/oldj/SwitchHosts/releases">下载软件包</a></p><p>Windows可以将快捷方式设置为管理员运行（右键 -&gt; 属性 -&gt; 快捷方式 -&gt; 高级 -&gt; 用管理员身份运行），下次直接双击快捷键就可以了，不用每次右键管理员运行。</p></blockquote><p><strong>显卡驱动</strong></p><blockquote><p>最近Chrome全屏老是闪屏，估计是显卡驱动的问题，把图形加速关了就行了，但是网页帧率又不太稳定，更新显卡驱动到最新版本<code>GeForce Game Ready:555.99</code>试试。</p></blockquote></div></details><!-- flag of hidden posts -->]]></content>
      
      
      <categories>
          
          <category> 日志 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 个人电脑 </tag>
            
            <tag> 记录 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>尚硅谷Linux学习笔记（二）</title>
      <link href="/posts/5bf45d2d/"/>
      <url>/posts/5bf45d2d/</url>
      
        <content type="html"><![CDATA[<h2 id="SSH"><a href="#SSH" class="headerlink" title="SSH"></a>SSH</h2><p>直接使用Windows<code>CMD</code>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 远程连接</span></span><br><span class="line">ssh root@CentOS-7-2</span><br><span class="line"><span class="comment"># 文件传输</span></span><br><span class="line">scp localfile.txt root@CentOS-7-2:/root/document/</span><br></pre></td></tr></table></figure><p>也可以使用第三方工具：<a href="https://www.xshell.com/zh/free-for-home-school/">XSHELL与XFTP</a>。</p><h2 id="系统管理"><a href="#系统管理" class="headerlink" title="系统管理"></a>系统管理</h2><h3 id="进程与服务"><a href="#进程与服务" class="headerlink" title="进程与服务"></a>进程与服务</h3><p>进程（Process）和服务（Service）是操作系统中的两个概念，它们在计算机系统中扮演着不同的角色。</p><p>进程：</p><ol><li>进程是操作系统进行资源分配和调度的一个独立单位。</li><li>它是程序执行的一个实例，每个进程都拥有独立的地址空间、执行堆栈、以及各种用于跟踪执行的辅助数据。</li><li>进程可以被创建、终止、挂起、恢复等，并且进程间可以通过进程间通信机制（如管道、信号、套接字等）进行交互。</li><li>进程通常在用户空间中运行，并且是临时的，它们的生命周期通常与它们所运行的程序的执行周期相同。</li></ol><p>服务：</p><ol><li>服务通常是指系统服务，它是一种长期运行的进程，通常在系统启动时启动，并一直运行到系统关闭。</li><li>服务进程通常在后台运行，不与用户直接交互，但它们提供系统功能或应用程序的服务，如数据库服务、网络服务、打印服务等。</li><li>服务可以通过服务管理工具（如Windows的services.msc或Linux的systemctl）进行管理，可以启动、停止、重启或设置为随系统自动启动。</li><li>服务通常在系统权限下运行，可以访问系统资源，执行一些需要较高权限的操作。</li></ol><h4 id="服务管理"><a href="#服务管理" class="headerlink" title="服务管理"></a>服务管理</h4><p><strong>基本语法</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">service &lt;服务名&gt; start|stop|restart|status</span><br><span class="line"><span class="comment"># CentOS7</span></span><br><span class="line">systemctl start|stop|restart|status|<span class="built_in">enable</span>|<span class="built_in">disable</span> &lt;服务名&gt;</span><br></pre></td></tr></table></figure><p><strong>查看服务</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CentOS6</span></span><br><span class="line"><span class="built_in">ls</span> -al /etc/init.d/</span><br><span class="line"><span class="comment"># CentOS7</span></span><br><span class="line"><span class="built_in">ls</span> -al /usr/lib/systemd/system/</span><br><span class="line"><span class="comment"># 查看服务开机启动状态</span></span><br><span class="line">systemctl list-unit-files</span><br></pre></td></tr></table></figure><p><strong>网络管理</strong></p><p>存在两个网络服务<code>network</code>与<code>NetworkManager</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 关闭network</span></span><br><span class="line">systemctl stop network</span><br><span class="line"><span class="comment"># 重启NetworkManager</span></span><br><span class="line">systemctl retstart NetworkManager</span><br></pre></td></tr></table></figure><h3 id="系统运行级别"><a href="#系统运行级别" class="headerlink" title="系统运行级别"></a>系统运行级别</h3><p>Linux系统的运行级别（Run Levels）指的是系统启动时运行的不同模式，每种模式都定义了不同的服务和进程的启动状态。不同的Linux发行版可能会有不同的运行级别设计，但大多数基于System V的Linux系统通常遵循以下运行级别：</p><ol><li><strong>运行级别0</strong>：系统停机状态，系统默认运行级别不能设为0，否则不能正常启动。</li><li><strong>运行级别1</strong>：单用户工作状态，root权限，用于系统维护，禁止远程登录。（PS：相当于Windows安全模式）</li><li><strong>运行级别2</strong>：多用户状态（没有NFS），不支持NFS，但系统支持的其它所有服务都能被用来进行系统维护。</li><li><strong>运行级别3</strong>：完全的多用户状态（有NFS），登陆后进入控制台命令行模式。</li><li><strong>运行级别4</strong>：系统未使用，保留一般不用。</li><li><strong>运行级别5</strong>：X11控制台，登陆后进入图形GUI模式。</li><li><strong>运行级别6</strong>：系统正常关闭并重启，但默认运行级别不能设为6，否则不能正常启动。</li></ol><p>除了这些标准的运行级别，某些Linux发行版（如Red Hat和CentOS）还有特殊的运行级别：</p><ul><li><strong>运行级别S</strong>：单用户模式，用于系统修复。</li><li><strong>运行级别emergency</strong>：紧急模式，用于系统修复，与单用户模式相似，但不会启动网络和交换分区。</li></ul><p>值得注意的是，随着Systemd的普及，传统的运行级别概念已经被服务单元（Units）和目标（Targets）所取代，Systemd的Targets相当于以前的运行级别，但提供了更灵活的服务管理方式。在Systemd系统中，你可以通过<code>systemctl</code>命令来管理这些targets。</p><p>例如，要查看当前系统运行的目标，可以使用命令<code>systemctl get-default</code>；要设置启动目标，可以使用命令<code>systemctl set-default TARGET.target</code>，其中<code>TARGET.target</code>是你想要设置的目标，如<code>graphical.target</code>对应运行级别5，<code>multi-user.target</code>对应运行级别3。</p><h4 id="CentOS7"><a href="#CentOS7" class="headerlink" title="CentOS7"></a>CentOS7</h4><p>CentOS7 的运行级别简化为:</p><ol><li>multi-user.target 等价于原运行级别3（多用户有网，无图形界面）</li><li>graphical.target 等价于原运行级别5（多用户有网，有图形界面）</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看当前运行级别</span></span><br><span class="line">systemctl get-default</span><br><span class="line"><span class="comment"># 修改当前运行级别</span></span><br><span class="line">systemctl set-default multi-user.target|graphical.target</span><br></pre></td></tr></table></figure><p><strong>查看服务自启动</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CentOS6</span></span><br><span class="line">chkconfig --list</span><br><span class="line"><span class="comment"># 关闭所有运行级别开机自启动</span></span><br><span class="line">chkconfig &lt;服务名&gt; off</span><br><span class="line"><span class="comment"># 开启所有运行级别开机自启动</span></span><br><span class="line">chkconfig &lt;服务名&gt; on</span><br><span class="line"><span class="comment"># 关闭指定运行级别开机自启动</span></span><br><span class="line">chkconfig --level &lt;级别数字&gt; &lt;服务名&gt; off</span><br><span class="line"><span class="comment"># 开启指定运行级别开机自启动</span></span><br><span class="line">chkconfig --level &lt;级别数字&gt; &lt;服务名&gt; on</span><br></pre></td></tr></table></figure><h3 id="防火墙"><a href="#防火墙" class="headerlink" title="防火墙"></a>防火墙</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看防火墙状态</span></span><br><span class="line">systemctl status firewalld</span><br><span class="line"><span class="comment"># 临时关闭防火墙</span></span><br><span class="line">systemctl stop firewalld</span><br><span class="line"><span class="comment"># 查看防火墙开机启动状态</span></span><br><span class="line">systemctl <span class="built_in">enable</span> firewalld.service</span><br><span class="line"><span class="comment"># 设置开机时关闭防火墙</span></span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld.service</span><br></pre></td></tr></table></figure><h3 id="关机重启"><a href="#关机重启" class="headerlink" title="关机重启"></a>关机重启</h3><ol><li><p>sync （功能描述：将数据由内存同步到硬盘中）</p></li><li><p>halt （功能描述：停机，关闭系统，但不断电）</p></li><li><p>poweroff （功能描述：关机，断电）</p></li><li><p>reboot （功能描述：就是重启，等同于shutdown -r now）</p></li><li><p>shutdown [选项] 时间</p><table><thead><tr><th>选项</th><th>功能</th></tr></thead><tbody><tr><td>-H</td><td>相当于–halt，停机</td></tr><tr><td>-r</td><td>-r&#x3D;reboot 重启</td></tr></tbody></table><table><thead><tr><th>参数</th><th>功能</th></tr></thead><tbody><tr><td>now</td><td>立刻关机</td></tr><tr><td>时间</td><td>等待多久后关机（时间单位是分钟）。</td></tr></tbody></table></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 默认一分钟关机</span></span><br><span class="line">shutdown</span><br><span class="line"><span class="comment"># 取消关机</span></span><br><span class="line">shutdown -c</span><br><span class="line"><span class="comment"># 指定多少分钟后关机</span></span><br><span class="line">shutdown &lt;分钟数字&gt;</span><br><span class="line"><span class="comment"># 指定15:30关机</span></span><br><span class="line">shutdown 15:30</span><br><span class="line"><span class="comment"># 立刻关机</span></span><br><span class="line">shutdown -h now</span><br><span class="line"><span class="comment"># 立刻重启</span></span><br><span class="line">shutdown -r now</span><br></pre></td></tr></table></figure><h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><table><thead><tr><th>常用快捷键</th><th>功能</th></tr></thead><tbody><tr><td>ctrl + c</td><td>停止进程</td></tr><tr><td>ctrl + l</td><td>清屏，等同于clear；彻底清屏是：reset</td></tr><tr><td>tab 键</td><td>提示(更重要的是可以防止敲错)</td></tr><tr><td>上下键</td><td>查找执行过的命令</td></tr></tbody></table><h3 id="帮助命令"><a href="#帮助命令" class="headerlink" title="帮助命令"></a>帮助命令</h3><ol><li><p><strong>man</strong></p><p>manual（帮助手册）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基本语法</span></span><br><span class="line">man &lt;命令或配置文件&gt;</span><br><span class="line"><span class="comment"># 查看内置命令</span></span><br><span class="line">man -f &lt;内置命令&gt;</span><br><span class="line"><span class="comment"># 查看指定章节的命令说明</span></span><br><span class="line">man &lt;章节&gt; &lt;命令&gt;</span><br></pre></td></tr></table></figure></li><li><p><strong>help</strong></p><p>一部分基础功能的系统命令是直接内嵌在shell 中的，系统加载启动之后会随着shell一起加载，常驻系统内存中。</p><p>这部分命令被称为“内置（built-in）命令”；相应的其它命令被称为“外部命令”，可以使用<code>type &lt;命令&gt;</code>查看命令是否为内置命令。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基本语法</span></span><br><span class="line"><span class="built_in">help</span> &lt;命令&gt;</span><br><span class="line"><span class="comment"># 外部命令使用help</span></span><br><span class="line">&lt;命令&gt; --<span class="built_in">help</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="文件目录"><a href="#文件目录" class="headerlink" title="文件目录"></a>文件目录</h3><ol><li><p><strong>pwd</strong>：（print working directory）打印工作目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 显示当前工作目录的绝对路径</span></span><br><span class="line"><span class="built_in">pwd</span></span><br></pre></td></tr></table></figure></li><li><p><strong>cd</strong>：（change directory）切换工作目录</p><table><thead><tr><th>参数</th><th>功能</th></tr></thead><tbody><tr><td>cd 路径</td><td>切换到指定路径的目录</td></tr><tr><td>cd ~</td><td>回到自己的家目录</td></tr><tr><td>cd -</td><td>回到上一次所在目录</td></tr><tr><td>cd ..</td><td>回到当前目录的上一级目录</td></tr><tr><td>cd -P</td><td>跳转到实际物理路径，而非快捷方式或符号链接路径</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 切换到上级目录</span></span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line"><span class="comment"># 切换到上次所在目录</span></span><br><span class="line"><span class="built_in">cd</span> -</span><br></pre></td></tr></table></figure></li><li><p><strong>ls</strong>：（list）列出目录内容</p><table><thead><tr><th>选项</th><th>功能</th></tr></thead><tbody><tr><td>-a</td><td>全部的文件，连同隐藏档(开头为.的文件)一起列出来(常用)</td></tr><tr><td>-l</td><td>长数据串列出，包含文件的属性与权限等等数据；(常用)等价于“ll”<br />每行列出的信息依次是： 文件类型与权限 链接数 文件属主 文件属组 文件大小用byte来表示 建立或最近修改的时间 名字</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基本使用</span></span><br><span class="line"><span class="built_in">ls</span> [选项] [目录或是文件]</span><br><span class="line"><span class="comment"># 查看当前目录下的文件</span></span><br><span class="line"><span class="built_in">ls</span></span><br><span class="line"><span class="comment"># 查看当前目录下所有文件（包含隐藏文件）</span></span><br><span class="line"><span class="built_in">ls</span> -a</span><br></pre></td></tr></table></figure></li><li><p><strong>mkdir</strong>：（Make directory）创建目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基本语法</span></span><br><span class="line"><span class="built_in">mkdir</span> [选项] &lt;要创建的目录&gt;</span><br></pre></td></tr></table></figure><p>-p：创建多层目录</p></li><li><p><strong>rmdir</strong>：（Remove directory）移除目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rmdir</span> &lt;要删除的空目录&gt;</span><br></pre></td></tr></table></figure></li><li><p><strong>touch</strong>：创建空文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">touch</span> &lt;文件名称&gt;</span><br></pre></td></tr></table></figure></li><li><p><strong>cp</strong>：（copy）复制文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基本使用</span></span><br><span class="line"><span class="built_in">cp</span> [选项] &lt;源文件&gt; &lt;目标文件&gt;</span><br><span class="line"><span class="comment"># 跳过确认覆盖文件提示（\是直接使用原生命令，cp是cp -i的别名）</span></span><br><span class="line">\<span class="built_in">cp</span> [选项] &lt;源文件&gt; &lt;目标文件&gt;</span><br></pre></td></tr></table></figure><p>选项：</p><ul><li>-r 递归复制整个文件夹</li></ul><p>参数：</p><ul><li>source 源文件</li><li>dest 目标文件</li></ul></li><li><p><strong>rm</strong>：（remove）删除文件或文件夹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 基本使用</span></span><br><span class="line"><span class="built_in">rm</span> [选项] &lt;要删除的文件&gt;</span><br></pre></td></tr></table></figure><p>选项：</p><ul><li>-r 递归删除目录中所有内容</li><li>-f 强制执行删除操作，而不提示用于进行确认。</li><li>-v 显示指令的详细执行过程</li></ul></li><li><p><strong>mv</strong>：（move）移动文件与目录或重命名</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 重命名</span></span><br><span class="line"><span class="built_in">mv</span> oldNameFile newNameFile</span><br><span class="line"><span class="comment"># 移动文件</span></span><br><span class="line"><span class="built_in">mv</span> /temp/movefile /targetFolder</span><br></pre></td></tr></table></figure></li></ol><!-- flag of hidden posts -->]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> 尚硅谷 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>尚硅谷Linux学习笔记（一）</title>
      <link href="/posts/6be2b1f5/"/>
      <url>/posts/6be2b1f5/</url>
      
        <content type="html"><![CDATA[<h2 id="文件系统"><a href="#文件系统" class="headerlink" title="文件系统"></a>文件系统</h2><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">/</span><br><span class="line">├── bin (Binary)            <span class="params">#</span> 基本用户命令的二进制文件</span><br><span class="line">├── boot (Boot)             <span class="params">#</span> 引导加载程序和内核文件</span><br><span class="line">│   ├── grub/              <span class="params">#</span> GRand Unified Bootloader (GRUB) 配置</span><br><span class="line">│   └── vmlinuz            <span class="params">#</span> Linux kernel image (VMLINUX)</span><br><span class="line">├── dev (Devices)           <span class="params">#</span> 设备文件</span><br><span class="line">├── etc (Et Cetera)         <span class="params">#</span> 系统配置文件</span><br><span class="line">│   ├── cron.d/            <span class="params">#</span> CRON job schedules</span><br><span class="line">│   ├── cups/              <span class="params">#</span> Common Unix Printing System (CUPS) 配置文件</span><br><span class="line">│   ├── default/           <span class="params">#</span> 默认配置文件</span><br><span class="line">│   ├── init.d/            <span class="params">#</span> System initialization scripts</span><br><span class="line">│   ├── network/           <span class="params">#</span> 网络配置文件</span><br><span class="line">│   ├── passwd             <span class="params">#</span> Password file</span><br><span class="line">│   ├── rc.d/              <span class="params">#</span> Run Command scripts at boot and shutdown</span><br><span class="line">│   ├── resolv.conf        <span class="params">#</span> Resolver configuration file</span><br><span class="line">│   └── ssl/               <span class="params">#</span> Secure Sockets Layer (SSL) certificates and keys</span><br><span class="line">├── home (Home)             <span class="params">#</span> 用户主目录</span><br><span class="line">│   ├── user1/             <span class="params">#</span> User1&#x27;s home directory</span><br><span class="line">│   └── user2/             <span class="params">#</span> User2&#x27;s home directory</span><br><span class="line">├── lib (Library)           <span class="params">#</span> 系统库文件</span><br><span class="line">├── lib64 (Library 64-bit)  <span class="params">#</span> 64位系统库文件</span><br><span class="line">├── media (Media)           <span class="params">#</span> 可移动媒体挂载点</span><br><span class="line">├── mnt (Mount)             <span class="params">#</span> 临时文件系统挂载点</span><br><span class="line">├── opt (Optional)          <span class="params">#</span> 第三方软件包安装目录</span><br><span class="line">├── proc (Processes)        <span class="params">#</span> 虚拟文件系统，包含系统进程和内核信息</span><br><span class="line">├── root (Root)             <span class="params">#</span> root用户的主目录</span><br><span class="line">├── run (Run)               <span class="params">#</span> 运行时变量数据</span><br><span class="line">├── sbin (System Binary)    <span class="params">#</span> 系统管理员命令的二进制文件</span><br><span class="line">├── srv (Service)           <span class="params">#</span> 服务数据</span><br><span class="line">├── sys (System)            <span class="params">#</span> 虚拟文件系统，提供硬件和内核信息的接口</span><br><span class="line">├── tmp (Temporary)         <span class="params">#</span> 临时文件</span><br><span class="line">├── usr (User Resources)    <span class="params">#</span> 用户程序和文件</span><br><span class="line">│   ├── bin/               <span class="params">#</span> 大部分用户命令的二进制文件</span><br><span class="line">│   ├── include/           <span class="params">#</span> Standard include files</span><br><span class="line">│   ├── lib/               <span class="params">#</span> 程序库文件</span><br><span class="line">│   ├── local/             <span class="params">#</span> Local hierarchy</span><br><span class="line">│   │   ├── bin/           <span class="params">#</span> Locally installed user commands</span><br><span class="line">│   │   ├── etc/           <span class="params">#</span> Local configuration files</span><br><span class="line">│   │   ├── games/         <span class="params">#</span> Local games</span><br><span class="line">│   │   ├── include/       <span class="params">#</span> Local development header files</span><br><span class="line">│   │   ├── lib/           <span class="params">#</span> Local program libraries</span><br><span class="line">│   │   └── sbin/          <span class="params">#</span> Local system administration commands</span><br><span class="line">│   ├── sbin/              <span class="params">#</span> Non-essential system binaries</span><br><span class="line">│   ├── share/             <span class="params">#</span> Architecture-independent data</span><br><span class="line">│   │   ├── doc/           <span class="params">#</span> System documentation</span><br><span class="line">│   │   ├── man/           <span class="params">#</span> Manual pages</span><br><span class="line">│   │   └── locale/        <span class="params">#</span> Localization and internationalization data</span><br><span class="line">│   └── src/               <span class="params">#</span> Source code</span><br><span class="line">└── var (Variable)          <span class="params">#</span> 经常变化的文件</span><br><span class="line">    ├── cache/             <span class="params">#</span> Application cache data</span><br><span class="line">    ├── lib/               <span class="params">#</span> State information</span><br><span class="line">    ├── local/             <span class="params">#</span> Local data</span><br><span class="line">    ├── lock/              <span class="params">#</span> File locking mechanism</span><br><span class="line">    ├── log/               <span class="params">#</span> Log files</span><br><span class="line">    ├── mail/              <span class="params">#</span> 电子邮件</span><br><span class="line">    ├── opt/               <span class="params">#</span> Third-party application data</span><br><span class="line">    ├── run/               <span class="params">#</span> Run-time variable data</span><br><span class="line">    ├── spool/             <span class="params">#</span> Print queues and other spooling data</span><br><span class="line">    └── tmp/               <span class="params">#</span> Temporary files (secure version of /tmp)</span><br></pre></td></tr></table></figure><h2 id="文本编辑器"><a href="#文本编辑器" class="headerlink" title="文本编辑器"></a>文本编辑器</h2><h3 id="vi"><a href="#vi" class="headerlink" title="vi"></a>vi</h3><p><code>vi</code> 是 Vim 的前身，它是 Visual Interface 的缩写，由 Bill Joy 在 1976 年开发，用于 Unix 系统。<code>vi</code> 是一个基于文本的屏幕编辑器，它包含了 Vim 的大多数基本功能，但相比之下，<code>vi</code> 的功能较为简单，没有 Vim 那么多的模式和扩展功能。</p><table><thead><tr><th align="left">模式</th><th align="left">快捷键</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left">普通模式</td><td align="left"></td><td align="left">启动后的默认模式。可以执行命令，如移动光标、删除文本等。</td></tr><tr><td align="left">插入模式</td><td align="left"><code>i</code></td><td align="left">进入插入模式，可以输入文本。</td></tr><tr><td align="left">末行模式</td><td align="left"><code>:</code></td><td align="left">进入末行模式，可以执行保存、退出、搜索替换等命令。</td></tr></tbody></table><h3 id="vim"><a href="#vim" class="headerlink" title="vim"></a>vim</h3><table><thead><tr><th align="left">模式</th><th align="left">快捷键</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left">普通模式</td><td align="left"></td><td align="left">启动后的默认模式。可以执行命令，如移动光标、删除文本等。</td></tr><tr><td align="left">插入模式</td><td align="left"><code>i</code></td><td align="left">进入插入模式，可以输入文本。</td></tr><tr><td align="left">可视模式</td><td align="left"><code>v</code> &#x2F; <code>V</code> &#x2F; <code>Ctrl</code>+<code>v</code></td><td align="left">进入可视模式，可以选择文本。<code>v</code> 为字符可视模式，<code>V</code> 为行可视模式，<code>Ctrl</code>+<code>v</code> 为块可视模式。</td></tr><tr><td align="left">选择模式</td><td align="left"><code>Shift</code>+<code>v</code> &#x2F; <code>Shift</code>+<code>V</code></td><td align="left">类似于可视模式，但行为略有不同。</td></tr><tr><td align="left">命令模式</td><td align="left"><code>:</code></td><td align="left">进入命令模式，可以执行保存、退出、搜索替换等命令。</td></tr><tr><td align="left">替换模式</td><td align="left"><code>R</code></td><td align="left">进入替换模式，输入的每个字符都会替换光标所在的字符。</td></tr><tr><td align="left">可视块模式</td><td align="left"><code>Ctrl</code>+<code>v</code></td><td align="left">以块的形式选择文本。</td></tr><tr><td align="left">操作符等待模式</td><td align="left"></td><td align="left">短暂的中间模式，用于执行操作符（如 <code>d</code>、<code>y</code>、<code>c</code> 等）后的命令。</td></tr><tr><td align="left">插入普通模式</td><td align="left"><code>Ctrl</code>+<code>o</code></td><td align="left">在插入模式下临时执行一个正常模式命令。</td></tr><tr><td align="left">终端模式</td><td align="left"><code>Ctrl</code>+<code>z</code></td><td align="left">在 Vim 内部打开一个终端。</td></tr><tr><td align="left">Ex 模式</td><td align="left"><code>Q</code></td><td align="left">提供更多类似于 Vim 的前身 Ex 编辑器的命令。</td></tr></tbody></table><h3 id="普通模式"><a href="#普通模式" class="headerlink" title="普通模式"></a>普通模式</h3><table><thead><tr><th>语法</th><th>功能描述</th></tr></thead><tbody><tr><td>yy</td><td>复制光标当前一行</td></tr><tr><td>数字yy</td><td>复制从当前行开始的指定数量的行</td></tr><tr><td>p</td><td>粘贴复制的行或文本</td></tr><tr><td>u</td><td>撤销上一步操作</td></tr><tr><td>dd</td><td>删除光标当前行</td></tr><tr><td>数字dd</td><td>删除从当前行开始的指定数量的行</td></tr><tr><td>x</td><td>删除光标所在位置的字符</td></tr><tr><td>X</td><td>删除光标前一个位置的字符</td></tr><tr><td>yw</td><td>复制一个词</td></tr><tr><td>dw</td><td>删除一个词</td></tr><tr><td><code>^</code></td><td>移动到行首第一个非空白字符</td></tr><tr><td><code>$</code></td><td>移动到行尾</td></tr><tr><td>gg</td><td>移动到文件第一行</td></tr><tr><td>G</td><td>移动到文件最后一行</td></tr><tr><td>数字G</td><td>移动到指定行号</td></tr></tbody></table><h3 id="编辑模式（插入）"><a href="#编辑模式（插入）" class="headerlink" title="编辑模式（插入）"></a>编辑模式（插入）</h3><p>从普通模式到编辑模式</p><table><thead><tr><th>按键</th><th>功能描述</th></tr></thead><tbody><tr><td><code>i</code></td><td>在当前光标前进入插入模式</td></tr><tr><td><code>a</code></td><td>在当前光标后进入插入模式</td></tr><tr><td><code>o</code></td><td>在当前光标行的下一行进入插入模式</td></tr><tr><td><code>I</code></td><td>跳到光标所在行最前进入插入模式</td></tr><tr><td><code>A</code></td><td>跳到光标所在行最后进入插入模式</td></tr><tr><td><code>O</code></td><td>在当前光标行的上一行进入插入模式</td></tr></tbody></table><h3 id="命令模式"><a href="#命令模式" class="headerlink" title="命令模式"></a>命令模式</h3><table><thead><tr><th>命令</th><th>功能描述</th></tr></thead><tbody><tr><td><code>:w</code></td><td>保存当前文件</td></tr><tr><td><code>:q</code></td><td>退出 Vim 编辑器</td></tr><tr><td><code>:!</code></td><td>强制执行外壳命令</td></tr><tr><td><code>:/要查找的词</code></td><td>查找光标之后的第一个“要查找的词”</td></tr><tr><td><code>n</code></td><td>查找下一个匹配项</td></tr><tr><td><code>N</code></td><td>查找上一个匹配项</td></tr><tr><td><code>:noh</code></td><td>取消搜索的高亮显示</td></tr><tr><td><code>:set nu</code></td><td>显示行号</td></tr><tr><td><code>:set nonu</code></td><td>关闭行号显示</td></tr><tr><td><code>:%s/old/new/g</code></td><td>在整个文件中替换“old”为“new”，全局替换</td></tr></tbody></table><h2 id="VMware"><a href="#VMware" class="headerlink" title="VMware"></a>VMware</h2><h3 id="网络模式"><a href="#网络模式" class="headerlink" title="网络模式"></a>网络模式</h3><p>VMware提供了多种网络模式，以适应不同的虚拟机网络配置需求。以下是三种常见的VMware网络模式：</p><ol><li>桥接模式（Bridged Networking）：<ul><li>在桥接模式下，虚拟机的网络接口直接连接到主机的外部网络接口，就像主机上的另一台物理机器一样。</li><li>虚拟机将获得一个与主机网络在同一段IP地址范围内的独立IP地址。</li><li>这种模式下，虚拟机可以与其他网络上的设备进行通信，就像主机一样。</li></ul></li><li>NAT模式（Network Address Translation）：<ul><li>NAT模式允许虚拟机共享主机系统的IP地址访问外部网络。</li><li>虚拟机在内部网络中有一个独立的IP地址，当访问外部网络时，VMware会将其内部IP地址转换为外部网络的IP地址。</li><li>这种模式下，虚拟机可以访问外部网络，但外部网络不能直接访问虚拟机。</li></ul></li><li>主机模式（Host-Only Networking）：<ul><li>主机模式创建一个仅限于主机和其上虚拟机之间通信的私有网络。</li><li>虚拟机无法访问外部网络，但可以与主机以及其他在同一主机模式下配置的虚拟机进行通信。</li><li>这种模式适用于需要在隔离环境中测试或运行应用程序的情况。</li></ul></li></ol><h2 id="配置命令"><a href="#配置命令" class="headerlink" title="配置命令"></a>配置命令</h2><h3 id="固定IP"><a href="#固定IP" class="headerlink" title="固定IP"></a>固定IP</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看网络</span></span><br><span class="line">ifconfig</span><br><span class="line"><span class="comment"># 编辑网络配置</span></span><br><span class="line">vim /etc/sysconfig/network-scripts/ifcfg-ens33</span><br></pre></td></tr></table></figure><p>原内容：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">YPE</span>=<span class="string">&quot;Ethernet&quot;</span></span><br><span class="line"><span class="attr">PROXY_METHOD</span>=<span class="string">&quot;none&quot;</span></span><br><span class="line"><span class="attr">BROWSER_ONLY</span>=<span class="string">&quot;no&quot;</span></span><br><span class="line"><span class="attr">BOOTPROTO</span>=<span class="string">&quot;dhcp&quot;</span></span><br><span class="line"><span class="attr">DEFROUTE</span>=<span class="string">&quot;yes&quot;</span></span><br><span class="line"><span class="attr">IPV4_FAILURE_FATAL</span>=<span class="string">&quot;no&quot;</span></span><br><span class="line"><span class="attr">IPV6INIT</span>=<span class="string">&quot;yes&quot;</span></span><br><span class="line"><span class="attr">IPV6_AUTOCONF</span>=<span class="string">&quot;yes&quot;</span></span><br><span class="line"><span class="attr">IPV6_DEFROUTE</span>=<span class="string">&quot;yes&quot;</span></span><br><span class="line"><span class="attr">IPV6_FAILURE_FATAL</span>=<span class="string">&quot;no&quot;</span></span><br><span class="line"><span class="attr">IPV6_ADDR_GEN_MODE</span>=<span class="string">&quot;stable-privacy&quot;</span></span><br><span class="line"><span class="attr">NAME</span>=<span class="string">&quot;ens33&quot;</span></span><br><span class="line"><span class="attr">UUID</span>=<span class="string">&quot;3e5e7750-8980-484e-9420-1d7d2d14d600&quot;</span></span><br><span class="line"><span class="attr">DEVICE</span>=<span class="string">&quot;ens33&quot;</span></span><br><span class="line"><span class="attr">ONBOOT</span>=<span class="string">&quot;yes&quot;</span></span><br></pre></td></tr></table></figure><p>修改后：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">TYPE</span>=<span class="string">&quot;Ethernet&quot;</span></span><br><span class="line"><span class="attr">PROXY_METHOD</span>=<span class="string">&quot;none&quot;</span></span><br><span class="line"><span class="attr">BROWSER_ONLY</span>=<span class="string">&quot;no&quot;</span></span><br><span class="line"><span class="comment"># IP分配规则</span></span><br><span class="line"><span class="attr">BOOTPROTO</span>=<span class="string">&quot;static&quot;</span></span><br><span class="line"><span class="attr">DEFROUTE</span>=<span class="string">&quot;yes&quot;</span></span><br><span class="line"><span class="attr">IPV4_FAILURE_FATAL</span>=<span class="string">&quot;no&quot;</span></span><br><span class="line"><span class="attr">IPV6INIT</span>=<span class="string">&quot;yes&quot;</span></span><br><span class="line"><span class="attr">IPV6_AUTOCONF</span>=<span class="string">&quot;yes&quot;</span></span><br><span class="line"><span class="attr">IPV6_DEFROUTE</span>=<span class="string">&quot;yes&quot;</span></span><br><span class="line"><span class="attr">IPV6_FAILURE_FATAL</span>=<span class="string">&quot;no&quot;</span></span><br><span class="line"><span class="attr">IPV6_ADDR_GEN_MODE</span>=<span class="string">&quot;stable-privacy&quot;</span></span><br><span class="line"><span class="attr">NAME</span>=<span class="string">&quot;ens33&quot;</span></span><br><span class="line"><span class="attr">UUID</span>=<span class="string">&quot;3e5e7750-8980-484e-9420-1d7d2d14d600&quot;</span></span><br><span class="line"><span class="attr">DEVICE</span>=<span class="string">&quot;ens33&quot;</span></span><br><span class="line"><span class="attr">ONBOOT</span>=<span class="string">&quot;yes&quot;</span></span><br><span class="line"><span class="comment"># IP地址</span></span><br><span class="line"><span class="attr">IPADDR</span>=<span class="number">192.168</span>.<span class="number">114.142</span></span><br><span class="line"><span class="comment"># 网关</span></span><br><span class="line"><span class="attr">GATEWAY</span>=<span class="number">192.168</span>.<span class="number">114.2</span></span><br><span class="line"><span class="comment"># 域名解析器</span></span><br><span class="line"><span class="attr">DNS1</span>=<span class="number">192.168</span>.<span class="number">114.2</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 重启网络服务</span></span><br><span class="line">service network restart</span><br></pre></td></tr></table></figure><h3 id="主机名"><a href="#主机名" class="headerlink" title="主机名"></a>主机名</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看主机名</span></span><br><span class="line">hostname</span><br><span class="line"><span class="comment"># 编辑主机名（需要重启服务器）</span></span><br><span class="line">vim /etc/hostname</span><br><span class="line"><span class="comment"># 编辑主机名（直接更改）</span></span><br><span class="line">hostnamectl set-hostname &lt;主机名&gt;</span><br><span class="line"><span class="comment"># 查看当前的主机名和相关的系统信息</span></span><br><span class="line">hostnamectl</span><br></pre></td></tr></table></figure><h3 id="hosts"><a href="#hosts" class="headerlink" title="hosts"></a>hosts</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 编辑hosts文件</span></span><br><span class="line">vim /etc/hosts</span><br></pre></td></tr></table></figure><p>原内容：</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4</span><br><span class="line">::1         localhost localhost.localdomain localhost6 localhost6.localdomain6</span><br></pre></td></tr></table></figure><p>修改后（<strong>IP可以对应域名或主机名</strong>）：</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4</span><br><span class="line">::1         localhost localhost.localdomain localhost6 localhost6.localdomain6</span><br><span class="line"></span><br><span class="line">192.168.114.142 CentOS-7-2</span><br><span class="line">192.168.114.143 CentOS-7-3</span><br><span class="line">192.168.114.144 CentOS-7-4</span><br><span class="line">192.168.114.145 CentOS-7-5</span><br><span class="line">192.168.114.146 CentOS-7-6</span><br><span class="line">192.168.114.147 CentOS-7-7</span><br></pre></td></tr></table></figure><!-- flag of hidden posts -->]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> 尚硅谷 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>谷粒商城学习笔记（四）</title>
      <link href="/posts/4697a131/"/>
      <url>/posts/4697a131/</url>
      
        <content type="html"><![CDATA[<h2 id="Elasticsearch"><a href="#Elasticsearch" class="headerlink" title="Elasticsearch"></a>Elasticsearch</h2><p><a href="https://www.elastic.co/cn/elasticsearch">Elasticsearch中文官网</a></p><p><a href="https://hub.docker.com/_/kibana">Kibana-可视化工具</a></p><table><thead><tr><th>名词</th><th>解释</th></tr></thead><tbody><tr><td>节点（Node）</td><td>一个运行中的Elasticsearch实例称为一个节点。节点可以通过集群名称加入到一个集群中。</td></tr><tr><td>集群（Cluster）</td><td>集群是由一个或多个节点组成的集合，它们共同承载整个数据集并提供联合索引和搜索功能。每个集群有一个唯一的名称。</td></tr><tr><td>索引（Index）</td><td>索引是具有相似特征的文档集合。索引的名称必须是全部小写的，并且一个集群中可以创建多个索引。</td></tr><tr><td>类型（Type）</td><td>在Elasticsearch 7.x中已废弃，在早期版本中，类型用于区分索引中的不同类别数据。每个索引可以包含一个或多个类型。</td></tr><tr><td>文档（Document）</td><td>文档是Elasticsearch中的基本数据单元，通常是以JSON格式表示。每个文档都存储在一个索引中，并且具有一个类型和一个ID。</td></tr><tr><td>映射（Mapping）</td><td>映射是定义文档及其字段如何存储和索引的过程。映射可以包括字段的数据类型、是否分析、是否存储等信息。</td></tr><tr><td>碎片（Shard）</td><td>索引可以分解为多个碎片，每个碎片是一个独立的Lucene实例。碎片允许水平扩展，并且可以分布在集群中的不同节点上。</td></tr><tr><td>副本（Replica）</td><td>副本是碎片的副本，用于提供数据冗余和增加搜索性能。每个碎片可以有一个或多个副本。</td></tr><tr><td>查询DSL（Domain Specific Language）</td><td>Elasticsearch提供了一种查询DSL，这是一种非常灵活的、基于JSON的查询语言，允许你执行复杂的查询。</td></tr><tr><td>聚合（Aggregation）</td><td>聚合提供了从数据中提取洞察力的能力，类似于SQL中的GROUP BY和聚合函数。Elasticsearch提供了多种聚合类型，如桶聚合、度量聚合等。</td></tr><tr><td>主节点（Master Node）</td><td>负责集群管理的节点，例如创建或删除索引、添加或移除节点等。</td></tr><tr><td>数据节点（Data Node）</td><td>存储数据的节点，负责索引和搜索操作。</td></tr><tr><td>协调节点（Coordinating Node）</td><td>处理客户端请求，将请求路由到合适的节点，并组合响应返回给客户端。</td></tr></tbody></table><h2 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h2><h3 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h3><ul><li><strong>安装</strong>：<code>sudo apt-get install nginx</code>（Debian&#x2F;Ubuntu）</li><li><strong>配置文件</strong>：通常位于<code>/etc/nginx/nginx.conf</code></li><li><strong>基本命令</strong>：<ul><li>启动：<code>sudo systemctl start nginx</code></li><li>停止：<code>sudo systemctl stop nginx</code></li><li>重载：<code>sudo systemctl reload nginx</code></li></ul></li></ul><h3 id="动静分离"><a href="#动静分离" class="headerlink" title="动静分离"></a>动静分离</h3><ul><li><p><strong>定义</strong>：将动态请求和静态请求分开处理。</p></li><li><p><strong>优势</strong>：提高服务器效率和性能。</p></li><li><p><strong>配置</strong>：</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://backend;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="section">location</span> <span class="regexp">~* \.(jpg|png|gif|js|css)$</span> &#123;</span><br><span class="line">        <span class="attribute">expires</span> <span class="number">30d</span>;</span><br><span class="line">        <span class="attribute">gzip</span> <span class="literal">on</span>;</span><br><span class="line">        <span class="attribute">gzip_types</span> image/jpeg image/png application/javascript text/css;</span><br><span class="line">        <span class="attribute">root</span> /path/to/static;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="JMeter"><a href="#JMeter" class="headerlink" title="JMeter"></a>JMeter</h2><h3 id="基本使用-1"><a href="#基本使用-1" class="headerlink" title="基本使用"></a>基本使用</h3><ul><li><strong>安装</strong>：下载和解压JMeter。</li><li><strong>测试计划</strong>：创建线程组、添加HTTP请求、设置断言和监听器。</li><li><strong>录制</strong>：使用JMeter代理录制HTTP请求。</li><li><strong>参数化</strong>：使用CSV数据文件配置器导入参数。</li><li><strong>分布式测试</strong>：配置远程启动JMeter服务器和客户端。</li></ul><h2 id="JVM"><a href="#JVM" class="headerlink" title="JVM"></a>JVM</h2><ul><li><strong>JVM结构</strong>：包括类加载器、执行引擎、内存区域等。</li><li><strong>类加载机制</strong>：Bootstrap ClassLoader、Extension ClassLoader、Application ClassLoader。</li><li><strong>内存模型</strong>：堆（Heap）、栈（Stack）、方法区（Method Area）、程序计数器（Program Counter）。</li><li><strong>垃圾回收</strong>：标记-清除（Mark-Sweep）、复制（Copy）、标记-整理（Mark-Compact）等算法。</li><li><strong>监控和调优</strong>：使用<code>jconsole</code>、<code>jvisualvm</code>等工具。</li></ul><h3 id="jconsole"><a href="#jconsole" class="headerlink" title="jconsole"></a>jconsole</h3><p>轻量、方便</p><ul><li><p>启动：<code>jconsole</code></p></li><li><p>监控：查看内存、线程、类、垃圾回收等信息。</p></li></ul><h3 id="jvisualvm"><a href="#jvisualvm" class="headerlink" title="jvisualvm"></a>jvisualvm</h3><p>更专业、支持插件</p><ul><li><p>启动：<code>jvisualvm</code></p></li><li><p>监控：除了<code>jconsole</code>的功能外，还可以查看更详细的性能图表。</p></li><li><p>案例：使用<code>jvisualvm</code>分析内存泄漏，通过堆转储（Heap Dump）定位问题代码。</p></li></ul><h2 id="本机压测"><a href="#本机压测" class="headerlink" title="本机压测"></a>本机压测</h2><table><thead><tr><th>压测内容</th><th>压测线程数</th><th>吞吐量&#x2F;s</th><th>90%响应时间（ms）</th><th>99%响应时间（ms）</th></tr></thead><tbody><tr><td>Nginx</td><td>50</td><td>8440</td><td>9</td><td>17</td></tr><tr><td>Gateway</td><td>50</td><td>8460</td><td>9</td><td>29</td></tr><tr><td>简单服务</td><td>50</td><td>38053</td><td>2</td><td>4</td></tr><tr><td>首页渲染</td><td>50</td><td>998</td><td>93</td><td>272</td></tr><tr><td>首页渲染（开缓存）</td><td>50</td><td>2156</td><td>31</td><td>120</td></tr><tr><td>三级分类数据获取</td><td>50</td><td>20</td><td>3499</td><td>4182</td></tr><tr><td>三级分类数据获取（Redis缓存）</td><td>50</td><td>1572</td><td>42</td><td>80</td></tr><tr><td>Gateway+简单服务</td><td>50</td><td>6334</td><td>12</td><td>34</td></tr><tr><td>全链路</td><td>50</td><td>2071</td><td>29</td><td>42</td></tr></tbody></table><p><strong>结论</strong></p><ol><li><p>中间件越多，性能损失越大，大多损失在网络交互</p></li><li><p>影响因子：DB、模板渲染速度、静态资源</p></li></ol><h2 id="缓存"><a href="#缓存" class="headerlink" title="缓存"></a>缓存</h2><h3 id="SpringBoot整合Redis"><a href="#SpringBoot整合Redis" class="headerlink" title="SpringBoot整合Redis"></a>SpringBoot整合Redis</h3><ol><li><p>导入依赖，lettuce客户端有对外内存溢出的问题，可切换为jedis</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span><span class="comment">&lt;!-- 引入Redis --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span><span class="comment">&lt;!-- 排除lettuce --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.lettuce<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lettuce-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span><span class="comment">&lt;!-- 用于替换lettuce --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>redis.clients<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jedis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>配置Redis地址</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="number">192.168</span><span class="number">.114</span><span class="number">.141</span></span><br><span class="line">    <span class="comment">#password:</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">6379</span></span><br></pre></td></tr></table></figure></li><li><p>测试</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> StringRedisTemplate stringRedisTemplate;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">redisTest</span><span class="params">()</span> &#123;</span><br><span class="line">    ValueOperations&lt;String, String&gt; ops = stringRedisTemplate.opsForValue();</span><br><span class="line">    ops.set(<span class="string">&quot;hello&quot;</span>, <span class="string">&quot;world_&quot;</span> + UUID.randomUUID());</span><br><span class="line">    System.out.println(ops.get(<span class="string">&quot;hello&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="缓存失效"><a href="#缓存失效" class="headerlink" title="缓存失效"></a>缓存失效</h3><p>缓存穿透、缓存雪崩和缓存击穿是分布式缓存系统中常见的问题，它们都会导致缓存系统的性能下降，甚至影响到后端存储系统的稳定性。下面我会分别解释这三种现象：</p><ol><li><p><strong>缓存穿透（Cache Penetration）</strong></p><p>缓存穿透是指客户端请求的数据在缓存中不存在，需要穿透缓存去后端存储系统（如数据库）查询，但后端存储系统中也没有该数据的情况。</p><p>这种情况通常发生在恶意攻击或错误的应用程序逻辑导致的频繁无效请求。</p><p>解决方案：</p><ul><li><p>对无效请求进行过滤，例如使用布隆过滤器快速判断一个key是否在数据库中存在。</p></li><li><p>设置合理的缓存穿透阈值，当超过阈值时，可以将请求放入异步队列中，慢慢处理。</p></li><li><p>对返回的空结果也进行缓存，但设置较短的过期时间。</p></li></ul></li><li><p><strong>缓存雪崩（Cache Avalanche）</strong></p><p>缓存雪崩是指缓存系统中大量的缓存项几乎同时过期，导致大量请求直接到达后端存储系统，造成系统压力突然增加的现象。</p><p>这种情况类似于多个请求同时击中缓存系统的“空白区域”。</p><p>解决方案：</p><ul><li><p>避免设置大量缓存项在同一时间过期，可以通过设置不同的过期时间来打散缓存项的过期时间。</p></li><li><p>使用锁或队列来控制对后端存储系统的请求，防止过载。</p></li><li><p>提高后端存储系统的性能和扩展能力，以应对突发的请求量。</p></li></ul></li><li><p><strong>缓存击穿（Cache Breakdown）</strong></p><p>缓存击穿是指一个热点缓存项过期，导致大量请求在缓存失效的瞬间同时请求该数据，这些请求都会穿透缓存到达后端存储系统。</p><p>这种情况通常发生在高并发场景下对热点数据的请求。</p><p>解决方案：</p><ul><li><p>对热点数据使用永不过期或较长的过期时间。</p></li><li><p>使用锁或分布式锁，确保同一时间只有一个请求能够穿透到后端存储系统。</p></li><li><p>预热缓存，提前将热点数据加载到缓存中。</p></li></ul></li></ol><h3 id="分布式锁"><a href="#分布式锁" class="headerlink" title="分布式锁"></a>分布式锁</h3><p>即所有的服务到同一个地方占坑，可以使用Redis实现，案例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> lock <span class="built_in">yes</span> NX</span><br></pre></td></tr></table></figure><p>lua脚本：整合Redis操作为一个原子操作，完整案例如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> Map&lt;String, List&lt;Catelog2Vo&gt;&gt; <span class="title function_">getCatalogJsonFromDbWithRedisLock</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 占分布式锁</span></span><br><span class="line">    <span class="type">UUID</span> <span class="variable">token</span> <span class="operator">=</span> UUID.randomUUID();</span><br><span class="line">    <span class="type">Boolean</span> <span class="variable">lock</span> <span class="operator">=</span> stringRedisTemplate.opsForValue().setIfAbsent(<span class="string">&quot;lock&quot;</span>, token.toString(), <span class="number">300</span>, TimeUnit.SECONDS);</span><br><span class="line">    <span class="keyword">if</span> (lock) &#123;</span><br><span class="line">        <span class="comment">// 加锁成功，执行业务</span></span><br><span class="line">        Map&lt;String, List&lt;Catelog2Vo&gt;&gt; dataFromDb;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            dataFromDb = getDataFromDb();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">script</span> <span class="operator">=</span> <span class="string">&quot;if redis.call(&#x27;get&#x27;, KEYS[1]) == ARGV[1] then return redis.call(&#x27;del&#x27;, KEYS[1]) else return 0 end)&quot;</span>;</span><br><span class="line">            stringRedisTemplate.execute(<span class="keyword">new</span> <span class="title class_">DefaultRedisScript</span>&lt;Long&gt;(script, Long.class), Collections.singletonList(<span class="string">&quot;lock&quot;</span>), token);<span class="comment">// 删除锁</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dataFromDb;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 防止栈溢出</span></span><br><span class="line">            Thread.sleep(<span class="number">200</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> getCatalogJsonFromDbWithRedisLock(); <span class="comment">// 自旋方式</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>注意事项</strong>：</p><ol><li>加锁保持原子性</li><li>删锁保持原子性</li></ol><h4 id="Redission"><a href="#Redission" class="headerlink" title="Redission"></a>Redission</h4><p><strong>优点</strong></p><ol><li>分布式锁</li><li>没有死锁问题（看门狗，锁自动续期，默认30秒）</li></ol><p><a href="https://redis.io/docs/latest/develop/use/patterns/distributed-locks/">redis-distributed-locks Redis分布式锁</a></p><p><a href="https://github.com/redisson/redisson">redisson</a></p><p><strong>使用步骤</strong></p><ol><li><p>导入Maven坐标</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.redisson/redisson --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.redisson<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>redisson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.12.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>配置Redisson，可以参考<a href="https://github.com/redisson/redisson/wiki/2.-%E9%85%8D%E7%BD%AE%E6%96%B9%E6%B3%95">Redisson-配置方法</a>、<a href="https://github.com/redisson/redisson/wiki/14.-%E7%AC%AC%E4%B8%89%E6%96%B9%E6%A1%86%E6%9E%B6%E6%95%B4%E5%90%88">Redisson-第三方框架整合</a>：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.redisson.Redisson;</span><br><span class="line"><span class="keyword">import</span> org.redisson.api.RedissonClient;</span><br><span class="line"><span class="keyword">import</span> org.redisson.config.Config;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyRedissonConfig</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 所有对Redisson的操作都是通过RedissonClient对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean(destroyMethod=&quot;shutdown&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> RedissonClient <span class="title function_">redissonClient</span><span class="params">()</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="comment">// 创建配置</span></span><br><span class="line">        <span class="type">Config</span> <span class="variable">config</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Config</span>();</span><br><span class="line">        config.useSingleServer().setAddress(<span class="string">&quot;redis://192.168.114.141:6379&quot;</span>);</span><br><span class="line">        <span class="comment">// 根据配置创建出RedissonClient实例</span></span><br><span class="line">        <span class="keyword">return</span> Redisson.create(config);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>使用案例，可参考<a href="https://github.com/redisson/redisson/wiki/8.-%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E5%92%8C%E5%90%8C%E6%AD%A5%E5%99%A8">Redisson-分布式锁和同步器</a>：</p><p>基本使用</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.redisson.api.RLock;</span><br><span class="line"><span class="keyword">import</span> org.redisson.api.RedissonClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IndexController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedissonClient redissonClient;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 获取一把锁，锁名字一样就是同一把锁</span></span><br><span class="line">        <span class="type">RLock</span> <span class="variable">lock</span> <span class="operator">=</span> redissonClient.getLock(<span class="string">&quot;my-lock&quot;</span>);</span><br><span class="line">        <span class="comment">// 加锁</span></span><br><span class="line">        lock.lock(); <span class="comment">// 阻塞式等待</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 执行业务</span></span><br><span class="line">            System.out.println(<span class="string">&quot;加锁成功，执行业务……&quot;</span> + Thread.currentThread().getId());</span><br><span class="line">            Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;释放锁……&quot;</span> + Thread.currentThread().getId());</span><br><span class="line">            <span class="comment">// 解锁</span></span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>读写锁</strong></p><ol><li>写锁（排他锁）：独占性，即同一时间只有一个线程可以持有该锁。</li><li>读锁（共享锁）：共享性，即同一时间可以有多个线程持有该锁。</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/write&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">writeValue</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">RReadWriteLock</span> <span class="variable">lock</span> <span class="operator">=</span> redissonClient.getReadWriteLock(<span class="string">&quot;rw-lock&quot;</span>);</span><br><span class="line">    String s;</span><br><span class="line">    <span class="type">RLock</span> <span class="variable">rLock</span> <span class="operator">=</span> lock.writeLock();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// 改数据加写锁，读数据加读锁</span></span><br><span class="line">        rLock.lock();</span><br><span class="line">        s = UUID.randomUUID().toString();</span><br><span class="line">        Thread.sleep(<span class="number">30000</span>);</span><br><span class="line">        stringRedisTemplate.opsForValue().set(<span class="string">&quot;writeValue&quot;</span>, s);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        rLock.unlock();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping(&quot;/read&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">readValue</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">RReadWriteLock</span> <span class="variable">lock</span> <span class="operator">=</span> redissonClient.getReadWriteLock(<span class="string">&quot;rw-lock&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="comment">// 加读锁</span></span><br><span class="line">    <span class="type">RLock</span> <span class="variable">rLock</span> <span class="operator">=</span> lock.readLock();</span><br><span class="line">    rLock.lock();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        s = stringRedisTemplate.opsForValue().get(<span class="string">&quot;writeValue&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        rLock.unlock();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>闭锁</strong>（计数锁）</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/lockDoor&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">lockDoor</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">    <span class="type">RCountDownLatch</span> <span class="variable">door</span> <span class="operator">=</span> redissonClient.getCountDownLatch(<span class="string">&quot;door&quot;</span>);</span><br><span class="line">    door.trySetCount(<span class="number">5</span>);</span><br><span class="line">    door.await(); <span class="comment">// 等待闭锁都完成</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;放假了……&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping(&quot;/go/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">go</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> Long id)</span> &#123;</span><br><span class="line">    <span class="type">RCountDownLatch</span> <span class="variable">door</span> <span class="operator">=</span> redissonClient.getCountDownLatch(<span class="string">&quot;door&quot;</span>);</span><br><span class="line">    door.countDown(); <span class="comment">// 计数器减一</span></span><br><span class="line">    <span class="keyword">return</span> id + <span class="string">&quot;班的人都走了&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="缓存数据一致性"><a href="#缓存数据一致性" class="headerlink" title="缓存数据一致性"></a>缓存数据一致性</h3><p>都有脏数据的问题，考虑加锁或不将经常修改的数据加入缓存</p><ol><li>双写模式：数据库与缓存一起更改</li><li>失效模式：数据库改完将缓存删除</li></ol><p>可以使用<a href="https://github.com/alibaba/canal">Alibaba-Canal</a>解决数据异构。</p><h3 id="Spring-Cache"><a href="#Spring-Cache" class="headerlink" title="Spring Cache"></a>Spring Cache</h3><p><a href="https://springdoc.cn/spring-cache-tutorial/">Spring Cache中文指引</a></p><p><strong>使用步骤</strong>：</p><ol><li><p>导入Mave坐标：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span><span class="comment">&lt;!-- Spring缓存 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-cache<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span><span class="comment">&lt;!-- 如使用Redis做缓存则需要引入Redis --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>写配置：CacheAutoConfiguration会导入RedisCacheConfiguration，自动配置好了缓存管理器RedisCacheManager，在<code>application.yml</code>中写入以下内容即可使用Redis作为缓存：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="comment"># redis配置</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="number">192.168</span><span class="number">.114</span><span class="number">.141</span></span><br><span class="line">    <span class="comment">#password:</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">6379</span></span><br><span class="line">  <span class="comment"># 缓存配置</span></span><br><span class="line">  <span class="attr">cache:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">redis</span></span><br></pre></td></tr></table></figure><p>在启动类上加上<code>@EnableCaching</code>注解以开启缓存。</p></li><li><p>使用缓存，注解说明与案例代码如下：</p><table><thead><tr><th align="left">注解</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left"><code>@EnableCaching</code></td><td align="left">启用Spring Cache支持。通常在配置类上使用。</td></tr><tr><td align="left"><code>@Cacheable</code></td><td align="left">标记一个方法的返回值应该被缓存。如果缓存中已经有值，则直接返回缓存中的值；否则执行方法，并将返回值存入缓存。</td></tr><tr><td align="left"><code>@CachePut</code></td><td align="left">用于更新缓存。每次调用该方法时，都会执行方法，并将返回值更新到缓存中。（<strong>双写模式</strong>）</td></tr><tr><td align="left"><code>@CacheEvict</code></td><td align="left">用于清除缓存。可以在方法执行前或执行后清除缓存。（<strong>失效模式</strong>）</td></tr><tr><td align="left"><code>@Caching</code></td><td align="left">用于组合多个缓存操作。可以同时应用多个<code>@Cacheable</code>、<code>@CachePut</code>和<code>@CacheEvict</code>。</td></tr><tr><td align="left"><code>@CacheConfig</code></td><td align="left">用于类级别，提供缓存相关的配置，如缓存名称等。</td></tr></tbody></table><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 当前方法的结果需要缓存，如果缓存中有方法不需要调用。</span></span><br><span class="line"><span class="comment">// 如果缓存中没有，会调用方法，最后将方法的结果放入缓存当中。</span></span><br><span class="line"><span class="comment">// 每一个需要缓存的数据，都需要指定要放到哪个名字的缓存。（缓存分区，可以按照业务类型分区）</span></span><br><span class="line"><span class="meta">@Cacheable(&#123;&quot;category&quot;&#125;)</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> List&lt;CategoryEntity&gt; <span class="title function_">getLevel1Categories</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> baseMapper.selectList(<span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;CategoryEntity&gt;()</span><br><span class="line">            .eq(CategoryEntity::getParentCid, <span class="number">0</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Redis缓存默认规则</strong>：</p><ol><li>Key规则：<code>缓存名::SimpleKey []</code></li><li>使用JDK序列化规则存储</li><li>永不过期</li></ol><p><strong>自定义规则</strong>：</p><ol><li><p>指定生成的缓存使用的Key</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Cacheable(value = &#123;&quot;category&quot;&#125;, key = &quot;&#x27;level1Categories&#x27;&quot;)</span></span><br></pre></td></tr></table></figure></li><li><p>指定缓存数据的生存时间</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cache:</span></span><br><span class="line">    <span class="attr">redis:</span></span><br><span class="line">      <span class="comment"># 一个小时过期</span></span><br><span class="line">      <span class="attr">time-to-live:</span> <span class="number">3600000</span></span><br></pre></td></tr></table></figure></li><li><p>将数据保存为JSON格式</p><p>需要自定义RedisCacheConfiguration（<code>application.yml</code>中的配置就会失效），创建一个自定义配置类，可以命名为<code>MyCacheConfig</code>：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.cache.CacheProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.EnableConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cache.annotation.EnableCaching;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.cache.RedisCacheConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.serializer.RedisSerializationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.serializer.StringRedisSerializer;</span><br><span class="line"></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(CacheProperties.class)</span></span><br><span class="line"><span class="meta">@EnableCaching</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyCacheConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RedisCacheConfiguration <span class="title function_">redisCacheConfiguration</span><span class="params">(CacheProperties cacheProperties)</span> &#123;</span><br><span class="line">        <span class="type">RedisCacheConfiguration</span> <span class="variable">config</span> <span class="operator">=</span> RedisCacheConfiguration.defaultCacheConfig();</span><br><span class="line">        <span class="comment">// 更改Key序列化机制</span></span><br><span class="line">        config = config.serializeKeysWith(RedisSerializationContext.SerializationPair.fromSerializer(<span class="keyword">new</span> <span class="title class_">StringRedisSerializer</span>()));</span><br><span class="line">        <span class="comment">// 更改Value序列化机制</span></span><br><span class="line">        config = config.serializeValuesWith(RedisSerializationContext.SerializationPair.fromSerializer(<span class="keyword">new</span> <span class="title class_">GenericJackson2JsonRedisSerializer</span>()));</span><br><span class="line">        <span class="comment">// 导入配置文件的配置</span></span><br><span class="line">        CacheProperties.<span class="type">Redis</span> <span class="variable">redisProperties</span> <span class="operator">=</span> cacheProperties.getRedis(); <span class="comment">// 获取Redis配置</span></span><br><span class="line">        <span class="keyword">if</span> (redisProperties.getTimeToLive() != <span class="literal">null</span>) &#123;</span><br><span class="line">            config = config.entryTtl(redisProperties.getTimeToLive());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (redisProperties.getKeyPrefix() != <span class="literal">null</span>) &#123;</span><br><span class="line">            config = config.prefixCacheNameWith(redisProperties.getKeyPrefix());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!redisProperties.isCacheNullValues()) &#123;</span><br><span class="line">            config = config.disableCachingNullValues();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!redisProperties.isUseKeyPrefix()) &#123;</span><br><span class="line">            config = config.disableKeyPrefix();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> config;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p><strong>Redis缓存扩展配置</strong></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="comment"># 缓存配置</span></span><br><span class="line">  <span class="attr">cache:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">redis</span></span><br><span class="line">    <span class="attr">redis:</span></span><br><span class="line">      <span class="comment"># 一个小时过期</span></span><br><span class="line">      <span class="attr">time-to-live:</span> <span class="number">3600000</span></span><br><span class="line">      <span class="comment"># Key前缀，如果没有指定前缀，则使用缓存名字作为Key前缀</span></span><br><span class="line">      <span class="attr">key-prefix:</span> <span class="string">CACHE_</span></span><br><span class="line">      <span class="comment"># 使用前缀</span></span><br><span class="line">      <span class="attr">use-key-prefix:</span> <span class="literal">true</span></span><br><span class="line">      <span class="comment"># 是否缓存空值，防止缓存穿透</span></span><br><span class="line">      <span class="attr">cache-null-values:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><strong>其他注解使用</strong>：</p><ol><li><p>缓存失效，执行该方法时使指定的缓存失效</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@CacheEvict(value = &quot;category&quot;, key = &quot;&#x27;level1Categories&#x27;&quot;)</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateCascade</span><span class="params">(CategoryEntity category)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.updateById(category);</span><br><span class="line">    categoryBrandRelationService.updateCategory(category.getCatId(), category.getName());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>同时进行多种缓存操作（多个缓存失效）</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Caching(evict = &#123;</span></span><br><span class="line"><span class="meta">        @CacheEvict(value = &quot;category&quot;, key = &quot;&#x27;getLevel1Categories&#x27;&quot;),</span></span><br><span class="line"><span class="meta">        @CacheEvict(value = &quot;category&quot;, key = &quot;&#x27;getCatalogJson&#x27;&quot;)</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br></pre></td></tr></table></figure></li><li><p>指定删除某个分区下所有的数据</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@CacheEvict(value = &quot;category&quot;, allEntries = true)</span></span><br></pre></td></tr></table></figure></li><li><p>加锁解决击穿问题（只有Cacheable有）</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Cacheable(value = &#123;&quot;category&quot;&#125;, key = &quot;#root.method.name&quot;, sync = true)</span></span><br></pre></td></tr></table></figure></li></ol><p><strong>总结</strong>：常规数据（读多写少，即时性、一致性要求不高的数据）完全可以使用Spring-Cache，特殊数据则需要特殊设计。</p></li></ol><!-- flag of hidden posts -->]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 谷粒商城 </tag>
            
            <tag> Java项目 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>求生之路2服务器日志（2024-05-17~）</title>
      <link href="/posts/a15ff462/"/>
      <url>/posts/a15ff462/</url>
      
        <content type="html"><![CDATA[<details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-08-26]-更新整合包</summary><div class="toggle-content"><p><strong>更新插件</strong></p><blockquote><p>豆瓣酱整合包更新版本到<code>2024-8-20a</code>。</p><ul><li>自选-排行榜插件(v2.17.17)(豆瓣酱な)(HUD的include提供者为 sorallll)</li></ul></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-07-05]-更新整合包</summary><div class="toggle-content"><p><strong>增加插件</strong></p><blockquote><ul><li>自选-修复拾取新枪械武器时弹夹不满的问题(v1.0.2)(豆瓣酱な)</li><li>自选-排行榜插件(v2.15.15)(豆瓣酱な)(HUD的include提供者为 sorallll)</li><li>1.11插件平台linux版(6968-1155)(必须先启用这个)</li></ul></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-06-22]-平衡性调整</summary><div class="toggle-content"><p><strong>移速</strong></p><blockquote><p>倒地爬行的移速从<code>80</code>下降到<code>30</code></p><p>手持AWP移速从<code>60</code>上升至<code>140</code></p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-06-17]-平衡性调整</summary><div class="toggle-content"><p><strong>移速</strong></p><blockquote><p>手持大狙的移速从<code>100</code>上升到<code>180</code></p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-05-17]-更新插件</summary><div class="toggle-content"><p><strong>说明</strong></p><blockquote><p>最近求生之路社区猛猛更新，导致我的服务器崩溃了，本来就懒得折腾，这下不得不折腾一下了。</p></blockquote><p><strong>增加插件</strong></p><blockquote><ul><li>自选-8角色共存(修复玩家在短暂时刻救援关变成NPC)</li><li><a href="https://github.com/fbef0102/L4D1_2-Plugins/tree/master/l4d_death_soul">人类死亡后灵魂升天</a></li></ul></blockquote><p><strong>更新插件</strong></p><blockquote><ul><li>自选-坦克免疫火焰伤害或固定火焰伤害(v1.1.4)(豆瓣酱な)</li><li>必选-功能类插件(left4dhooks)(v1.150)(SilverShot)</li><li>必选-功能类扩展(sourcescramble.ext)(v0.7.1.4)</li><li>必选-功能类插件(原生投票函数库)(v0.4)(Powerlord, fdxx)</li><li>必选-功能类插件(原生键值函数库)(v0.4)(fdxx)</li><li>自选-玩家自杀指令(v1.1.3)(豆瓣酱な)</li><li>自选-换图类(投票换图)(v1.1)(fdxx, sorallll, HatsuneImagine)</li><li>1.11插件平台linux版(6964-1155)(必须先启用这个)</li></ul></blockquote></div></details><!-- flag of hidden posts -->]]></content>
      
      
      <categories>
          
          <category> 游戏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 服务器 </tag>
            
            <tag> 求生之路2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用uptime-status搭建网站监控页面</title>
      <link href="/posts/bf075edd/"/>
      <url>/posts/bf075edd/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>最近看到别人的博客有一个网站监控页面，感觉炫酷又有用，然后就去百度了一下是如何部署的。</p><p>搜完之后更兴奋了，这是一个纯前端的项目，那服务器的压力就大大减少了，并且方便迁移，这下不得不搭建了。</p><p>可以<a href="https://status.insectmk.cn/">点击这里</a>看看搭建好的效果哦~</p><h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><h3 id="UptimeRobot"><a href="#UptimeRobot" class="headerlink" title="UptimeRobot"></a>UptimeRobot</h3><p>需要使用到UptimeRobot的网站监控功能，其免费功能已经够用了。</p><ol><li>到<a href="https://uptimerobot.com/">UptimeRobot 官网</a>完成注册。</li><li>在<a href="https://dashboard.uptimerobot.com/">控制台页面</a>找到<code>Montioring</code>页面，点击<code>New monitor</code>以创建网站监控。</li><li>创建<strong>Read-Only API Key</strong>，UptimeRobot现在是已经换成新官网了，但是还保留着旧官网的，我在新官网没有找到生成Key的地方，可以到<a href="https://old.uptimerobot.com/dashboard?ref=beta-app#mySettings">旧官网设置页面</a>生成并保存好<code>Read-Only API Key</code>。（如果后面监控的网站有更新好想要重新获取Key才行）</li><li>第三步的API现在新版官网也支持生成了，到<a href="https://dashboard.uptimerobot.com/integrations">Integrations | UptimeRobot</a>的<code>API</code>Tab页点击<strong>Read-only API key</strong>的<code>+ Create</code>按钮生成API。</li></ol><p><strong>注意：</strong>uptime-status支持 <code>Monitor-Specific</code> 与 <code>Read-Only</code> API，<strong>Monitor-Specific</strong>是为每个被监控的网站单独生成一个API，<strong>Read-Only</strong>是为所有被监控的网站生成API，为方便管理，推荐使用<code>Monitor-Specific</code>API。</p><h3 id="uptime-status"><a href="#uptime-status" class="headerlink" title="uptime-status"></a>uptime-status</h3><p>到<a href="https://github.com/yb/uptime-status">uptime-status仓库页面</a>查看说明文档，只需要下载<a href="https://github.com/yb/uptime-status/releases/latest/download/uptime-status.zip">uptime-status.zip</a>解压放到静态网站服务器就行了，使用前需要修改<code>config.js</code>，参数解释如下：</p><table><thead><tr><th>参数名</th><th>说明</th></tr></thead><tbody><tr><td>SiteName</td><td>要显示的网站名称</td></tr><tr><td>ApiKeys</td><td>从 UptimeRobot 获取的 API Key，支持 Monitor-Specific API Keys 和 Read-Only API Key</td></tr><tr><td>CountDays</td><td>要显示的日志天数，建议 60 或 90，显示效果比较好</td></tr><tr><td>ShowLink</td><td>是否显示站点链接</td></tr><tr><td>Navi</td><td>导航栏的菜单列表</td></tr></tbody></table><p>你可以fork仓库自定义你的页面，也可以看看<a href="https://github.com/yb/uptime-status/forks">别人的 uptime-status fork</a>，说不定能找到你喜欢的扩展功能。</p><p>我这里将时间轴颠倒了一下，最新的网站状态在最右侧，可以看看<a href="https://github.com/insectmk/uptime-status">我的 uptime-status fork</a>。</p><h3 id="其他部署"><a href="#其他部署" class="headerlink" title="其他部署"></a>其他部署</h3><p>既然是静态页面，那么完全可以轻松部署在很多地方，或者是作为网站的某个页面融合在网站中。</p><p>具体可以参考<a href="https://zhuanlan.zhihu.com/p/670096835">Uptime-Status 状态监控面板配置教程</a>。</p><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://cloud.tencent.com/developer/article/2299269">免费的网站运行状态监控工具——UptimeRobot</a></p><p><a href="https://zhuanlan.zhihu.com/p/670096835">Uptime-Status 状态监控面板配置教程</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 服务器 </tag>
            
            <tag> 工具 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>谷粒商城学习笔记（三）</title>
      <link href="/posts/f1bab854/"/>
      <url>/posts/f1bab854/</url>
      
        <content type="html"><![CDATA[<h2 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h2><h3 id="阿里云OSS"><a href="#阿里云OSS" class="headerlink" title="阿里云OSS"></a>阿里云OSS</h3><p><a href="https://github.com/alibaba/aliyun-spring-boot/blob/master/aliyun-spring-boot-samples/aliyun-oss-spring-boot-sample/README-zh.md">Alibaba Cloud OSS</a></p><p><a href="https://help.aliyun.com/zh/oss/use-cases/java-1?spm=a2c4g.11186623.0.i2#concept-ahk-rfz-2fb">Web端直传</a></p><h3 id="数据校验"><a href="#数据校验" class="headerlink" title="数据校验"></a>数据校验</h3><h4 id="前端校验"><a href="#前端校验" class="headerlink" title="前端校验"></a>前端校验</h4><p>前端使用的是<a href="https://element.eleme.cn/">ElementUI</a>，可以直接使用其提供的表单验证，可以参考<a href="https://element.eleme.cn/#/zh-CN/component/form#biao-dan-yan-zheng">ElementUI-表单验证官方文档</a>。</p><h4 id="后端校验"><a href="#后端校验" class="headerlink" title="后端校验"></a>后端校验</h4><p>SpringBoot数据校验可以使用<code>javax.validation.constraints</code>包下的规则，其实现了<a href="https://www.jcp.org/en/jsr/detail?id=303">JSR303规范</a>。</p><p>可以参考CSDN博文<a href="https://blog.csdn.net/xueguchen/article/details/111406671">Java数据校验：JSR-303</a>。</p><ol><li><p>基础使用：在实体类上打上相应注解，并在Controller中使用<code>@Valid</code>注解即可使用。</p></li><li><p>分组：为校验规则分组，注解字段为<code>groups</code>，需要传入注解类型的Class，以应对复杂的校验场景。</p></li><li><p>自定义校验器：可以自定义校验规则，案例代码参考<a href="https://github.com/insectmk/gulimall/blob/main/gulimall-common/src/main/java/cn/insectmk/common/valid/ListValueConstraintValidator.java">自定义校验</a>。</p></li></ol><h3 id="全局异常处理"><a href="#全局异常处理" class="headerlink" title="全局异常处理"></a>全局异常处理</h3><p>使用<code>@ControllerAdvice</code>注解与<code>@ExceptionHandler</code>，案例代码如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cn.insectmk.common.exception.BizCodeEnum;</span><br><span class="line"><span class="keyword">import</span> cn.insectmk.common.utils.R;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.validation.BindingResult;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.MethodArgumentNotValidException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ExceptionHandler;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestControllerAdvice;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestControllerAdvice</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GulimallExceptionControllerAdvice</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 数据校验错误处理</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> e</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(value = MethodArgumentNotValidException.class)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">handleValidException</span><span class="params">(MethodArgumentNotValidException e)</span> &#123;</span><br><span class="line">        log.error(<span class="string">&quot;数据校验出现问题&#123;&#125;，异常类型&#123;&#125;&quot;</span>, e.getMessage(), e.getClass());</span><br><span class="line"></span><br><span class="line">        Map&lt;String, String&gt; errors = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="type">BindingResult</span> <span class="variable">bindingResult</span> <span class="operator">=</span> e.getBindingResult();</span><br><span class="line">        bindingResult.getFieldErrors().forEach(fieldError -&gt; &#123;</span><br><span class="line">            errors.put(fieldError.getField(), fieldError.getDefaultMessage());</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> R.error(BizCodeEnum.VALID_EXCEPTION.getCode(), BizCodeEnum.VALID_EXCEPTION.getMsg()).put(<span class="string">&quot;data&quot;</span>, errors);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 处理全局未知异常</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> e</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(value = Throwable.class)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">handleException</span><span class="params">(Throwable e)</span> &#123;</span><br><span class="line">        log.error(<span class="string">&quot;系统出现未知问题&#123;&#125;，异常类型&#123;&#125;&quot;</span>, e.getMessage(), e.getClass());</span><br><span class="line">        <span class="keyword">return</span> R.error(BizCodeEnum.UNKNOWN_EXCEPTION.getCode(), BizCodeEnum.UNKNOWN_EXCEPTION.getMsg());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Vue2子组件向父组件传递数据"><a href="#Vue2子组件向父组件传递数据" class="headerlink" title="Vue2子组件向父组件传递数据"></a>Vue2子组件向父组件传递数据</h3><p>可以参考<a href="https://cloud.tencent.com/developer/article/2159628">Vue子组件向父组件传值（this.$emit()方法）「建议收藏」</a></p><ol><li>子组件使用<code>this.$emit(&#39;event-name&#39;, arg1， arg2，...)</code>触发事件。</li><li>父组件在子组件引用标签上使用<code>@event-name=&quot;callback(arg1, arg2, ...)&quot;</code>来接收子组件传递的数据。</li></ol><h3 id="Object划分"><a href="#Object划分" class="headerlink" title="Object划分"></a>Object划分</h3><h4 id="持久对象"><a href="#持久对象" class="headerlink" title="持久对象"></a>持久对象</h4><p><strong>PO(persistant object)</strong> 持久对象</p><p>PO 就是对应数据库中某个表中的一条记录，多个记录可以用PO 的集合。PO 中应该不包含任何对数据库的操作。</p><h4 id="领域对象"><a href="#领域对象" class="headerlink" title="领域对象"></a>领域对象</h4><p><strong>DO（Domain Object）</strong>领域对象</p><p>就是从现实世界中抽象出来的有形或无形的业务实体。</p><h4 id="数据传输对象"><a href="#数据传输对象" class="headerlink" title="数据传输对象"></a>数据传输对象</h4><p><strong>TO(Transfer Object)</strong> 数据传输对象</p><p>不同的应用程序之间传输的对象</p><h4 id="数据传输对象-1"><a href="#数据传输对象-1" class="headerlink" title="数据传输对象"></a>数据传输对象</h4><p><strong>DTO（Data Transfer Object）</strong>数据传输对象</p><p>这个概念来源于J2EE 的设计模式，原来的目的是为了EJB 的分布式应用提供粗粒度的数据实体，以减少分布式调用的次数，从而提高分布式调用的性能和降低网络负载。</p><p>但在这里，泛指用于展示层与服务层之间的数据传输对象。</p><h4 id="值对象"><a href="#值对象" class="headerlink" title="值对象"></a>值对象</h4><p><strong>VO(value object)</strong> 值对象</p><p>通常用于业务层之间的数据传递，和PO 一样也是仅仅包含数据而已。但应是抽象出的业务对象, 可以和表对应, 也可以不, 这根据业务的需要。用new 关键字创建，由GC 回收的。View object：视图对象；接受页面传递来的数据，封装对象将业务处理完成的对象，封装成页面要用的数据</p><h4 id="业务对象"><a href="#业务对象" class="headerlink" title="业务对象"></a>业务对象</h4><p><strong>BO(business object)</strong> 业务对象</p><p>从业务模型的角度看, 见UML 元件领域模型中的领域对象。封装业务逻辑的java 对象, 通过调用DAO 方法, 结合PO,VO 进行业务操作。</p><p>business object: 业务对象主要作用是把业务逻辑封装为一个对象。这个对象可以包括一个或多个其它的对象。</p><p>比如一个简历，有教育经历、工作经历、社会关系等等。我们可以把教育经历对应一个PO ，工作经历对应一个PO ，社会关系对应一个PO 。</p><p>建立一个对应简历的BO 对象处理简历，每个BO 包含这些PO 。这样处理业务逻辑时，我们就可以针对BO 去处理。</p><h4 id="简单无规则java-对象"><a href="#简单无规则java-对象" class="headerlink" title="简单无规则java 对象"></a>简单无规则java 对象</h4><p><strong>POJO(plain ordinary java object)</strong> 简单无规则java 对象</p><p>传统意义的java 对象。就是说在一些Object&#x2F;Relation Mapping 工具中，能够做到维护数据库表记录的persisent object 完全是一个符合Java Bean 规范的纯Java 对象，没有增加别的属性和方法。</p><p>我的理解就是最基本的java Bean ，只有属性字段及setter 和getter方法！。</p><p>POJO 是DO&#x2F;DTO&#x2F;BO&#x2F;VO 的统称。</p><h4 id="数据访问对象"><a href="#数据访问对象" class="headerlink" title="数据访问对象"></a>数据访问对象</h4><p><strong>DAO(data access object)</strong> 数据访问对象</p><p>是一个sun 的一个标准j2ee 设计模式， 这个模式中有个接口就是DAO ，它负持久层的操作。为业务层提供接口。</p><p>此对象用于访问数据库。通常和PO 结合使用， DAO 中包含了各种数据库的操作方法。通过它的方法, 结合PO 对数据库进行相关的操作。</p><p>夹在业务逻辑与数据库资源中间。配合VO, 提供数据库的CRUD 操作。</p><h3 id="SpringMVC分工"><a href="#SpringMVC分工" class="headerlink" title="SpringMVC分工"></a>SpringMVC分工</h3><ol><li>Controller处理请求，接收和校验数据</li><li>Service接收Controller传来的数据，进行业务处理</li><li>Controler接受Service处理完的数据，封装页面指定的VO对象</li></ol><!-- flag of hidden posts -->]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 谷粒商城 </tag>
            
            <tag> Java项目 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>谷粒商城学习笔记（二）</title>
      <link href="/posts/bca41b06/"/>
      <url>/posts/bca41b06/</url>
      
        <content type="html"><![CDATA[<h2 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h2><h3 id="Java-8-Stream"><a href="#Java-8-Stream" class="headerlink" title="Java 8 Stream"></a>Java 8 Stream</h3><p><a href="https://www.runoob.com/java/java8-streams.html">Java 8 Stream</a></p><h3 id="网关URL配置"><a href="#网关URL配置" class="headerlink" title="网关URL配置"></a>网关URL配置</h3><ol><li><p>解释以下内容：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">admin_route</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://renren-fast</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/api/**</span></span><br><span class="line">          <span class="attr">filters:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">RewritePath=/api/(?&lt;segment&gt;.*),/renren-fast/$\&#123;segment&#125;</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="跨域"><a href="#跨域" class="headerlink" title="跨域"></a>跨域</h3><ol><li><p>什么是跨域</p></li><li><p>网关中如何配置跨域（响应式）</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.insectmk.gulimall.gateway.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.cors.CorsConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.cors.reactive.CorsWebFilter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.cors.reactive.UrlBasedCorsConfigurationSource;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GulimallCorsConfigure</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> CorsWebFilter <span class="title function_">corsWebFilter</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">UrlBasedCorsConfigurationSource</span> <span class="variable">source</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UrlBasedCorsConfigurationSource</span>();</span><br><span class="line">        <span class="type">CorsConfiguration</span> <span class="variable">corsConfiguration</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CorsConfiguration</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 跨域配置</span></span><br><span class="line">        corsConfiguration.addAllowedHeader(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">        corsConfiguration.addAllowedMethod(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">        corsConfiguration.addAllowedOrigin(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">        corsConfiguration.setAllowCredentials(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">        source.registerCorsConfiguration(<span class="string">&quot;/**&quot;</span>, corsConfiguration);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">CorsWebFilter</span>(source);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="逻辑删除"><a href="#逻辑删除" class="headerlink" title="逻辑删除"></a>逻辑删除</h3><p><a href="https://baomidou.com/pages/6b03c5/#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95">Mybatis-Plus 逻辑删除</a></p><h2 id="疑问"><a href="#疑问" class="headerlink" title="疑问"></a>疑问</h2><ol><li><p>以下方法递归了，没有看到退出条件，为什么没有死循环？</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> List&lt;CategoryEntity&gt; <span class="title function_">getChildren</span><span class="params">(CategoryEntity root, List&lt;CategoryEntity&gt; allCategories)</span> &#123;</span><br><span class="line">    <span class="comment">// 装载root分类的子分类</span></span><br><span class="line">    List&lt;CategoryEntity&gt; children = allCategories.stream()</span><br><span class="line">            .filter(category -&gt; root.getCatId().equals(category.getParentCid()))</span><br><span class="line">            .peek(category -&gt; category.setChildren(getChildren(category, allCategories)))</span><br><span class="line">            .sorted(Comparator.comparingInt(category -&gt; ((category.getSort() == <span class="literal">null</span>) ? <span class="number">0</span> : category.getSort())))</span><br><span class="line">            .collect(Collectors.toList());</span><br><span class="line">    <span class="keyword">return</span> children;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ChatGLM解答：</p><blockquote><p>这个方法确实是一个递归方法，但是它没有导致死循环的原因在于递归的退出条件是隐含在 <code>filter</code> 方法中的。让我们逐步分析这个方法：</p><ol><li><strong>递归的基（退出条件）</strong>:<ul><li><code>filter</code> 方法用于过滤出所有父分类ID等于 <code>root.getCatId()</code> 的分类实体。这意味着，对于非根节点的分类，这个条件会过滤出它的直接子节点；而对于叶节点（没有子节点的节点），这个条件不会匹配任何元素，因此 <code>filter</code> 返回的流将为空。</li><li>当 <code>filter</code> 返回一个空流时，后续的 <code>peek</code> 和 <code>sorted</code> 操作将不会执行，因此递归不会继续。</li></ul></li><li><strong>递归步骤</strong>:<ul><li>对于每个匹配的子节点，<code>peek</code> 方法会调用 <code>setChildren</code> 方法，这是递归的步骤。<code>setChildren</code> 方法会递归地调用 <code>getChildren</code> 方法来找到当前子节点的子节点。</li><li>这个过程会一直重复，直到达到叶节点，即没有子节点的节点。</li></ul></li><li><strong>递归的顺序</strong>:<ul><li>递归是深度优先的，这意味着它会首先探索一个分支直到叶节点，然后回溯并探索下一个分支。</li></ul></li><li><strong>代码分析</strong>:<ul><li><code>category.getParentCid().equals(root.getCatId())</code> 确保只有当 <code>category</code> 的父ID与 <code>root</code> 的ID相同时，<code>category</code> 才会被考虑。</li><li><code>category.setChildren(getChildren(category, allCategories))</code> 是递归调用，它为当前 <code>category</code> 设置子节点。</li><li><code>sorted</code> 方法用于排序，它不会影响递归的行为。</li><li><code>collect(Collectors.toList())</code> 将最终的流转换为一个列表。<br>这个方法之所以不会进入死循环，是因为它依赖于数据结构中节点之间的父子关系。每个节点最多只会被访问一次，因此即使存在循环引用，递归也能正确终止。</li></ul></li></ol></blockquote><p>理解：退出条件在filter中，判断没有子节点就不会执行后续步骤了。</p></li><li><p>Cookie是什么，存在哪儿的，客户端与服务端是如何传输cookie的</p></li><li><p>什么是响应式编程</p></li><li><p>Vue2插槽</p></li></ol><h2 id="踩坑"><a href="#踩坑" class="headerlink" title="踩坑"></a>踩坑</h2><ol><li><p>p46，将人人开源后端注册到nacos出现问题。</p><ol><li><p>将人人开源<code>pom.xml</code>的springboot版本切换为<code>2.3.3.RELEASE</code>。</p></li><li><p>按照p47的说明，修改<code>io.renren.config.CorsConfig.java</code>，将跨域配置注释掉就行了。</p></li></ol></li></ol><!-- flag of hidden posts -->]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 谷粒商城 </tag>
            
            <tag> 微服务 </tag>
            
            <tag> Java项目 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>谷粒商城学习笔记（一）</title>
      <link href="/posts/8cb2f7de/"/>
      <url>/posts/8cb2f7de/</url>
      
        <content type="html"><![CDATA[<h2 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h2><h3 id="环境-工具"><a href="#环境-工具" class="headerlink" title="环境&#x2F;工具"></a>环境&#x2F;工具</h3><ol><li><p>Maven：可以将每个微服务组织起来（管理项目与项目之间的关系）</p></li><li><p>Docker：容器管理，快速部署项目或环境</p></li><li><p>MySQL：经典数据库</p></li><li><p>Redis：缓存数据库，老版本（4.x）没有自动持久化，新版本（7.x）有自动持久化</p></li><li><p>PowerDesigner：能够通过设计图生成SQL脚本文件</p></li><li><p>人人开源：快速构建后台管理系统，快速生成MVC架构代码，<a href="https://gitee.com/renrenio">人人开源Gitee</a>。</p><ol><li><a href="https://gitee.com/renrenio/renren-fast">renren-fast</a>：是一个轻量级的，前后端分离的Java快速开发平台，能快速开发项目并交付【接私活利器】</li><li><a href="https://gitee.com/renrenio/renren-fast-vue">renren-fast-vue</a>：基于vue、element-ui构建开发，实现<a href="https://gitee.com/renrenio/renren-fast">renren-fast</a>后台管理前端功能，提供一套更优的前端解决方案</li><li><a href="https://gitee.com/renrenio/renren-generator">renren-generator</a>：人人开源项目的代码生成器，可在线生成entity、xml、dao、service、html、js、sql代码，减少70%以上的开发任务</li></ol></li></ol><h3 id="NACOS"><a href="#NACOS" class="headerlink" title="NACOS"></a>NACOS</h3><p><a href="https://nacos.io/">NACOS官网</a>，项目使用的是<code>1.1.3</code>版本，可查看<a href="https://nacos.io/docs/v1/what-is-nacos/">NACOS 1.x官方文档</a>。</p><h4 id="注册中心"><a href="#注册中心" class="headerlink" title="注册中心"></a>注册中心</h4><p><a href="https://github.com/alibaba/spring-cloud-alibaba/blob/greenwich/spring-cloud-alibaba-examples/nacos-example/nacos-discovery-example/readme-zh.md">项目老版本Spring-Cloud-Alibaba微服务-NACOS注册中心案例</a></p><p><strong>配置步骤</strong></p><ol><li><p>修改<code>pom.xml</code>文件，引入 Nacos Discovery Starter。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>在应用的<code>/src/main/resources/application.properties</code>（yaml也是可以的）配置文件中配置 Nacos Server 地址。</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.cloud.nacos.discovery.server-addr</span>=<span class="string">127.0.0.1:8848</span></span><br></pre></td></tr></table></figure></li><li><p>在SpringBoot启动类上使用<code>@EnableDiscoveryClient</code>注解开启服务注册与发现功能。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GulimallCouponApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(GulimallCouponApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h4 id="配置中心"><a href="#配置中心" class="headerlink" title="配置中心"></a>配置中心</h4><p><a href="https://github.com/alibaba/spring-cloud-alibaba/blob/greenwich/spring-cloud-alibaba-examples/nacos-example/nacos-config-example/readme-zh.md">项目老版本Spring-Cloud-Alibaba微服务-NACOS配置中心案例</a></p><p><strong>配置步骤</strong></p><ol><li><p>修改<code>pom.xml</code>文件，引入 Nacos Config Starter。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-config<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>在应用的<code>/src/main/resources/bootstrap.properties</code>配置文件中配置 Nacos Config 元数据。</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.application.name</span>=<span class="string">nacos-config-example</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.server-addr</span>=<span class="string">127.0.0.1:8848</span></span><br></pre></td></tr></table></figure></li><li><p>完成上述两步后，应用会从 Nacos Config 中获取相应的配置，并添加在 Spring Environment 的 PropertySources 中。这里我们使用 @Value 注解来将对应的配置注入到 SampleController 的 userName 和 age 字段，并添加 @RefreshScope 打开动态刷新功能。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RefreshScope</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SampleController</span> &#123;</span><br><span class="line">   </span><br><span class="line"><span class="meta">@Value(&quot;$&#123;user.name&#125;&quot;)</span></span><br><span class="line">String userName;</span><br><span class="line">   </span><br><span class="line"><span class="meta">@Value(&quot;$&#123;user.age&#125;&quot;)</span></span><br><span class="line"><span class="type">int</span> age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><p><strong>配置中心相关名词：</strong></p><ol><li>命名空间</li><li>配置集：所有配置的集合</li><li>配置集ID：类似于文件名</li><li>配置分组</li></ol><p>谷粒商城使用命名空间来隔离各个服务的配置，然后使用分组来区分不同环境的配置（开发、生产）</p><p><strong>指定命名空间与组</strong></p><p>默认命名空间为<code>public</code>，默认组为<code> DEFAULT_GROUP</code>。</p><p>在<code>/src/main/resources/bootstrap.properties</code>中，加入如下内容：</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 命名空间的ID</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.namespace</span>=<span class="string">8dd4b269-b8b3-4439-a242-8dc738c396f3</span></span><br><span class="line"><span class="comment"># 组名</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.group</span>=<span class="string">dev</span></span><br></pre></td></tr></table></figure><p><strong>扩展配置</strong></p><p>可将某个配置拆分为多个配置</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.application.name</span>=<span class="string">gulimall-coupon</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.server-addr</span>=<span class="string">127.0.0.1:8848</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.namespace</span>=<span class="string">8dd4b269-b8b3-4439-a242-8dc738c396f3</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.group</span>=<span class="string">dev</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.ext-config[0].data-id</span>=<span class="string">datasource.yml</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.ext-config[0].group</span>=<span class="string">dev</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.ext-config[0].refresh</span>=<span class="string">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.ext-config[1].data-id</span>=<span class="string">mybatis.yml</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.ext-config[1].group</span>=<span class="string">dev</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.ext-config[1].refresh</span>=<span class="string">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.ext-config[2].data-id</span>=<span class="string">other.yml</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.ext-config[2].group</span>=<span class="string">dev</span></span><br><span class="line"><span class="attr">spring.cloud.nacos.config.ext-config[2].refresh</span>=<span class="string">true</span></span><br></pre></td></tr></table></figure><h3 id="Feign"><a href="#Feign" class="headerlink" title="Feign"></a>Feign</h3><p><a href="https://springdoc.cn/spring-cloud-openfeign/">Spring Cloud OpenFeign 中文文档</a></p><p><strong>配置步骤</strong>（参考）</p><ol><li><p>导入spring-cloud-openfeign依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>在<code>feign</code>包下编写Feign接口</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.insectmk.gulimall.member.feign;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.insectmk.common.utils.R;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.openfeign.FeignClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"></span><br><span class="line"><span class="meta">@FeignClient(&quot;gulimall-coupon&quot;)</span><span class="comment">// 应用名称</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CouponFeignService</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/coupon/coupon/member/list&quot;)</span></span><br><span class="line">    R <span class="title function_">memberList</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>SpringBoot启动类开启OpenFeign客户端并配置Feign接口所在的包</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span></span><br><span class="line"><span class="meta">@EnableFeignClients(basePackages = &quot;cn.insectmk.gulimall.member.feign&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GulimallMemberApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(GulimallMemberApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>调用案例</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.insectmk.gulimall.member.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"><span class="keyword">import</span> cn.insectmk.common.utils.R;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;member/member&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MemberController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> MemberService memberService;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CouponFeignService couponFeignService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/test&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">R</span> <span class="variable">r</span> <span class="operator">=</span> couponFeignService.memberList();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> R.ok()</span><br><span class="line">                .put(<span class="string">&quot;coupons&quot;</span>, r.get(<span class="string">&quot;coupons&quot;</span>))</span><br><span class="line">                .put(<span class="string">&quot;message&quot;</span>, r.get(<span class="string">&quot;message&quot;</span>))</span><br><span class="line">                .put(<span class="string">&quot;msg&quot;</span>, <span class="string">&quot;调用成功！&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="网关"><a href="#网关" class="headerlink" title="网关"></a>网关</h3><p><a href="https://springdoc.cn/spring-cloud-gateway/">spring-cloud-gateway中文文档</a></p><p><strong>配置步骤</strong></p><ol><li><p>导入spring-cloud-gateway坐标</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-gateway<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>同样需要做服务注册&#x2F;发现。</p></li><li><p>可以自己配置路由规则及其他配置，具体路由规则查看<a href="https://springdoc.cn/spring-cloud-gateway/#gateway-request-predicates-factories">路由谓词工厂</a></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">test_route</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">https://www.baidu.com</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Query=url,baidu</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">qq_route</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">https://www.qq.com</span></span><br><span class="line">          <span class="attr">predicates:</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Query=url,qq</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="前端"><a href="#前端" class="headerlink" title="前端"></a>前端</h3><h4 id="ES6"><a href="#ES6" class="headerlink" title="ES6"></a>ES6</h4><ol><li><p>var与let的区别</p></li><li><p>结构表达式</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [a,b,c] = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> student = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;zhangsan&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">17</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123;stuName, stuAge&#125; = student</span><br></pre></td></tr></table></figure></li><li><p>字符串扩展函数（有很多）</p><ol><li>startWith()</li><li>endWith()</li></ol></li><li><p>字符串模板：就是反引号，可以用插值表达式<code>$&#123;&#125;</code></p></li><li><p>函数优化</p><ol><li><p>参数能够配合解构表达式使用</p></li><li><p>参数默认值</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">doSome</span>(<span class="params">num1, num2 = <span class="number">1</span></span>) &#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>不定参数</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">doSome</span>(<span class="params">...nums</span>) &#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>箭头函数</p><ol><li>this指向问题</li></ol></li></ol></li><li><p>对象优化</p><ol><li>对象扩展函数</li><li>对象声明简写</li><li>对象中的箭头函数的this不能使用，只能用对象名访问属性</li><li>对象扩展运算符<ol><li><p>拷贝（深拷贝）</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> student = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;zhangsan&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">17</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> zhangSan = &#123;...student&#125;</span><br></pre></td></tr></table></figure></li><li><p>扩展</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> studentName = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;zhangsan&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> studentAge = &#123;</span><br><span class="line">    <span class="attr">age</span>: <span class="number">72</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> student = &#123;...studentName, ...studentAge&#125;</span><br></pre></td></tr></table></figure></li></ol></li></ol></li><li><p>数组扩展</p><ol><li>map()：可以处理数组中的每一元素并返回。</li><li>reduce()：可以处理数组中的每一个元素，并且遍历时下一次能使用上次的结果。</li></ol></li><li><p>Promise</p></li><li><p>模块化</p><ol><li><p>export与export default的区别：</p><p>export可重复多次，并且需要用对象的某个属性接收。export default为一次性全部导出，只能使用一次，并且导出内容为一个对象，可以用任意名称的变量接收。</p></li></ol></li></ol><h4 id="Vue2"><a href="#Vue2" class="headerlink" title="Vue2"></a>Vue2</h4><p><a href="https://v2.cn.vuejs.org/v2/guide/">Vue2官方文档</a></p><ol><li>MVVM</li><li>声明式渲染</li><li>双向绑定</li><li>事件处理</li><li>动态class</li><li>动态style</li><li>事件修饰符</li><li>按键修饰符</li><li>遍历</li><li>判断</li><li>计算属性</li><li>监听器</li><li>过滤</li><li>组件</li><li>生命周期、钩子函数</li></ol><h4 id="Webpack"><a href="#Webpack" class="headerlink" title="Webpack"></a>Webpack</h4><p><a href="https://www.webpackjs.com/concepts/">Webpack中文文档</a></p><p>使用Vue-cli快速构建Vue前端工程。</p><p><strong>构建步骤</strong></p><ol><li><p>安装全局webpack包</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack -g</span><br></pre></td></tr></table></figure></li><li><p>安装全局vue-cli包</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @vue/cli-init</span><br></pre></td></tr></table></figure></li><li><p>使用webpack模板初始化项目</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue init webpack &lt;projecct-name&gt;</span><br></pre></td></tr></table></figure></li></ol><h4 id="ElementUI"><a href="#ElementUI" class="headerlink" title="ElementUI"></a>ElementUI</h4><p><a href="https://element.eleme.cn/#/zh-CN/component/installation">ElementUI中文文档</a></p><p><strong>在Vue工程使用ElementUI组件库</strong></p><ol><li><p>安装ElementUI</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i element-ui -S</span><br></pre></td></tr></table></figure></li><li><p>在<code>main.js</code>中导入ElemenUI</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ElementUI</span> <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-ui/lib/theme-chalk/index.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">ElementUI</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ol><h2 id="疑问"><a href="#疑问" class="headerlink" title="疑问"></a>疑问</h2><ol><li>var与let的区别</li><li>export与export default的区别</li></ol><h2 id="踩坑"><a href="#踩坑" class="headerlink" title="踩坑"></a>踩坑</h2><ol><li><p>VirtualBox跟vagrant配置多次不成功，换成了VMware</p></li><li><p>Spring-Cloud-Alibaba版本问题</p></li><li><p>EasyConnect软件占用10000端口，导致项目无法启动</p></li></ol><!-- flag of hidden posts -->]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 谷粒商城 </tag>
            
            <tag> 微服务 </tag>
            
            <tag> Java项目 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在1Panel中申请SSL证书</title>
      <link href="/posts/f3cf7d8c/"/>
      <url>/posts/f3cf7d8c/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>最近<a href="https://insectmk.cn/">Hexo个人博客</a>的SSL证书要过期了，又要手动去腾讯云申请免费的SSL证书了。</p><p>想到以后一到期就要去手动续费，非常的麻烦，就想利用下1Panel的自动申请证书功能了，并且管理起来还非常的方便。</p><h2 id="Acme账户"><a href="#Acme账户" class="headerlink" title="Acme账户"></a>Acme账户</h2><p>根据<a href="https://1panel.cn/docs/user_manual/websites/certificate_acme/">1Panel文档-Acme账户</a>，在1Panel面板的<code>网站/证书</code>模块下，点击<code>Acme账户</code>后再点击<code>创建账户</code>，输入邮箱即可创建Acme账户。</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/1panel-ssl/image-20240507174014220.png" alt="image-20240507174014220"></p><h2 id="DNS账户"><a href="#DNS账户" class="headerlink" title="DNS账户"></a>DNS账户</h2><p>根据<a href="https://1panel.cn/docs/user_manual/websites/certificate_dns/">1Panel文档-DNS账户</a>，需要有一个DNS权限的用户，这里演示如何使用腾讯云DNS来创建DNS账户。</p><h3 id="创建腾讯云用户"><a href="#创建腾讯云用户" class="headerlink" title="创建腾讯云用户"></a>创建腾讯云用户</h3><p>首先进入<a href="https://console.cloud.tencent.com/cam/overview">腾讯云控制台-访问管理</a>，找到 <strong>用户</strong> -&gt; <strong>用户列表</strong>，点击<code>新建用户</code>-&gt; <code>自定义创建</code>。</p><p><strong>依次完成以下步骤</strong>：</p><ol><li><p>选择类型：可访问资源并接收消息</p></li><li><p>填写用户信息：用户名随便填啦，我填的是<code>1panel-dns-demo</code>，<strong>勾选编程访问</strong>。</p></li><li><p>设置用户权限：搜下<code>dns</code>，勾选第一个<code>云解析 DNS 全读写访问权限</code>策略名为<code>QcloudDNSPodFullAccess</code>。</p></li><li><p>设置用户标签：有没有无所谓。</p></li><li><p>审阅信息和权限：看下用户信息有没有问题，没问题就点<code>完成</code>。</p></li></ol><p>完成后记得保存用户的<code>SecretId</code>与<code>SecretKey</code>，<strong>只会显示一次</strong>。</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/1panel-ssl/image-20240507175552422.png" alt="image-20240507175552422"></p><h3 id="创建DNS账户"><a href="#创建DNS账户" class="headerlink" title="创建DNS账户"></a>创建DNS账户</h3><p>转到1Panel面板，在<code>网站/证书</code>模块下，点击<code>DNS账户</code>后再点击<code>创建账户</code>，按要求输入信息即可创建DNS账户。</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/1panel-ssl/image-20240507180143213.png" alt="image-20240507180143213"></p><h2 id="申请证书"><a href="#申请证书" class="headerlink" title="申请证书"></a>申请证书</h2><p>确保Acme账户与DNS账户都已经创建完毕。</p><p>在1Panel面板的<code>网站/证书</code>模块下，点击<code>申请证书</code>，按要求输入申请内容即可申请证书。</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/1panel-ssl/image-20240507180646005.png" alt="image-20240507180646005"></p><p>申请日志出现<code>申请[xxxxx.xxx]证书成功！</code>，即为成功。</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">2024/05/07 18:06:54 开始申请证书,域名 [insectmk.cn] 申请方式 [DNS 自动] DNS 账号 [tencent-1panel-dns-demo] 厂商 [TencentCloud]</span><br><span class="line">2024/05/07 18:06:54 [INFO] [insectmk.cn] acme: Obtaining bundled SAN certificate</span><br><span class="line">2024/05/07 18:06:55 [INFO] [insectmk.cn] AuthURL: https://acme-v02.api.letsencrypt.org/acme/authz-v3/347729736667</span><br><span class="line">2024/05/07 18:06:55 [INFO] [insectmk.cn] acme: authorization already valid; skipping challenge</span><br><span class="line">2024/05/07 18:06:55 [INFO] [insectmk.cn] acme: Validations succeeded; requesting certificates</span><br><span class="line">2024/05/07 18:06:56 [INFO] [insectmk.cn] Server responded with a certificate.</span><br><span class="line">2024/05/07 18:06:56 申请 [insectmk.cn] 证书成功！！</span><br></pre></td></tr></table></figure><p>出现失败不要着急，在证书列表重新点一下申请再次尝试。</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/1panel-ssl/image-20240507180927263.png" alt="image-20240507180927263"></p><p>好了，现在到1Panel面板的<code>网站/网站</code>下去配置SSL证书，让你的网站支持HTTPS吧！</p><h2 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h2><h3 id="CloudFlare"><a href="#CloudFlare" class="headerlink" title="CloudFlare"></a>CloudFlare</h3><p>由于我的<code>insectmk.top</code>域名的DNS是由<a href="https://www.cloudflare-cn.com/">CloudFlare</a>解析的，所以想申请SSL证书，还得配置一个ClodFlare的DNS账户。</p><p><strong>获取API Token：</strong></p><ol><li><p>到<a href="https://dash.cloudflare.com/">CloudFlare 主页</a>点击右上角的<code>我的个人资料</code>或直接点击<a href="https://dash.cloudflare.com/profile/api-tokens">api-tokens</a>进入获取。</p></li><li><p>点击<code>创建令牌</code>，选择<code>编辑区域DNS</code>的<code>使用模板</code>，选择你需要的内容，我的设置内容如下：</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/1panel-ssl/image-20240726100441283.png" alt="image-20240726100441283"></p></li><li><p>点击<code>继续以显示摘要</code>，没问题则点击<code>创建令牌</code>，将生成的<code>API Token</code>保存好即可，1Panel使用方式参考<a href="https://1panel.cn/docs/user_manual/websites/certificate_dns/#13-cloudflare">DNS账户-1Panel文档</a>。</p></li></ol><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a href="https://1panel.cn/docs/user_manual/websites/certificate_create/">1Panel文档-申请证书</a></p><p><a href="https://1panel.cn/docs/user_manual/websites/certificate_dns/#13-cloudflare">DNS账户-1Panel文档</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 服务器 </tag>
            
            <tag> 1Panel </tag>
            
            <tag> SSL证书 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redis学习笔记（一）</title>
      <link href="/posts/a560e78/"/>
      <url>/posts/a560e78/</url>
      
        <content type="html"><![CDATA[<h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>Redis（Remote Dictionary Server）是一个开源的、基于内存运行的数据结构存储系统，可以用作数据库、缓存和消息传递中间件。</p><h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><table><thead><tr><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>String</td><td>字符串</td></tr><tr><td>Map</td><td>哈希（键值对）</td></tr><tr><td>List</td><td>列表（双向链表）</td></tr><tr><td>Sets</td><td>集合</td></tr><tr><td>Sorted Sets</td><td>有序集合</td></tr></tbody></table><h3 id="使用规范"><a href="#使用规范" class="headerlink" title="使用规范"></a>使用规范</h3><p>键格式：表名:主键名:主键值:字段名</p><h3 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h3><ol><li><p>对于只需要查看的对象数据可以存为JSON字符串</p></li><li><p>对于需要修改的对象数据可以存为Map类型</p></li><li><p>需要交并差运算的集合使用集合类型</p></li><li><p>List数据类型可以实现各种数据结构（栈、队列……）</p></li><li><p>对于有权重的任务管理可以使用Sorted Sets</p></li></ol><h2 id="Key操作"><a href="#Key操作" class="headerlink" title="Key操作"></a>Key操作</h2><ol><li>可查看某个key是否存在</li><li>可查看key下的值为什么类型</li><li>可设置key的失效时间</li></ol><h2 id="DB操作"><a href="#DB操作" class="headerlink" title="DB操作"></a>DB操作</h2><ol><li>一共有16个库（0-15）</li><li>可切换库</li><li>可清空某个库（慎用）</li><li>可清空所有库（慎用）</li></ol><h2 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h2><h3 id="Jedis"><a href="#Jedis" class="headerlink" title="Jedis"></a>Jedis</h3><p>一个能够操作Redis的Java第三方包，方法名跟Redis指令是对应的，maven坐标如下：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>redis.clients<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jedis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>简单使用：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 建立连接</span></span><br><span class="line"><span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Jedis</span>(<span class="string">&quot;localhost&quot;</span>, <span class="number">6379</span>);</span><br><span class="line"><span class="comment">// 操作Redis</span></span><br><span class="line">jedis.set(<span class="string">&quot;foo&quot;</span>, <span class="string">&quot;bar&quot;</span>);</span><br><span class="line">System.out.println(jedis.get(<span class="string">&quot;foo&quot;</span>));</span><br><span class="line"><span class="comment">// 断开连接</span></span><br><span class="line">jedis.close();</span><br></pre></td></tr></table></figure><p>连接池使用：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建连接池配置</span></span><br><span class="line"><span class="type">JedisPoolConfig</span> <span class="variable">jedisPoolConfig</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JedisPoolConfig</span>();</span><br><span class="line">jedisPoolConfig.setMaxTotal(<span class="number">30</span>); <span class="comment">// 最大连接数</span></span><br><span class="line">jedisPoolConfig.setMaxIdle(<span class="number">10</span>); <span class="comment">// 最大活动连接数</span></span><br><span class="line"><span class="comment">// 创建连接池</span></span><br><span class="line"><span class="type">JedisPool</span> <span class="variable">jedisPool</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JedisPool</span>(jedisPoolConfig, <span class="string">&quot;localhost&quot;</span>, <span class="number">6379</span>);</span><br><span class="line"><span class="comment">// 获取连接</span></span><br><span class="line"><span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> jedisPool.getResource();</span><br><span class="line"><span class="comment">// 操作Redis</span></span><br><span class="line">jedis.set(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;InsectMk&quot;</span>);</span><br><span class="line">System.out.println(jedis.get(<span class="string">&quot;name&quot;</span>));</span><br></pre></td></tr></table></figure><h3 id="RedisDesktopManager"><a href="#RedisDesktopManager" class="headerlink" title="RedisDesktopManager"></a>RedisDesktopManager</h3><p><a href="https://github.com/RedisInsight/RedisDesktopManager">RedisDesktopManager</a>，一个Redis可视化客户端。</p><h2 id="高级应用"><a href="#高级应用" class="headerlink" title="高级应用"></a>高级应用</h2><ol><li>启动时可指定端口号、配置文件等</li><li>配置文件可设置日志输入路径</li></ol><h3 id="持久化"><a href="#持久化" class="headerlink" title="持久化"></a>持久化</h3><p>在Redis数据库中，有RDB（Redis Database File）和AOF（Append Only File）两种不同的持久化机制，用于在数据库崩溃或重启时保存和恢复数据。</p><h4 id="RDB"><a href="#RDB" class="headerlink" title="RDB"></a>RDB</h4><p>保存所有的数据，占用时间长</p><ol><li>save：立即执行</li><li>bgsave：异步执行</li></ol><h4 id="AOF"><a href="#AOF" class="headerlink" title="AOF"></a>AOF</h4><p>保存数据的操作</p><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a href="https://www.bilibili.com/video/BV1CJ411m7Gc/?p=30&share_source=copy_web&vd_source=cd44bd88cfb9d05a93580856f71e9389">黑马程序员Redis入门到精通，深入剖析Redis缓存技术，Java企业级解决方案redis教程</a></p><p><a href="https://redis.com.cn/tutorial.html">Redis中文教程</a></p>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 学习 </tag>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>联想拯救者Y7000P-2022清灰</title>
      <link href="/posts/25cb1d21/"/>
      <url>/posts/25cb1d21/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>笔记本从买来就没有清过灰，最近明显感觉到笔记本的温度很高，开机使用迅雷下个电影CPU的温度就飙升到了<strong>98&deg;C</strong>。</p><p>天哪，是时候清灰了，没有清灰过程的图片，就记录个大概，方便下次清灰。</p><h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><ol><li><a href="https://item.jd.com/10053963247956.html">霍尼韦尔PTM7950相变导热片</a>：看贴吧别人用的这个，也是第一次用这种，感觉挺方便的，送的工具很全（螺丝刀&#x2F;撬片）</li><li>螺丝刀：用来拆外壳和风扇</li><li>撬棒&#x2F;片：用来拆外壳</li></ol><h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><h3 id="防静电"><a href="#防静电" class="headerlink" title="防静电"></a>防静电</h3><p>用肥皂清洗双手，并擦干，摸一下房门铁把手放下静电</p><h3 id="拆外壳"><a href="#拆外壳" class="headerlink" title="拆外壳"></a>拆外壳</h3><p>先将笔记本的<strong>所有外设移除</strong>并<strong>关机</strong>，然后将底部外壳螺丝全部拧掉（最后一排是短螺丝，其他的为长螺丝），并放好。</p><p>所有螺丝拧掉后使用撬片慢慢将底壳分离（从连接屏幕的那一端开始）。</p><p>移除底壳后将电源排线拔掉，并按下开机键放一下静电。</p><h3 id="拆铜管"><a href="#拆铜管" class="headerlink" title="拆铜管"></a>拆铜管</h3><p>先将两个硬盘的散热马甲移除。</p><p>拔掉两个风扇的电源线（慢慢摇摆移除）。</p><p>依次来回拧松直至拧掉（其实掉不下来）散热铜管的螺丝。</p><p>将散热铜管拆下后可将风扇的螺丝拧下（一边5个）。</p><p>开始清灰（旧硅脂、风扇灰尘），旧硅脂一定要清理干净，包括散热铜管跟核心上的。</p><p>清灰完成后开始上硅脂了，按照CPU核心与GPU核心的大小裁剪相变导热片，去除一边的保护膜后贴到散热铜管对应的位置上（有刻度线）。</p><h3 id="安装铜管"><a href="#安装铜管" class="headerlink" title="安装铜管"></a>安装铜管</h3><p>清灰完成后先将风扇安装好。</p><p>撕去铜管上相变导热片的保护膜，然后开始安装铜管（依次来回拧紧）。</p><p>插上两个风扇的电源线。</p><p>安装两个硬盘的散热马甲。</p><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>插上电源排线，按下电源键，看下能否开机，能开机就可以将底壳装上了。（大功告成！）</p><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a href="https://tieba.baidu.com/p/8305739396">笔记本换硅脂加硬盘</a></p><p><a href="https://www.bilibili.com/video/BV1su411B71o/?share_source=copy_web&vd_source=cd44bd88cfb9d05a93580856f71e9389">小秋搞机 联想拯救者Y7000P R7000P 2022拆机视频升级内存硬盘无线网卡清灰维护</a></p>]]></content>
      
      
      <categories>
          
          <category> 日常 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记本 </tag>
            
            <tag> 清灰 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue2配置Vuex并使用</title>
      <link href="/posts/2121156e/"/>
      <url>/posts/2121156e/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>最近在做前端的时候，发现前端一直发送重复的请求来获取数据，虽然能使数据保持最新，但是后端的压力也大大增加。</p><p>想到Vuex能够存储数据，就打算使用Vuex来帮自己解决这个问题。</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>执行以下命令进行安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vuex@3 --save</span><br></pre></td></tr></table></figure><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>在项目根目录下新建<code>store/index.js</code>，写入以下内容：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用来存储数据</span></span><br><span class="line"><span class="keyword">const</span> state = &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 响应组件中的事件</span></span><br><span class="line"><span class="keyword">const</span> actions = &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 操作数据</span></span><br><span class="line"><span class="keyword">const</span> mutations = &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 用来将state数据进行加工</span></span><br><span class="line"><span class="keyword">const</span> getters = &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 新建并暴露store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">    state,</span><br><span class="line">    actions,</span><br><span class="line">    mutations,</span><br><span class="line">    getters</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>更改<code>main.js</code>，增加以下内容：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store/index&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>),</span><br><span class="line">  store</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="案例代码"><a href="#案例代码" class="headerlink" title="案例代码"></a>案例代码</h2><p><code>store/index.js</code>，其中<code>etModelVersionAll</code>为自定义的Axios请求</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;getModelVersionAll&#125; <span class="keyword">from</span> <span class="string">&#x27;@/api&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 用来存储数据</span></span><br><span class="line"><span class="keyword">const</span> state = &#123;</span><br><span class="line">    <span class="comment">// 模型数据</span></span><br><span class="line">    <span class="attr">models</span>: []</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 响应组件中的事件</span></span><br><span class="line"><span class="keyword">const</span> actions = &#123;</span><br><span class="line">    <span class="comment">// 获取所有的模型</span></span><br><span class="line">    <span class="title function_">getModelVersionAll</span>(<span class="params">&#123; commit &#125;</span>) &#123;</span><br><span class="line">        <span class="title function_">getModelVersionAll</span>().<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">commit</span>(<span class="string">&#x27;setModels&#x27;</span>, res.<span class="property">data</span>.<span class="property">data</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 操作数据</span></span><br><span class="line"><span class="keyword">const</span> mutations = &#123;</span><br><span class="line">    <span class="title function_">setModels</span>(<span class="params">state, data</span>) &#123;</span><br><span class="line">        state.<span class="property">models</span> = data</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 用来将state数据进行加工</span></span><br><span class="line"><span class="keyword">const</span> getters = &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 新建并暴露store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">    state,</span><br><span class="line">    actions,</span><br><span class="line">    mutations,</span><br><span class="line">    getters</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在页面中使用以下代码获取数据</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">computed</span>: &#123;</span><br><span class="line">    <span class="title function_">models</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">state</span>.<span class="property">models</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 获取模型信息</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&#x27;getModelVersionAll&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://blog.csdn.net/weixin_44431073/article/details/125097284">【vue2】vuex的安装、配置与使用</a></p><p><a href="https://vuex.vuejs.org/zh/guide/">Vuex官方文档</a></p>]]></content>
      
      
      <categories>
          
          <category> 程序配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 毕业设计 </tag>
            
            <tag> Vue2 </tag>
            
            <tag> Vuex </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>为Butterfly主题添加RSS订阅</title>
      <link href="/posts/d1271256/"/>
      <url>/posts/d1271256/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p><strong>RSS是什么</strong></p><p>RSS（Really Simple Syndication，简易信息聚合）是一种用于发布经常更新信息的网页内容格式，例如博客文章、新闻、音频或视频。它允许用户订阅他们感兴趣的内容，并通过RSS阅读器自动接收更新，而不必亲自访问每个网站。</p><p><strong>ATOM是什么</strong></p><p>ATOM是RSS2.0的改进方案，因为RSS2.0的标准已经冻结，所以才出了ATOM。</p><p>主要改进是ATOM可以通过标签识别一个内容是否是全文输出而RSS2.0不可以。</p><p>同时，ATOM不仅能够判断出内容是否是全文输出，在终端软件使用该FEED时，还可以从中得到哪一部分是“摘要”哪一部分是“全文”方便进行区别显示。</p><p>来自<a href="https://www.zhihu.com/question/19593963/answer/12361526">知乎-逍遥小妖</a></p><p><strong>为什么要加</strong></p><p>最近从室友<a href="https://moenya.cat/">Moe_Nya</a>那了解到RSS这个东西，感觉很有用，所以想给自己的网站也加一个。</p><h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><p>进入到博客根目录，执行以下命令下载RSS插件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-feed --save</span><br></pre></td></tr></table></figure><p>修改<code>_config.yml</code>，增加以下内容：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># RSS订阅：https://github.com/hexojs/hexo-generator-feed</span></span><br><span class="line"><span class="attr">feed:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span>  <span class="comment"># 启用或禁用Feed插件，true为启用，false为禁用</span></span><br><span class="line">  <span class="attr">type:</span> <span class="comment"># 设置Feed的类型，可以是atom或rss2，或者两者都输出</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">atom</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">rss2</span></span><br><span class="line">  <span class="attr">path:</span> <span class="comment"># 设置Feed文件的路径，当输出两种类型时，需要按照类型顺序设置路径</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">atom.xml</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">rss2.xml</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">20</span>  <span class="comment"># 设置Feed中显示的文章数量上限，0或false表示显示所有文章</span></span><br><span class="line">  <span class="attr">hub:</span>  <span class="comment"># PubSubHubbub中心URL，如果不使用可以留空</span></span><br><span class="line">  <span class="attr">content:</span>  <span class="comment"># 是否在Feed中包含文章全文内容，true为包含，false为不包含</span></span><br><span class="line">  <span class="attr">content_limit:</span> <span class="number">140</span>  <span class="comment"># 设置Feed中文章内容的长度限制，仅当content为false时有效</span></span><br><span class="line">  <span class="attr">content_limit_delim:</span> <span class="string">&#x27; &#x27;</span>  <span class="comment"># 设置内容长度限制的分割符，默认为空格</span></span><br><span class="line">  <span class="attr">order_by:</span> <span class="string">-date</span>  <span class="comment"># 设置Feed中文章的排序方式，默认按日期倒序</span></span><br><span class="line">  <span class="attr">icon:</span> <span class="string">icon.png</span>  <span class="comment"># 设置Feed的图标，默认使用_config.yml中指定的电子邮件的gravatar</span></span><br><span class="line">  <span class="attr">autodiscovery:</span> <span class="literal">true</span>  <span class="comment"># 是否启用Feed的自动发现功能，true为启用，false为禁用</span></span><br><span class="line">  <span class="attr">template:</span>  <span class="comment"># 设置自定义Feed模板的路径，可以指定一个或多个模板</span></span><br></pre></td></tr></table></figure><p>修改<code>_config.butterfly.yml</code>，增加以下内容：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">social:</span></span><br><span class="line">  <span class="attr">fas fa-rss:</span> <span class="string">/atom.xml</span> <span class="string">||</span> <span class="string">订阅-ATOM</span></span><br><span class="line">  <span class="attr">fas fa-rss:</span> <span class="string">/rss2.xml</span> <span class="string">||</span> <span class="string">订阅-RSS2</span></span><br><span class="line"></span><br><span class="line"><span class="attr">rss:</span> </span><br><span class="line">  <span class="bullet">-</span> <span class="string">/atom.xml</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">/rss2.xml</span></span><br></pre></td></tr></table></figure><p>然后Hexo三连就可以了。</p><p>可以到<a href="https://github.com/hexojs/hexo-generator-feed">hexo-generator-feed仓库</a>查看具体使用方法。</p><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p><strong>Android</strong></p><p><a href="https://github.com/Ashinch/ReadYou">Read You</a>：<a href="https://github.com/Ashinch/ReadYou/blob/main/README-zh-CN.md">一个以 <a href="https://m3.material.io/">Material You</a> 风格呈现的 Android RSS 阅读器。</a></p><p><strong>MacOS &amp; IOS</strong></p><p><a href="https://github.com/Ranchero-Software/NetNewsWire">Net News Wire</a>：RSS reader for macOS and iOS.</p><p><strong>Windows</strong></p><p><a href="https://github.com/yang991178/fluent-reader">Fluent Reader</a>：Modern desktop RSS reader built with Electron, React, and Fluent UI</p><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://www.xiaoliu.life/p/20231001a/">hexo + butterfly主题加rss订阅</a></p><p><a href="https://github.com/hexojs/hexo-generator-feed">hexo-generator-feed</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Butterfly </tag>
            
            <tag> RSS </tag>
            
            <tag> ATOM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网站更新日志（2024/04/19~2024/08/09）</title>
      <link href="/posts/d7252e66/"/>
      <url>/posts/d7252e66/</url>
      
        <content type="html"><![CDATA[<details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-08-09]-Hexo博客-更新配置</summary><div class="toggle-content"><p><strong>Waline文章反应</strong></p><blockquote><p>修改为本地图片，修改主题配置<code>_config.butterfly.yml</code>与<code>_config.anzhiyu.yml</code>：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">waline:</span></span><br><span class="line">  <span class="attr">option:</span> <span class="comment"># waline的客户端配置 https://waline.js.org/guide/get-started/client.html</span></span><br><span class="line">    <span class="attr">reaction:</span> [ <span class="comment"># 快速开启文章反应 https://waline.js.org/guide/features/reaction.html</span></span><br><span class="line">      <span class="string">&#x27;/static/img/waline/tieba_agree.png&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;/static/img/waline/tieba_look_down.png&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;/static/img/waline/tieba_sunglasses.png&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;/static/img/waline/tieba_pick_nose.png&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;/static/img/waline/tieba_awkward.png&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;/static/img/waline/tieba_sleep.png&#x27;</span>,</span><br><span class="line">    ]</span><br></pre></td></tr></table></figure></blockquote><p><strong>安知鱼</strong></p><blockquote><p>修改配置文件，小修小改</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-08-08]-Hexo博客-豆瓣页面插件</summary><div class="toggle-content"><p><strong>生成页面报错</strong></p><blockquote><p>执行<code>hexo douban</code>时报错，具体内容看<a href="https://github.com/mythsman/hexo-douban/issues/178">生成页面时报错：Unhandled rejection SyntaxError: Unexpected token ‘&lt;’, “<html> &lt;h”… is not valid JSON #178</a>。</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-08-05]-服务器-1Panel本地应用</summary><div class="toggle-content"><p><strong>okxlin&#x2F;appstore</strong></p><blockquote><p>1Panel增加<a href="https://github.com/okxlin/appstore">第三方应用商店</a>，感觉这个更新挺频繁的，推荐使用，根据<a href="https://github.com/okxlin/appstore/blob/localApps/README.md">仓库文档</a>在<code>1Panel</code>计划任务类型<code>Shell 脚本</code>的计划任务框里，添加并执行以下命令，或者终端运行以下命令，随后到应用商店点击<code>更新应用列表</code>即可：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> -b localApps https://mirror.ghproxy.com/https://github.com/okxlin/appstore /opt/1panel/resource/apps/local/appstore-localApps</span><br><span class="line"></span><br><span class="line"><span class="built_in">cp</span> -rf /opt/1panel/resource/apps/local/appstore-localApps/apps/* /opt/1panel/resource/apps/local/</span><br><span class="line"></span><br><span class="line"><span class="built_in">rm</span> -rf /opt/1panel/resource/apps/local/appstore-localApps</span><br></pre></td></tr></table></figure><p>通过第三方应用安装了<a href="https://github.com/v2rayA/v2rayA">v2rayA</a>。</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-08-02]-InsectMk状态更新</summary><div class="toggle-content"><p><strong>增删网站</strong></p><blockquote><p>删除<a href="https://zentao.insectmk.cn/">禅道</a>，太不稳定了！！！</p><p>增加<a href="https://showdoc.insectmk.cn/">ShowDoc</a>，方便编写API文档</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-08-01]-Hexo博客更新-安知鱼</summary><div class="toggle-content"><p><strong>删除页面</strong></p><blockquote><p>启动脚本去除豆瓣娱乐页面的生成。</p><p>菜单取消豆瓣娱乐页面的导航。</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-07-30]-Hexo博客更新-安知鱼</summary><div class="toggle-content"><p><strong>更新一些配置</strong></p><blockquote><p>更新一下图标与主题风格配置，与主站保持一致，并清除一些报错的页面。</p><p>增加在线聊天按钮，与主站保持一致。</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-07-26]-Hexo博客/服务器-安知鱼更新-CloudFlare_DNS</summary><div class="toggle-content"><p><strong>Hexo博客</strong></p><blockquote><p>更新<a href="https://github.com/mythsman/hexo-douban">douban插件</a>页面的do、wish、collect顺序。</p><p>更新<code>Hexo</code>博客插件版本，参考<a href="https://blog.csdn.net/COCOLI_BK/article/details/109068963">npm——将所有 Node.js 依赖包更新到最新版本</a>，执行以下步骤：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 第一步全局安装：</span></span><br><span class="line">npm install -g npm-check-updates</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 第二步运行，作用：升级 package.json 文件的 dependencies 和 devDependencies 中的所有版本</span></span><br><span class="line">ncu -u </span><br><span class="line"> </span><br><span class="line"><span class="comment"># 第三步更新，作用：package-lock.json 文件会被新版本填充</span></span><br><span class="line">npm install</span><br></pre></td></tr></table></figure></blockquote><p><strong>Hexo博客-安知鱼</strong></p><blockquote><p>增加备案信息，在<code>_config.anzhiyu.yml</code>下增加配置：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">footer:</span></span><br><span class="line">  <span class="attr">footerBar:</span></span><br><span class="line">    <span class="attr">linkList:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">link:</span> <span class="string">https://beian.miit.gov.cn/</span></span><br><span class="line">        <span class="attr">text:</span> <span class="string">蜀ICP备2023013851号-2</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">link:</span> <span class="string">https://beian.mps.gov.cn/#/query/webSearch?code=51142202000154</span></span><br><span class="line">        <span class="attr">text:</span> <span class="string">川公网安备51142202000154号</span></span><br></pre></td></tr></table></figure><p>增加本地搜索，在<code>_config.anzhiyu.yml</code>下增加配置：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">preload:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">CDN:</span></span><br></pre></td></tr></table></figure><p>修改其他无关紧要的配置</p></blockquote><p><strong>CloudFlare DNS</strong></p><blockquote><p><code>1Panel/网站/证书</code>增加<code>CloudFlare DNS</code>账户，方便自动申请<code>insectmk.top</code>域名的SSL证书，参考<a href="/posts/f3cf7d8c/" title="在1Panel中申请SSL证书">在1Panel中申请SSL证书</a>。</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-07-25]-Hexo博客更新-双主题（大更新）</summary><div class="toggle-content"><p><strong>增加主题</strong></p><blockquote><p>增加<a href="https://docs.anheyu.com/">安知鱼主题</a>，Hexo博客双主题参考<a href="https://www.hozen.site/archives/67/">Hexo 的多主题自动化部署</a>。</p><p>部署在<a href="https://insectmk.top/">insectmk.top</a>上，之前的Halo博客转移到<a href="https://halo.insectmk.cn/">halo.insectmk.cn</a>。</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-07-24]-Hexo博客更新-减少推荐文章</summary><div class="toggle-content"><p><strong>减少推荐文章</strong></p><blockquote><p>文章末尾的推荐文章由6篇减少为3篇</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-07-23]-Hexo博客更新-Waline评论服务端/Hexo版本</summary><div class="toggle-content"><p><strong>更新Waline评论服务端</strong></p><blockquote><p>@waline&#x2F;server 由<code>v1.31.14</code>更新到<code>v1.32.0</code>（重新拉取Docker镜像，1Panel更新时勾选<code>强制拉取镜像</code>复选框）</p></blockquote><p><strong>更新博客版本</strong></p><blockquote><p>参考<a href="https://insectmk.cn/posts/9e7fad42/">2024-04-16-Hexo博客优化日志</a>，在博客根目录执行以下内容：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看过时插件</span></span><br><span class="line">npm outdated</span><br><span class="line"><span class="comment"># 更新插件</span></span><br><span class="line">npm update</span><br><span class="line"></span><br><span class="line">&#123;% endhideToggle %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% hideToggle [2024-07-22]-Hexo博客更新-文章反应,#EEF7FA, %&#125;</span><br><span class="line"></span><br><span class="line">**增加文章反应**</span><br><span class="line"></span><br><span class="line">为Hexo博客增加Waline评论的文章反应，参考如下：</span><br><span class="line"></span><br><span class="line">[定制自己的 Waline 评论系统](https://uuanqin.top/p/dd188b35/index.html)</span><br><span class="line"></span><br><span class="line">[客户端简介|Waline](https://waline.js.org/guide/get-started/client.html)</span><br><span class="line"></span><br><span class="line">[文章反应|Waline](https://waline.js.org/guide/features/reaction.html)</span><br><span class="line"></span><br><span class="line">在`_config.butterfly.yml`下配置如下内容即可：</span><br><span class="line"></span><br><span class="line">```yaml</span><br><span class="line">waline:</span><br><span class="line">  option:</span><br><span class="line">    reaction: <span class="literal">true</span></span><br></pre></td></tr></table></figure></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-07-20]-Hexo博客更新</summary><div class="toggle-content"><p><strong>增加文章隐藏插件</strong></p><blockquote><p>为Hexo博客增加<a href="https://github.com/prinsss/hexo-hide-posts">hexo-hide-posts文章隐藏插件</a>。</p><p>参考博文<a href="/posts/9c83ed78/" title="无需更改源码！让你的Hexo的文章在首页隐藏">无需更改源码！让你的Hexo的文章在首页隐藏</a>。</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-07-19]-在线状态更新</summary><div class="toggle-content"><p><strong>新增监控</strong></p><blockquote><p>将<a href="https://dashboard.uptimerobot.com/integrations">UptimeRobot Api Keys</a>由<code>Read-Only Key</code>转为<code>Monitor-Specific Key</code>。</p><p><strong>新增以下监控：</strong></p><ol><li><p><a href="https://coder.insectmk.cn/">在线VScode</a></p></li><li><p><a href="https://zentao.insectmk.cn/">开源项目管理网站-禅道</a></p></li><li><p><a href="https://memos.insectmk.cn/">memos一款隐私优先的轻量级笔记服务</a></p></li></ol></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-07-18]-服务器更新</summary><div class="toggle-content"><p><strong>增加应用</strong></p><blockquote><ul><li><p>增加<a href="https://coder.com/">在线VScode编辑器 code-server</a>：1Panel应用商店构建，<a href="https://coder.insectmk.cn/">部署地址</a>。</p></li><li><p>增加<a href="https://www.zentao.net/">开源项目管理软件-禅道</a>：1Panel应用商店构建，<a href="https://zentao.insectmk.cn/">部署地址</a>。</p><ul><li>安装时需要填写数据库地址（<strong>Docker部署的得填容器的IP地址</strong>……）</li><li>安装时不要使用HTTPS协议</li></ul></li></ul></blockquote><p><strong>DNS</strong></p><blockquote><p><code>insectmk.top</code>域名现全权由<a href="https://dash.cloudflare.com/">cloudflare</a>代理，无需在1Panel配置SSL证书。</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-07-18]-Hexo博客更新</summary><div class="toggle-content"><p><strong>发布</strong></p><blockquote><p>取消编译后代码发布由Gitee同步到Github的策略，改为<code>hexo deploy</code>时同时发布到Gitee与Github，修改<code>_config.yml</code>配置如下：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="comment"># Gitee上传</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">    <span class="attr">repo:</span> <span class="string">https://gitee.com/insectmk/insectmk.git</span></span><br><span class="line">    <span class="attr">branch:</span> <span class="string">master</span></span><br><span class="line">    <span class="attr">message:</span> <span class="comment"># &#x27;blog update&#x27;</span></span><br><span class="line">  <span class="comment"># Github上传</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">    <span class="attr">repo:</span> <span class="string">https://github.com/insectmk/insectmk.github.io.git</span></span><br><span class="line">    <span class="attr">branch:</span> <span class="string">master</span></span><br><span class="line">    <span class="attr">message:</span> <span class="comment"># &#x27;blog update&#x27;</span></span><br></pre></td></tr></table></figure></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-07-12]-Hexo博客更新</summary><div class="toggle-content"><p><strong>AI摘要</strong></p><blockquote><p>关闭打字机效果</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-06-14]-服务器更新</summary><div class="toggle-content"><p><strong>Memos</strong></p><blockquote><p>增加<a href="https://memos.insectmk.cn/">Memos笔记网站</a>，<a href="https://www.usememos.com/">官网地址</a>、<a href="https://github.com/usememos/memos">仓库地址</a>。</p><p>虽然是docker部署，感觉占用蛮小的，镜像也就<code>60MB</code>。</p><p>默认是英文，可以到设置页面切换为中文，还可以下载安卓客户端<a href="https://github.com/mudkipme/MoeMemosAndroid">MoeMemosAndroid</a>，不过需要将Memos的版本回退到<code>0.21.0</code>才能用，客户端应该是更新得太慢了（我就不会退了，我等这个客户端更新！）。</p><p>目前将<a href="https://flowus.cn/product">Flowus 息流</a>得隐私数据全部转移到了这个<a href="https://memos.insectmk.cn/">Memos笔记网站</a>上，方便管理。</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-06-13]-服务器更新</summary><div class="toggle-content"><p><strong>insectmk.top</strong></p><blockquote><p>将<a href="http://frp.insectmk.top/">frp.insectmk.top</a>转移到了<a href="https://frp.insectmk.cn/">frp.insectmk.cn</a>。</p><p>将<code>*.frp.insectmk.top</code>泛解析转移到了<code>*.frp.insectmk.cn</code>。</p><p>计划将insectmk.top域名托管到<a href="https://dash.cloudflare.com/">cloud flare</a>了。</p><p>今天尝试了一下<a href="https://global.v2ex.com/t/1007922">用 cloudflare worker 搭建一个 Docker 镜像</a>，结果影响到了我其他的网站，目前还不知道怎么解决，先慢慢迁移到insectmk.cn再说。</p><p>目前已经知道怎么解决了，将被影响的网站的<code>代理状态</code>由<code>已代理</code>更改为<code>仅DNS</code>即可。</p></blockquote><p><strong>SSH端口</strong></p><blockquote><p>更改了一下SSH端口，减小碰撞成功概率。</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-06-12]-Hexo博客更新</summary><div class="toggle-content"><p><strong>Hexo博客</strong></p><blockquote><p>更改了以下日志文章的文件名，方便以后管理。</p></blockquote><p><strong>1Panel面板</strong></p><blockquote><p>重新购买了专业版，赶上618活动了，￥459拿下，还送了一年的<code>insectmk.cn</code>的SSL证书跟一把晴雨两用伞。</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-06-06]-Hexo博客更新</summary><div class="toggle-content"><p><strong>Hexo博客</strong></p><blockquote><p>更新博客菜单结构，增加日志一级菜单，用于记录各种非服务的更新内容（个人向）。</p><p>将<a href="/website/log/">“网站&#x2F;日志”页面</a>移动到<a href="/log/website">“日志&#x2F;个人网站”</a>页面，并转移相应的Waline评论。</p><p>增加<a href="/log/pc/">“日志&#x2F;个人电脑”页面</a>。</p></blockquote><p><strong>服务器续费</strong></p><blockquote><p>今天又小小的续费了一下腾讯云服务器<code>￥378</code>就续费了一年，到期时间<code>2027-05-24 10:08:29</code>，这下很久都不用再续费了。</p><p><a href="https://insectmk.top/">insectmk.top</a>的域名也续费了一年，优惠了4块钱，28一年，也不是很贵。</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-06-04]-博客更新</summary><div class="toggle-content"><p><strong>Halo博客</strong></p><blockquote><ol><li>增加备案信息</li><li>更新插件</li></ol></blockquote><p><strong>Hexo博客</strong></p><blockquote><p><code>_config.butterfly.yml</code>增加以下配置：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">error_404:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>增加404页面处理（在1Panel中为Hexo博客网站添加404重定向即可，重定向到<a href="https://insectmk.cn/404.html">https://insectmk.cn/404.html</a>）</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-05-27]-Hexo博客更新</summary><div class="toggle-content"><ol><li>图库增加新模块（我们）。</li><li>根据Butterfly官方文档微调了一下主题配置。</li><li>更新Waline的Docker版服务端（多种方法）：在1Panel面板的容器管理中，找到Waline-Server点一下升级容器（强制拉取镜像）就行了。</li></ol></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-05-17]-Hexo博客更新</summary><div class="toggle-content"><p><strong>更改网站菜单结构</strong></p><blockquote><p>把求生之路与我的世界服务器说明文章改成页面，感觉作为置顶文章不太好。</p><p>迁移地址如下：</p><ol><li><a href="/server/left4dead2/">求生之路2服务器说明</a></li><li><a href="/server/minecraft/">我的世界老九门服务器说明</a></li></ol><p>修改后并到<a href="https://console.leancloud.cn/apps">LeanCloud</a>转移对应文章的评论到页面。</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-05-11]-服务器更新</summary><div class="toggle-content"><p><strong>新增网站状态监控页</strong></p><blockquote><p>应该会是常驻页面了，域名是<a href="https://status.insectmk.cn/">status.insectmk.cn</a>。</p><p>搭建过程记录在<a href="/posts/bf075edd/" title="使用uptime-status搭建网站监控页面">使用uptime-status搭建网站监控页面</a>。</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-05-07]-服务器更新</summary><div class="toggle-content"><p><strong>更新SSL证书</strong></p><blockquote><p>之前一直在腾讯云手动申请的SSL证书，想到以后维护有点儿麻烦，就打算废弃这个方式。</p><p>转而使用1Panel的证书管理功能，不仅支持自动续签还能很好的管理网站。</p></blockquote><p><strong>移除Leanote蚂蚁笔记</strong></p><blockquote><p>之前在服务器部署蚂蚁笔记用来记录一些东西</p><p>但是发现这东西不仅占存储还不太安全，现在转为第三方的笔记平台<a href="https://flowus.cn/product">FlowUs 息流</a>。</p><p>不仅能减轻服务器压力，还安全点儿。</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-05-06]-Hexo博客更换个人头像</summary><div class="toggle-content"><blockquote><p>更换为小狗头像，友联页面将头像后缀由<code>.png</code>改成了<code>.jpg</code>（因为发现.png比.jpg格式的图片要大很多）。</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-04-23]-Hexo博客评论增加等级标签</summary><div class="toggle-content"><blockquote><p>在Docker部署的Waline服务端增加环境变量<code>LEVELS=0,10,20,50,100,200</code></p><p>具体查看<a href="https://waline.js.org/reference/server/env.html">服务端环境变量</a></p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-04-21]-Hexo博客增加RSS订阅</summary><div class="toggle-content"><blockquote><p>现在到主页个人信息栏点击RSS图标即可查看RSS订阅链接。</p><p>参考<a href="/posts/d1271256/" title="为Butterfly主题添加RSS订阅">为Butterfly主题添加RSS订阅</a>。</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-04-20]-Hexo博客优化</summary><div class="toggle-content"><p><strong>Waline评论优化</strong></p><blockquote><p>评论时强制要求填写昵称、邮箱</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">waline:</span></span><br><span class="line">  <span class="attr">option:</span> </span><br><span class="line">    <span class="attr">requiredMeta:</span> [ <span class="string">nick</span>, <span class="string">mail</span> ] <span class="comment"># 选定昵称和评论为必填项</span></span><br><span class="line">    <span class="attr">locale:</span></span><br><span class="line">      <span class="attr">placeholder:</span> <span class="string">欢迎评论哟~</span> <span class="comment"># 内容区提示</span></span><br></pre></td></tr></table></figure></blockquote><p><strong>AI摘要配置修改</strong></p><blockquote><p>根据<a href="https://github.com/qxchuckle/Post-Summary-AI/blob/master/Advanced.md">Post-Summary-AI进阶操作</a>，增加日志摘要黑名单</p></blockquote></div></details><!-- flag of hidden posts -->]]></content>
      
      
      <categories>
          
          <category> 日志 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 个人博客 </tag>
            
            <tag> 网站 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>部署Hexo博客后台系统Qexo</title>
      <link href="/posts/637bb1fe/"/>
      <url>/posts/637bb1fe/</url>
      
        <content type="html"><![CDATA[<h2 id="部署程序"><a href="#部署程序" class="headerlink" title="部署程序"></a>部署程序</h2><h3 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h3><p>点击<a class="btn-anzhiyu larger" href="https://vercel.com/new/clone?repository-url=https://github.com/am-abudu/Qexo"   title="一键部署"><i class="fas fa-chevron-circle-up"></i><span>一键部署</span></a>，部署服务端。</p><p>随便取一个仓库名字都可以，然后点击<code>create</code></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/hexo-qexo-build/image-20240420103322403.png" alt="image-20240420103322403"></p><h3 id="修复"><a href="#修复" class="headerlink" title="修复"></a>修复</h3><p>首次部署会报错, 标红的信息有：</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">./migrate.sh: line 1: pip: command not found</span><br><span class="line">ModuleNotFoundError: No module named &#x27;django&#x27;</span><br><span class="line">ImportError: Couldn&#x27;t import Django. Are you sure it&#x27;s installed and available on your PYTHONPATH environment variable? Did you forget to activate a virtual environment?</span><br><span class="line">ModuleNotFoundError: No module named &#x27;django&#x27;</span><br><span class="line">ImportError: Couldn&#x27;t import Django. Are you sure it&#x27;s installed and available on your PYTHONPATH environment variable? Did you forget to activate a virtual environment?</span><br><span class="line">Error: Command &quot;./migrate.sh&quot; exited with 1</span><br></pre></td></tr></table></figure><p>查看<a href="https://github.com/Qexo/Qexo/issues/524">issues</a>，可以通过切换Vercel NodeJS版本解决。</p><p>进入到Vercel对应的Qexo项目，依次找到<code>Settings</code> -&gt; <code>General</code> -&gt; <code>Node.js Version</code>，切换到<code>18.x</code>后，点击<code>save</code>。</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/hexo-qexo-build/image-20240420105328085.png" alt="image-20240420105328085"></p><h2 id="部署数据库"><a href="#部署数据库" class="headerlink" title="部署数据库"></a>部署数据库</h2><h3 id="创建-1"><a href="#创建-1" class="headerlink" title="创建"></a>创建</h3><p>最新的Qexo已经支持<a href="https://vercel.com/dashboard/stores">Vercel Storage</a> 了，但Vercel Storage每个用户<strong>只能免费创建一个</strong>数据库。</p><p>到<a href="https://vercel.com/dashboard/stores">Vercel Storage</a>创建<code>PostgreSQL</code>数据库，选择与服务端对应的地区，通常为<code>Washington, D.C., USA (East) - iad1</code>。</p><h3 id="绑定"><a href="#绑定" class="headerlink" title="绑定"></a>绑定</h3><p>进入数据库主页，依次找到<code>Projects</code>-&gt;<code>Connect Project</code>，链接到之前创建的服务端程序，点击<code>Connect</code>。</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/hexo-qexo-build/image-20240420110023050.png" alt="image-20240420110023050"></p><h2 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h2><h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><p>此时服务端程序还未启动，到服务端程序的主页面，依次找到<code>Deployments</code>-&gt;<code>最近的一次deploy</code>-&gt;<code>...</code>-&gt;<code>Redeploy</code>-&gt;<code>Redeploy</code>。</p><p>点击重新部署服务端</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/hexo-qexo-build/image-20240420110457041.png" alt="image-20240420110457041"></p><p>首次启动会下载各种依赖，耐心等待，部署成功后就可以访问项目链接开始Qexo配置了。</p><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>参考<a href="https://www.oplog.cn/qexo/configs/provider.html">博客配置 | Qexo</a></p><h4 id="用户配置"><a href="#用户配置" class="headerlink" title="用户配置"></a>用户配置</h4><p>自己看着来就行</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/hexo-qexo-build/image-20240420112436966.png" alt="image-20240420112436966"></p><h4 id="博客配置"><a href="#博客配置" class="headerlink" title="博客配置"></a>博客配置</h4><table><thead><tr><th>字段</th><th>说明</th></tr></thead><tbody><tr><td>服务商</td><td>你的博客管理端托管到哪儿的，是Github就选github就行了</td></tr><tr><td>使用配置</td><td>我的博客就是Hexo，就选Hexo了</td></tr><tr><td>Github密钥</td><td>于 <a href="https://github.com/settings/tokens">Github令牌设置</a> 生成的 Token (建议使用 Classical) 需要 <code>Repo</code> &amp; <code>Workflow</code> 下的权限 <em>不建议给出所有权限</em></td></tr><tr><td>Github仓库</td><td>博客管理端仓库，即存<code>.md</code>博客源码、<code>.yml</code>配置文件等的仓库，而不是发布文章deploy到的仓库</td></tr><tr><td>项目分支</td><td>看下管理端仓库的分支，一般是<code>main</code>或者<code>master</code></td></tr><tr><td>博客路径</td><td>即<code>_config.yml</code>所在的目录，若为根目录则留空，子目录格式<code>path/</code></td></tr></tbody></table><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/hexo-qexo-build/image-20240420112535380.png" alt="image-20240420112535380"></p><p><strong>Github密钥</strong>，到<a href="https://github.com/settings/tokens">Github令牌设置</a>，选择<code>Generate new token (classic)</code>，过期时间<code>No Expiration</code>(不过期，但请保管好)，勾选<code> repo</code>和<code>workflow</code>权限，点击最末尾的<code>Generate token</code>按钮即可生成。</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/hexo-qexo-build/image-20240420113553860.png" alt="image-20240420113553860"></p><h4 id="Vercel配置"><a href="#Vercel配置" class="headerlink" title="Vercel配置"></a>Vercel配置</h4><p><strong>VERCEL_TOKEN</strong></p><p>点击<a href="https://vercel.com/account/tokens">Vercel Token生成页面</a> 创建Token</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/hexo-qexo-build/image-20240420114443765.png" alt="image-20240420114443765"></p><p><strong>PROJECT_ID</strong></p><p>进入到<strong>Qexo服务端</strong>部署所在项目，依次找到<code>Settings</code> -&gt; <code>General</code> -&gt; <code>Project ID</code></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/hexo-qexo-build/image-20240420114547197.png" alt="image-20240420114547197"></p><h3 id="完成"><a href="#完成" class="headerlink" title="完成"></a>完成</h3><p>Qexo的部署到这儿就完成了，开始享受吧！</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/hexo-qexo-build/image-20240420114652160.png" alt="image-20240420114652160"></p><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://www.oplog.cn/qexo/">Qexo | 一个美观、强大的在线 静态博客 管理器</a></p><p><a href="https://blog.btwoa.com/2qe37d61/">为Hexo部署在线编辑器|Qexo</a></p>]]></content>
      
      
      <categories>
          
          <category> 软件配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 个人博客 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Butterfly主题的CDN配置</title>
      <link href="/posts/dff3be82/"/>
      <url>/posts/dff3be82/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>Butterfly主题的CDN默认使用的是<code>jsdelivr</code>，有一些JS和CSS就是由他提供的。</p><p>但是<code>jsdelivr</code>很玄学，跟Github一样，时常访问不了，就需要重新配置一下CDN。</p><h2 id="不使用CDN"><a href="#不使用CDN" class="headerlink" title="不使用CDN"></a>不使用CDN</h2><p>使用新版Butterfly的用户才可以切换成本地模式（不知道要多新）</p><p>在<strong>博客根目录</strong>下执行<code>npm install hexo-butterfly-extjs --save</code>安装依赖</p><p>修改<code>_config.butterfly.yml</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">CDN:</span></span><br><span class="line">  <span class="attr">third_party_provider:</span> <span class="string">local</span></span><br></pre></td></tr></table></figure><p>Hexo三连</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo generate</span><br><span class="line">hexo deploy</span><br></pre></td></tr></table></figure><h2 id="使用CDN"><a href="#使用CDN" class="headerlink" title="使用CDN"></a>使用CDN</h2><h3 id="七牛云"><a href="#七牛云" class="headerlink" title="七牛云"></a>七牛云</h3><p>使用七牛云的CDN，修改<code>_config.butterfly.yml</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">CDN:</span></span><br><span class="line">  <span class="attr">third_party_provider:</span> <span class="string">custom</span></span><br><span class="line">  <span class="attr">custom_format:</span> <span class="string">https://cdn.staticfile.org/$&#123;cdnjs_name&#125;/$&#123;version&#125;/$&#123;min_cdnjs_file&#125;</span></span><br></pre></td></tr></table></figure><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://blog.zhheo.com/p/790087d9.html">Butterfly CDN链接更改指南，替换jsdelivr提升访问速度</a></p>]]></content>
      
      
      <categories>
          
          <category> 程序配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Butterfly </tag>
            
            <tag> 个人博客 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>更新Butterfly博客</title>
      <link href="/posts/d0bcb05e/"/>
      <url>/posts/d0bcb05e/</url>
      
        <content type="html"><![CDATA[<h2 id="稳妥更新"><a href="#稳妥更新" class="headerlink" title="稳妥更新"></a>稳妥更新</h2><p>在<strong>博客根目录</strong>下执行<code>npm outdated</code>，查看所有过时的版本，我的过时信息如下：</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Package               Current   Wanted   Latest  Location                           Depended by</span><br><span class="line">hexo                    6.3.0    6.3.0    7.1.1  node<span class="built_in">_</span>modules/hexo                  hexo-gitee-blog-management</span><br><span class="line">hexo-deployer-git       3.0.0    3.0.0    4.0.0  node<span class="built_in">_</span>modules/hexo-deployer-git     hexo-gitee-blog-management</span><br><span class="line">hexo-renderer-marked    6.0.0    6.3.0    6.3.0  node<span class="built_in">_</span>modules/hexo-renderer-marked  hexo-gitee-blog-management</span><br><span class="line">hexo-theme-landscape    0.0.3    0.0.3    1.0.0  node<span class="built_in">_</span>modules/hexo-theme-landscape  hexo-gitee-blog-management</span><br><span class="line">yarn                  1.22.19  1.22.22  1.22.22  node<span class="built_in">_</span>modules/yarn                  hexo-gitee-blog-management</span><br></pre></td></tr></table></figure><p>执行<code>npm update</code>可更新所有过时的版本</p><h2 id="风险最新"><a href="#风险最新" class="headerlink" title="风险最新"></a>风险最新</h2><p>以下指令均在<strong>博客根目录</strong>下操作</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看当前版本，判断是否需要升级</span></span><br><span class="line">hexo version</span><br><span class="line"><span class="comment"># 全局升级hexo-cli</span></span><br><span class="line">npm i hexo-cli -g</span><br><span class="line"><span class="comment"># 再次查看版本，看hexo-cli是否升级成功</span></span><br><span class="line">hexo version</span><br><span class="line"><span class="comment"># 安装npm-check，若已安装可以跳过</span></span><br><span class="line">npm install -g npm-check</span><br><span class="line"><span class="comment"># 检查系统插件是否需要升级</span></span><br><span class="line">npm-check</span><br><span class="line"><span class="comment"># 安装npm-upgrade，若已安装可以跳过</span></span><br><span class="line">npm install -g npm-upgrade</span><br><span class="line"><span class="comment"># 更新package.json</span></span><br><span class="line">npm-upgrade</span><br><span class="line"><span class="comment"># 更新全局插件</span></span><br><span class="line">npm update -g</span><br><span class="line"><span class="comment"># 更新系统插件</span></span><br><span class="line">npm update --save</span><br><span class="line"><span class="comment"># 再次查看版本，判断是否升级成功</span></span><br><span class="line">hexo version</span><br></pre></td></tr></table></figure><p>最终版本信息如下：</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">INFO  Validating config</span><br><span class="line">INFO  </span><br><span class="line">===================================================================</span><br><span class="line">   <span class="params">#####</span>  <span class="params">#</span>    <span class="params">#</span> <span class="params">#####</span> <span class="params">#####</span> <span class="params">######</span> <span class="params">#####</span>  <span class="params">######</span> <span class="params">#</span>      <span class="params">#</span>   <span class="params">#</span></span><br><span class="line">   <span class="params">#</span>    <span class="params">#</span> <span class="params">#</span>    <span class="params">#</span>   <span class="params">#</span>     <span class="params">#</span>   <span class="params">#</span>      <span class="params">#</span>    <span class="params">#</span> <span class="params">#</span>      <span class="params">#</span>       <span class="params">#</span> <span class="params">#</span></span><br><span class="line">   <span class="params">#####</span>  <span class="params">#</span>    <span class="params">#</span>   <span class="params">#</span>     <span class="params">#</span>   <span class="params">#####</span>  <span class="params">#</span>    <span class="params">#</span> <span class="params">#####</span>  <span class="params">#</span>        <span class="params">#</span></span><br><span class="line">   <span class="params">#</span>    <span class="params">#</span> <span class="params">#</span>    <span class="params">#</span>   <span class="params">#</span>     <span class="params">#</span>   <span class="params">#</span>      <span class="params">#####</span>  <span class="params">#</span>      <span class="params">#</span>        <span class="params">#</span></span><br><span class="line">   <span class="params">#</span>    <span class="params">#</span> <span class="params">#</span>    <span class="params">#</span>   <span class="params">#</span>     <span class="params">#</span>   <span class="params">#</span>      <span class="params">#</span>   <span class="params">#</span>  <span class="params">#</span>      <span class="params">#</span>        <span class="params">#</span></span><br><span class="line">   <span class="params">#####</span>   <span class="params">####</span>    <span class="params">#</span>     <span class="params">#</span>   <span class="params">######</span> <span class="params">#</span>    <span class="params">#</span> <span class="params">#</span>      <span class="params">######</span>   <span class="params">#</span></span><br><span class="line">                         4.13.0</span><br><span class="line">===================================================================</span><br><span class="line">hexo: 7.1.1</span><br><span class="line">hexo-cli: 4.3.1</span><br><span class="line">os: win32 10.0.22631</span><br><span class="line">node: 20.11.0</span><br><span class="line">acorn: 8.11.2</span><br><span class="line">ada: 2.7.4</span><br><span class="line">ares: 1.20.1</span><br><span class="line">base64: 0.5.1</span><br><span class="line">brotli: 1.0.9</span><br><span class="line">cjs<span class="built_in">_</span>module<span class="built_in">_</span>lexer: 1.2.2</span><br><span class="line">cldr: 43.1</span><br><span class="line">icu: 73.2</span><br><span class="line">llhttp: 8.1.1</span><br><span class="line">modules: 115</span><br><span class="line">napi: 9</span><br><span class="line">nghttp2: 1.58.0</span><br><span class="line">nghttp3: 0.7.0</span><br><span class="line">ngtcp2: 0.8.1</span><br><span class="line">openssl: 3.0.12+quic</span><br><span class="line">simdutf: 4.0.4</span><br><span class="line">tz: 2023c</span><br><span class="line">undici: 5.27.2</span><br><span class="line">unicode: 15.0</span><br><span class="line">uv: 1.46.0</span><br><span class="line">uvwasi: 0.0.19</span><br><span class="line">v8: 11.3.244.8-node.17</span><br><span class="line">zlib: 1.2.13.1-motley-5daffc7</span><br></pre></td></tr></table></figure><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://zhuanlan.zhihu.com/p/163830894">Hexo 和Next主题升级</a></p><p><a href="https://novnan.github.io/Hexo/update_hexo/">Hexo版本升级指南</a></p>]]></content>
      
      
      <categories>
          
          <category> 程序配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Butterfly </tag>
            
            <tag> 个人博客 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用RWKV-Runner进行模型训练（三）开始训练</title>
      <link href="/posts/27ad509b/"/>
      <url>/posts/27ad509b/</url>
      
        <content type="html"><![CDATA[<h2 id="模型下载"><a href="#模型下载" class="headerlink" title="模型下载"></a>模型下载</h2><p>数据准备好后还需要选择合适的基底模型，推荐选择<code>RWKV-4-World-CHNtuned-1.5B-v1-20230620-ctx4096.pth</code>，该模型不仅显存占用低还具有中文增强的效果。</p><p>到<a href="https://huggingface.co/BlinkDL/rwkv-4-world/tree/main">Hugging Face</a>下载适合的模型。</p><h2 id="训练"><a href="#训练" class="headerlink" title="训练"></a>训练</h2><p>使用RWKV-Runner集成的LoRA微调功能对基底模型进行微调，当出现图形化Loss曲线时，意味着训练已正式开始。</p><p>训练时间会很长，需要耐心等待。</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/rwkv-runner-train-2/image-20240418182324540.png" alt="image-20240418182324540"></p><p>训练过程中会在LoRA模型一栏，出现多个训练完成的LoRA权重。</p><p>选择一个权重，并点击合并模型，将会生成一个直接可用的完整模型。</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/rwkv-runner-train-2/image-20240418182347673.png" alt="image-20240418182347673"></p><p>在<strong>配置页面</strong>选择训练好的模型，点击<code>运行</code>即可正常启动，并暴露对话接口。</p><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p>WSL可能会出现内存不足的情况，需要手动设置WSL内存上限</p><p>修改<code>C:\Users\你的用户名\.wslconfig</code>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[wsl2] </span><br><span class="line">memory=24GB</span><br><span class="line">swap=12GB</span><br></pre></td></tr></table></figure><p>还有训练完成后可能会出现WSL内存不释放的情况，导致内存占用很高，可以使用以下命令释放内存</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wsl --shutdown</span><br></pre></td></tr></table></figure><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://zhuanlan.zhihu.com/p/629809101">RWKV语言模型从入门到放弃，保姆级Training、Fine-tuning、Lora入坑教程</a></p><p><a href="https://blog.csdn.net/qq_15821487/article/details/131697336">RWKV系列2-RWKV-LM</a></p><p><a href="https://zhuanlan.zhihu.com/p/638326262">RWKV的微调教学，以及RWKV World：支持世界所有语言的生成+对话+任务+代码</a></p><p><a href="https://zhuanlan.zhihu.com/p/634873585?utm_psn=1754116495217442816">大模型训练数据集介绍</a></p><p><strong>RWKV-Runner LoRA微调功能使用说明</strong></p><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;">    <iframe src="//player.bilibili.com/player.html?aid=575386901&bvid=BV1Qz4y1M7jz&cid=1253288804&p=1&autoplay=0"         scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"        style="position: absolute; width: 100%; height: 100%; left: 0; top: 0;">    </iframe></div>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 毕业设计 </tag>
            
            <tag> RWKV </tag>
            
            <tag> 语言模型 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用RWKV-Runner进行模型训练（二）数据集准备</title>
      <link href="/posts/38c5674d/"/>
      <url>/posts/38c5674d/</url>
      
        <content type="html"><![CDATA[<h2 id="数据格式"><a href="#数据格式" class="headerlink" title="数据格式"></a>数据格式</h2><p>RWKV-Runner的微调功能是基于<a href="https://github.com/Blealtan/RWKV-LM-LoRA">RWKV-LM-LoRA</a></p><p>需要将数据集转化为RWKV-LoRA支持的格式，目前支持的格式如下：</p><ol><li><p>单论问答（JSONL格式）：{“text”: “Q: 问题\n\nA: 答案”}</p></li><li><p>多轮对话（JSONL格式）：{“text”: “Q: 问一\n\nA: 答一\n\nQ: 问二\n\nA: 答二”}</p></li><li><p>单轮问答（TEXT格式）：</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Question: </span><br><span class="line"></span><br><span class="line">Answer:</span><br></pre></td></tr></table></figure></li><li><p>材料问答（TEXT格式）</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Instruction: </span><br><span class="line"></span><br><span class="line">Input: </span><br><span class="line"></span><br><span class="line">Response:</span><br></pre></td></tr></table></figure></li><li><p>多轮对话（TEXT格式）</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">User: </span><br><span class="line"></span><br><span class="line">Assistant: </span><br><span class="line"></span><br><span class="line">User: </span><br><span class="line"></span><br><span class="line">Assistant: </span><br></pre></td></tr></table></figure></li></ol><p><strong>需要注意的事项如下：</strong></p><ol><li><p><strong>JSONL格式</strong>必须为单个.jsonl后缀的文件，如有很多训练数据需要在.jsonl文件中另起一行写入，如：</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;text&quot;: &quot;Q: 问一<span class="keyword">\n</span><span class="keyword">\nA</span>: 答一<span class="keyword">\n</span><span class="keyword">\nQ</span>: 问二<span class="keyword">\n</span><span class="keyword">\nA</span>: 答二&quot;&#125;</span><br><span class="line">&#123;&quot;text&quot;: &quot;Q: 问题<span class="keyword">\n</span><span class="keyword">\nA</span>: 答案&quot;&#125; </span><br><span class="line">&#123;&quot;text&quot;: &quot;Q: 问一<span class="keyword">\n</span><span class="keyword">\nA</span>: 答一<span class="keyword">\n</span><span class="keyword">\nQ</span>: 问二<span class="keyword">\n</span><span class="keyword">\nA</span>: 答二<span class="keyword">\n</span><span class="keyword">\nQ</span>: 问三<span class="keyword">\n</span><span class="keyword">\nA</span>: 答三&quot;&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>TEXT格式</strong>为多个.txt后缀的文件，RWKV-LoRA转换数据时会读取该文件夹下所有的.txt文件，并将其中的内容作为训练数据。需要注意的是，一个.txt文件只能有一种格式的数据，文件结构如下所示。</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- dataset</span><br><span class="line">- 数据1.txt</span><br><span class="line">- 数据2.txt</span><br><span class="line">- 数据3.txt</span><br></pre></td></tr></table></figure></li></ol><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://zhuanlan.zhihu.com/p/629809101">RWKV语言模型从入门到放弃，保姆级Training、Fine-tuning、Lora入坑教程</a></p><p><a href="https://blog.csdn.net/qq_15821487/article/details/131697336">RWKV系列2-RWKV-LM</a></p><p><a href="https://zhuanlan.zhihu.com/p/638326262">RWKV的微调教学，以及RWKV World：支持世界所有语言的生成+对话+任务+代码</a></p><p><a href="https://zhuanlan.zhihu.com/p/634873585?utm_psn=1754116495217442816">大模型训练数据集介绍</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 毕业设计 </tag>
            
            <tag> RWKV </tag>
            
            <tag> 语言模型 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo博客为Butterfly主题添加Algolia文章搜索功能</title>
      <link href="/posts/90caae33/"/>
      <url>/posts/90caae33/</url>
      
        <content type="html"><![CDATA[<h2 id="注册"><a href="#注册" class="headerlink" title="注册"></a>注册</h2><p>进入<a href="https://www.algolia.com/">Algolia官网</a>，可以使用Google账号、Github账号或直接使用邮箱进行注册。</p><p>登录后进入控制台，按以下步骤创建<code>index</code>。</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/hexo-butterfly-algolia-build/image-20240401190821591.png" alt="image-20240401190821591"></p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>到博客根目录执行以下代码下载第三方包：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-algoliasearch --save</span><br></pre></td></tr></table></figure><p>修改<code>_config.yml</code>或<code>_config.butterfly.yml</code>配置文件，加入以下内容：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">algolia:</span></span><br><span class="line">  <span class="attr">appId:</span> <span class="string">&quot;your applicationID&quot;</span></span><br><span class="line">  <span class="attr">apiKey:</span> <span class="string">&quot;your Search-Only API Key&quot;</span></span><br><span class="line">  <span class="attr">adminApiKey:</span> <span class="string">&quot;your Admin API Key&quot;</span></span><br><span class="line">  <span class="attr">chunkSize:</span> <span class="number">5000</span></span><br><span class="line">  <span class="attr">indexName:</span> <span class="string">&quot;your indexName&quot;</span></span><br><span class="line">  <span class="attr">fields:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">content:strip:truncate,0,500</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">excerpt:strip</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">gallery</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">permalink</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">photos</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">slug</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">tags</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">title</span></span><br></pre></td></tr></table></figure><p>需要修改的参数解释如下：</p><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>appID</td><td>应用ID</td></tr><tr><td>apiKey</td><td>只有查询权限的密钥</td></tr><tr><td>adminApiKey</td><td>管理员密钥</td></tr><tr><td>indexName</td><td>自定义的索引名称</td></tr></tbody></table><p>在<a href="https://dashboard.algolia.com/account/overview">Algolia设置页面</a>点击<code>API Keys</code>即可查看上述参数</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/hexo-butterfly-algolia-build/image-20240401191928291.png" alt="image-20240401191928291"></p><p>修改<code>_config.butterfly.yml</code>配置文件即可开启Algolia搜索：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">algolia_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">hits:</span></span><br><span class="line">    <span class="attr">per_page:</span> <span class="number">6</span></span><br><span class="line">  <span class="attr">labels:</span></span><br><span class="line">    <span class="attr">input_placeholder:</span> <span class="string">Search</span> <span class="string">for</span> <span class="string">Posts</span></span><br><span class="line">    <span class="attr">hits_empty:</span> <span class="string">&quot;我们没有找到任何搜索结果: $&#123;query&#125;&quot;</span></span><br><span class="line">    <span class="attr">hits_stats:</span> <span class="string">&quot;找到$&#123;hits&#125;条结果（用时$&#123;time&#125; ms）&quot;</span></span><br></pre></td></tr></table></figure><h2 id="生成索引"><a href="#生成索引" class="headerlink" title="生成索引"></a>生成索引</h2><p>到博客根目录执行以下代码生成索引：</p><p>注意：<strong>以后每次增加新文章的时候或者文章结构改变都需要使用此命令更新索引</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo algolia</span><br></pre></td></tr></table></figure><p>出现以下内容即表示生成成功！</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">INFO  xxx files generated in xx.xx s</span><br><span class="line">INFO  Clearing index on Algolia...</span><br><span class="line">INFO  Index cleared.</span><br><span class="line">INFO  Indexing posts on Algolia...</span><br><span class="line">INFO  xxx posts indexed.</span><br></pre></td></tr></table></figure><h2 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h2><p>在博客根目录，依次执行以下代码，查看搜索是否生效：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 清理生成的静态文件</span></span><br><span class="line">hexo clean</span><br><span class="line"><span class="comment"># 重新生成静态文件</span></span><br><span class="line">hexo generate</span><br><span class="line"><span class="comment"># 开启本地服务</span></span><br><span class="line">hexo server</span><br></pre></td></tr></table></figure><h2 id="踩坑"><a href="#踩坑" class="headerlink" title="踩坑"></a>踩坑</h2><p><a href="https://github.com/jerryc127/hexo-theme-butterfly/releases/tag/4.12">Butterfly4.12更新</a>将<strong>CDN</strong>的<code>version</code>默认值改为了<code>true</code>会导致Algolia搜索框的样式丢失。</p><p>需要到<code>_config.butterfly.yml</code>配置文件中做如下更改：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">CDN:</span></span><br><span class="line">  <span class="attr">version:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://zhuanlan.zhihu.com/p/645394591">Hexo + Butterfly 搜索功能</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 个人博客 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>为SpringBoot配置数据校验</title>
      <link href="/posts/860e033f/"/>
      <url>/posts/860e033f/</url>
      
        <content type="html"><![CDATA[<h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><h3 id="导入依赖"><a href="#导入依赖" class="headerlink" title="导入依赖"></a>导入依赖</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span><span class="comment">&lt;!-- 用于数据校验 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-validation<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="DTO"><a href="#DTO" class="headerlink" title="DTO"></a>DTO</h3><p>实用<code>javax.validation.constraints.Pattern</code>注解可以直接用正则表达式进行验证。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.Pattern;</span><br><span class="line"></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDto</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> String username;</span><br><span class="line">    <span class="meta">@Pattern(regexp = &quot;^(?=.*\\d)(?=.*[a-zA-Z])(?=.*[\\W_]).&#123;6,24&#125;$&quot;, message = &quot;密码格式不正确&quot;)</span></span><br><span class="line">    <span class="keyword">protected</span> String password;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="控制类"><a href="#控制类" class="headerlink" title="控制类"></a>控制类</h3><p>光配置参数接收类还不行，此时验证并没有生效，还需要在控制层的方法中加上为DTO参数加上<code>javax.validation.Valid</code>注解才能生效，案例代码如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">login</span><span class="params">(<span class="meta">@Valid</span> <span class="meta">@RequestBody</span> UserDto userDto)</span> &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> userService.login(userDto.getUsername(), userDto.getPassword());</span><br><span class="line">    <span class="keyword">return</span> StringUtils.isNotBlank(token) ?</span><br><span class="line">            Result.buildSuccess(<span class="string">&quot;登录成功！&quot;</span>,token) :</span><br><span class="line">            Result.buildFail(<span class="string">&quot;登录失败，用户名不存在或密码错误&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="异常捕获"><a href="#异常捕获" class="headerlink" title="异常捕获"></a>异常捕获</h3><p>当数据验证失败，会抛出<code>org.springframework.web.bind.MethodArgumentNotValidException</code>异常。</p><p>如需要全局捕获异常可以使用AOP实现，拦截代理示例如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ExceptionHandler(MethodArgumentNotValidException.class)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">sqlException</span><span class="params">(MethodArgumentNotValidException ex, HttpServletRequest request, HttpServletResponse response)</span> &#123;</span><br><span class="line">    setHeader(request, response);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> Result.buildFail(<span class="string">&quot;数据校验失败：&quot;</span> + ex.getBindingResult()</span><br><span class="line">            .getAllErrors()</span><br><span class="line">            .stream()</span><br><span class="line">            .map(DefaultMessageSourceResolvable::getDefaultMessage)</span><br><span class="line">            .collect(Collectors.joining(<span class="string">&quot;;&quot;</span>)));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">setHeader</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> &#123;</span><br><span class="line">    response.setHeader(<span class="string">&quot;Access-Control-Allow-Origin&quot;</span>, request.getHeader(<span class="string">&quot;origin&quot;</span>));</span><br><span class="line">    response.setHeader(<span class="string">&quot;Access-Control-Allow-Credentials&quot;</span>, <span class="string">&quot;true&quot;</span>);</span><br><span class="line">    response.setHeader(<span class="string">&quot;Access-Control-Allow-Methods&quot;</span>, <span class="string">&quot;GET, HEAD, POST, PUT,PATCH, DELETE, OPTIONS&quot;</span>);</span><br><span class="line">    response.setHeader(<span class="string">&quot;Access-Control-Allow-Headers&quot;</span>, <span class="string">&quot;*&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>以上处理代码可以在数据校验失败时将自定义的失败原因发送给前端</p><p>Result为自定义返回格式类</p><p>全局异常处理可以参考<a href="https://blog.csdn.net/qq_38974638/article/details/118151932">Spring Boot 使用@RestControllerAdvice实现捕获全局异常统一处理</a></p><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://blog.csdn.net/qq_38974638/article/details/118151932">Spring Boot 使用@RestControllerAdvice实现捕获全局异常统一处理</a></p><p><a href="https://blog.csdn.net/qq_45737419/article/details/116243216">spring-boot-starter-validation进行参数校验</a></p>]]></content>
      
      
      <categories>
          
          <category> 程序配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 毕业设计 </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker搭建记账软件Firefly III</title>
      <link href="/posts/d1f49f22/"/>
      <url>/posts/d1f49f22/</url>
      
        <content type="html"><![CDATA[<h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><h3 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h3><p>使用<code>MySQL5.7</code>创建数据库一个名为<code>firefly_iii</code>的数据库（数据库名可以自行定义）</p><h3 id="docker-compose"><a href="#docker-compose" class="headerlink" title="docker-compose"></a>docker-compose</h3><p>新建<code>/opt/docker/compose/firefly_iii</code>工程目录并进入该目录</p><p>新建<code>docker-compose.yml</code>文件，内容如下：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3.3&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">app:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">fireflyiii/core:latest</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">app</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">firefly_iii_core</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">firefly_iii_upload:/var/www/html/storage/upload</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">env_file:</span> <span class="string">.env</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">firefly_iii</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="string">:&lt;映射到本地的端口&gt;:8080</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">db</span></span><br><span class="line">  <span class="attr">db:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mariadb</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">db</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">firefly_iii_db</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">env_file:</span> <span class="string">.db.env</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">firefly_iii</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">firefly_iii_db:/var/lib/mysql</span></span><br><span class="line">  <span class="attr">cron:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">alpine</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">firefly_iii_cron</span></span><br><span class="line">    <span class="attr">command:</span> <span class="string">sh</span> <span class="string">-c</span> <span class="string">&quot;echo \&quot;0 3 * * * wget -qO- http://app:8080/api/v1/cron/REPLACEME\&quot; | crontab - &amp;&amp; crond -f -L /dev/stdout&quot;</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">firefly_iii</span></span><br><span class="line"></span><br><span class="line"><span class="attr">volumes:</span></span><br><span class="line">   <span class="attr">firefly_iii_upload:</span></span><br><span class="line">   <span class="attr">firefly_iii_db:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">firefly_iii:</span></span><br><span class="line">    <span class="attr">driver:</span> <span class="string">bridge</span></span><br></pre></td></tr></table></figure><p>新建<code>.env</code>文件，内容如下：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 推荐默认</span></span><br><span class="line"><span class="string">APP_ENV=local</span></span><br><span class="line"><span class="string">APP_DEBUG=false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 根据情况自定义</span></span><br><span class="line"><span class="string">SITE_OWNER=example@example.com</span></span><br><span class="line"><span class="comment"># 一定要保证 32 个字符</span></span><br><span class="line"></span><br><span class="line"><span class="string">APP_KEY=SomeRandomStringOf32CharsExactly</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 语言</span></span><br><span class="line"><span class="string">DEFAULT_LANGUAGE=zh_CH</span></span><br><span class="line"><span class="string">DEFAULT_LOCALE=equal</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 时区</span></span><br><span class="line"><span class="string">TZ=Asia/Shanghai</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 反向代理一定要开！！</span></span><br><span class="line"><span class="string">TRUSTED_PROXIES=**</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 日志相关，尽量减少日志</span></span><br><span class="line"><span class="string">LOG_CHANNEL=stack</span></span><br><span class="line"><span class="string">APP_LOG_LEVEL=emergency</span></span><br><span class="line"><span class="string">AUDIT_LOG_LEVEL=emergency</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 数据库配置，这里选择 MySQL 数据库</span></span><br><span class="line"><span class="string">DB_CONNECTION=mysql</span></span><br><span class="line"><span class="string">DB_HOST=127.0.0.1</span></span><br><span class="line"><span class="string">DB_PORT=3306</span></span><br><span class="line"></span><br><span class="line"><span class="string">DB_DATABASE=&lt;数据库名称&gt;</span> <span class="comment"># 自定义</span></span><br><span class="line"></span><br><span class="line"><span class="string">DB_USERNAME=&lt;数据库用户名&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="string">DB_PASSWORD=&lt;数据库用户密码&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="string">MYSQL_USE_SSL=false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Cookie 设置</span></span><br><span class="line"><span class="string">COOKIE_PATH=&quot;/&quot;</span></span><br><span class="line"><span class="string">COOKIE_SECURE=false</span></span><br><span class="line"><span class="string">COOKIE_SAMESITE=lax</span></span><br><span class="line"></span><br><span class="line"><span class="string">SEND_ERROR_MESSAGE=true</span></span><br><span class="line"><span class="string">SEND_REPORT_JOURNALS=true</span></span><br><span class="line"></span><br><span class="line"><span class="string">ENABLE_EXTERNAL_MAP=false</span></span><br><span class="line"><span class="string">ENABLE_EXTERNAL_RATES=false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Firefly III authentication settings</span></span><br><span class="line"><span class="string">AUTHENTICATION_GUARD=web</span></span><br><span class="line"><span class="string">AUTHENTICATION_GUARD_HEADER=REMOTE_USER</span></span><br><span class="line"></span><br><span class="line"><span class="string">DISABLE_FRAME_HEADER=false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 防止 XSS 攻击，保持默认</span></span><br><span class="line"><span class="string">DISABLE_CSP_HEADER=false</span></span><br><span class="line"></span><br><span class="line"><span class="string">ALLOW_WEBHOOKS=false</span></span><br><span class="line"></span><br><span class="line"><span class="string">DKR_BUILD_LOCALE=false</span></span><br><span class="line"><span class="comment"># 不用 sqllite</span></span><br><span class="line"><span class="string">DKR_CHECK_SQLITE=false</span></span><br><span class="line"><span class="comment"># 安全相关，保持默认</span></span><br><span class="line"><span class="string">DKR_RUN_MIGRATION=true</span></span><br><span class="line"><span class="string">DKR_RUN_UPGRADE=true</span></span><br><span class="line"><span class="string">DKR_RUN_VERIFY=true</span></span><br><span class="line"><span class="string">DKR_RUN_REPORT=true</span></span><br><span class="line"><span class="string">DKR_RUN_PASSPORT_INSTALL=true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># APP 配置，不要乱改</span></span><br><span class="line"><span class="string">APP_NAME=FireflyIII</span></span><br><span class="line"><span class="string">BROADCAST_DRIVER=log</span></span><br><span class="line"><span class="string">QUEUE_DRIVER=sync</span></span><br><span class="line"><span class="string">CACHE_PREFIX=firefly</span></span><br><span class="line"><span class="string">FIREFLY_III_LAYOUT=v1</span></span><br></pre></td></tr></table></figure><p>新建<code>.db.env</code>文件，内容如下： </p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">MYSQL_RANDOM_ROOT_PASSWORD=yes</span></span><br><span class="line"><span class="string">MYSQL_DATABASE=&lt;数据库名称&gt;</span></span><br><span class="line"><span class="string">MYSQL_USER=&lt;数据库用户名&gt;</span></span><br><span class="line"><span class="string">MYSQL_PASSWORD=&lt;数据库用户密码&gt;</span></span><br></pre></td></tr></table></figure><p>在<code>/opt/docker/compose/firefly_iii</code>工程目录下执行以下代码构建容器：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> docker-compose up -d</span><br></pre></td></tr></table></figure><p>执行完成后使用<code>sudo docker ps</code>查看容器状态，如<code>fireflyiii/core:latest</code>的<code>STATUS</code>为<code>(healthy)</code>即部署成功</p><h3 id="反向代理"><a href="#反向代理" class="headerlink" title="反向代理"></a>反向代理</h3><p>此时不能直接通过IP+端口的方式访问。</p><p>到域名厂商配置解析后，使用Nginx进行反向代理后才能够访问。</p><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://docs.firefly-iii.org/how-to/firefly-iii/installation/docker/">官方Docker安装文档</a></p><p><a href="https://maling.io/posts/firefly-iii-install/">如何利用 Docker &amp; Nginx 在 VPS 上部署 Firefly III 记账软件</a></p>]]></content>
      
      
      <categories>
          
          <category> 软件配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 服务器 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu安装1Panel面板</title>
      <link href="/posts/de50e286/"/>
      <url>/posts/de50e286/</url>
      
        <content type="html"><![CDATA[<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>执行以下命令安装<code>1panel</code>面板</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -sSL https://resource.fit2cloud.com/1panel/package/quick_start.sh -o quick_start.sh &amp;&amp; <span class="built_in">sudo</span> bash quick_start.sh</span><br></pre></td></tr></table></figure><ol><li><p>选择安装路径，这里直接默认即可<code>/opt</code></p></li><li><p>设置面板端口（记得在云服务器的安全组开放端口）</p></li><li><p>设置面板用户名</p></li><li><p>设置密码，安装完成后按照提示地址进入管理台</p></li></ol><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[1Panel Log]: =================感谢您的耐心等待，安装已经完成================== </span><br><span class="line">[1Panel Log]:  </span><br><span class="line">[1Panel Log]: 请用浏览器访问面板: </span><br><span class="line">[1Panel Log]: 外网地址: http://xx.xx.xx.xx:xx/6ff8008000 </span><br><span class="line">[1Panel Log]: 内网地址: http://10.0.16.17:xx/6ff8008000 </span><br><span class="line">[1Panel Log]: 面板用户: xxxx</span><br><span class="line">[1Panel Log]: 面板密码: xxxx</span><br><span class="line">[1Panel Log]:  </span><br><span class="line">[1Panel Log]: 项目官网: https://1panel.cn </span><br><span class="line">[1Panel Log]: 项目文档: https://1panel.cn/docs </span><br><span class="line">[1Panel Log]: 代码仓库: https://github.com/1Panel-dev/1Panel </span><br><span class="line">[1Panel Log]:  </span><br><span class="line">[1Panel Log]: 如果使用的是云服务器，请至安全组开放 3000 端口 </span><br><span class="line">[1Panel Log]:  </span><br><span class="line">[1Panel Log]: ================================================================ </span><br></pre></td></tr></table></figure><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://1panel.cn/docs/installation/online_installation/">1Panel文档在线安装</a></p><p><a href="https://github.com/1Panel-dev/1Panel/releases">版本发布地址</a></p><p><a href="https://cloud.tencent.com/developer/article/2395275">1Panel面板搭建Frp实现内网穿透详细配置</a></p>]]></content>
      
      
      <categories>
          
          <category> 软件配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 服务器 </tag>
            
            <tag> 1Panel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue2-ElmentUI 表单数据验证</title>
      <link href="/posts/f9f47703/"/>
      <url>/posts/f9f47703/</url>
      
        <content type="html"><![CDATA[<h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><p>一定要设置<code>el-form</code>标签的<code>model</code>、<code>rules</code>、<code>ref</code>属性和<code>el-form-item</code>的<code>prop</code>属性</p><ul><li>model：表单的数据对象</li><li>rules：表单的验证规则</li><li>ref：用来给表单命名的</li></ul><p>案例代码如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;!--  密码编辑框  --&gt;</span><br><span class="line">    &lt;el-dialog</span><br><span class="line">               title=&quot;修改密码&quot;</span><br><span class="line">               :visible.sync=&quot;dialogVisibleEdit&quot;</span><br><span class="line">               width=&quot;30%&quot;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;el-form :model=&quot;passwordEdit&quot;</span><br><span class="line">                 :rules=&quot;formRules&quot;</span><br><span class="line">                 ref=&quot;passwordEdit&quot;&gt;</span><br><span class="line">            &lt;el-form-item prop=&quot;password&quot;&gt;</span><br><span class="line">                &lt;el-input v-model=&quot;passwordEdit.password&quot; show-password placeholder=&quot;请输入新密码&quot;/&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">            &lt;el-form-item prop=&quot;password&quot;&gt;</span><br><span class="line">                &lt;el-input v-model=&quot;passwordEdit.passwordRepeat&quot; show-password placeholder=&quot;请重复密码&quot;/&gt;</span><br><span class="line">        &lt;/el-form-item&gt;</span><br><span class="line">        &lt;/el-form&gt;</span><br><span class="line"></span><br><span class="line">        &lt;span slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">            &lt;el-button @click=&quot;dialogVisibleEdit = false&quot;&gt;取 消&lt;/el-button&gt;</span><br><span class="line">            &lt;el-button type=&quot;primary&quot; @click=&quot;editPassword(&#x27;passwordEdit&#x27;)&quot;&gt;确 定&lt;/el-button&gt;</span><br><span class="line">        &lt;/span&gt;</span><br><span class="line">    &lt;/el-dialog&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">    components: &#123;</span><br><span class="line">        Dialog</span><br><span class="line">    &#125;,</span><br><span class="line">    data() &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            // 表单验证规则</span><br><span class="line">            formRules: &#123;</span><br><span class="line">                password: [</span><br><span class="line">                    &#123; required: true, message: &#x27;请输入密码&#x27;, trigger: &#x27;blur&#x27; &#125;,</span><br><span class="line">                    &#123; pattern: /^(?=.*\d)(?=.*[a-zA-Z])(?=.*[\W_]).&#123;6,24&#125;$/, message: &#x27;至少包含数字、字母和特殊字符，长度在6到24位之间&#x27;, trigger: &#x27;blur&#x27; &#125;</span><br><span class="line">                ],</span><br><span class="line">            &#125;,</span><br><span class="line">            passwordEdit: &#123;</span><br><span class="line">                password: &#x27;&#x27;, // 密码</span><br><span class="line">                passwordRepeat: &#x27;&#x27;, // 重复密码</span><br><span class="line">            &#125;,</span><br><span class="line">            dialogVisibleEdit: false, // 编辑框的显示</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        // 修改密码</span><br><span class="line">        editPassword(formName) &#123;</span><br><span class="line">            // 验证表单</span><br><span class="line">            this.$refs[formName].validate((valid) =&gt; &#123;</span><br><span class="line">                if (valid) &#123;</span><br><span class="line">                    // 成功逻辑</span><br><span class="line">                    this.$notify.success(&#123;</span><br><span class="line">                        title: &#x27;成功&#x27;,</span><br><span class="line">                        message: &#x27;密码修改成功,请重新登录！&#x27;</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    // 失败逻辑</span><br><span class="line">                    this.$notify.error(&#123;</span><br><span class="line">                        title: &#x27;错误&#x27;,</span><br><span class="line">                        message: &#x27;请按要求填写表单&#x27;,</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a href="https://element.eleme.cn/#/zh-CN/component/form#biao-dan-yan-zheng">ElmentUI表单验证</a></p>]]></content>
      
      
      <categories>
          
          <category> 程序配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue2 </tag>
            
            <tag> ElementUI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用RWKV-Runner进行模型训练（一）环境搭建</title>
      <link href="/posts/db2811a8/"/>
      <url>/posts/db2811a8/</url>
      
        <content type="html"><![CDATA[<h2 id="切换WSL版本"><a href="#切换WSL版本" class="headerlink" title="切换WSL版本"></a>切换WSL版本</h2><p>可以参考<a href="/posts/ef616f5d/" title="在Windows11上安装Ubuntu子系统">在Windows11上安装Ubuntu子系统</a>，</p><p>也可以参考本文末尾的视频使用RWKV-Runner自动安装Ubuntu子系统。</p><p>打开终端使用<code>wsl --update</code>更新WSL子系统，并使用<code>wsl --set-default-version 2</code>切换WSL版本，更新完成后重启<code>RWKV-Runner</code></p><h2 id="初始化环境"><a href="#初始化环境" class="headerlink" title="初始化环境"></a>初始化环境</h2><p><strong>环境只会初始化一次</strong>，再次训练的时候就方便很多了。</p><p>可先下载<code>RWKV-4-World-CHNtuned-0.1B-v1-20230617-ctx4096.pth 全球语言 0.1B v1 中文增强</code>模型测试环境是否配置成功。</p><p><strong>转换数据</strong>：将JSON数据集转为可训练的数据</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/rwkv-runner-train/image-20240318143545632.png" alt="image-20240318143545632"></p><p><strong>开始训练</strong>：选择下好的基底模型进行训练，初次训练会开启WSL</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/rwkv-runner-train/image-20240318143605896.png" alt="image-20240318143605896"></p><p><strong>环境配置（会花费很长时间）</strong></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/rwkv-runner-train/image-20240318143508369.png" alt="image-20240318143508369"></p><p>如果你的Ubuntu子系统为WSL1版本，则需要使用<code>wsl --set-version Ubuntu-22.04 2</code>指令更新ubuntu子系统到WSL2版本（时间有点儿久，如果一直没反应，重启电脑然后再更新）</p><p><strong>环境配置完成后会自动开始训练</strong>：出现这个折线图就表示已经开始训练了</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/rwkv-runner-train/image-20240318181720878.png" alt="image-20240318181720878"></p><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><strong>RWKV-Runner LoRA微调功能使用说明</strong></p><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;">    <iframe src="//player.bilibili.com/player.html?aid=575386901&bvid=BV1Qz4y1M7jz&cid=1253288804&p=1&autoplay=0"         scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"        style="position: absolute; width: 100%; height: 100%; left: 0; top: 0;">    </iframe></div>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 毕业设计 </tag>
            
            <tag> RWKV </tag>
            
            <tag> 语言模型 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在Windows11上安装Ubuntu子系统</title>
      <link href="/posts/ef616f5d/"/>
      <url>/posts/ef616f5d/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>最近毕设到最关键的一步了，就是模型训练，根据<code>RWKV Runner</code>的训练提示，需要安装WSL子系统，那就装吧，反正也没坏处。</p><h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><h3 id="开启WSL"><a href="#开启WSL" class="headerlink" title="开启WSL"></a>开启WSL</h3><p><code>控制面板</code> -&gt; <code>程序</code> -&gt; <code>程序和功能</code> -&gt; <code>启用或关闭Windows功能</code>，点击确定后<strong>重启电脑</strong></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/windows11-wsl-ubuntu-build/image-20240317184345178.png" alt="image-20240317184345178"></p><p>打开<code>终端</code>，输入<code>wsl --set-default-version 1</code>，切换WSL版本</p><h3 id="安装Ubuntu"><a href="#安装Ubuntu" class="headerlink" title="安装Ubuntu"></a>安装Ubuntu</h3><p>打开<code>微软应用商店</code>，搜索<code>ubuntu</code>，我这里下载<code>Ubuntu 20.04.6 LTS</code>版本，点击<code>安装</code>后稍作等待</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/windows11-wsl-ubuntu-build/image-20240317184748368.png" alt="image-20240317184748368"></p><p>下载完成后点击<code>打开</code>，则进行自动安装，安装完毕后需要输入<code>用户名</code>、<code>密码</code>以及<code>重复密码</code>，输入完成后即可进入系统：</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/windows11-wsl-ubuntu-build/image-20240317185920873.png" alt="image-20240317185920873"></p><h3 id="修改root密码"><a href="#修改root密码" class="headerlink" title="修改root密码"></a>修改root密码</h3><p>在ubuntu系统中输入<code>sudo passwd root</code>以修改root密码。</p><p>如果你想在使用<code>sudo</code>时不输入用户密码，可以使用以下操作取消密码输入：</p><ol><li>使用<code>sudo visudo</code>，编辑权限文件。</li><li>找到<code>%sudo   ALL=(ALL:ALL) ALL</code>，更改为<code>%sudo   ALL=(ALL:ALL) NOPASSWD: ALL</code>。</li><li>先使用<code>ctrl</code>+<code>s</code>组合键进行保存，然后使用<code>ctrl</code>+<code>x</code>组合键关闭文件。</li></ol><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a href="https://zhuanlan.zhihu.com/p/393484912">在 Windows 11 上安装 Ubuntu 20.04 WSL Linux</a></p><p><a href="https://blog.csdn.net/xiansenLee/article/details/116952730">wsl默认root密码修改及默认root登录</a></p><p><a href="https://blog.csdn.net/qq_42675635/article/details/115300663">wsl2更新及 windows上 Ubuntu子系统的安装</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 毕业设计 </tag>
            
            <tag> Ubuntu </tag>
            
            <tag> Windows11 </tag>
            
            <tag> WSL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu搭建EasyN2N小黄鸭并使用</title>
      <link href="/posts/be3171d2/"/>
      <url>/posts/be3171d2/</url>
      
        <content type="html"><![CDATA[<h2 id="服务端"><a href="#服务端" class="headerlink" title="服务端"></a>服务端</h2><p>服务端操作系统为<strong>Ubuntu20</strong>，参考<a href="https://bugxia.com/336.html">使用N2N搭建虚拟局域网联机游戏（服务端）</a>。</p><h3 id="安装n2n"><a href="#安装n2n" class="headerlink" title="安装n2n"></a>安装n2n</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载n2n安装包</span></span><br><span class="line">wget https://github.com/ntop/n2n/releases/download/3.0/n2n-3.0.0-1038.x86_64.rpm</span><br><span class="line"><span class="comment"># 下载包转换管理工具</span></span><br><span class="line"><span class="built_in">sudo</span> apt install alien</span><br><span class="line"><span class="comment"># 将rpm转换为deb包</span></span><br><span class="line"><span class="built_in">sudo</span> alien -k n2n-3.0.0-1038.x86_64.rpm</span><br><span class="line"><span class="comment"># 安装n2n</span></span><br><span class="line"><span class="built_in">sudo</span> dpkg -i n2n_3.0.0-1038_amd64.deb</span><br></pre></td></tr></table></figure><h3 id="安装编译环境"><a href="#安装编译环境" class="headerlink" title="安装编译环境"></a>安装编译环境</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install autoconf make gcc -y</span><br></pre></td></tr></table></figure><h3 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入到软件安装目录</span></span><br><span class="line"><span class="built_in">cd</span> /opt</span><br><span class="line"><span class="comment"># 下载</span></span><br><span class="line"><span class="built_in">sudo</span> wget https://github.com/ntop/n2n/archive/refs/tags/3.0.tar.gz</span><br><span class="line"><span class="comment"># 解压</span></span><br><span class="line"><span class="built_in">sudo</span> tar xzvf 3.0.tar.gz</span><br><span class="line"><span class="comment"># 进入目录</span></span><br><span class="line"><span class="built_in">cd</span> n2n-3.0</span><br><span class="line"><span class="comment"># 安装</span></span><br><span class="line"><span class="built_in">sudo</span> ./autogen.sh</span><br><span class="line"><span class="built_in">sudo</span> ./configure</span><br><span class="line"><span class="built_in">sudo</span> make &amp;&amp; make install</span><br></pre></td></tr></table></figure><h3 id="启动服务端"><a href="#启动服务端" class="headerlink" title="启动服务端"></a>启动服务端</h3><p>详细的服务端参数见这里 <a href="https://bugxia.com/n2n_supernode_param">EasyN2N 服务端（Supernode）附加参数</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启端口</span></span><br><span class="line"><span class="built_in">sudo</span> ufw allow 9527/udp</span><br><span class="line"><span class="comment">#实际使用时，可以去掉 -f 参数，使其后台运行</span></span><br><span class="line"><span class="built_in">sudo</span> supernode -p 9527 -f</span><br></pre></td></tr></table></figure><h3 id="关闭服务端"><a href="#关闭服务端" class="headerlink" title="关闭服务端"></a>关闭服务端</h3><p>如果使用<code>sudo supernode -p 9527</code>后台挂起了，可以使用以下方法关闭进程</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看supernode进程</span></span><br><span class="line">ps -ef | grep supernode</span><br><span class="line"><span class="comment"># 根据PID杀死进程</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">kill</span> &lt;PID&gt;</span><br></pre></td></tr></table></figure><p>或者使用<code>screen</code>挂起应用，执行以下指令，然后使用<code>ctrl</code>+<code>a</code>组合键，然后按<code>d</code>即可挂起。</p><p>使用<code>sudo screen -r easyn2n</code>又可重新访问。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> screen -S easyn2n supernode -p 9527 -f -v</span><br></pre></td></tr></table></figure><h2 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h2><h3 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h3><p>参考<a href="https://bugxia.com/525.html">使用N2N搭建虚拟局域网联机游戏（EasyN2N\小黄鸭）</a>。</p><p><a href="https://www.123pan.com/s/Db87Vv-DuLw">客户端下载地址</a>，此教程下载的版本为当前最新版<code>3.12</code></p><p>请以管理员权限运行n2n.exe（<strong>小黄鸭图标右键 —— 以管理员身份运行</strong>）</p><p>在主页面输入<code>ip:端口</code>，例如：<code>150.128.49.178:9527</code>，然后点击<code>启动</code>等待自动获取IP，可自行设置小组名称。</p><h3 id="Android"><a href="#Android" class="headerlink" title="Android"></a>Android</h3><p>参考<a href="https://bugxia.com/2601.html"><a href="https://bugxia.com/2601.html">手机端使用N2N虚拟局域网的方法（安卓）</a></a>。</p><p>到<a href="https://github.com/switch-iot/hin2n/releases">hin2n release link</a>下载最新版本。</p><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://bugxia.com/525.html">使用N2N搭建虚拟局域网联机游戏（EasyN2N\小黄鸭）</a></p><p><a href="https://bugxia.com/336.html">使用N2N搭建虚拟局域网联机游戏（服务端）</a></p><p><a href="https://bugxia.com/n2n_supernode_param">EasyN2N 服务端（Supernode）附加参数</a></p><p><a href="https://bugxia.com/357.html">EasyN2N（N2N启动器） v3.1.2</a></p><p><a href="https://bugxia.com/2518.html">EasyN2N 常见问题解决方法</a></p><p><a href="https://bugxia.com/2601.html"><a href="https://bugxia.com/2601.html">手机端使用N2N虚拟局域网的方法（安卓）</a></a></p><p><a href="https://github.com/switch-iot/hin2n">hin2n仓库</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 服务器 </tag>
            
            <tag> Ubuntu </tag>
            
            <tag> EasyN2N </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>解决SpringBoot+Vue跨域SessionID不一致的问题</title>
      <link href="/posts/26fd6596/"/>
      <url>/posts/26fd6596/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>最近做毕业设计项目的时候，要做图片验证码这个功能，设计方案需要用到<code>SessionID</code>这个东西。</p><p>项目是先开发的接口，使用Postman测试的时候用的好好的，都是一个SessionId。</p><p>结果开始编写前端代码的时候，每个请求的SessionID都不一样，翻遍网上的教程步骤也解决不了，今天突然开窍找到了解决方法。</p><h2 id="前端"><a href="#前端" class="headerlink" title="前端"></a>前端</h2><p>前端使用的是<code>axios</code>发送的请求，需要设置<code>axios.defaults.withCredentials = true</code>来传递<strong>cookie</strong>，例如：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="comment">// 全局设置请求带cookie（必须）</span></span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">withCredentials</span> = <span class="literal">true</span></span><br><span class="line"><span class="comment">// 全局设置请求带token请求头（自定义）</span></span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">headers</span>.<span class="property">common</span>[<span class="string">&#x27;token&#x27;</span>] = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;token&quot;</span>);</span><br><span class="line"><span class="comment">// 全局设置API地址（自定义）</span></span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">baseURL</span> = <span class="string">&#x27;http://127.0.0.1:9001&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="后端"><a href="#后端" class="headerlink" title="后端"></a>后端</h2><p>后端就稍微有些复杂，首先需要设置跨域，然后还要设置服务端发送的Cookie能够跨站点使用。</p><p>本篇文章的跨域是用拦截器实现的，整合代码如下：</p><p><strong>application.yml</strong></p><p>在配置文件中添加如下配置</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">servlet:</span></span><br><span class="line">    <span class="attr">session:</span></span><br><span class="line">      <span class="attr">cookie:</span></span><br><span class="line">      <span class="comment"># 是否总是将会话 cookie 标记为安全。</span></span><br><span class="line">        <span class="attr">secure:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><strong>跨域拦截器</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> lombok.extern.log4j.Log4j2;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.HttpMethod;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Log4j2</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CrossInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        log.info(<span class="string">&quot;SessionId:&quot;</span> + request.getSession().getId());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 表示接受任意域名的请求,也可以指定域名</span></span><br><span class="line">        response.setHeader(<span class="string">&quot;Access-Control-Allow-Origin&quot;</span>, request.getHeader(<span class="string">&quot;Origin&quot;</span>));</span><br><span class="line">        <span class="comment">// 该字段可选，是个布尔值，表示是否可以携带cookie</span></span><br><span class="line">        response.setHeader(<span class="string">&quot;Access-Control-Allow-Credentials&quot;</span>, <span class="string">&quot;true&quot;</span>);</span><br><span class="line">        response.setHeader(<span class="string">&quot;Access-Control-Allow-Methods&quot;</span>, <span class="string">&quot;GET, HEAD, POST, PUT,PATCH, DELETE, OPTIONS&quot;</span>);</span><br><span class="line">        <span class="comment">// 允许前端传递的请求头参数（按需手动添加）</span></span><br><span class="line">        response.setHeader(<span class="string">&quot;Access-Control-Allow-Headers&quot;</span>, <span class="string">&quot;Content-Type, X-Requested-With, Accept, Authorization, token, Responsetype&quot;</span>);</span><br><span class="line">        response.setHeader(<span class="string">&quot;Access-Control-Max-Age&quot;</span>, <span class="string">&quot;3600&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (HttpMethod.OPTIONS.toString().equals(request.getMethod())) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        HandlerInterceptor.<span class="built_in">super</span>.postHandle(request, response, handler, modelAndView);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        HandlerInterceptor.<span class="built_in">super</span>.afterCompletion(request, response, handler, ex);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>启用拦截器</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cn.insectmk.chatbotweb.interceptor.CrossInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.apache.tomcat.util.http.Rfc6265CookieProcessor;</span><br><span class="line"><span class="keyword">import</span> org.apache.tomcat.util.http.SameSiteCookies;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.web.embedded.tomcat.TomcatContextCustomizer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.InterceptorRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InterceptorConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置Cookie的SameSite</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> TomcatContextCustomizer <span class="title function_">sameSiteCookiesConfig</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> context -&gt; &#123;</span><br><span class="line">            <span class="keyword">final</span> <span class="type">Rfc6265CookieProcessor</span> <span class="variable">cookieProcessor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Rfc6265CookieProcessor</span>();</span><br><span class="line">            cookieProcessor.setSameSiteCookies(SameSiteCookies.NONE.getValue());</span><br><span class="line">            context.setCookieProcessor(cookieProcessor);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 向容器中添加跨域验证拦截器</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> CrossInterceptor <span class="title function_">crossInterceptor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">CrossInterceptor</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 拦截规则</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> registry</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">        <span class="comment">// 跨域拦截规则</span></span><br><span class="line">        registry.addInterceptor(crossInterceptor())</span><br><span class="line">                .addPathPatterns(<span class="string">&quot;/**&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>重启项目</strong>，重新使用前端访问接口，看sessionID是否一致：</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">2024-03-09 15:14:29.453  INFO 6072 --- [.1-9001-exec-10] c.i.c.interceptor.CrossInterceptor: SessionId:512D7A220642FCAD61E730752546A37F</span><br><span class="line">2024-03-09 15:14:29.630  INFO 6072 --- [0.1-9001-exec-9] c.i.c.interceptor.CrossInterceptor: SessionId:512D7A220642FCAD61E730752546A37F</span><br><span class="line">2024-03-09 15:14:29.788  INFO 6072 --- [0.1-9001-exec-1] c.i.c.interceptor.CrossInterceptor: SessionId:512D7A220642FCAD61E730752546A37F</span><br><span class="line">2024-03-09 15:14:29.949  INFO 6072 --- [0.1-9001-exec-2] c.i.c.interceptor.CrossInterceptor: SessionId:512D7A220642FCAD61E730752546A37F</span><br><span class="line">2024-03-09 15:14:30.164  INFO 6072 --- [0.1-9001-exec-3] c.i.c.interceptor.CrossInterceptor: SessionId:512D7A220642FCAD61E730752546A37F</span><br></pre></td></tr></table></figure><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a href="https://blog.csdn.net/oldlimu/article/details/123889850">springboot-vue前后端分离项目跨域session不一致的问题</a></p><p><a href="https://blog.csdn.net/qq_38132283/article/details/117462126">Springboot JSESSIONID 设置 SameSite 属性为 NONE</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 毕业设计 </tag>
            
            <tag> SpringBoot </tag>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>本机搭建RWKV语言模型（最低只需2G显存）</title>
      <link href="/posts/33af235c/"/>
      <url>/posts/33af235c/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>之前一直在使用<a href="https://github.com/THUDM/ChatGLM2-6B">ChatGLM2-6B</a>，不得不说，这个语言模型真的很厉害，有很强的上下文功能，但是太吃性能了。</p><p>我的笔记本（3050ti laptop）让它生成一个冒泡排序算法需要生成15分钟（头痛），性能强悍的主机可以查看<a href="/posts/6677227f/" title="本地部署开源语言模型ChatGLM2-6b">本地部署开源语言模型ChatGLM2-6b</a>。</p><p>所以打算换一个响应速度快的语言模型，在搜索过程中注意到了<a href="https://www.rwkv.com/">RWKV LM</a>这个语言模型，具体的内容不太清楚，我只知道2G显存就能够跑，那肯定响应速度很快啊。</p><h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><h3 id="RWKV-Runner"><a href="#RWKV-Runner" class="headerlink" title="RWKV-Runner"></a><a href="https://github.com/josStorer/RWKV-Runner">RWKV-Runner</a></h3><p>可以可视化操作RWKV语言模型，非常方便。</p><p>到<a href="https://github.com/josStorer/RWKV-Runner/releases">Releases页面</a>下载最新版本，Windows使用<code>xxxxx_windows_x64.exe</code>安装包。</p><h3 id="Chatbox"><a href="#Chatbox" class="headerlink" title="Chatbox"></a><a href="https://github.com/Bin-Huang/chatbox">Chatbox</a></h3><p>对接各种语言模型的前台页面，用于管理对话消息，也是非常好用。</p><p>到<a href="https://github.com/Bin-Huang/chatbox/releases">Releases页面</a>下载最新版本，Windows使用<code>xxxxx-Setup.exe</code>安装包。</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h3 id="RWKV-Runner-1"><a href="#RWKV-Runner-1" class="headerlink" title="RWKV-Runner"></a><a href="https://github.com/josStorer/RWKV-Runner">RWKV-Runner</a></h3><p>先创建一个空的文件夹，例如<code>RWKV</code>文件夹，将下载好的<code>xxxxx_windows_x64.exe</code>可执行文件放入此文件夹中。</p><p>然后双击可执行文件，会自动在当前文件夹下生成所需要的配置文件和目录。</p><p>首次进入软件主页后，点击<code>运行</code>，会自动下载python</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/rwkv-build/image-20240304095543047.png" alt="image-20240304095543047"></p><p>再次点击<code>运行</code>下载python依赖</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/rwkv-build/image-20240304101641638.png" alt="image-20240304101641638"></p><p>等待下载完成</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/rwkv-build/image-20240304101735220.png" alt="image-20240304101735220"></p><p>python依赖下载完成后，再次点击<code>运行</code>，会提示模型文件不存在，点击提示框中的<code>下载</code></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/rwkv-build/image-20240304101755332.png" alt="image-20240304101755332"></p><p>可以到<code>下载页</code>查看下载进度</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/rwkv-build/image-20240304101818751.png" alt="image-20240304101818751"></p><p>点击<code>设置</code>，开启<strong>允许访问API</strong></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/rwkv-build/image-20240304101948355.png" alt="image-20240304101948355"></p><p>回到主页面，再次点击<code>运行</code>即可</p><h3 id="Chatbox-1"><a href="#Chatbox-1" class="headerlink" title="Chatbox"></a><a href="https://github.com/Bin-Huang/chatbox">Chatbox</a></h3><p>双击<code>xxxxx-Setup.exe</code>即可完成安装，会在桌面生成快捷方式。</p><p>设置AI模型提供方为<code>OpenAI API</code>，设置API域名为<code>http://127.0.0.1:8000</code>,OpenAI API密钥留空。</p><p>使用时请保证RWKV-Runner保持运行。</p><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://www.bilibili.com/video/BV11s4y1r7aG/?share_source=copy_web&vd_source=cd44bd88cfb9d05a93580856f71e9389">无需联网最低2G显存，解锁本地AI对话 &amp; 对话调试能力 </a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 毕业设计 </tag>
            
            <tag> RWKV </tag>
            
            <tag> 语言模型 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>构建Vuetify项目</title>
      <link href="/posts/18981397/"/>
      <url>/posts/18981397/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>需要Node版本在<code>18.0</code>以上，推荐<a href="/posts/4135d62/" title="安装Node版本管理工具">安装Node版本管理工具</a></p><h2 id="安装脚手架"><a href="#安装脚手架" class="headerlink" title="安装脚手架"></a>安装脚手架</h2><p>打开终端，执行以下命令进行安装（将会在当前目录下创建一个项目目录）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm create vuetify</span><br></pre></td></tr></table></figure><p>根据需要选择安装的内容：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Vuetify.js - Material Component Framework for Vue</span><br><span class="line"></span><br><span class="line">√ Project name: ... vuetify-project</span><br><span class="line">√ Which preset would you like to install? » Default (Vuetify)</span><br><span class="line">√ Use TypeScript? ... No / Yes</span><br><span class="line">√ Would you like to install dependencies with yarn, npm, pnpm, or bun? » yarn</span><br><span class="line"></span><br><span class="line">◌ Generating scaffold...</span><br><span class="line">◌ Installing dependencies with yarn...</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">vuetify-project has been generated at C:\Users\makun\Desktop\temp\vuetify-project</span><br><span class="line"></span><br><span class="line">Discord community: https://community.vuetifyjs.com</span><br><span class="line">Github: https://github.com/vuetifyjs/vuetify</span><br><span class="line">Support Vuetify: https://github.com/sponsors/johnleider</span><br></pre></td></tr></table></figure><p>进入项目目录，安装依赖并运行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">cd</span> vuetify-project</span><br><span class="line">$ npm install</span><br><span class="line">$ npm run dev</span><br></pre></td></tr></table></figure><p>运行成功后访问<a href="http://localhost:3000/">Demo网站</a></p><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://vuetifyjs.com/zh-Hans/getting-started/installation/">开始使用 Vuetify 3</a></p><p><a href="https://cn.vuejs.org/guide/introduction.html">Vue3简介</a></p>]]></content>
      
      
      <categories>
          
          <category> 程序配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 毕业设计 </tag>
            
            <tag> Vuetify </tag>
            
            <tag> Vue3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot配置邮件发送</title>
      <link href="/posts/debbde62/"/>
      <url>/posts/debbde62/</url>
      
        <content type="html"><![CDATA[<h2 id="获取QQ邮箱授权码"><a href="#获取QQ邮箱授权码" class="headerlink" title="获取QQ邮箱授权码"></a>获取QQ邮箱授权码</h2><p>进入到<a href="https//mail.qq.com">QQ邮箱官网</a>，依次点击<strong>设置</strong> -&gt; <strong>账号</strong> -&gt; <strong>POP3&#x2F;IMAP&#x2F;SMTP&#x2F;Exchange&#x2F;CardDAV&#x2F;CalDAV服务</strong> -&gt; <strong>管理服务</strong> -&gt; <strong>生成授权码</strong></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/springboot-mail/image-20240226170722057.png" alt="image-20240226170722057"></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/springboot-mail/image-20240226170904653.png" alt="image-20240226170904653"></p><p>按照提示生成授权码，并<strong>复制好授权码</strong></p><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><h3 id="Maven坐标"><a href="#Maven坐标" class="headerlink" title="Maven坐标"></a>Maven坐标</h3><p>在<code>pom.xml</code>的<code>dependencies</code>标签下添加以下坐标：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span><span class="comment">&lt;!--发送邮件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-mail<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h3><p>在配置文件<code>application.yml</code>中添加如下配置：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="comment"># 邮件发送配置</span></span><br><span class="line">  <span class="attr">mail:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="string">smtp.qq.com</span> <span class="comment"># QQ邮件服务器的SMTP地址</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">465</span> <span class="comment"># 邮件服务器的SMTP端口，465端口通常用于SSL加密的SMTP服务</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">xxxxxxxxxqq.com</span> <span class="comment"># 用于发送邮件的邮箱账户用户名</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">xxxxxxxxxxxxx</span> <span class="comment"># 申请的16位授权码</span></span><br><span class="line">    <span class="attr">properties:</span></span><br><span class="line">      <span class="attr">mail.smtp.auth:</span> <span class="literal">true</span> <span class="comment"># 是否需要SMTP验证，通常设置为true</span></span><br><span class="line">      <span class="attr">mail.smtp.starttls.enable:</span> <span class="literal">true</span> <span class="comment"># 是否启用TLS加密，通常设置为true以提高安全性</span></span><br><span class="line">      <span class="attr">mail.smtp.socketFactory.port:</span> <span class="number">465</span> <span class="comment"># 用于创建SSL套接字的端口，通常与SMTP端口相同</span></span><br><span class="line">      <span class="attr">mail.smtp.socketFactory.class:</span> <span class="string">javax.net.ssl.SSLSocketFactory</span> <span class="comment"># 用于创建SSL套接字的工厂类</span></span><br><span class="line">    <span class="attr">default-encoding:</span> <span class="string">UTF-8</span> <span class="comment"># 邮件内容的默认编码，这里设置为UTF-8以支持中文等非ASCII字符</span></span><br></pre></td></tr></table></figure><h2 id="服务类"><a href="#服务类" class="headerlink" title="服务类"></a>服务类</h2><p>服务接口</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmailService</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 发送邮件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> to 发送给谁</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> subject 标题</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> body 内容</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">sendMail</span><span class="params">(String to, String subject, String body)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>接口实现</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.mail.SimpleMailMessage;</span><br><span class="line"><span class="keyword">import</span> org.springframework.mail.javamail.JavaMailSender;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmailServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">EmailService</span> &#123;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.mail.username&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JavaMailSender javaMailSender;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendMail</span><span class="params">(String to, String subject, String body)</span> &#123;</span><br><span class="line">        <span class="type">SimpleMailMessage</span> <span class="variable">message</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleMailMessage</span>();</span><br><span class="line">        message.setFrom(username);</span><br><span class="line">        message.setTo(to);</span><br><span class="line">        message.setSubject(subject);</span><br><span class="line">        message.setText(body);</span><br><span class="line"></span><br><span class="line">        javaMailSender.send(message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><p>编写以下测试代码并运行</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">EmailServiceImplTest</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EmailService emailService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">sendMail</span><span class="params">()</span> &#123;</span><br><span class="line">        emailService.sendMail(<span class="string">&quot;收件人邮箱@example.com&quot;</span>, <span class="string">&quot;测试邮件&quot;</span>, <span class="string">&quot;你好啊，这是一封测试邮件&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/springboot-mail/image-20240226181238365.png" alt="image-20240226181238365"></p><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a href="https://blog.csdn.net/qq_50806424/article/details/119987631">Java实现邮件发送 超详细！！！（以QQ邮箱个人版和企业版为例）</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 毕业设计 </tag>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CS2欢乐时刻</title>
      <link href="/posts/1b31e328/"/>
      <url>/posts/1b31e328/</url>
      
        <content type="html"><![CDATA[<div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p>CS2欢乐时刻记录</p></div><hr><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-02-20]-录屏</summary><div class="toggle-content"><p><strong>幽默假拆</strong></p><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;">    <iframe src="//player.bilibili.com/player.html?aid=1450759246&bvid=BV1sv421k7uA&cid=1446082017&p=1&autoplay=0"     scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"     style="position: absolute; width: 100%; height: 100%; left: 0; top: 0;"> </iframe></div><p><strong>闪电狙击+对面挂机</strong></p><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;">    <iframe src="//player.bilibili.com/player.html?aid=1300917465&bvid=BV1au4m1A7cq&cid=1446206316&p=1&autoplay=0"     scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"     style="position: absolute; width: 100%; height: 100%; left: 0; top: 0;"> </iframe></div></div></details>]]></content>
      
      
      <categories>
          
          <category> 游戏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CS2 </tag>
            
            <tag> 视频 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>个人日记</title>
      <link href="/posts/4a07b81b/"/>
      <url>/posts/4a07b81b/</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="密码不对哦~" data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.">  <script id="hbeData" type="hbeData" data-hmacdigest="0fb3aced87802869f3fd806c7e5d93f7805c4879fd989f4312f60a374817bdc6">8bde14049805733fac92f47929eadda59c3c3d0900341f7245a5b2260aa517bb1d2de4a18d3a7f4f7286d24215b00ad0a91cb94987df2e930e62d6ba484188107e198eda2121f34a3c79edcf2cca8f39e32b8598f9cccbf585cbe40f50e1e80f11c9211af6620a6c4f0c19c6ae637d325c001a76d1de3985c7e21378d623df4a2f3398ccd51264256eab0182420b4729a7c9e54563be6bd01224faec57db35bd6953077b5d73af5ac293da6266116210d26ade4e3b4059e6a15be4d8964b247a45da6a3de22c3f51f8074ef7d1392bb0e5b2c37f68e42b47a13754b57077c28fc0fd547fc6ee98f6715c2a4744bf1712590213b6d901324d40c9b5855510df863aaabf839431a65f362c704a095d575f4536b02bc0f1afa9f7bdf78cbec473bc0f61e71c085e72441479437337fe11b288d08830717260cc65d636fe44fa2b2d55594464286a22bb02c595f95335ad9f75219fb27796db7f87c9a8417f3b3e9de1e08a7591aaba4eefe28360e1ba50a032984b2db5e1ebc8f48b36d6ce3168fcedf172b84be72f1d7d6b9182e8aaae6d2765b5961913352e60ae2edbc5578ed0ea20fe65700e47390a3b17d99a9a0643bd08630bec89b6558e0190ad2452219bcf0f6a13df99ee829b99da1d40abaf1b43dad14bfce88366a006bdd9ce735ee625a0204dfe018c9c0dba9156f1761ea59a9955d7efbf85409e6ccef41608ef6596ff88f04a992a1624380511e9f5613c52316b94fcba64d5aba6fa6ef9212e2c652db9e484d9f87d2111afe4ab11980dc5db04b5f9742a7532790bd99d53f36f6b1bf353003c76786a3415c93fdf44665fba3059010c36f6d9a1c2fa107973d67c2ee3d072bf4412c052e0e754240a8d4c94a0e0a5d9a771dd9002c7eaeecda3119d3f9de986f3612026a5a63315d83897642e27d4e48650ff730547f1e0d7303e46ad0cb67184adcd8e3760dbe97395fdc440c02a03ad0af1cd6b930511b412a0cfff56e7a22a26e57532cfc24dde1502ab21e5941ba506967193b071d074cfdde84a85137bd6bbabe16c6ee01444a21bfe130c60aacd7d75479729fb3950f4cd80832b1b8f9d1e575c3b8d5a888cbd91f566cf9a4e556a32821764bddf5840bd9c6784c8fa926bb23dfbc6ecc04ee951c48d3e30cae0ae80cb2ab99bc0a3abc28925029a92c6f705d420c169c8cd72f29914111741b27fe736d43f8051df62057fccf5f6d5b592acd21e880018395b687b75f3fc7f750e193fc94e499c09193f0b960cbd95c0ed23eac4e83a7b8ff8fc193c07c88c3bc02188b2769e69778076f96f6eb372285f4b13c28ae64139b4534af49a94194093ab805a302f2d8a00e15557ed9d3454da7bcedc876b03521d015b814cffa15886367788bcf20c0b82afe6321ee4f1880fbe3cfa11f99dd2d3d84f6aeb84fcf04ab6b8042b0f75736db94a04219c4c913fcfa7becf7a65a745f90f9c288bb8c8dfa772e86a781f545d1e26da11249c868d09155f056e3bd89b484d439a1bf2f8d6803b47fa7489fb2a45951a7ba912fc8c83785e5e5a8751793a30690f4717f46bb4d1924e190e84869056ff478fdbf5c47b1c5e40daae473b53c9da9c4e6a1d0f9ee40b755308536c4fc54009baeafa944565f5d62c61c513546cd8bf4dcb69c998ed87d815f5992a04f8b1c72113658b29175f9631e996597bf29b16593694f467213be87216cc171f87fd6a36fbdfb3eb0005e0304c284926c628ba7cc708b557b12aefa70702bd381c090144eb657f247f48e20445dd2e303e894f3d9f83702f02fa981dc37531387dae55d4444d0a6ecd408bfbd5f10b94a3491788ae1470f5bc78389cf3881bba7f127e91ea57aab49189e96dd5046dad5de442c9856f6e2ba62d7771a11e52fb0a886e3f2ad507c5bb4e10461e8f1068089e3b5bddd28128666d37a14a613299e14eed1c49ef4406f4009fa5047d763e96b628b55684d14e1aa47ddb45e18b268622d3d4c0207720c958500610f8221fe92f3c9a883f10f2ce2f3d166c277f7f58fb8af9646ce3f655f22da0c6bc439ed9a4b78509fb8a311aca6b8067971ea77256f5503158ccf128f8ce4fba66d43ba3f34ed99a8d50043c0cccbb5be7a4634faa413f1236b910d5cccae03572e30035a5a82230a218b029ef755f49bd9594797c349711aff8a2a07b2faa1ae787a46b87cbf5a18589454c6e853b595172d413df34a4fabb44bc88fa519a45b125b17c0b871b227363d0c545ce30e542c6c35bc4430a98e47a7b24aab7eda6ad2ec5298aa51cb5e2e5c7a7e44b29d222549c5586981bd4c2ab80ea2003746a8c69ac6abb658a84b639d45124c14558acf8eb493b0727aa81832dccc1c9b44a899ece1d229b7d34b3c81b2d0aea681a0cf9df453189153b32c6576ddf3d13eab13e9665d3b543751bfb6270a2e057c794df046089d3d1168424489056d35b138ba7da4c01e0f78c97aea57939ea3ce6e47307f830dee4c3e45b69f250e29308d6d8e07a2da9bc77a43630585bed0db63b925c93788beb5c1dbdbae191d410c7e06d5a5ce975978938904269d167b5913d8f76a273fd3e25ebcdaf474b48456e3a525f764d2c2bd0d6a28a4376d2c45568ea6db5dbb3fdd191c545adaf34f16dd12e360a4be747146fbf94365e9318d1c54e606ea7e6c83de64244b99c753873a2870b6e833da8fadc4f8e94b7e5b31b08fbeee95919df3d6742c31a8c892112f99503b7f5b2ca54ca4266d69ef8a6c8af8c2d17ed138e37b3383e6d892d8de4ac32767bc64da3f0558954bb874ee3abe6792be2d6450ca3df8db600f306dbcae84720e252681f74331c7a375f00f38af3de87488630d69e172d0011a561c9dbc3f07f64fede76bf9e21927abaea7ad0b8a89a67541bfba5f02055ad191722373d0adf458d24c62b6e1cc08f7150299273bcec85abc7aac6545669bac9bbbc218e7b4f73cfe96348c105692960d15adae1cacaa66e0de7a80b2bdeea334b8f05c4cb96cf5bbd991451bdcfd99b20c396fa6b174dd5940ba6c19f67f3598d36e406c4a6d1240201ad2debe7e039115ea44d164a08d58f3a431f66a767e2a6ab337f5ef1485cd73b19c92d9fcfed46cac8093f23546a9b1b55219de74f08897b63344ace15bd32fd7c19f51ecb2c501b8624808f0790c5508919b22075aa307aa7508341e37ed67ad10cf8b807ea5650e7c7b093ddf1dfa69aeb856c335b7132ebffc4b10663adf4068a780ad401775c5813beb70d0979d1f79aa3a757d3e08d0cadb245acd00f24425a58373a1fddfb159d499a217bb22685fecf61fd36b13808a9e0473ab91985ee8756ba4e2c9096aa685168642b2b00cc7b7ca5660f34220230a11f9a0084df41d93d37418829f7488c4b74a76dd62983fbc7040f6794284617848781bbd53ce56d9cae671baaf2a944e813a154b7319091a04813cba6e56e4c791f10d5adde57762f8ed337ed0ff18d5ac9dbc388c0de1576cd2569537e8dab7fd1f9fe824b5ee213ce42cec82e48d64e17f1580e192c448643731cb71c0dff01a8927e0b5cff4d50c79ce8d9159a2f042bbd1537a19b887de25326fea03bf39fcc6fd2b539d897f8156349b2344d05dff629b33d92076ef3cfd660b45c700163f1daab45e2993486bc6e0728282e82b94d633567d10a8d15f3b894ff29c92190749e3eac8c8cc4c37a4490bec28c05d7f36fefd3c6bd98502e8b12d8fa5ac571accdef77cd7331c8a7a3d6a76464aa1267e4e8007f851a9cd3188ce03d137680fa6076c1f79f527a06754b25a0008cb9d72733811171f9f7883d3cdd7373af0b787db23c85a8d5776e81b521b188945fc3faf8fda4314c676be4c2003808aecfc928ff1b7dabafb9af670c84f345ee3b6b2b104f5a7c75997522134eeecaf4ce40faddd7b40a27d172c8265231d701657dc54638e2ca3b6f5f7931b272deb2c1f1e29590bb80956f24fc5e174c86ae69772311bb834503fe16ff8e7e6185bb0184eb474b0494b0aeeca88c42e041f86e0f55f7199dc38403282e458dd79763673002e0f3da847266365366171e66035bbbf09796fae2f927bf98205bf3513c65f1df3a555a5a52f7c8926cbb99920558a26ce279645ebb44873cbe309d7f4c8c663a6e99474a55a806dc5cf19151a97b9e87b686eee2eba24a7a1f6c231af21a2a82abf61dce3804609475a5b146ccec89b82891c4e88c07a91ebb7a8ab3b3d23da29117db232a744f89a4388fc200a0b36228cc2856628dcb24eda76eeb911dd4303bcd772f983a1638ab25ba9cefa0df541a9dae9b0710577f716429f12238de55a5ffc4a1c30d5547bf6f388705c8ad56e3974aef4648aebf5a1fd450c32e5e180cccc77f99c4853e2fc03a74cb61febb191bfc221000bdb6a4871a1ca1daff9a21cc62c9c09f9dbba8ea29c420bf7836996c720f4a7af979d00b230b9f246c7630e46df1be52aef451cd7008506df6966a3967b3c0ad788c314aef4116e0887f3ca75ece770c6e963523c5476dadc805a1bcf7fcce4f7c952162f715fa639383bfc6652ba6316fcb8875f8d9099e5d8e7ec5d5b09ceebf05e3d18fabcd01278e6d2ca0cc71e73c24536ab219411932f2f89345a4050a3d0f014ebb11c61f638a62cc42561633ed6a56d3fa33c82fce8cc3acf2bc0aa7a09e39e16eea2191f70b5548fb38e8076409bd5289dff77d6a90fd99a2f32442822f93db02962c76b1cd62ffa51f24051a56c70be1ea169b0acafd36aabeb5ee6f035b0d8a1353a0f6d34f00e676ca3cc0dd35f0b3f5ddc77993c870cae8c954ef7e563ddebf8ca01f780b3c9e7d1c916ba07f7f06ef3e1168a7135691b4b731dae66ac220c5810116bb0f6449cc1be19f59261d37c67f4e083088044e7de663da9b703dc6f12636df8642192d308d114ad3486442e51765a434498c3bef07df1507b58e918f38811af7870c8f259283f2936659841304588081f264d9138eb3ea07e969aaa0b9df0556efb88143777d2e553c757a126ef4005bdd59a004ad6c94c2f5851d90f66182d5b7f6aab783b7c4ca89001bd114474ca2e8a3db27cca7b04ff41f78a3cdf3c42bcc2e99935d770df2d52b64b815b056237d77824c6ede1a12f3ba15dc3646834f5f30140c6dcf350472e431e9eea6867250dae1711a7cfb97a452f6eaa7392e774d85a79191c63d1334d7aab30a29321e9d047f66e73727c4a0cedc4ca4aed0f7cec51f486f3e920221c5c87ceba5343ff8af68a7ff29881104c93ec8704b7dade00a07e3682d8451b0413ad2e5e63a61c74c1ddd8e1d6168304499b6b560a47d9761525ed45139a685f6f4d944d08ecbf74921709bf0957e3109657dd90032388cc1dbbce5341d5db2c8f17f62e5ddbe328e09d4037271f295196ee7d14d2a70ae473f70d52bb1af45dcf035db5f0bd72e0868e75d81a1e85e62a6faa522a1e11235a4fbc6e16f94e692b9c00ca6dfa0b553c49e8922e168ce5ceac193880fa424a62205b0ea0c763fc40c98371e1446ae0d536051c258c860014b2fe3f5eee08ef9985320fb7058156d0a264ea383d8dd6578d60dcd706bff0850d53b30b2038335fe04299b8cf2a97e30e12d7d66d3d79acff4abfb4c3770905e79b15f68a5752ef83ad8922a9251b4ba192e373105d78cf77be3eef332be1376766d195ed71b2723f7012e748844dbe18b1ef5f2d25c4fa37d33f96847ec77f999b309190f35522d28ec73b9b6e559338db629c5496eb91cc65fcef90f78656a1f9944c89884369570af0c962dfbc543e9429df3687b5c9b66d5ca5cb02e5bb61c1635e0b46c1248af8af7a050a2a647457525ba58c5bab8864e10a9e6fa702246f0ee86d2dd70f9120df575ac44d10bb95b4ad6b689eb4e8b361606eeb8261314aaa5c41f506d5e79e6511c4456de15178a784b15c2459a4227ab511000494391a658c8649556f9a4358268cf72d0ebf466c9604d0c221362db3dd993ceb0886fa8b8016c09af03e3d362b3f6b0cc1bada93564d2434cef2bb1bdfae361ca406e648bb527edfad0fc21361b0dcfddc83cf2e188c317cdd93623062f2ee3905738f8054d4c8e1a6cf99f7b12212848197cf7bd85fcd49749903a674822cf483471ed569fb22741bb1b600c5c4b67f7aecb12be63c80eec3b25af7f422daf576d1a41e02eb4cf47bbfc1a74ff1daceb3b4f1a57a6908d8926a119b03f9aa9bf4cbe194aa2be2418ca70f26e40d778f8a16237a8fe5994caeeed4dad5518860c2d2dcbc1900c7381227dedef23e546886bf9186a854016e70e30215ce94020f3270354d58ba4d14d39423e9fcf3cb78a508caa803a4c6ad5cb480ff92aa8df79cd748295cc46e8dd1cdbebdf7fae7231e45bf8648ec03cb28f04716fc18f4aaa001632822102ff4d20b824e4a10ccbab6ad77591d2470d9c6e400508f6dcc8f1d90697dda5ea0903a82da3d61f7bd8f52694f593346802e96a65085714780b3467d04bea8875655a6c2e46607e3999ac8a87c8b24f8d8c87c9c5920bfbb8b9ff7d7c51ac0928728888e888e2aa10317d2aaa059992f7692dcc88e978f40f25c91d5d9e8075423bb5dc1c9b082c7c92e509d9189898bda71f40e439be532d4243c5ea4db1e2593be2e1fa46a1ac4c72bd599a60f652b5274da04a4371915eba70232f85aa401a4c40b06aee8d196426f42791d2b7718de1663bcc96e8d60115078026070bf96c1981d476cd5e3452887d51d94c6e7da4d9a273bca1027cb8cd4537fc31161cf7141bf1a45102be32cf5901bf5b4750b528397136f78d5359c6cbebd501bc5698237b9573da5059a08ecef305958b8d076d6c71604b6767fb7e00f718818d523ab4b420940f10e182000cf8c39cb7fcc85f98e9f9ffd662c4499196c69218ff2c80ab607f532ac4265128189fbafbac9ec7cf03eec658a9555006278c0c892a3eb14d141848dbf9359e39e65de86c087d23cddb6b160a14aed8ae38e02546b2528681942588330d2c7574926afa842a21e5f9d3ed2fc23111d36f2889ea55ed09bd032ff439e284e7927809d8e6b5573e065a6dd85f34a65e26e9296f0b35ccbaa8b63a55fe2dbb4f95109196c2b612c05fbd3a7cc2d0a7292cf067011647ec43115a9b629957f5dac6480f76a5069c478092e24f0b92945a776f3a905a0241aad95f225d988806b8e5d2e958455f2018838683af416509bb921b938d4656408beee7b0393e8b102fbb850411e6113241dc5cd9b281dbf09bc24bf4ad51ef88cb8148b50bfc031af7b9f68ca5738dd2d0c38ad3d21a8089c4f8c5937427e7ced4ceeb38798c247546fbd2400581f7c32bc55e89bd70150c514f3e57ead9797da9a147d6ebe88411cfe31d9183c60a264e47cc50b168f0b16ce28cb420824d00b8d79b5bbb3a10b522fb86c3b976fd8704e625989ce122a1b7392bde64c6621685a30450a7692a72196d2975be0c4a4ce9a204b58a5b799d78a250923fc4e09587360ac7f63dfb5f752ef2cfc13db059e0f1a2f1078548a83e0591a3274516f6f0bcc07ae5fb796ef07d525daad9f110684f091ad918b806fe2de5f1d9d1cd1cefdff2386481522e38d16fd28036120389aedf82247b16293d7fff465eff5ae1ee45d107303a11fb31b35347f65eab0967bb9fa569d25a6d45ff1eb8dfc1215ab1cd96fd98a1fd0fcda6c942f8748c9dc0d01589c37d2d0c9daeab6edaa51c1753d262b816bf07ba02626d2478d6e8ddc7229085115296c2d151de222fb584383806c16d5fe75775ee583f8a21b2383d753d4c6c9ef20c75c7d8a0255a58d2934f59f30765434a853ed9c96384454490d1349cbc997d5d675de7087f92781210b67e581f1309473b210e9bc6da36e7c328cf6b43e73d6cecba27ea013ab769b78c9af712db7c0436c5794f699a5eea7092c5af484c9b57798bac424e85a7d7b7799a6552bda148c8bacc0c61ee0b82e53b1c95652eff2fc04a783967afef0ac053549d51d48512ba79dae47830ef0636262ae0f501f8c9018be82bb91ec8e7fdef0f30b2e62c58fe0410ce0c0c43d503b04cd278c55d42ccac749c4466527cad48a254ad5644d8a98c7774fca3ed84f27d50ae9e525103ec6f4b48102c773a818f9656ee3777ab96e4ba8bb98cf30806c4856179bd7d0831e5b7f7ccd475a5a3f36203b0931640228615ef6a25758fc35db6539b675c36922011b5ad0ecd71a7d97f6315020466ade35795f1636978723d0f003be3060852a20b3ef7f9de3d2118e81aee69243824fe8c00efb54f993964fbc38081407aefe09199fce3f9c82b5fdc7d87bf0dbe7cbab8fa3bb0521ba5b71202e07cd52d24c10740b0076a85b2c6e825a5be2b5ffb506df2e52133508430b1505ae4f013dea82f5b95b66d4e2e526664ca287c3740a6de813ffa6d9960d61442572bd91aa1524dfe4ca77cad48b30dabb87a137309f362cd1fa71fd2a1aeddda452d81238a27556e8f7ee5d366e44539e2742f4a2f93182f0aabbe7f45ef8abaefea0302ed65d4a49b8a93d16d2a42c70c8740c34d329ecb75f5cd0852d6df4e209206b66dd509346b31cf2e7803a59386d9575b45aec43bde5a4a77f39090b387010902c7a8a4430ab181fe90ffa25ad5c95ebcdb0fa3c98b416c5f0072f830448b4a118eaa40260c3b29f7111589dfb5af146c05cdfb76fa0319c6fba5cc784e6c24df051015d056ec7f2ed603642f07ac675d62759d14759dad371a885e6283f77f6e85bf8b16b66d79806992cabaf1e59e18a9de9bc6c91396cd8fc1db625e9b9a4eb1f03a10b3825c95cd4c54e2041dc88b8707e5b5cede489c7337c54e4e7b24f27e841ab217fbe06d8b365dc690ca76ed38499b72e9d395c0c818a90a6ee728999d42d1cfe3d7efd6701fb7424924a997c6d723d58f85589777d043394bd5d3c809e338d488026d0f38c2f7b070bb6e8a3ebfee3d3441d63d2fb7e2b96a7c77e4195f1648e069a75c15b81854d1f98d010843684c39166f114d923506fbaa441eeefd96809eef2b66b029000359511b76c18c203ec2a44415f7a72e54611590ded3689d788c04d5542aeae99af5957e32265c529ef5c622dd3c95b5b124af035b315df1a7e5cc70da44a20e36f5e205a3c9b0d8a56177633591c820ef57f6bac2f1669d0e18e9d01242cc486a6eab63436f00d6ea6f536cfb6453a1176a0a6841c2a8bf6db8cecfd68187623cc6cae82276b22f7a7620ac51fb68798668e2036be1d8290c75497068aec83c97d4db86123b3d02af8e3f6d1035de021c9ae0520a119821581bae49898d146c5d67778587b275d0ad876ee3f887b79df766eda4a2f458091719074a24a564d2a7216db06715d7d3c914ebff376fc035355e90ed166c4d40de55cfbc5a880823d1396389aedf424a3c0dff48a94b28f4d40ca2c5cec427787fa2787d623d6fa051f247716bbd6ef5bb1c732c9c77c882c4a9b26d143e599a6434b236cbfdc997fbe8eac1bb61d69088bd204ab1af98ebdcd3a171e257d85ffc028d9e785553552643ff92292a044f6dc25fba4e1d52543b1d24a793223a785d52fe09fc4a508543cf755b2e017c2bdc16313a61755bdeca6683ce9654327fa92ac343763903f4e34b30147b239a3643a1eec8977c4ac5512010794c573fb1833c6ba0245e54f585095e07d785c205702282be9eb277c64b1dbed27c26811edef7380b78dd455020d7157f90719853f8a653ddf9c5bc6d7bc1b1250f7c096b98dbc0e90a192e49b903fd60c2c446d33162a80d3464745b55c8013362989bfa51cb882492975ea43f314dea97f993a0377962120713c011d655d97def6db7b6422e1009e42a5106a1374bdcba2420320e2d4c45dcbebc733195e532d33e994ba70e94cebf9c076d4a26c7d641f1eeef18fdb3341aea38bdcb6b684711404aad57f3dff4e78f68539b62fe4a13df59c6f9092ce48f2000521413a896b2a08a27022f3b1314e9bf3a311a4abea3569cdcb932a6b8defc3ca9dc5f20d7fa977e2b8e9d04d5999e5f6e5d1623c439c13d7c6b699a5fb0de4c0183969993c00eb460aafb3984aa580c0a5085a010223094e5f254751e9de1b369a259b29ff9f13a9e540b4bd8f3ca71e670b7479e24a5e6cbf010eebd6ad12c58ef912835f12c381473ed398392cd729c40bfe09700656bb7803c5edd10808a1522a0ddb9b2d05cba8649df6ae8f08ed13e5c27b1acf93ecb1041c6dbfc06a1a49aa71ca0fd6885c7c5bc6c19827be2b5a3662d71211bee1629e7f2cfed62d3a308a8db5e15e41ce0fe4947f4cc390618e6d491a073c049d6723f8ef1b0cdab83aa82cd83bbbbb564a913e831eac794cb64d4451784320a9efce43a640c88905f2bd5cb77298f9ea227c48bdd715637362336fd7167a13ba61a78abf18e277a4429f494046185e6b11cc8d6e8e314b2473712cfc42025e879b5f914634ba81c22a17b18c91c2a87ff15045783af91fc1c0af34a7e18d4bbd3e10fb3fa50429463ce2e211d85df16d7e7ffcf1779a71aa8843f610ba0d8dfced4e5d212880ff2a1f44b9c073129c3f42ec54df5d522bb54a14909961c1df5916b6baaf83b1b85f58de5c060fca03ff7dc84e8ac107742f18639a9ed3864b79782bb441fb8d058d63796e850a9c68efe88e11c3097ee568a7a1f9bda71e82ab441abd35366af1ecc633e3c4ad096cdd21e0541fca684cc2062bfa2fd3155c485b672eaaf86bb9c2f6ab550019806d27b34d7f94e80b3b6745b8f9634810711278faf7dcbdb1d92e7248ce4f582f8f6a11197078e1baa1e633eb79cff501c671ea6ab782f48ef6d0c410db94f23f2c763db17ec687df08c6d039ae586fc9c2131fc4e1541a06fff6cf499dab04452d36aa92cc55b0a5d51e8e8582fdbec49e8193d209ba9da9f3a179a620a5bfc5792f111e69e636381176ea746a59a2ebcdbc36ea1c32ecb940fd2c1e9ec5c7900e194e38603ce478d602484d562f949f34f2f8ed029c7fcf47a8b64fd2a3c08eedfc748ca40f75b7f9fcb52770410bdbb3f606348e5d43b7590c9d00cbc97b482e694b0d7bf51492d7a27e434ca2583e8c403fca1b99c06085deb45a245b2ca698c95cb7cee725a1ccc977ab83da10a464986c0af9d83bf8622c1a4db4f665abdb49d250251a56f3896961f67aaf2992f807330509d304e77f3284da3e38bc0b47d305c0b104fcded6d4abc3c588ecd31941b38c6ac20b03b58a4181f0a2a4ccf99b7d7eeddd8b737560e50132d1d0f089b118163ac8338e77c9375da8d892242940414b10eb081f2f3be1673a43a5d300a04646c5fa3f9a00697dd8b129383fe064d73a2e4d5af2000249f7769b0e7a8d85b5309e384c4d8fac748efa9f341c7d1120800b991783641004c7e9150a1020179bfccbaf84196ac0ec4fdfbda8be4cbdd34a0217ed4d2ac589541288c49007549330c000723854fd6819980d8f5a46482ecf69a958fdaa72af951d7f8c6e63549143dc52cbc74e52ac305718782800870574ad70d0149dea4ac7d845f6c8c86984866879433f2101487ce1c68167eef29135bc2b394c57c34261a5319be2821d35c270d1995e5411a3040fc181358e42ac98ff2bb7b192a8c15086c33f19f8c705b0777ccfce24504318b95ddbbaaba1ba36ce66a4c49ba30178a35299a5760606cc141e1e96e1c1ac56c17bc8a3f789ebba4311a3f663c8ac3ecbbc8ec9d28e2532c69e11b83d1d9ad324e4ca598278029f15362fcd06e83c6fe1a418b094ca0de8541c08eff61f36d53b4ad817e165147dd7aac556a12d051fb938397e1992590294a861aeaf8f638c6a631cdbffa43de7f8c7b8836b2c32945223bf84199e54741753929830f7916a46ea00aa0d88e7effcbfe9a657141dbc75b2d06de68fe7c6cacf2458129658e7d59b269cdb4d810ac93fd016ece8d3ff6fcadd30acc09ecdb57de34cc094451431b10f3e70ebcff793e1adeef35a27291ea0ac39809e96387046e2c4ecd45776492fa4fb5cdccb9860e2bfce9d38415892acf53ece375ca45d9d8219e430170a2dccdc0be287fc05bbfede519cc07d73206d3ba81a17291cf8791831ac655976bdbdf40be92b65aab3e81e14bb296936bed802edc8b01e74b6075f6833dd13fef42d9cd929c7ee47997cd0d86ad596dab4d07436c3db2ad959b2b32f5f6b504e9a5110f8cca2f6fafb967b2922ec4c5a7ae35f6db1b4c6496772d0cc79603c8602ed433b3af650269ff8f4a1b463e6358a64c060687050f38b82ff3a3eeb5c40ad02b4082512f7d3123a74e6cf4552c60cc58c10c372fdc1a1e65322a516793fb3d54d07c13bae18ed28807694f94eddf82b68bdf735845cf49c28d895a0c02addd3f3cd94a57851be591c0c7dfa361660ae6174f57b42ac992fe359a386d491a616edff58c818633e0edd6f3b84011a48cc9b8aeba6a765b0328f1282e3b6b707b653390daabab04e8b5edfebb7829b649c133ab65d08d7d1d1bb929953c46d029f762528ef693b8a03ffb0aed5743e1baa3bc3cae905977873a59a8d0a36da173f831413f2d1e2eabdb2eb99d1a895e2eaf9e454822ae93f4f2b07a529b0f2d9a610ba0cd6fc08130214aa4b67c1f42087b23061b9c1b3fe567cd1ef6bc6add191c6bff3d0e175ef672622d7638ced98f672cd29ee7670bcacc8ae1f5a88199cefd1c551ac40fdf76399fcdf889549d028483ea3560d82d469658ee1b9c0fd13711bb102b35f1a9ed21d1762094e322174e666dc2817121ac2867aeb382f76b49fca306bac8e0e6699cab6225284276ff3dcd591167b4cf430321870523dbbca7031e9a3efd9ce59cd79b74e0bd97bfba279bf5520c90237af1a487d3a4743f8c33a9005b7c5e12911368f2bce99fa6449ef354e36bc50e872e865d200dfcb2dd2eb271ddbf14a7bb6794c2c6f44df49b24651f3c49a3507459db3087ed14c12f76db94e552f50199bad559fdda001e2bfab63f3962b73a49dbb0d1f34981c441b171e4b99d132d247b607060e6ba2da2213bab1a805a7f0dd1f8d417f386fb654b3dbdba6c57b437a75f8f1d246d7cc9270cb94ba43e4b0e9f744d76287d4bcabdcef6ed1475a5f214385bae00549666ff6463a35651d87f6454a6a4d557f9e93bd51b27e178a5b30a60ac13ba904608a93c36f491af34128080703f4da1362b8e1631f53da64c1ae545488953aded936adfdfec6d44f41b8509c57d2f8a41448f008924ac61de7f6855061daec0ec155491e9473b6aa0de454ed83b3b336ffeaa50ed218b101e23b0f1adfcebe1c2f4ff9ae785bd5479bad8bf9b896aba42518dd70c57d9170c303d7e904a2d075563f47bfa6c69beeb1e2a125930dc53f3509456b0d4fbe4cecd80df2f6f62fd6aa867970f7272707aedade1f6998cf9162e9be890ff25445ff470c31d547e5f58e8429de7d14c304ffcca992f1573797e7366f46ebc1b8f40ccea882bf85ef93f419747e190a65ef21b4f7487f90b5af3dc101727c2a91ecc1ac32249e07d6e29865d7457804a2b720e21f831f3a0bbf08cd36a7b033444405bb5492ef3b377e692a7ab0d0cebe7f22a6d36dc9b3a581823c2fff929ff4652927392a2f413e138d48a99f90b1d1ebe44a06faecbe3cc2e17c3af06f19921d946b9d4f900832cc9fe60d198a128ebe7642b64b6883ee698c4f74d1d9667bd3017e7a06358cd63e15109a4f135842203a035ddf0aa2b61bef7c836fa5d77aef9e7f9da0451a465e889d613ef60d70a4b767bd3dd8360f161078828a621d3d6213f329ee3787e92ab6ce430f88eaaeb994f27de5e7cbb4a5f2e2f25a684801a27af5c6ea08a98021afa7605e3bb1cd360236964ada9f3ae0eb589fd917871030c1c2ae8158660fafb5653de47925e83f88a54626ff8517c952e82774d1409865654d21d7b3f0a0b4e0bf0f5dae6b582f896a153aec6cdd6cb821c09855d2d7cc25427bc9a214404091da47361320f037c0bd1fa2f421eb9235d20cd164244d3a6c7dfd993ee0166562fcf231d65026fdb288c2589303a5fd9b66ef32a6622c1cfc8d8f3b466065c9d9e473fb4c6db3e2e140b26448551044eae2c808c7a1941a3f79e142aedb845c298e6c9428038017ef0e3378bb75fcdf83845022839310e4afd4c790b7008e472dee8f7d2cc237266f73687e3f176aa28dcf937867204dd3b3ffb38070203e00304d7b05d69d06b85b5effc1d8d41d3109e91e6b2b0e7db6637cc7a3a64e81f215d1012059aa5d7f9e76b43298f4b2bfc525da5023301a39b7539f720cd28acc78b86541ce1cd1bfa580e98a8212eca2dfbfa818297e0c5e69228ce23d23019c9dd4622d6c690aabdaa5f37c82dff0b52744c3b5cc3e0d39120dc17a31c118ea4ba70b2237bf7a3565533e93251b8132825a901ab479a87a7dd7f429130c83992aa70859d3baec38873d35e0978c7bafd0bf7d5a107d55d274408522d8d7dab4853ba00234c9768f0010deb9f3cafce668ed4a802f5ce01d2d3426c92b74ce079e39d3246d8987ff9f47f4f04c6e864e869a4cdea62f0731c304309d62d0161468a9df7e0ae00dd404a0b6ea75c310a50f756ea57c943f08db79a15ef16710ae4030850a5dbe329fab4cd2f8c5aaeabc0c23e0cf53e6ea9121dbbe20d7e337825b45a1936cf62fa63a6f63e9528b7e4ac87cf6d08d24a48cccd018d570656ccd649fda75f8ecda76262a1efa24b9de7981577cc6532442465005c0f132ada3f5fef94f3145626f3c4e974364bb38adf6ac75a9c9272d5d1d0f6628afcb1c56e3453cf61bee7650b142f7d7fea6c5e2363dc28f91e0a1ba724149b6a858c1ba576862f7b1761311e36ac6e78e95f9a8539a3d0bf83d8cb5a268885ecc96ff63a24fdc142365fb8a13883864897a48cffbe8b8da69493c637358d328ea3a22694af91c35e40737ec03d5838278c8eb69f5373c4352c64697f91e5a4cbd271550584a65c76febfff03f0c0e445df55e33669ca915c5b461835512be4af6c8ddca32066770db28e8fe69a5add92728d14d78ee4743ae7d4ce5767f184f32a9637b990edc38634f1bb504cf3e1402a7c2a8f2a7c2647719df73f44c2d3c05832baaffc93201dd4dc16d9e0fd893c6a83e8b229863f7fd083dd4e0dc0d0137c46ae84836598a54202a2152be272a7082928864d9c41d3b031264bcc228f496c7dbda58d43261cd79364797b75e81e363adb6a84398f388bb429f5963151888487035c4159115c0ba37f25f9fbd7d84f978aeff7ab57804c6a3ed6cdf18175a9f39bb4ff7e0c684f24d0afe77182310e6d85c30de85934c78d3bf26e2db1120a842c786da9431f8035ed81c5d58a9771ec8ff7fdb94b63177d0a379450ecf84f3533af6e8a119949af248e3547f474e3b8388469e1677621366d5f940ad52dd40f70c0801515e9ef8d93ae501306677991b79f2fa25524336b61fbcc804423d7a4256a14f1e6ac49e8880b2e73c2c0f8351d603b8147fbe95bc73b59b612269789f025ccc90e3847974661da6c461b5906ed5a1e4e3bf62e34db9c3c6f378072db3f63d1b76dece720938b270940bc88551d0d880b44e46e965dae41911a5d8d4725c9461973393a04e147eb151a92a87aeac2c09d0d2df1379da09f31739bb09f36d4daa7e3d254c4b7af2948d826e731213af3c4fc19f0b10970e1dadef2cfe53b36b483916dbb8fa3aa4855e3ff1e6af969bb1adf7806f6365e181ad69a05b2a1fe4a401428d6699e4572dcbcfc6489b89987c540eac71684d3d8bdf2cc81671c0343bda1512885b2b5257c5aff8bf4b6dc0bd9ca1aa8856b347474ea654c389a56a14ab016b873102b93e436ee9c8fd597b8b98f81a92a68937e8bef1fc87fdb36ee396b0951b0ced2a06cb6d9608594db5f27f280741cfeac6c5470410d65be7a15d041692252031407001ac0585ee61d597556faf14bb82f3911c05627ad2b8f01749294f5a423889011794dc0f360fb50cc03a14ffd899f05615ba125da802197cb8ebb996aa1d8205ecd1f7910904f0a7e3e33d632045dcc9a31d03a1c01acff5ad443ab8909b1fd3299bfe765127e1874720ab4fe0102f5b31783b15b9cc8ffa9758c7172877e2792c81895a690b878a6338486bd4f394c3f66beedfc8d6c6623328544c22462c139d25b0b6af19cf056167be6026d02bb54aef1060ac09ed379c95bf8e20bb6ce38c60d69ae8d11f79688a9c861b750107d76b2b10c421ef2b9123f03adcc228c3e4f191825ec05beebe8049b73a8b35d5049052839a0667ba65a4fdc8930aeab83aae13dd911c514f007232ea9dd79c22701698e32e237ced316d94d6c4c82d1f9e872c73cd3dd777ae80b0fb9ba9e6b64e45b7b4a6c9b16a0f59c59ae5bbfc3a9ac098507778f48ad1ef57eee20f67ff73d60375935782b30d19eb1fe7cbefdd2f46a60d053e04d686d16d704148015146c03a5ca87ab81c77287ca4451a66350b775a03d9f3cd25771df0790837deb3be2d04da2f552ccb36f7d25bde3aa07b0b77b9df7e2e522861108bd8a5deb727769587feb41ced673011f7d371753bfa7f6bcd45f6287677e1eed2dd5c9d97e38405d65a118218a15c26c7e28c283c74aff85aba4a11ad9290b262a8b6c6dbdf264499fc916649430b2df55a9d19285a2720bb11cd908c85d128d4efa7be3c6413e6a96ba772acaadb49e890fca2fa4beb09f2b574f1c553e72d2a8c5effe3db3b555b98e97be90e7fd190d61e06fb3c19c8e9012004350c734adb8c5056765a759ebb49dd2c3d1dc7d682076ab83be4e7e15bd9092c97df017350408d8acc28d7cafef57c8592a7210ac841920fc5a0015f9084920f3f2ff756d16b10e8ab32818330773fa7bfd53bc84a63bd2d585deadb1b8f83db675a96993411e68f02b885fce4e60c00b834472aae5416475554eb115f4adbaddc98d74d4b66fb547be0aa46998aede5b17f7ecb5be1b84bb45bca58aa9fd9d4ded5bbb0ce589fa11ed47504a5b6b055f5236b94870f6ae95c4d2fec760ab77f5db6624ec148486d3ad5e6dcae8bde5728cca7001877cbd76b2f4588c1d54f5910e4d1dbcb4ca9a51448a3750d2ab6769318c2e9a4b583c12ef47588723610ec4a15eddd12850ac41ffbe63d1f482a31c2650f550e762e54b2595fea1aeb5cf08afdcb07b559cbcb8db0619fbc72310bdb4adeb9c443a7920b9c80def31416d6112c54206aa70f8eb477fcad2c453d14b0fffcfd3e07b7be853fb3b1971495521e1a83ada5491fb04e5ef20b5d978ce6aabe47dffe992f1b38d729a86c47e5042d261ea6dd942ea63ee131a84dbf608272475bc38b666f33d131266c8bd8a81e0e26c5b469ba87efc59bcae69b8211010a1946a9e38fcf81ebff1b07a9ab77d728f4825a14f92afd3687d63c422f4b2a55a90ead7ae4ed87e85d6a7ac4b176beb4c8f48eadf9e0fc338ec53809392d011e8f324ca06d2268c3e40996226fcd8683c59ad8f832e62bd92b4c04b73ee4201d29c024d61beca08214f639912cb724df135b09c76d8635d11d6ad993d120bb200f01066736a07fe23449ef9f6688362204dde89243bb3af72ff81d59ae7192ad5657bbe9dc1f5ffc8ee26cd7e239fcdf49927b7cd6f435ee6f797dbdde224d45f2aaa122843fd6521b9f917388d0a336387168ebb40fb3a19e2d84b3f304e05eb97b482b09410c23bbc0557b06f6089b8b1caaefe69389934147246354d513f3a78ceb2f8e5285f0b4accf5c6d45ddb324d78df9deffc1538ab3a3397a9eae0524e2175c19c29ee049ade164acb6e2f1d519fc2d891fb2b744da9ee48a0945a9ee55e4205233110f34dbd49a42ea402e6e6b3aa8492997b0fcf70bddb7e37d25eb88c2bc1c2cec7e6f657d1e64927e5665451cac6d51357fa29e79c868ce5888ed8ca25f58dc6ea86ca6a21efad4b4bf259179c594aa965bc6cd800e21d9bf04cdb46ead0c99ea21550e6c21f06fc609dc65396a6cb00cd670c1c015290c19b3747731be0aee6e05ee7e6f1c39620b65855dbafe0aebc000f7e9f57c18b90ec20c200aac82d23b09f21db2bdced9a10d7e958105f3ad89142a2c55a5ee3275c5a1e00681ce5a9b76a07c305adfe64a59202cf1128e806974ca626c82da3f26ad72990e75d70ecb0b6eb0de9329df93faa307570cbd7f9aa320f783b08185370bc1005b6d35f53356bc9e0760b1a79fca8c76282b2d4c46337b8af51803d4fc13e2ba7a7334c368cf8663ead5b9ca8449bf399dc0bb87a1522c7ed06a9b7db54e857f9fe3d56156ea9d525c87b581ad13a5beefb90e5c26841cfe91f4af71cd075aa76f1ce88df03370e1574706126596b715470cd16335dcf2881772ed289a68fc01cafaf25d64ba695a7473bdf02a4ca4eb46289449d884f2fbd03cff5c517f7259c41d563a9e12b278bcf0bc02d8ce0313036aecb5a540254fb22d9c4a3f8e6b9f762a54f2a82c3d8dce24e1ec9ccf8ce6ce08d01a0b1a7527f1fed9c6fb80ea84cefe8c6b1e52d985b74d5ef5516617d371b9015e6cf878ffa12b2b842328b3b3930414f9f915e142d3b6b5ebd45a7b3e663e7b1bc56263bbb1165eddda7d9bbeb2102a6f3d6b584eeb7a85536b7257b8e1686b6fe354beb4ac1957b4c5f29b0111b31080575de2027cb37752a11fd2f2861cd42fbff1e520719ee42866807bc6f3b0a7d4760242c2184c0cce174b43159f6e70b32cb6531d80a1ea0c7058ed9e88d9d5d46470fd98df8acbc3318042cd33bc06cb4fd92bf830e8b51875d7f95051a88d116a23807ffaffb2b9c3724ed73a492c9fdca876eb6888f5b6129c2499172467c2ee58dc98f9d18041352c16f8bb219310254380b7c24c32137b825d22ddbde0d5c42247effecece7feb413966ade3f98012db379927608b6811563d85544ae7d8a84656a1593c8fd6d1b832b49777d14ff9a59aabc921165fede784160918eff3f7052e362eb996ae30f5bd886ae2a375238c9bd9d161435938397b7e594c8a34938902620bc992ca2b30c443ccf3e4c917dcb42c417de0f16cc0dc973554fa5312d9382e0ca5084cd81ab0491f8da160c97aa7878a3d203d5296128c9bf73559d6d4da536135ee3ddcfd92b0ecb49f625e9a74c439d8afa8867c2a00247cd67c4636313db5c5439d4a55c72003d05a05dc857ab66b2605fda7a452dc7fcd25db7b7e578731afeda9b3524bb700e8eddae1e743119fb5207ebc1c044a6531508098fef8f41c524c4dd58a1da5bb239083861c6e8e164265fbf50002329bb102ffacf506e0cd98414032acfe9d565cca99e4b4aeef79e1a37422607eac7833b0167d266c974967223128ddf08b154663d33ba8fd998ab7b58db0d3ee1d546809e10c74ce8858c6a45f4035b4181618c8424883c95d2c79b65d84e034ebdff46a2123be0985c2e24e0ddc1a7baa54101aa4b972514ee4c7cec30fcd3b4f54d2be1cd6ca6b0b5def1976bc544edf6f648cdaa8620a1233795cc540f146e6f78fb6d1bb3ed4e20c5e4b9977e88cd4eff87ed14eccc8d148d2bc8202ef1def190435cc7bf718381e3f6ec05bf129b18538e3d07fc5b9849f6775afcdcab54a1ff8904d60019a6dcd9bc8b3f28205620fe152685e34ae2c7bf0647a4d6789f58c886e52ef280dee3184066541a0f959d89e7ed8fa64c93e1a100d428561a48380fbf3e4ac8ebfb4cb15d7db886de0ef2d036dd77d2cf2bedac788461a4db0e244a70097a5bb6f2bb72cc0e3cae68f027883ddb166de1dfdc5ca307b60bd8c3ef92da930d417d804301def0df37a8608c24ed0b63e3fbbbf98d3c16fc8d0399f94c06b815b18494855f98d60d41ff25d2781350f643ba5291932bea094f857a23435551ee82c682351d2a115e3c94d123ddf631901152439ec1e56a4d70745e88a5644fada5ce53b20d9d167d7153f19e4dcfa9ddf8741ff4b26b4798af437268ad2198bc0ebafa6fe28ae9f1107d2ba99aa4406f5d70e0705a183e1e95f07967cc6c03839b7d7b86860afbff6d40c5ecc138c263ec6ef35ec62d5315ec97e87297b6ed44626ba194a4429485ffb9b91fcfc3ce4691a47218f0994134d2898310c7fdcccd72a4de5ff7a24fc2b3c5f85bc3ba6bbe4a7419a86d688208ec28dcce2eaf239e207150f24a2ad9400fb497287b73dfa489af8e0fac19c057d168a2b03647a6e0d53a5c386a9072f5cc0ed92ba51abe6175a4d38dc7daaa1ce7d4ff646977805b34ee80844cd5cbca685f86e35d32185c7a327d6d8cb4bb8859abc44aca7fee3262763d3aeca79ea4f9a37cd17dfac847092092e3a0a82ad69713f8e17331b303335ee0634531a8cb1dafe282af57e1097e63a5d8080a1fde1b5b99edb776621895b9110cb23a3937c552aecbdad9444e5c37d96c31d5eba2024298b33da383800925e270b3b7159a3dca79aa4a6295c8291b96420ad1031b73c41e9ca10bb179539832e2caeb4bd235888a58cf47df21434f2d126d4ed3cd9d4c2d112d9ef7bd1d88a3feb26456aa002c69147de384e2afb2ffd1f4c150913778c5ec215ee254a3faa08fd44c9834dfebdcdeaedf1f575f0c10e212bbbe869e22e801435c2c060fc5a56b22a3b3657f859356eb46272652527377c421077a3b0cb2ef49f93d3554cc41eb25a39f3fb8619aa9be2581a970f14d14c8310a96113d52d0128b31f1363ad40433e35ce5a3f47ea4942a4d45a9efaaf4ab0627fb4bbe0729b797c9324d348b287fedd26ef38f6484b89d8fd133486a4002b242d19521cb43f9d9e2093d022869b518617592e0980a7ba7116a7a52873f280430a7cb99dc7e89082ac9495b814ab52108d7e1ea1b296828b01f052570c31198e7a0ed55cf9b0dddc2b7fd696bb918962a220c9d62f2e7383297ef32cc8a268f14b924c64c0b7338c17ad1538fb59eed34a2ca6144b69c3a68cdd683275a594b5516b869a0cdde0f4eb5101656f826111256d7168616d11c7f53345b530cbfa487c5b901d12bd6bda6613581689d55d22e66ba4a73610643daea9230a2423f90ec2558bf1a1aa4029dbf8130e53fe7b225526ee6641e20e1183266b234a7e9d21792688cba3c52f14b07c9795a5e95cd09a008f3e9fb81899a3311ab8feacc88de4559d26c7a58ea2abbd6fcd41224e058b74879a34b5761ab3632c119b2adae4988fa243851b4a7b1e08ce4060be5922a567207bc828ae4ff8f801fc85cfbc46967c8da1ba736b2138cb2f229e99a670c56c243a8db24dfa55d78df8ae4fd48421e642641cdf7841c91f635a9b5ccdf26eec0fe77c6519881fc21df4d483182d194d9535e6279b545ea52fd9a9a8bd5ad3fd92a4077630a492764174e87e30e1bb74861ead07ad0965752d1de7e2aee15f3990fd226463601565744e1470b4b1e29bdd6f269d89f7adac6ce09c0d0f875c2839c00277d9cce1363f618558740ebc722e4a4a06a04ed6651eaa599c12f7ee4510fb2d811b6240f9306de4af33f89990c126770a14f0b30da670eab6732808625c246fb27d4c7b224afbb2b6196d31b11d824cb3858a3b5580d174b8a76bc7330a1744265020e7b9760d88f1492e185240dd884fe691858f207cb52ea77548ef0d53fe313a22161706215beb6292aa4a94c56b775be77103cca913306183e8eae9b85b3b6cc151f44dbef95bac0e9e38f724550f97abd47372142e7443a426467a8038b9006206df0a0da06f5b58134936314617336e1b62ef6175b0d9d1096597d1bced3b76a136dc812e2a4f06691402afee434918cdcac0ee8cf916898ccb0e6cd67e3a3682b5890271ca7f1616ae323f2947ffbfd3748588028c86d9192cc58909a2b9f4fce4536e83e43254765d36033db845de364f0511ee331f541ccf70ba0ed8514762c20865179a217f438a16e43b850a037ddf44da31efdc2aa974d2e61edff5f785d9bd7c90140e4ae0f09b49ccbc45303c2fa9e68dac6554b586453f555c49efaa8112a3a36d20eb424043aebedeee7156e9e8b1cc36be15c404768597ab3837eaa06ab3813e8c69150c7da180e55a0e1b469af491f44ecb36e6537abd11e20783acbd0e6fe869d6a300a3180dfef0efb6fda0cb61128c8a6986d0116e3fd8e296deb8e664a85765ae9b703dd407b3200d865b4183bd74e68f4f95faa4647e89ad0512bffb311c9a222d57188e29215a3f9f4d2690868f991113b7ffb804e7be6906a9f02326ccdc7cfe73e569f5f1163a49c6f57eae685748954934c42c09d2754553cc65e6416050e5e997ca543efeac337638c1e63f17cff8d95a8657aecd85ebb472019754246714b9faf3639774952e1d2fe06bc2e4675b02433f03f1112cb7a07ce7c89bb1cdf1b73444058b6d6c002156ca749d2f284a5f168a1f0ad4b67ae3546cfcc1a1e94e13835239037a32e549970ec9dfeb4843f340c7f0e722deee6b472b3cca73439c02dca8330ebf7604bc53d6c45a82d3786486a92511d46fa46871e445d2b090d6c8576b31d765b7184654bc4a873c001aad9fd2241b97ec8d91ea6cee27bf0ac006dbdde3c2b59ef0c61afe5eb4950d2b9847f4546ae43f78127b67f7652ecfe68578be236f5ae914984e5214990d0df5532f86780666a0e26bfd6afe4715952bf261b40adc69b098dd11e93d30238e96c41e4c30fb690f0af43b7e5a1bb5abbd9b3274145d1c892a18ea40faf00628c28894710f9f042b3da6d10374583deff5e5cd9e84bc6f3ee3af749fc99374f6c56b72596f0035daa5a8b2ff23cfc7143ba86a919ec164c1c0a9e6b554a4cd702df300ab05732fe74983897cc65a4e91e3462d5e7b2c0aa30cc560baf31c244b7dd36f22021a8c5fc4a5a2a4956dfc84cbd2a64ede3c1ef7b8f9d316ba5705cb77a3a06ef874bf82bc9a505645232c438b162bb744dec1a1fb197989b8a63ec436e0a9aaab77c8e8a5bbe24f264886deec02a4e4cff166f8234d09dd02a0355e542d2d9751aa4ab46873fad60da1ea21c6e119e2b30cc7fdef909b6c5288208070e8073d0421ab93b7f2678c0820a464ddc1d3569002815c926a7cbeaa5e5f535dc93377fa0c897e99b6d903088a81313857ad23aa2c5f6ba7140495e30470c009404e626df0f690e4517dea093f37aea90133779fa61bfffddc227f82f3ceb16fbf9349d6719b4eeef82c8fa2c1036544187c68c2b460199763ef06dc673f615cde1547bba50c26e2cd322f019bbb97800c7098987bc1053a3447e409e95ef5f730df50fa78e9e455894765cdc8ea9319b02bbc27aad5dc3c3ae21d8a17dea78d5fae036ddcdea20f1b16e581d1062c3cc2a74d1e7915195f6e30d6de9e7d3dcbefe0a62aa4bdc9af5a1301fb9f29ef119b9ba0550dd953a2a49a4f6827e0ba5e37d1e6e3cc8e0986d6932ebe2ca55c41290b3d9c317ee9fed8585db4b5d1d2a8def51ce2209abb79537a2ad874a58b5b312770117cbfcce61471425b8a37bc2d27b0a86464522240ab32ce4f70db2cc0168e1cb055e2cd5979f65ca4e4b4b711c01a127e42e186d83e66709ffa7c14e4e5281a0012fac776148dc6a780009e0e933549aea3c8c1f3c262817b4fc2d3eb772a3408bd149f0ee8ca8d759dd688abd46c440d36db7a0682d07ac7b23f910ae5011cf2fea4f5a5815e4d3930176e6844026b40da1ea7ee57d9ec61f4cc81192f1bf632f96fb752ccc7b135f212f9dba17e7e5d64a57d8fd6cec819ac8af9ff2ffaf913eade0babfb86d0361011052d7c0fa83e487f17eea1862ed981b5ffff565f5a85aa72c3524d1eb124771ea2a54ef099743be29f25b734ff5717d40bf64635f45fc1eef4863eb38817a4466289616845164e92329ccc169a21fdca35b9a6bff4491856b90390a132f3d7410976e2d09cb74a054fa23e2563170c92894161542f4be7d163e6dc48e1a84ab2b615727cf9f3cd550afd20ce8645d24b0be08a097f8078d37aba947d07b7f5a71f3e2f1197b335ff293c721d2e1e752d6dd41247236af81dc9d06e7cbb886b70db48407638bc9a95a55d5abcb1064c3546e67f7ce5d3ced2407612d6c60befa21d45f16e2547f49a12a66fab864e198da778dc3286d94b978d96e95eb91444c61323d3837894349f1f5d6ccdae14ddbcecb4c5dcedaf177e5f4a8507cd97bd6d1ddfbd290d2f64978643c33cafeec5b280ecf21da63538ed7df7fb5555d738c91eca03788c8146817d06b2459ced6f49d6ffac0d7f5bf0e36bebf5a1a214730a1be015414f885c79575a0aebe8e5f53f2b64aca25237996e5bc71f72699d2e709c66f49321d34f5a90112b789bcffc340ae7120a36df94d71cf02cb9c44a5289021b3e9b67c2bc2c93d386bd8be7fe9723f74f04051ee0556041a768717e692a4914c9344c793ca48df1c3f5c483a00142308a873d934c85c30218e01c03d19baa7627649a739c6d65be7a23cf0a2753389c32300f171599f50c2702b8df19c0785101119680833dab0477018e2894e86949161f7474981fcf95bec50921c234289cf0792efa25c0bd70406b156bf691244ba994e907bbbf3864bf9c842664d82058ce5bd12895b191d94432c7010afb994801ae93f14c5181cb517e5c0dd2697bfef4c41b81dcdf247c688e32cbe0163d06713f990f5c2420da678b678dee798e52e63912936021d6f4433a3665275818ab5ae88c158f42be4202481f92c1dd58fbb6440793babceb087d844046daebd91c02d4f36ac77e682333298552b7efefd6c6f844b4de92afdc786745fec8f89fefcc70ad908b6ccb63275b5a7f89f3ecf094cbca78a667bbcaef1cb65f5f4ef6e7602131d8e933cd899d6f4a29e82006f60381e366c53eaaeea407b840d6d1c5076acbedc5051616de329869daae67c384d947cf621c9429e906a09f955d6b27257c0bd34d94298cb8e0aa9ac02c8e1e400cb2d4fcd0ffd1fe9269e77e3234416bd276967f591590e9bf887fa278e7c7ae6fc7dfc14dd5a7795f9e31d527fe68d74fe89c501801fa3d3d3c55ed348e543583ea9675218ffdf200797a7ad1b3ead5f568064cdb84c8676fbabca6b1771800b54842a1434b1852c2b1dc0f4c37aeaf3d109872bf1340b195115f83aecc1b38a059f4d1b733c1192dd7be2dbfb27edcaeb59a3cb630fcc662ba76acb9bbccd32876cddd2e8e0d2351b4c938c32a36eddb758e1a6d401c46d044a26e83ce69029c0a9827f0b15119e591acfbf8cc24b51f3c98d236e0d54ec5b094aa66e2ae81a99bc596eb5269694cb204d9092d820214f067bdd25d5d0f17db52e34e04daf4bf7f88149e7aada9c3bcf453154a0d8a1b01f310a7c19bf31cf0032ade67a35f743deb679a4902f18444607f104dc1d9369a41a264e142d6806d5299711be0bb0b613fc9c4e93612a8e6482e86ee3ade70b6c34407a60e66a8605f7c627108e59d22a067b98d8c7b6c295361dd1794e26d6d8633455a4d713e413aefbbcc657977ecd36316b48944c7d3468209d6cb223c2ee83e3603e3ee3066974324cc9cc6a33631efba72769af5cdd85c04ca1e495cdba2a90b68b07a889d66afe94cd20c6fdd78b22011880585a54dcc28a77de47bb7d07b22f6b9ceaac344700c98227b01af57704c2b8404a4e571370cf12976691b756577c398f71da9ff6d716c76451d6930299b451e054743afa61e86b1fc026d8c3b1e2780bd07880b90c0c841a52d2de9d7def6d6882d612558ae3ca34a9c1f2fa386cc0f038f71620df852f2f9bfa9dd83676d0e2ad9591d5693daa8f846c76c2b47382a512dfe405a853bcc4b425921d7be7e783d0fcd58a4528e8570195d60e6f52c1ec18b51553d2ba17e50b0bcadb363461add06d484b5ee44e6a8daec42581a2817c1f6df55960cc0dad848213b96278e77db3f82ffe921594d28b4ea24b6c9fa9a2f8151a7d01ec96df357cabec342fcca3d0faac00d864702762ce7397eb6261b1b1f3fd76a61740d1b2d35c238f04a039ff5dfe18b468b470bd8ee807fc68886a31968d105970e158f15631444e317bc11f9b4bad51c32749bad0bf2eda6181cbf9a6e075fbe7efd04a1b9faa676d2d5a4e0c63495795260b84985b72198d9e35a121b73bd02f7cf047fd366324535f6a81fe4e131c84995192de2aec739cd59af103966fdf3fec564af04205a825d1d198fe21a8a243f36c4ee809a24a59642d1a09b741eacfc06fa390e104bbb0a8b12dfef9117b813d03b98e382a9b68e66626e5e600651bb9dd78470429a7038237c6d99e2c185dea756d87c46fd8ccf27fece4796dc1a0a0ffec43213230d79d2d027ec786a5e6ef7ff8ea27b1cae58bb6b912d0cc7edaa4ee452716a472cacce640e40baec4361771c64a863267cc70c28ddcae5b13020a9b2591158373977802125b28db53fb845f7c4a8262a16b732c224342423587aa53e716103c56458939721e9c94b8e6f8ae6fc2a10a41cf97c927d1137e856c6380de875b073c2be72ffb0dfa92a1687e12df75987d5e8380a0069b4f96d95d3f013bc6b4c3c2f5334f7876bd53523318c8fd78bcd4cdd1c4e2e9a61209d97b7db8d71cf22f7432c30cb965ce441be91edd16d72ff3a9937b2db8d4f9404f63e4858de3c3e8e922439e9d7e79ec2d8377664fc3ea5aed0786235bd734da8ff0cae9521c2aa80a4d6b3e59baea03d51286e261412ecac9d94c46293352eb5920cef34e32aa79675aa0f8a2f3bc027947e793eecf86f674a81a46287233e8ffea15cc670b8b68b25a90c539d75260838522c97804aed5ea1c0c9c214fbdfb4d4c10d6e3a055f8cc90cc99de5f7e0f54ea12efa7542661edf34e3f4f0bed1de5668f0d0257af4b6cccb61178757c4247c777b43af850bb04e6428ed6f4e2814615dc4335241c93ee1147e524b408183242ea8054608c372a52d4b1e85554e1c8b09239ce46f23515860d42e03932da37896d2a7e65c6c5f7309327fadf9b71e9a0b52508e8c18f6bae0056dd826eaefd99693ca6ca7637dccb5937ef808c39259a815929334907f09a35a905784b1245181266003618f017d13c1efd7501495a4a32ea84c8ab36a34d75500b3b780afdc094742371d3b25c8f4b1752fca35f8a5aefbcf591c0b8c5dc1683a6f018236d3dea8fafe51131849f33d4b8b928d16fb1a7529ad3d32eee7e415a9ea8bb5e833ff5664764f79e0831a168dae3f1bfd0b30a1d46656a6527834a94ac14bb3028fe09f1c4de82818680328dae5d5d9122e9508002d455adba1505cc5d408aabaa4dfadcf4e056970c1a5ffd31a52d83152d5b57efbe452d768d1634b0d93c546ba93bd8fbbc1a4ffb39d7bf68e79f32a1a0b24ea420e843bc78816041776a7c15999fc5c291d90311483553ae0e9967d92e592ff6cb7843673571cadf44435bd62f20b81e99a7e27fc65546a0d92b6c8310527762e45ed3b289f629905e62c97aec10ba3668063a1f355e7dab33246aa428eb9fb3188d5c8273fd01317e0e402a9c1cf8277cc5a8bf4321ef8d3d05d4a359e37af3af3a6009091779ffc359ad925dfc4fe45afdaded26e570651113321d0f773c3c06713bb094ad0b28257d4fbe0056d3ac75c3f0b97178c627c13f08ee94680715d2ae0b332bb5ebecbf15fd201f5754555c1f2c5c40a5964d260818cc9ef102ac72eaed0b0810c6bd3ecbba3cc332aca6ecb84d2784bab4870a1f4a313eec53600ef820ead2cd8ddcdb5c58c4151c8721dc82509aebc1c6ca46e7a23f40f5ad0a82559995379488a4f2c3b4e21cf2e54c944eca13ed1aaa7ff16a7ffe3deff09e8369b6cf795ed08fd58a27ac5632f0b98d2fe3075d5947ce88c6bd4729317f081b2cd647615a6ea57dd77c947ab0ed3f53c1d785623c2ffe9da33b2411af21b7e41f6dcd6f7c4d66d0c42f44dabc07bc7dbf0539ca7848389005a5468d6ee862fdabfe3ad251003db3eb940571ec9c8cf8e830e182b21cc1c353b1c98e54fb442de487f3de47e9422c4adf3371a2c3e0afa962f0d4a6c8253cd984e19538c8c4d56ba622f70a6854c8582a4a8a7d8c42e549f383d3ec791e03553c40900d6ae7ec26b10e5c73805a39a18d70363d4b0e932de187653471866978dbca45d9f915cd0e337f048810cc1895cf6e07f1eb66322c782af94d69671a769add04cfedb55876064e4975d9bcbd48e23bd2ffa769e6ce58b3b274fade5c60e019aee2eabf135ad96cebca9bcbff1e9c582cc1d9e13ca30a129683eb845c328449a1f445db00e618824f312c0845afa20d527a6d6e45346edfcdf1c08be4ad4787bba83969e54f6b0c91f4f987310ee62369856062a41bd9f60d6e6c2b81e001ae4ac82401acbd84595e5e6688f9c4840205fda08c9ee6c364986ac3b0cc2869c7917dce5692ddbafd90047239e3176062f37f6e5736ee2f7a760aa6123e7e54e220d12654675c8f3d6bcacc7fad97b2aab0557573d3401b958c53e1c83bdc4d9b2b285546880208e9dc90e9724bcc2b6beb198c5ce6e02c7f60c195b339d8d7568a1d12d4328bec101d9c228681e268692ca7554a801f726a199eccd20be1ac9ecc12a5d3a52b3b85ac5bb21e17a9f5325e71aefe471d5b34d482829eb0973fdee2725dcf02fb52c256ebf713f8d5a15f25adaf8eafd886553851e6f890ea5574c1ffd21f9401f2719aedd3c349c1412bbdd04c4e2d80dc7e474aff6024412eb86734a8f872eeeaadde4b8be970f4864ca6da925b18296bf03a5ffbf44d89cbac1eedb4e90f368f19d5df2a3ba4d1f07ce23661f4d9dbbd165f56e6f4e6237beb6da1d33df3a92795910ec12f3e1614393af5ecce18b027400a2a62cee74c24d35256561c1ae120be6e66a90a386b73f084fe4ebd192bfa7a13a6739b3b3b4d7635482cbc8f3a9809955d55693bf8b27e6a8039e7ab1715cfc4b75ee80c3d88d8e1a48f346cdf5486c294910afd62eda5e72e1e5297e6f8b09d114447f8fe834d1b331a54b6aa8e5fe80a46fb6eeee6b9664c5e0febc8047be0dc0cf620801c3931d3210c538e7ad6277e364a2a3d1b2b6bab30919145dd868f7510ae5474259174b0f741277332bd545fc1b79891756872e6a2d6c078c400f3729384380815406ad7c1a98f83c7119a134f7031902d327f52df31d7ab058f0bd87f7b0d1f42fe342479ea58f93b35d59172c201d2fb21a72acac5b2af936e278d61043f15663b07cc6ca33070eb2e73900b0e3c96761544e02f06ddf234ace39f5c6462cbbb0e13642350e57517bf81e65a0f9ad252e5f4fc95125e4e51f0a2a6b3d06335d10eb456166414f2c6e10902b49d67acdc281f191aed866cfe395c08aebe12fbaddfbddfd44ee46f35c1e807c1571c9b3a9cebc28d038259641f7b60468781f1030cffcc2bcb8f63184c5dededc237daa78bd17e67fd7d8f13432219011b03af70dba0bcb6a160aff0dabfb9725174d351280e777371ac4978f80f4ef15a390423b1f97d9a4d4c86d9b2eafd9977465f82077525cf6f5039e006a198217a2786d8ab4a1b793750d44e5fc164b755862741aa8bb0e80121eb0edd7d5c3551f12712a437aaf008782d1f8a5f1847d7f2c9cf4d59942576d7fa301490b40a96498455392c9596b870e58278af3e12ab9b8e2b047d340203148ba52f159cccc1d9438c5e1ff7464cac321f074423568503a85e92e94e2ae9bd81192ba330c36543bf9ecdab8e91d2b25aa1f6a9dace1ad9026de65cd320fe971bcbe6704ffdedb41eb4b001ec1e5003f12092a6f2904d56dc023ecbad9df8dfdb5ebe5aca46efa7bfa9c839f35af7755a8ea25d04946add752a4615798430eb0a0befbd7049c07439309bfede935a5ee8e089a2dc59cfbf2390eb883d68836328b65a013867ec4406e3113472dfa3f0f3f5e989f6d16adc20a9121088e8ba8348136f34ed04e35ab74f241f7be557d84e62f1cae22429e04d83e69925b123f2e0dfbc00d2817bfc4998b6024932be5e50750acb89c35988ecacc97aaf4200448622a65acf9348f8ebceddfa7d33fd298f352e788951a6dcf2c44c5bc77064bed4a0cbd59a1ce80c8db87ffdec53d0feb598b53ecfc9d3d0edca0cc058626f7c847b71043f8d3325968f673ae95f9f38f39a95687376164a75d6a83454bfa76d5cef80aac0ad3013facccbcf6a5e4950b23c6c7718c1a209dd68ce893b9d52a9aa6dddc48e0b7fb8b7b8186a83c239d526eabe8d04aa7d782e9947a9288d9ba78341ae3bc37d5db4d7f44979fe008c09df2af794c8b508c9334b5c69b8b9573eda5bf4008b33fe867c05ea4c120f0a9eacecfbea5bc8a149f8d9484f02392602b7cb59bcf8451a936ff0077394435460223f37a73614f12b833b7ccd94400c008c0dd02d9296ebe2039942e6d51a0ceb78a5aac690f63bb5c0dd37cecd5b96029df3d610ba4b5650c1ba9615d8cbbde061d33a7f3718796b0919c06b3338d00473f58afe78319000d9879cf7187009a28228936dd048b00becf14154b508b46e39bf40c506f95e0011741df2cabfb84c1637233bfc0e54a0ccf5fa0ca4e0f39757f95e58c0c8beb1df1306b1cb32d9a52bd60ff432ac60c18f25ad014047a76cad7de044311bb5e0b2ac8175cd4d8e0574efddaef187283914aed0476ec44cf081c6a6a04572aadb3e213d54f3b62782e35aeeed6aa2d62f3551d6188436bc93f44287f58ad4e4dd68899927e5e030305745aeb836336b28582c6a68bef87199cfbef9d0b8426011a394d1aeb4988bfe19220731ce5b613304cc3c3d2a1f5a62b2e96cad0f78a17dc200536a5868b6347e1280f5b00e0db2d438a6d652229d761212f3007437e5c341212c873b6e1c15110625932b64ac84677937c2301fa63534d1217d4185471884c766c28d7f782ef98faf998ef0ed43e57800ed1475cf304d1b94bef24b850fe8290751f84117fa27108a9a2a0ebd30d973e59b323dfc68d10fbbf0bafd8bbfad1118541c7a0095416013da1e9a64da89c6b019f562c9d3a34d19f4435c42604eaa555cadcfebfc21f2e3b8800407ec21b92a7645af97e7557c037646618139831a048b67d87f6436915bf9ecec5343be199e0ca1500a2264ab44c245f940efce01c2982a3ef2fb38568f0a7810116d2422a781f3ed0102f9d1b1965aefff2721ec5b0b160649dc8b898500d4896ceac6e35d6f8049681648f104778a51c42fcab49b7900016b4a714f8350143552533ef9f53f4f92718637eae7e326164d6f0708d690b652e6905276f82a39d97feabece5f813d7202bdb4c89d97ccf45da642f8846c0b9acbec7917e3e85dbe668fe08ecf3c72e4accedc124280bf43a71626554a5e311e3e8dc4b8be6d4bd6ab7accebef0a8aa66785159993950241d8843e85d7bac6c9d829e39996cbaed656cd73f03d278231c5da271be3fcd397a705337dfd1dfda5197254acbc62880585844f3b1ec19a0c5e10c71fc4cb13e6b9b7c3719726686968375f09fcb2d08de344d499127688e9de7064b0a3a58c7e2b5524a5dbcab143b8f04c016dd6edfdd44da55d0ce35a76783869a547c905c89117f6650ce1afceebe3d80b844c1b2b22b4895d88efc1c782d40458f5e0ecc0e3b5269d2cf6ee38b3a03a5528d88ba823b0fa3a601ae71380e1097f5680c4df5a2900ac80be5c96beb6bfb61f9cd0606b7375678b09b4a4ae9bfdcb5e368722870a7a36d651a4524a5f2c586b0d1475100f7a60331e626189cb36af0136465a8d1853d4f4c0e786890aa49a7171e84d5dbb250030a2b7b487138486555bd35b342ac2bc35302de06087b029349633624d86f54c8621009ba7e7015b282d66a069ac13441bdf48c09dd72c1603cb34015382ef1c2df522fa9819c81b5321fb0183a07a5e73c316a377bdbce5ae81e6c60e23e9124846eef0692722e16d8c323e9bddfca359d63e1f0b84d6062be47e840c9206d1586c995c6b38571e364e9075d9ff24902ef9eb4d9d7212884a7eb92328089c8b8b355f9a24d9710c72d087a61390e0d88f0001b13f1a173ab2c563bac8211cd9019bdbb525b59340af6e2c6bfe09b6434698a29ac87c6b03ec3fcc87ab38fcb8b90cb050136c100bb04c13445fc182edaf8f43002588c4c828f3809d26a9b0785951d3b9800e6b75d8a741d8e76ed4ab9b260f6079299b3ffc07257ed51bf64bbf977671bc98e9bc6a8b6539bb09a353fa0906f4fe4c1a5e1b9eccec40a86eb95397d669944708536268a1149bff0ac16e3300f060b1a472abdb93305f969462ae0cb4698fc364bae6a829727314e1164f407f19846dbd610ee919e3773f2d300c349d758848845bba75ecc22daf4fe45f0d93b761ca6638d430604256341ba423abbc831e5abb0e5a878ef112df6e4074674aeac0451ff6ff9b233a2365916998bbb37a6849969b7ac5615304aec7031a528ac38fb27dba179f53bc6c4d893fac703e69379901844c9eb478d6fc425dd57ec7d33a6b56b67d2da0161c1febfeb9556c5609a2d2001ae9db834db93efc9f1aa4e6e5afa11a9e3ddf19d0efc3f48eb9f8b90ffa78af59628b9903baee84ea428d8aea7af07756314733ae5c93b69099579bccd3306739f7499a8cc58bc8eff1281f12070fe7c81405fb0bc9336b742214d0e9ede623bf85071cfedf3dc525baba42cc8b25baf27eb5c23c47bfcfde7929947af87dcc72a005018e7ed852662aa56caedef7dffef997e10a65d99836c48e14628db741d3a454f74616419ee12092229412bab6dfda523a117a300286260c2fd9ad8b9d695316c08e9490063ee3f5d4475336e2d8554ae671d83664a264b4e61ed61272878c92d48b3f2a0f6e34bbd7c6ba6b2e0514a6e0c98f4e4955b6954536cd7fb4aab25ebaef562ff49e8857d6167596153aaf1bcf7fb53ff0408b9393656c88338e7521bb9dc8095713f41b6c2a891dbae86083e6b8a524befe24523edbcb3969837db175ea96db06200d39cc0e870cb014b519cb496b3ade64c21724d87417d80015d438d96fa00c72dda4b396ac56f8c5b535da4b03c15a1b8fe14c92a7e8b13e25b8db6a2f83f928efb14bc5875e662a10633e7ba5b1acb865d51b671f6d53d813644d3314ea4857670fa5ba36f3e585abbfc91383f1e4ad9596e684a6557562a2ca8bbe09bbdc8c925675dfb201a0d7be776b0ed954599612d8e820c1e9b239ec1507f25c034e518b1db2d67e14e7761e62af3851a5c82042a96ec18383d0d098303ed52f554a2accacca7e0f412e5e208d9a988e9ddea4540facde4d4b17dc252129d7809859f43f1a700bb3b012652267977784a75617c386e66835907c6f56fc8e3c1d3fe43ae6e7c9ea4254e6eef80ca776d95e005bbd2c67494bd3b58f10fb37ac8df81d11b7344a6cced61e0b150d4817b7734f615d72a8bcb476be67a5545206211d0723b666733087914ddfd6e17500dfc1391fd9aaec4f801549fbfdaf93c03b95578c513a383201543d946ef502ce4a2525f3674fbc11730390029c510363de9f7988335a796de16105d264acf4c2c9ce0e822baac439770b300aec4dfc2a2eee4a777d74e62e4c56fe895a9bda888ef8ad19fad7af353d84cab108ad4c216b4a9cea5c96d3fb63398dd6ff12a82504b7a5fae288d04c16a6eab1190c4e98587cb24d1fff1d8a7e663505c792b613e7841e3dba57f2885f065da5312b15d343ec252015ae8d2124e8d42683edbe09a794952a7c1ab257272e1c44e1bdb29ac5de9e8aa2cbd7ca36209973a7b64d63bc8fab54b4ce8a809a2b71dd091c18bdc9f12afe808d69cea3f6eb6d0aa1a51abab5beb718a07b22340e11bba605373f8d224c4c3417ae914e9234ceabcca8a52392983a2cbbfee4b0f85370a92c5dcfa9f58d389c6252a0e0ea15d694e56c4b7809ba5f1194400ed94b0266098134bbe6da437e6692a1236d84fd39cec7786248eb443135a800b5119a1c0a7b469f51b229ca8b029fd9b46b0881419eef559f5c1794e2d1aa8482408920c62c28a7d2b9c952f68740d50493b97b1bb26d7150ebba250cca2bb9aff9d54bc48d1e25b48c68591dfe332e336104a59e2c5b03df98c3097e0becae9ca2d06680d4194b9012aadefa428686745dc575fa743a1430748871e7d140f9740c9a9d1de1b84332a603c60f3448acf9c8f79bc19e77a60df61e3119382f861268fe12f2943b29468640dae83e5bca24505bcf42ffa77e967440d28fb60be9daa538555084032e7d6db8b461f89a8dbb6bbb5d733768050b1a8e23af378d6a5e79df92d193adf06aefab64e350a069f5792e5568d56dd2b55fb95488d4c64300eaaa7532973ac495cae4abefd0d3bf424116103aad57de1288f2e8c036ef0441b0326fad4e6eba7085eeccffb65f0f30c470a5e65625f2516d9576f200a8028e9e63a721986a8aa904dd9e083792fccd57916deefa0ed8fa90ed52316829c554886431f54a2d46686fb1dbf57097a00e52e195826800413c9d30674fe4eb3ce5847f299c39f013fe74e48df51a9258c1d40da0b05e3c4e9905236c3587b175a212ba63af959df30937a400c47edec11f67cce4233a448dad4c94a882d4769c36e1b488dcafc22be92293a21fda5ca54427b710977d7e9d5c4ac1dadba6a391c56c87f7fa419e9ee4a53c65f96a23ce4cbdea25b9a23d9c8bf4752cbe2d3d3ddd3e0de947e6b5fe6eab6c42f69f2c435bad011f5642b50045ea9c8db3cd40640298781725c89c98c8b24309fd645e638775f1a7b56a163d644453667ad0209a033b0b3a42b255fc007ad92fc793a16353b2d6dd0eacb62ff65df5f4498c805b12555b98c69aaf9befaf550640103f3d80b46b562df3807d313e0932fa120b1906468eb9334dbc184fb08c7a71f9436c02cbeb12b76a04396d8d72d51345d73e67aacb7331b7cd29786ac21ff7b004eb224c6a052997cda9702bb0b1b586866238b648f7eecfd44377018a34fd1e7483ded30adbe3dcc1f7ecd4ae9179e93b133b9f35489e4948a17c34955519f9fa4763fd924cc5d76aa64608f3fcfae3871396680ffa3301a016b762165b43252106dc2ec95878c5c55ae40958814c5acac2cdf41ac81ad9e3229e00807d0c6ada2c742d824b2b42a25fb9fb711d55e4c15c9bd7cdad2a2733fe4d001538b347314d6fb03a0ba28cb673075bfdbfd7eb32c6ec4c7b675b4ed42beecd84fa0925d37b0e09478d8c6cba27f0a6d51f686ec5b26a2347218b61a044d721aa71468da221cee048145e405c26bb5affa2f2b640c87b31e84dd76e9878409d80f92d51b7e98e5708113a839928ad815711792532e8755012331a1bb9dc54b320d3ac388b6f9fad47bba6c00899e5dad1cb105c122f032615aae5a7583f7d127061dd864afa966c8e37918af0d7321e974e234a6844b2d708f49519cbc483d2bdd4316f567eff955ebe024781a9e310902bc217e0f4d48292f1c9a5e672464c9aa2f45892c419b6d43e68a28c080371981d174f84938684508e7e9af085963ea63a1b091f9b5790a140897f1316ddca05a2c64f72bc27e6218b2514a34059020724067161e29cd7a48ceb899996c86f28de98f976a1db8ef202034b2b87349b6617d69e44a824deec94601ed6d94b7d6ad88dcee160c4f079f5fa35f9d3d067f93c83f5ade4959c28d1f6ba00e17bad61b1e97ca230101a55dc088783246ecbc9f2c48f79dcd14288c2d630cebff48c7823a9d28ef9d1bcfbce8044f99ec3c59fca09729447558ef492b5b13f4d3ab4f60bf55fbd661f78a754baf73be1a5284dae349cbcdfba013e3a739a19be20715e9c8f373b56a494b0afa49d1cd6483ae07cacd7c84ef3a4174138f67f786f4670a6a4b113bb6beb317fbfa8d5a29cdda5354ce9ba13b17789fe39e39d43d66e4a2393ca567321c6300677529c0ebacf63832acfc9696bc1e454b8d18b767118480f02b3f3b40180dc05b4cc2ed3d502f476ed53d616fed47f26bbe0fcff9f9340f8f3a705bfdac3bb3dd4c3f315bad81312a6dde45030f4e4cc375c0b8d9512b6d63ef9eb5b582e9c9ec78e3aeadc4b045b88f0a742fd6287be8cf89ab4452aed27604dc146cedf3e2c83d69af5a9fe5ac5e4791068e2e5ce13469f76c730bcad064f301d346090316c8352cbe301fffece80e1ba994e1cbf9dbeb8791f214303023772c5089bca97f7238e98b7c146db6f5114c3341b98dc68134dae54aeda7ded8db5fa0aded78e497c4e2e1c9a1b113849e729e9ad5489bdaba4a5e74672ac53252a95f1e045104e0fb28dd08d2ad4605de825f9f18ded34906d47ed04915206fa8a58f806f9d354efe9644c941ee7010cdb6cbc914a7c0e33c776627c42c84377eec49b99f9de5793e2e03cf38220924ca701843cc33f9633c30f6e62825828dc92257e63fca951eebcc08e586c27e6da4e10b50ce656300721d649d025f012c6f241ead5c70f963d636bcd27f95259c9ab00441480d0416f34e004a71ff47247170577bc28b62275eaba78b0131953b25b7030bc9a044d13fc0d924ae3e61d30340c442e37f4deaaaa6460d999d3924f0c78391a8c435e6a12e744a37986b0e51856fe4769cd3e4b4779cba6de7bc932e690f1770053e5d2d2df2b242093968010c07cb70763c8af0af41bd70ce1e1ccefee6e813aba55737d3d1587efe747b45016653f6b41b8a5afd4cc1e3ec5372cda4f91f379e754d9ab486b0b9a46e44d39537e4843d2e8298052bc9c9758896918ec8db0d4e1b005f0cb89d6ca57919382bfc0df48d0e403ef04f0c5aa2bef46f48608832d72fe8f55fa12e93df7849b88ad1b349309d287abe6e2cf74c51aad896ffcb78101dec9dc59d3853ec73b2f9b8d12e47aebc00ba7eca09067d0a2ed95c924b62739c7886757da62562ff7bba9e610a10dbce513869dc4f32bfe9a79421ec324c6f531ec4921aaad7652f608963c7bfaf3ab1481d5ce7ad41d02b6ccf59d5b8eb0434806c1555f7ea6905d9a7c10235da9603e619695f9e06cf7d6b84967c1c53ff7d4132469d24ff3798132d4ca108c7518e0f6ed500451a366f3f546a40d68e11658267afd918e26fd4884307468dc879eda33b2af79e4c625070d2935698bd6221e1e5bea37e7dae69b233ccf155dfaf4d003da7246588be9f35dcddd9ed97f8816c2a0598255b57b8eb739fa1b4c4463a78f28a20c25a5f5a1979076f1dd808ed635fb91e0be997ff31cfdadabfb02df6c84e9cc987b0a1880060e0bff36cb8f0bb6fd59fe2aabc710fdb0ec5ef4090ea4c27b39c08533d3264b4cf00c2cd883081295f285fdced982f47f0344f6a7370c6cbb5dc0e57a0a6d23641d3477eab141fcf0854346a681c820ffa64d85f2c7034cc0f17d5c132143f21d56f2131a9c8694614c641b968b0a63d5a0ae191daa9d2bdea46744c450073fbf298a43f6c26bc54afbd240c01cb7530de42cea14682e5c53e8fce62b228f11d56f8cef567dd6d6ad228a54c0041395909536303294056d8f22890ab21841a4c841d4fe3eb3e602226afb4cb05103e7df75ec0e856fd354c422eb1c4a0fc62215cdad5cc41b81a2b0cae19240804202aa1ddbcd615856b71b4d6d0cba223a7cc01698d6317495bf3fac7df12d327e8667bffc16b1ec5f7441c10b4032afa8f0ff6be12debe848075128856417dbd346bcdb818a59bb6653ea636ddb2b54f4879ec2f4f5e9babd80e89cf9a099d558b65bff551e3f5b3f5d3d7eda943f90f8cf0eac47872202c505b2af287bb35be3638b9b29ab33679870bfe5f01fdca26afc082eb306ec625943c050a8277662d7d7c4f9f3577828b3fe757778c0f995c2da8adb66664b0d25bb1be7fbc8a4ba67d34c106ece701aa42207e705922ff3e41d4900dd2cd24d759ddedfc6c21b393c38d45d3d0cfa94c1d0b53a21e68acc1a3184e8599573d6ea31cb428af4af44ffdaf65dd2f8e3e840956a8e56a69b47f1b01cf65538bd5f2195049e18cf72f672df53210c8a843477e4972cd0c072431360c14bedf635f900dbfec789baf3b32849aef5f02d1268198fe6709e866375fe66e891e232c17ee7829ecba920a801b732bab005298355c9af775551a19c4d290095cffa1eb5f1c9b05d8a75a5a7a82e7f12ffb55dd2e3ed3b1431e6faffc4e74004e1cf0b6835a4543904a09d4e0a166787c5b373276bb69933f8cd0dd5a63808687bcdd792ead2b94531cade9ab136e5f61a2bea02453a4bafd0728363c45b9b15c400dcf56be5741caa0648371bb220be70f18f112d30dea063bed13ebe295bbb35ceb6489a19ded19d66d3bcf6b27c5c6274cb1c537b6fd93390d347aa0344e3badff7a12c75f5a06ec44006d645e00dbcfca326dcd4136f42b2881394b0f016bb24b4664cb5d184c6ca57f88fa243d440c09e27a6d0212fe61700b5ebca5c6f235e8337d145fc556c586843cd1d588a4cd4bea79461b392854748b9fe571e8d84b1da035c18a6fcf736bc0a8d36b4fa988f6ce4b24ad53a2e3089a7f3164202ad73086897a92697256e8f7d0f340c2e7bb114e1acaa8355342aebaef4f6759366e5df4162064955c4ad595cfeb18d1c751f5d4e2b433df2bfd894634a1f961b014cf531b57edff2c39eae44cc5a5b3534c825527f3f8b5e4883d4829dd1a711b93473f71458232cf743b7470b9d27e2b6b04be31a3fe53a0b89beb553b1c6e6378f8874500b0e7d4dbd69b45df80d0952c84a289fcd6ed4ba31a6a10e02b4acecbf08675842054ddf7c11741733577fe7b2e11d43e594c9b616138e523a92aefa1ec69eea5c9013703f87722a32bb4a6e06079559cfa4cefba6353705417e656b3388deec349d5e97753c10ff144b13e58cf4dfc00629ba99a54a300a2b1d8ff2a32d638a83857d7369fbda4908f8ba6154dd475c0d78dc172c64b84f168511bbbcead7913ccf89679486213437b5796db7a74976f60d25d1bfd2ae60b12db70cdacf8d29304b850cb160e04b0e07c1bc416251869113bae20a0c559c074cec0abd319a5d673189f24ca4ddbd8c34fc55f3232000b206dcb91ce0232d4914b65267c292c495412f8fe0aae62b0d0e223a87fb798315a90e4d9a6e195c4ad6104af0f599a78cac2b186a25345233562add652e52f8987c42429dbadbb6ad49db905940a0878530da61507a5051cc17fef64c18ed8f05cc2e276bb10d1320e9a5bff0a727e87e2dec9e002409cd1ca0d062e3ba91b095529a016594769357223b13ee16a0ab50930c1947fcfb0cf79968641e8a42d10d26d99fdade9565487eb9005e03a8b230059a4a249ad40fd5aece479a0a8c0d9f9fbc59f18b85bc673c6e445869a0b551624454e13927ca26b29c388055e2ddf725bebabdbc86d52a388c063d0fc78e0e608e1ccd6907ca1a057021e7f6f07f8dab434ff18c7f9474f8d81bfc472c5a2cbea93b22fcaecaf0c65cc33171717c8ed9a5140f919ef95bbdb67343e01624433461a3fe54380abdd10a24fea0c456e941a20c096830c5c255df70b856b7400f00e79a84742a823c463533990dd03153713970cc5b44103ca13d75e85a76b6d950d5ee47069c5ba2dc49d5552ab4e3a1a98b2a48248a623b0b28212a6d8b07101fa3148e30ec85c4fba68c6a85407e5f5715bb9c697f267e7c249eab860ea9b36c818e1a395adf7df1c5ea32a9cdf14f78c996fd7da7853706f0e5cc71c4a93e1b7c3042c285eb0f7c64896adbf65f8145d15c6dfea7bb420549ad664fd4ea37b1c22248bbfdd82ea410276535ea046c3e560d823a6b122cab924f79223128842c317f922947b207c634c3f1bf4fbecafa43ce56a4912b64b0a941eacaa6e6a6c3d773c0d31668ad6762eb4d124dae5f7852144f77c57417429108a0835084575bb30201bdb00997deae523c0ae19e83572c77dee528ace0d2c939c1c9657fff553fb3bac8b375c8a043714ba2f9c14e7b274eefd060783d95f2175adeeeabc8441d8cfb951036e3a36febb2d728400e94b3a423588e9954972262d80a1f23975e459837f629d2295cf485789b0fba952a3b06c76ea5180f1bfb932bc229fcbbffbf26e9a2e00416a18893f178783f136eb44fed63c16d80858ecc6c80c1db3c49f26644102c6a9eeed7619e30763eb44cc29e891d07d72e4a3b60d3d0aa306963d7047f77b7c75dd914d027259ace0e7b16fc88871cdbcc89b44bc500a02dd3a8a8bf2c7a1387311acff8f527b5656e111fe53439e25f31f401b9edba6aecf841b3aa636189c89556f43f3b094f2f6ce4df98aa7793b0497cb68f653f8f22453b3bbad75201de0d69c9c9c4b9c3e640ba61f4a87946c392016bd0b82fe4bfcafaaf354b150ed4511e9fe60b241d36f3d3d6e28f7c70ad2199d7d5011bd4260632710719e146ae78442c38e944c77dce4f593b29af12b45f88fff85ee5f195938a357f608d375190716b9f2a56a447b646645df449c7774a6d6e96b35b94edaeca65ce93daa2162b66fc868ee87b89b91368c7f9942350e404f4b548bc706363ec46263ba073ea8d649d57bf1c4806bd5f29b35c5db2c5cd875781c53d8967b97bfd88e64d96d4a1d34293fc5f55cc3a7bc3564e7f272179fe25560b3fc1c6aec9947c89e8281b3df6578c3329c8849847536129c77355cc9e51ecdeb266b6730d08bb52d0efa032774ca4bf118b59604fb32f929426030023742dd62e171c21cbf17dbc7d2c60f75073753e57e0d1da63920ac2dd9bbcdd0c0de487daeccb48f00e328b38a06d509986fc25040c777bb0091c65b17783926359a61d5b745017b02403b58ed2befc5e63d21db5a2ea4db1dd332435ce920fdb8d4ff1e229a39587ade5926e918f176c9ffe3a6afc9ad0dc1d60cf1ebfce37507d9ac3782199a4f67fd199cd9558ba9498f4be5078db8dc748f71ccd6802b24df9ec78e92c2c1c503ff711bd1640a9d7ad721b7b725b7447c7373f6084f414404ae0cd9cd0d2259709cd4b3ad1c16ddd31b3f0dec04d7d05a131074a160d6472ec84f9668bf179e080b7507148bf484cec0a12ade2131f839cfa9bc457a2c99804f5f04b3dcf00b006d155f999b833df73367a3309345984e839af9c0280dd8fe8b5afe8d0e257f7527bae8a70b750440ec9ae86fcb4e05b7ecbcbcf2e3c75bcba35c77d3046dff0a0855bf9f06224f65997e071365bbb929dad425a0cb858f4f4437455aed6bcf2174ed2f312d28dc65ecbe1fef2490bfb0166c1bc4fe1e22bc8b7d8e91bc30683abc6f2e671a9d3b506cfc9393fc2fc5118eee953ff25d1e8f420803b67755129c60176aadbc00c788f606e568b303a45501fa45a46e28defcb21b517d0b58f9b61ca6f898e15114efea2fb0db74880f8c9ee679797070fef7cb446eed644eae0291c466745f8a6f3b619a1e7eb1a1db6d41844361d4af2281244c363c6c21a58f6b01d0139e849b5f5d8b034ac48680e219395e24e020073936c3a9343fa5ac5d81adf72cb2e67c0382a9f580f962ce45835a7f6f168eda50de586bb358d14a1e5044e13fc4990daae8978ddd7b4ea3af7ebaf8ddb23e61876e4e8739b45b631969b5b20cca829a2c05718ef58102fd286f981bc1be0eb916838fbba7f84a4875a560f2972159f26e385d2043c9f212acf1070b9821fe2f1707ba3bf9b0760ec04c1e7f0dccb04a82eea2f6bf0d3760c041354eba70d6f7c33eedddce2831df021e091e45010aa3c416f710ef77c77d4d6644be76ba888996e648901a25dd700e74fd5073c62a0bac5e2775b28eb6b31428f7c1ca953c8a8839126cdcb386eec5b3fe02ae46dcb9eb3a17aae5f7e745cd28623fffaf49eb1ca55e7ced446e7f9d108f2da9ac00cb2c539ddd8a3edbe59a4b3a67bdd13f4e5c77cacc64fc214778c012d583a0e28e71e5a68c7d4b8e6339ca383710e36bf3316314bf48af9d6b17c401f3110daabc38d47502a4a6fdae95dfed98c2848132182b29c1aa24ecc5fb23700b09da53c7f53389293795fafd6ad0c44c5a5be72698d8067d18861450f1886054c420c3e53907c380284cbf577e2009437f96ffc73cdd7717b6ad8b80499e390cae29a3455764e760537d98aae6df7be0648d8eab54ffd9d111fd3133c3f318f0bcc16cc2725510ff111f6162490baecf921465809fe028ccce5fa98fab9f0c4c6b5166debbb7a553c2fe1287dbcc541397e718e9681157cd1c1c2e59ba09821040b5a9d32429feaf2e047f941d8370dac4acc911e37fefa657ea2d08f22f5b8deab81d007c17030be82c5435a60a53e4d6bc7d8aea7e9c49a425ea09f57daa653eef262a425f975fa1ac3310ea1480db0595574118500fc370dc0fc984e63e2efe156db7a731c3ad9d8ccbc6dd9c79a4d57ee101515534134db94bf2a6a5edfc06d826ed0eb4ce0af9057eecb1cc6c9b564091c9de45f7b48afc27ef02e1f8f48b6db56aee083fdf3515ad1505d026ac051e293826352eb3350ccedb467313bbfa8d4692bdd480c337d35b1c4db600dac273bfb6a89980bbb24f64c4db7b614f2064714cb5b91b5b8b4a6447e98a20af88270b3ea9a99a596e44731216548aab2cbdc8969e04d5cde44be196909f5d4b7d1624bd4f44d98ba944a4922178c69941ac66d3cc8bd4cdf922ddf280204433e43e7739c634891a2a2edb39dba0ba97a78c0137f5acf0c009a89ef4512929a1a9f3fe47da6d8465593b58ef83749e240969a81c7a91cceace52bbe55f30d6580d6bffaa02a834d0065dbaa62b8d2a90b74a1c05454410273653e51f6f9b0ce6c8ca4d3b1160184bd00924db47a7a8c5900613db562e792022416aa2c7d41d777cdb263eb4e09afeb8613d8b02b98057b64cbab55cf2f1c66b3f9cd7941c90e68dfa1af8548013600946debe76242fd650479dbc0dd65aaa44f6b4f8aed0e59491ce0c62c10b18be1e87708bc83e20c92c6fd72e6380d6a8367390dfbc779318a63b83d9cadc7b192f9b94f71aff94235bc9b03a9</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">需要密码才能查看哦~</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> 日常 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日记 </tag>
            
            <tag> 个人隐私 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>为Hexo文章设置加密</title>
      <link href="/posts/ca85c64c/"/>
      <url>/posts/ca85c64c/</url>
      
        <content type="html"><![CDATA[<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>使用<code>npm install --save hexo-blog-encrypt</code>安装加密插件。</p><h3 id="直接对文章进行加密"><a href="#直接对文章进行加密" class="headerlink" title="直接对文章进行加密"></a>直接对文章进行加密</h3><p>在文章信息头中添加<code>password</code>为文章加密：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Hello</span> <span class="string">World</span></span><br><span class="line"><span class="attr">tags:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">作为日记加密</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2016-03-30 21:12:21</span></span><br><span class="line"><span class="attr">password:</span> <span class="string">mikemessi</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><p>想要自定义提示内容，可以参考详细文章加密（根据需要自行修改）：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Hello</span> <span class="string">World</span></span><br><span class="line"><span class="attr">tags:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">作为日记加密</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2016-03-30 21:12:21</span></span><br><span class="line"><span class="attr">password:</span> <span class="string">mikemessi</span></span><br><span class="line"><span class="attr">abstract:</span> <span class="string">有东西被加密了,</span> <span class="string">请输入密码查看.</span></span><br><span class="line"><span class="attr">message:</span> <span class="string">您好,</span> <span class="string">这里需要密码.</span></span><br><span class="line"><span class="attr">wrong_pass_message:</span> <span class="string">抱歉,</span> <span class="string">这个密码看着不太对,</span> <span class="string">请再试试.</span></span><br><span class="line"><span class="attr">wrong_hash_message:</span> <span class="string">抱歉,</span> <span class="string">这个文章不能被校验,</span> <span class="string">不过您还是能看看解密后的内容.</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><h3 id="根据标签对文章进行加密"><a href="#根据标签对文章进行加密" class="headerlink" title="根据标签对文章进行加密"></a>根据标签对文章进行加密</h3><p>在<code>_config.yml</code>中添加如下内容（根据需要进行修改）：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Security</span></span><br><span class="line"><span class="comment"># https://github.com/D0n9X1n/hexo-blog-encrypt/blob/master/ReadMe.zh.md</span></span><br><span class="line"><span class="attr">encrypt:</span> <span class="comment"># hexo-blog-encrypt</span></span><br><span class="line">  <span class="attr">abstract:</span> <span class="string">有东西被加密了,</span> <span class="string">请输入密码查看.</span></span><br><span class="line">  <span class="attr">message:</span> <span class="string">您好,</span> <span class="string">这里需要密码.</span></span><br><span class="line">  <span class="attr">tags:</span></span><br><span class="line">  <span class="bullet">-</span> &#123;<span class="attr">name:</span> <span class="string">加密</span>, <span class="attr">password:</span> <span class="string">xxxx</span>&#125;</span><br><span class="line">  <span class="bullet">-</span> &#123;<span class="attr">name:</span> <span class="string">个人隐私</span>, <span class="attr">password:</span> <span class="string">xxxx</span>&#125;</span><br><span class="line">  <span class="attr">wrong_pass_message:</span> <span class="string">抱歉,</span> <span class="string">这个密码看着不太对,</span> <span class="string">请再试试.</span></span><br><span class="line">  <span class="attr">wrong_hash_message:</span> <span class="string">抱歉,</span> <span class="string">这个文章不能被校验,</span> <span class="string">不过您还是能看看解密后的内容.</span></span><br></pre></td></tr></table></figure><p>以上内容将会对<code>加密</code>以及<code>个人隐私</code>这两个标签的文章进行加密。</p><p>如果文章使用加密标签但又不想加密，可以将文章信息头的<code>password</code>设置为<code>&quot;&quot;</code>即可取消加密。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Hello</span> <span class="string">World</span></span><br><span class="line"><span class="attr">tags:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">加密</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2016-03-30 21:12:21</span></span><br><span class="line"><span class="attr">password:</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><p><strong>在文章信息头中的设置优先级高于<code>_config</code>中的设置。</strong></p><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://github.com/D0n9X1n/hexo-blog-encrypt/blob/master/ReadMe.zh.md">hexo-blog-encrypt官方文档</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> 个人博客 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker部署下配置Waline的QQ邮箱提醒</title>
      <link href="/posts/a2685843/"/>
      <url>/posts/a2685843/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>前段时间抛弃了QMsg酱的QQ提醒功能（感觉维护起来有一些繁琐）。</p><p>但是自从没有了QQ提醒之后，博客接收到的评论又不能及时回复，就打算使用QQ邮箱提醒。</p><p>Waline已经内置了邮箱提醒，配置起来特别容易，为了方便选择了QQ邮箱作为邮件发送服务提供商。</p><p>本教程基于<a href="/posts/3459702e/" title="使用Docker部署Waline评论服务端">使用Docker部署Waline评论服务端</a>而做的功能增强。</p><h2 id="启动容器"><a href="#启动容器" class="headerlink" title="启动容器"></a>启动容器</h2><p>使用以下命令启动容器，记得开放<strong>8360端口</strong></p><p>需要将对应的参数修改为您自己的</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> docker run -d \</span><br><span class="line">  -e LEAN_ID=xxxx \</span><br><span class="line">  -e LEAN_KEY=xxxx \</span><br><span class="line">  -e LEAN_MASTER_KEY=xxxx \</span><br><span class="line">  -e LEAN_SERVER=waline-data.insectmk.cn \</span><br><span class="line">  -e SMTP_SERVICE=QQ \</span><br><span class="line">  -e SMTP_USER=3067836615@qq.com \</span><br><span class="line">  -e SMTP_PASS=xsxx \</span><br><span class="line">  -e SMTP_SECURE=<span class="literal">true</span> \</span><br><span class="line">  -e SITE_NAME=<span class="string">&quot;InsectMk&#x27;s Blog&quot;</span> \</span><br><span class="line">  -e SITE_URL=https://insectmk.cn \</span><br><span class="line">  -e AUTHOR_EMAIL=2514378105@qq.com \</span><br><span class="line">  -e SENDER_NAME=InsectMk \</span><br><span class="line">  -e SENDER_EMAIL=3067836615@qq.com \</span><br><span class="line">  -e MAIL_SUBJECT=<span class="string">&quot;您在InsectMk&#x27;s Blog上的评论有回复啦！&quot;</span> \</span><br><span class="line">  -e MAIL_SUBJECT_ADMIN=<span class="string">&quot;InsectMk&#x27;s Blog有新评论啦！&quot;</span> \</span><br><span class="line">  -p 8360:8360 \</span><br><span class="line">  --restart=always \</span><br><span class="line">  --name waline-server \</span><br><span class="line">  lizheming/waline</span><br></pre></td></tr></table></figure><p><strong>参数解释</strong></p><table><thead><tr><th align="left">参数</th><th>解释</th></tr></thead><tbody><tr><td align="left">-e LEAN_ID&#x3D;xxx</td><td>LeanCloud的APP ID</td></tr><tr><td align="left">-e LEAN_KEY&#x3D;xxx</td><td>LeanCloud的APP KEY</td></tr><tr><td align="left">-e LEAN_MASTER_KEY&#x3D;xxx</td><td>LeanCloud的Master Key</td></tr><tr><td align="left">-e LEAN_SERVER&#x3D;xxx</td><td>如果LeanCloud为国内版，需要加上绑定LeanCloud的域名</td></tr><tr><td align="left">-e SMTP_SERVICE</td><td>SMTP 邮件发送服务提供商，<a href="https://github.com/nodemailer/nodemailer/blob/master/lib/well-known/services.json">点击查看哪些支持</a></td></tr><tr><td align="left">-e SMTP_USER</td><td>SMTP 邮件发送服务的用户名，一般为登录邮箱</td></tr><tr><td align="left">-e SMTP_PASS</td><td>SMTP 邮件发送服务的密码，一般为邮箱登录密码，部分邮箱(例如 163)是单独的 SMTP 密码。QQ邮箱是一个授权码，将在下文提示如何找到获得。</td></tr><tr><td align="left">-e SMTP_SECURE</td><td>是否使用 SSL 连接 SMTP</td></tr><tr><td align="left">-e SITE_NAME</td><td>网站名称，用于在消息中显示</td></tr><tr><td align="left">-e SITE_URL</td><td>网站地址，用于在消息中显示</td></tr><tr><td align="left">-e AUTHOR_EMAIL</td><td>博主邮箱，用来接收新评论通知。如果是博主发布的评论则不进行提醒通知</td></tr><tr><td align="left">-e SENDER_NAME</td><td>自定义发送邮件的发件人（可选）</td></tr><tr><td align="left">-e SENDER_EMAIL</td><td>自定义发送邮件的发件地址（可选）</td></tr><tr><td align="left">-e MAIL_SUBJECT</td><td>自定义评论回复邮件标题 （可选）</td></tr><tr><td align="left">-e MAIL_TEMPLATE</td><td>自定义评论回复邮件内容（可选）</td></tr><tr><td align="left">-e MAIL_SUBJECT_ADMIN</td><td>自定义新评论通知邮件标题（可选）</td></tr><tr><td align="left">-e MAIL_TEMPLATE_ADMIN</td><td>自定义新评论通知邮件内容（可选）</td></tr><tr><td align="left">-p 8360:8360</td><td>映射8360端口</td></tr><tr><td align="left">–restart&#x3D;always</td><td>系统重启时容器也启动</td></tr><tr><td align="left">–name waline-server</td><td>容器名</td></tr></tbody></table><h2 id="获取授权码"><a href="#获取授权码" class="headerlink" title="获取授权码"></a>获取授权码</h2><p>登录<a href="https://mail.qq.com/">QQ邮箱</a>获取授权码。</p><p><strong>设置</strong> -&gt; <strong>账号</strong> -&gt; <strong>POP3&#x2F;IMAP&#x2F;SMTP&#x2F;Exchange&#x2F;CardDAV&#x2F;CalDAV服务</strong> -&gt; <strong>管理服务</strong></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/docker-waline-email/image-20240219184225494.png" alt="image-20240219184225494"></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/docker-waline-email/image-20240219184348798.png" alt="image-20240219184348798"></p><p>进入后有个<code>生成授权码</code>按钮，点击后按照提示即可生成，将授权码绑定到docker环境变量即可。</p><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a href="https://waline.js.org/guide/deploy/vps.html">Waline独立部署</a></p><p><a href="https://waline.js.org/guide/features/notification.html#%E9%82%AE%E4%BB%B6%E9%80%9A%E7%9F%A5">Waline邮件通知</a></p><p><a href="https://ddw2019.com/060">Waline 评论邮箱通知</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Waline </tag>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>我的世界老九门服务器日志（2024-02-19~）</title>
      <link href="/posts/b4c68f75/"/>
      <url>/posts/b4c68f75/</url>
      
        <content type="html"><![CDATA[<details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-04-12]-增加Mod</summary><div class="toggle-content"><blockquote><p>增加<a href="https://www.mcmod.cn/class/1483.html">Xaero的世界地图</a>，支持管理员世界地图传送</p><p>增加<a href="https://www.curseforge.com/minecraft/mc-mods/slashblade">拔刀剑2</a>，中文说明<a href="https://www.mcmod.cn/class/2843.html">拔刀剑2</a></p><p>增加<a href="https://www.curseforge.com/minecraft/mc-mods/playeranimator">拔刀剑2依赖-playeranimator</a></p><p>增加苦力怕爆炸修复插件<a href="https://modrinth.com/plugin/creeper-recover">Creeper Recover</a></p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-03-21]-回退版本</summary><div class="toggle-content"><p><strong>回退版本</strong></p><blockquote><p>启动时控制台报错，不知道如何结局，回退到<code>2024-03-11</code>的版本。</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-03-13]-增加模组</summary><div class="toggle-content"><p><strong>更新核心版本</strong></p><blockquote><p>从<code>mohist-1.20.1-572-server.jar</code>更新到<code>mohist-1.20.1-579-server.jar</code></p><p><a href="https://new.mohistmc.com/">启动核心下载地址</a>。</p></blockquote><p><strong>Sanity: Descent Into Madness</strong></p><blockquote><p><a href="https://www.curseforge.com/minecraft/mc-mods/sanity-descent-into-madness">Sanity: Descent Into Madness-san值</a></p><p>前置模组：<a href="https://www.curseforge.com/minecraft/mc-mods/geckolib">GeckoLib-正运动学模型动画引擎</a></p></blockquote><p><strong>Vic’s Point Blank</strong></p><blockquote><p><a href="https://www.curseforge.com/minecraft/mc-mods/vics-point-blank">[VPB]Vic’s Point Blank_武器</a></p><p>前置模组：<a href="https://www.curseforge.com/minecraft/mc-mods/geckolib">GeckoLib-正运动学模型动画引擎</a></p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-03-12]-本地部署</summary><div class="toggle-content"><p><strong>采用本地部署</strong></p><blockquote><p>由于服务端模组过多，云服务负载过高，采用本机部署，服务器代理的形式部署。<br>服务器搭建<a href="/posts/be3171d2/" title="Ubuntu搭建EasyN2N小黄鸭并使用">Ubuntu搭建EasyN2N小黄鸭并使用</a><br>开服后<code>insectmk.cn</code>依然可用，但为内网穿透模式，延迟较高。<br>推荐使用EasyN2N&#x2F;小黄鸭虚拟局域网，需<a href="https://bugxia.com/525.html">下载EasyN2N\小黄鸭</a>。<br>导入链接：<code>easyn2n://MTUwLjE1OC40Ni4xODg6OTUyN0BtaW5lY3JhZnRfb2xkY2xhc3NuaW5lQGF1dG9ATFVVTkNpMTRJREU9</code></p></blockquote><p><strong>Alex的洞穴</strong></p><blockquote><p><a href="https://www.curseforge.com/minecraft/mc-mods/alexs-caves">Alex的洞穴</a></p><p>前置模组：<a href="https://www.curseforge.com/minecraft/mc-mods/citadel">Citadel-为其他模组提供的一个框架</a></p></blockquote><p><strong>海灵物语</strong></p><blockquote><p><a href="https://www.curseforge.com/minecraft/mc-mods/ob-aquamirae">海灵物语</a></p><p>前置模组：<a href="https://www.curseforge.com/minecraft/mc-mods/obscure-api">Obscure API-Obscuria 的作品所用的前置库</a></p></blockquote><p><strong>Xaero的世界地图</strong></p><blockquote><p><a href="https://chocolateminecraft.com/worldmap.php">Xaero的世界地图</a></p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-03-11]-增加模组</summary><div class="toggle-content"><p><strong>本次更新后，已经榨干了服务器，开始爆内存了</strong></p><p><strong>更新Mohist版本</strong></p><blockquote><p>从<code>mohist-1.20.1-550-server.jar</code>更新到<code>mohist-1.20.1-572-server.jar</code></p><p>本次更新需要删除根目录下的<code>libraries</code>全局运行库文件夹，让Mohist重新生成，否则会导致项目无法启动</p><p><a href="https://new.mohistmc.com/">启动核心下载地址</a></p></blockquote><p><strong>雾中人模组</strong></p><blockquote><p><a href="https://www.curseforge.com/minecraft/mc-mods/the-man-from-the-fog">雾中人</a></p><p>前置模组：<a href="https://www.curseforge.com/minecraft/mc-mods/geckolib">GeckoLib-正运动学模型动画引擎</a></p></blockquote><p><strong>穴居人模组</strong></p><blockquote><p><a href="https://modrinth.com/mod/cave-dweller-evolved">穴居人</a></p><p>前置模组：<a href="https://www.curseforge.com/minecraft/mc-mods/geckolib">GeckoLib-正运动学模型动画引擎</a></p></blockquote><p><strong>更新传送插件</strong></p><blockquote><p><a href="https://www.spigotmc.org/resources/advancedteleport.64139/">AdvancedTeleport</a></p><p>从<code>6.0.0</code>更新到<code>6.0.1</code></p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-02-22]-更新服务端版本</summary><div class="toggle-content"><p><strong>更新Mohist版本</strong></p><blockquote><p>从<code>mohist-1.20.1-521-server.jar</code>更新到<code>mohist-1.20.1-550-server.jar</code></p><p><a href="https://new.mohistmc.com/">启动核心下载地址</a>,官网老是出现<code>502 Bad gateway</code>错误，不知道什么原因，多刷新一下网页。</p></blockquote><p><strong>更新传送插件</strong></p><blockquote><p><a href="https://www.spigotmc.org/resources/advancedteleport.64139/">AdvancedTeleport</a></p><p>从<code>5.6.14</code>更新到<code>6.0.0</code></p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-02-19]-增加日志</summary><div class="toggle-content"><p><strong>添加此页面</strong></p><blockquote><p>添加此页面以记录服务器的更新与维护</p></blockquote></div></details><!-- flag of hidden posts -->]]></content>
      
      
      <categories>
          
          <category> 游戏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 服务器 </tag>
            
            <tag> 我的世界 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>求生之路2服务器日志（2024-01-31~2024-03-26）</title>
      <link href="/posts/e8598403/"/>
      <url>/posts/e8598403/</url>
      
        <content type="html"><![CDATA[<details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-03-26]-禁用插件</summary><div class="toggle-content"><p><strong>禁用多人插件</strong></p><blockquote><p>由于复活刷新高级物资的问题，禁用<code>自选-多人插件superversus1.8.15.5改(v1.11.8)(DDRKhat, Marcus101RR, Merudo, Lux, Shadowysn, sorallll)</code></p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-03-22]-平衡性调整</summary><div class="toggle-content"><p><strong>修复Bug</strong></p><blockquote><p>由于多人插件的问题，导致死人被电击器复活后出现高级物资破坏游戏平衡的问题。</p></blockquote><p><strong>枪械数据平衡性调整</strong></p><blockquote><p>鸟狙的前置子弹由<code>15</code>下调至<code>10</code></p><p>AWP的前置子弹由<code>20</code>下调至<code>5</code></p><p>SG552的射速由<code>1.1倍</code>下调至<code>1.0倍</code></p><p>手持AWP普通移速由<code>120</code>下调至<code>100</code></p><p>手持AWP受伤移速由<code>80</code>下调至<code>60</code></p><p>手持鸟狙普通移速由<code>230</code>下调至<code>220</code></p><p>鸟狙伤害由<code>500</code>下调至<code>250</code></p><p>30连伤害由<code>120</code>下调至<code>95</code></p><p>15连伤害由<code>150</code>下调至<code>120</code></p><p>鸟狙射速由<code>1.2倍</code>上调至<code>1.3倍</code></p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-03-19]-增加插件</summary><div class="toggle-content"><p><strong>增加插件</strong></p><blockquote><ol><li>由于警报车触发误报的问题，又重新添加<code>自选-生还者触发警报车提示(v2.0)(Eyal282)</code>插件</li><li>增加<code>自选-爬梯时可开枪(v1.0)(Lux)</code>插件</li></ol></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-03-18]-恢复Hud</summary><div class="toggle-content"><p><strong>增加插件</strong></p><blockquote><p>增加<code>自选-生还者增强(设置投掷扔出速度)(v1.0.0)(豆瓣酱な)</code>插件</p></blockquote><p><strong>恢复Hud</strong></p><blockquote><p>由于Hud冲突的问题<br>禁用哈利波特的CS击杀播报<br>开启豆瓣酱hud的仿CSGO击杀播报</p></blockquote><p><strong>修改CSGO式上弹速度</strong></p><blockquote><p>马格南由<code>1.18s</code>上调至<code>0.9s</code><br>30连由<code>2.2s</code>上调至<code>2.1s</code><br>15连由<code>2.2s</code>上调至<code>1.6s</code><br>三连发由<code>1.8s</code>上调至<code>1.6s</code></p></blockquote><p><strong>修改武器伤害</strong></p><blockquote><p>30连由<code>250</code>下调至<code>120</code><br>15连由<code>250</code>上调至<code>150</code></p></blockquote><p><strong>修改投掷速度</strong></p><blockquote><p>统一从<code>1.0倍</code>上调为<code>1.2倍</code></p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-03-17]-更新插件平台</summary><div class="toggle-content"><p><strong>更新插件平台</strong></p><blockquote><p>插件平台由<code>2023-9-20豆瓣酱な (v1.11)(6934-1148)战役整合包</code>更新到<code>2024-2-9豆瓣酱な (v1.11)(6934-1148)战役整合包</code></p><p>新内容如下：</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">2024-2-9:</span><br><span class="line"></span><br><span class="line">    1.11插件平台linux版(6954-1153)(必须先启用这个)</span><br><span class="line"></span><br><span class="line">        1:一段时间没看插件平台居然更新了这么多版本了.</span><br><span class="line">        2:新版本好像坏掉的平台函数也修复了.</span><br><span class="line"></span><br><span class="line">    1.11插件平台windows版(6954-1153)(必须先启用这个)</span><br><span class="line"></span><br><span class="line">        1:一段时间没看插件平台居然更新了这么多版本了.</span><br><span class="line">        2:新版本好像坏掉的平台函数也修复了.</span><br><span class="line"></span><br><span class="line">    自选-8角色共存(修复c6m1和c6m3地图中的传送bug)</span><br><span class="line"></span><br><span class="line">        1:删除了这个玩意,好像没啥用,可能是我用法不对.</span><br><span class="line"></span><br><span class="line">    必选-多人破解扩展+Tick解锁扩展(v2.3.1<span class="built_in">_</span>31d)(lakwsh)</span><br><span class="line"></span><br><span class="line">        1:更换为作者的二合一版本.</span><br><span class="line">        2:我他妈更换这个版本的时候傻眼了,怎么win版本的多人破解扩展文件都不在了,好家伙,tick解锁扩展win版本的也没了,该死的杀毒软件...</span><br><span class="line"></span><br><span class="line">    自选-排行榜插件(v2.13.13)(豆瓣酱な)(HUD的include提供者为 sorallll)</span><br><span class="line"></span><br><span class="line">        1:路程获取相关函数改到计时器内部每次都重新获取值.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">2024-2-3:</span><br><span class="line"></span><br><span class="line">    必选-功能类插件(left4dhooks)(v1.143)(SilverShot)</span><br><span class="line"></span><br><span class="line">        1:这个插件无脑最新即可.</span><br><span class="line">    </span><br><span class="line">    自选-武器数据修改插件的配置文件(v1.1.3)(豆瓣酱な)</span><br><span class="line"></span><br><span class="line">        1:增加一组写入配置文件的伤害和弹夹.</span><br><span class="line">        2:如果伤害或弹夹是默认值则不设置.</span><br><span class="line"></span><br><span class="line">    自选-坦克免疫火焰伤害或固定火焰伤害(v1.1.2)(豆瓣酱な)</span><br><span class="line"></span><br><span class="line">        1:精简了部分多余的代码.</span><br><span class="line">        2:兼容了下延迟加载插件.</span><br><span class="line">        3:更换了修改伤害的方法.</span><br><span class="line"></span><br><span class="line">    自选-生还者对女巫的伤害排名(v1.1.5)(豆瓣酱な)</span><br><span class="line"></span><br><span class="line">        1:兼容了下延迟加载插件.</span><br><span class="line"></span><br><span class="line">    自选-生还者对坦克的伤害排名(v1.4.7)(豆瓣酱な)</span><br><span class="line"></span><br><span class="line">        1:兼容了下延迟加载插件.</span><br><span class="line"></span><br><span class="line">    自选-设置倒地次数为0时阻止不正常的心跳声(Sir, 豆瓣酱な)(内有作者原版)</span><br><span class="line"></span><br><span class="line">        1:修改版源码写一半忘记了,现在可以正常编译源码了.</span><br><span class="line"></span><br><span class="line">    自选-指令!root添加或删除管理员(v2.4.10)(豆瓣酱な)</span><br><span class="line"></span><br><span class="line">        1:随机密码删除了数字0,好像密码第一位是0的话会被忽略掉导致密码错误.</span><br><span class="line">        2:特别说明,如果是默认密码则会在插件加载后重新随机新密码,如果是linux系统请注意文件权限问题.</span><br><span class="line"></span><br><span class="line">    自选-防止玩家或管理员长时间闲置挂机(v1.0.1)(豆瓣酱な)</span><br><span class="line"></span><br><span class="line">        1:插件信息复制的管理员更改难度,已更改.</span><br></pre></td></tr></table></figure><ol><li><p>更新基础插件版本到<code>1.11插件平台linux版(6954-1153)(必须先启用这个)</code></p></li><li><p>更新tick破解版本<code>自选-tick解锁扩展+多人破解扩展(v2.3.1_31d)(lakwsh)</code></p></li><li><p>更新HUD版本<code>自选-排行榜插件(v2.13.13)(豆瓣酱な)(HUD的include提供者为 sorallll)</code></p></li><li><p>更新<code>必选-功能类插件(left4dhooks)(v1.143)(SilverShot)</code></p></li><li><p>更新<code>自选-武器数据修改插件的配置文件(v1.1.3)(豆瓣酱な)</code></p></li><li><p>更新<code>自选-坦克免疫火焰伤害或固定火焰伤害(v1.1.2)(豆瓣酱な)</code></p></li><li><p>更新<code>自选-生还者对女巫的伤害排名(v1.1.5)(豆瓣酱な)</code></p></li><li><p>更新<code>自选-生还者对坦克的伤害排名(v1.4.7)(豆瓣酱な)</code></p></li><li><p>更新<code>自选-指令!root添加或删除管理员(v2.4.10)(豆瓣酱な)</code></p></li></ol></blockquote><p><strong>更新Hud</strong></p><blockquote><p>取消豆瓣酱Hud的CSGO击杀信息展示</p><p>引入<a href="https://github.com/fbef0102/L4D2-Plugins/tree/master/l4d2_cs_kill_hud">L4D2击杀提示改成CS游戏的击杀列表</a></p></blockquote><p><strong>修改CSGO式上弹速度</strong></p><blockquote><ol><li>15连由<code>2.6s</code>上调为<code>2.2s</code></li><li>30连由<code>1.8s</code>下调为<code>2.3s</code></li></ol></blockquote><p><strong>修改多特生成</strong></p><blockquote><p>调整特感生成规则<br>离开安全屋后<code>30s</code>产生特感<br>最小生成距离由<code>200</code>上调为<code>600</code></p></blockquote><p><strong>删除插件</strong></p><blockquote><p>由于<code>自选-生还者触发警报车提示(v2.0)(Eyal282)</code>与<code>自选-点燃或打爆物品提示(v1.0.7)(Mart)</code>功能冲突<br>并且<code>自选-生还者触发警报车提示(v2.0)(Eyal282)</code>存在误报问题，现删除此插件</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-03-16]-修改武器参数</summary><div class="toggle-content"><p>修改武器前置后，会出现满弹装弹鬼畜的问题，还不知道怎么解决（喷子可以改）</p><p><strong>增加插件</strong></p><blockquote><ul><li>增加<code>自选-后备弹药插件(豆瓣酱な)</code>插件，所有武器的备弹默认<code>翻2倍</code></li><li>可选-修复类(v1.0)(修复出现多次换弹动作)(HarryPotter)</li></ul></blockquote><p><strong>修改射速</strong></p><blockquote><ol><li>单喷的射速由<code>1.0倍</code>上调为<code>1.1倍</code></li><li>连喷的射速由<code>1.0倍</code>上调为<code>1.2倍</code></li><li>SG552的射速由<code>1.2倍</code>下调为<code>1.1倍</code></li><li>15连的射速由<code>1.0倍</code>上调为<code>1.1倍</code></li><li>30连的射速由<code>1.0倍</code>上调为<code>1.1倍</code></li><li>M60的射速由<code>1.0倍</code>上调为<code>1.3倍</code></li></ol></blockquote><p><strong>修改伤害</strong></p><blockquote><ol><li>15连的伤害由<code>90</code>上调为<code>250</code></li><li>30连的伤害由<code>90</code>上调为<code>250</code></li><li>M60的伤害由<code>50</code>上调为<code>90</code></li><li>AWP伤害由<code>1500</code>下调为<code>1000</code></li></ol></blockquote><p><strong>修改CSGO式上弹速度</strong></p><blockquote><ol><li>SG552的上弹速度由<code>1.4s</code>上调至<code>1.3s</code></li></ol></blockquote><p><strong>修改前置子弹</strong></p><blockquote><ol><li>AWP的前置子弹由<code>10</code>上调为<code>20</code></li></ol></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-03-15]-更新插件</summary><div class="toggle-content"><p><strong>更新标点插件</strong></p><blockquote><p>将标点提示内容更改为中文，修改<code>l4d2_item_hint.sp</code>源码内容：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Case-sensitive</span></span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/w_models/weapons/w_eq_medkit.mdl&quot;</span>, <span class="string">&quot;急救包！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/w_models/weapons/w_eq_defibrillator.mdl&quot;</span>, <span class="string">&quot;电击器！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/w_models/weapons/w_eq_painpills.mdl&quot;</span>, <span class="string">&quot;止痛药！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/w_models/weapons/w_eq_adrenaline.mdl&quot;</span>, <span class="string">&quot;肾上腺素！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/w_models/weapons/w_eq_bile_flask.mdl&quot;</span>, <span class="string">&quot;胆汁！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/w_models/weapons/w_eq_molotov.mdl&quot;</span>, <span class="string">&quot;燃烧瓶！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/w_models/weapons/w_eq_pipebomb.mdl&quot;</span>, <span class="string">&quot;土制炸弹！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/w_models/weapons/w_laser_sights.mdl&quot;</span>, <span class="string">&quot;激光瞄准器！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/w_models/weapons/w_eq_incendiary_ammopack.mdl&quot;</span>, <span class="string">&quot;燃烧弹药包！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/w_models/weapons/w_eq_explosive_ammopack.mdl&quot;</span>, <span class="string">&quot;高爆弹药包！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/props/terror/ammo_stack.mdl&quot;</span>, <span class="string">&quot;弹药！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/props_unique/spawn_apartment/coffeeammo.mdl&quot;</span>, <span class="string">&quot;弹药！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/props/de_prodigy/ammo_can_02.mdl&quot;</span>, <span class="string">&quot;弹药！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/weapons/melee/w_chainsaw.mdl&quot;</span>, <span class="string">&quot;电锯！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/w_models/weapons/w_pistol_b.mdl&quot;</span>, <span class="string">&quot;小手枪！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/w_models/weapons/w_pistol_a.mdl&quot;</span>, <span class="string">&quot;小手枪！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/w_models/weapons/w_desert_eagle.mdl&quot;</span>, <span class="string">&quot;马格南！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/w_models/weapons/w_shotgun.mdl&quot;</span>, <span class="string">&quot;一代木喷！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/w_models/weapons/w_pumpshotgun_a.mdl&quot;</span>, <span class="string">&quot;二代铁喷！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/w_models/weapons/w_smg_uzi.mdl&quot;</span>, <span class="string">&quot;吹风机！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/w_models/weapons/w_smg_a.mdl&quot;</span>, <span class="string">&quot;消音吹风机！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/w_models/weapons/w_smg_mp5.mdl&quot;</span>, <span class="string">&quot;MP5！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/w_models/weapons/w_rifle_m16a2.mdl&quot;</span>, <span class="string">&quot;M16步枪！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/w_models/weapons/w_rifle_sg552.mdl&quot;</span>, <span class="string">&quot;SG552！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/w_models/weapons/w_rifle_ak47.mdl&quot;</span>, <span class="string">&quot;AK47！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/w_models/weapons/w_desert_rifle.mdl&quot;</span>, <span class="string">&quot;三连发！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/w_models/weapons/w_shotgun_spas.mdl&quot;</span>, <span class="string">&quot;二代连喷！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/w_models/weapons/w_autoshot_m4super.mdl&quot;</span>, <span class="string">&quot;一代连喷！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/w_models/weapons/w_sniper_mini14.mdl&quot;</span>, <span class="string">&quot;15连狙！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/w_models/weapons/w_sniper_military.mdl&quot;</span>, <span class="string">&quot;30连狙！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/w_models/weapons/w_sniper_scout.mdl&quot;</span>, <span class="string">&quot;鸟狙！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/w_models/weapons/w_sniper_awp.mdl&quot;</span>, <span class="string">&quot;AWP！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/w_models/weapons/w_grenade_launcher.mdl&quot;</span>, <span class="string">&quot;榴弹发射器！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/w_models/weapons/w_m60.mdl&quot;</span>, <span class="string">&quot;M60机关枪！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/props_junk/gascan001a.mdl&quot;</span>, <span class="string">&quot;汽油桶！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/props_junk/explosive_box001.mdl&quot;</span>, <span class="string">&quot;烟花！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/props_junk/propanecanister001a.mdl&quot;</span>, <span class="string">&quot;煤气罐！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/props_equipment/oxygentank01.mdl&quot;</span>, <span class="string">&quot;氧气瓶！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/props_junk/gnome.mdl&quot;</span>, <span class="string">&quot;侏儒！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/w_models/weapons/w_cola.mdl&quot;</span>, <span class="string">&quot;可乐！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/w_models/weapons/50cal.mdl&quot;</span>, <span class="string">&quot;重机枪！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/w_models/weapons/w_minigun.mdl&quot;</span>, <span class="string">&quot;迷你机枪！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/props/terror/exploding_ammo.mdl&quot;</span>, <span class="string">&quot;高爆弹升级！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/props/terror/incendiary_ammo.mdl&quot;</span>, <span class="string">&quot;燃烧弹升级！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/w_models/weapons/w_knife_t.mdl&quot;</span>, <span class="string">&quot;小刀！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/weapons/melee/w_bat.mdl&quot;</span>, <span class="string">&quot;棒球棍！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/weapons/melee/w_cricket_bat.mdl&quot;</span>, <span class="string">&quot;板球拍！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/weapons/melee/w_crowbar.mdl&quot;</span>, <span class="string">&quot;撬棍！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/weapons/melee/w_electric_guitar.mdl&quot;</span>, <span class="string">&quot;电吉他！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/weapons/melee/w_fireaxe.mdl&quot;</span>, <span class="string">&quot;消防斧！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/weapons/melee/w_frying_pan.mdl&quot;</span>, <span class="string">&quot;平底锅！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/weapons/melee/w_katana.mdl&quot;</span>, <span class="string">&quot;武士刀！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/weapons/melee/w_machete.mdl&quot;</span>, <span class="string">&quot;砍刀！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/weapons/melee/w_tonfa.mdl&quot;</span>, <span class="string">&quot;警棍！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/weapons/melee/w_golfclub.mdl&quot;</span>, <span class="string">&quot;高尔夫球杆！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/weapons/melee/w_pitchfork.mdl&quot;</span>, <span class="string">&quot;草叉！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/weapons/melee/w_shovel.mdl&quot;</span>, <span class="string">&quot;铲子！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/infected/boomette.mdl&quot;</span>, <span class="string">&quot;胖子！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/infected/boomer.mdl&quot;</span>, <span class="string">&quot;胖子！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/infected/boomer_l4d1.mdl&quot;</span>, <span class="string">&quot;胖子！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/infected/hulk.mdl&quot;</span>, <span class="string">&quot;坦克！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/infected/hulk_l4d1.mdl&quot;</span>, <span class="string">&quot;坦克！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/infected/hulk_dlc3.mdl&quot;</span>, <span class="string">&quot;坦克！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/infected/smoker.mdl&quot;</span>, <span class="string">&quot;舌头！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/infected/smoker_l4d1.mdl&quot;</span>, <span class="string">&quot;舌头！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/infected/hunter.mdl&quot;</span>, <span class="string">&quot;猎人！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/infected/hunter_l4d1.mdl&quot;</span>, <span class="string">&quot;猎人！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/infected/witch.mdl&quot;</span>, <span class="string">&quot;你老婆！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/infected/witch_bride.mdl&quot;</span>, <span class="string">&quot;你老婆结婚了！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/infected/spitter.mdl&quot;</span>, <span class="string">&quot;口水！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/infected/jockey.mdl&quot;</span>, <span class="string">&quot;猴子！&quot;</span>);</span><br><span class="line">g_smModelToName.SetString(<span class="string">&quot;models/infected/charger.mdl&quot;</span>, <span class="string">&quot;牛！&quot;</span>);</span><br></pre></td></tr></table></figure></blockquote><p><strong>更新配置文件</strong></p><blockquote><ul><li>哈利波特标点：<strong>标点的颜色</strong>、第二次<strong>标点时间限制</strong>、<strong>标点可视距离</strong></li><li>幸存者黑白发光：颜色为<strong>橙色</strong></li></ul></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-03-14]-更新应用</summary><div class="toggle-content"><p><strong>更新游戏版本</strong></p><blockquote><p>更新游戏版本。</p></blockquote><p><strong>增加插件</strong></p><blockquote><ul><li>自选-武器的伤害和弹夹等数据修改(v3.0.1)(Jahze, A1m&#96;, Forgetest)</li><li>自选-武器数据修改插件的配置文件(v1.0.3)(豆瓣酱な)</li><li>自选-生还者增强(设置枪械射击速度)(v1.0.0)(豆瓣酱な)</li></ul></blockquote><p><strong>修改武器参数</strong></p><blockquote><ol><li>AWP伤害上调为<code>1500</code></li><li>鸟狙伤害上调为<code>500</code></li><li>AK射速增加到<code>1.2倍</code></li><li>M16射速增加到<code>1.1倍</code></li><li>三连发射速增加到<code>1.2倍</code></li><li>SG552伤害上调为<code>48</code></li><li>SG552射速增加到<code>1.1倍</code></li><li>AWP前置子弹从<code>20发</code>下调至<code>10发</code></li><li>SG552的CSGO式上弹从<code>1.6s</code>上调至<code>1.4s</code></li></ol></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-03-01]-更新应用</summary><div class="toggle-content"><p><strong>更新游戏版本</strong></p><blockquote><p>今天求生又更新了，更新了一下。</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-02-21]-更新应用</summary><div class="toggle-content"><p><strong>更新游戏版本</strong></p><blockquote><p>今天求生又更新了，服务器也跟着跟新一下。</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-02-19]-增加插件</summary><div class="toggle-content"><p><strong>增加插件</strong></p><blockquote><ul><li><p><a href="https://forums.alliedmods.net/showthread.php?t=327511">使用优先补丁 (2.5)</a><br>在启动服务端的时候，提示警告：</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Warning: You should install &quot;[L4D <span class="built_in">&amp;</span> L4D2] Use Priority Patch&quot; to fix attached models blocking +USE action (item hint): https://forums.alliedmods.net/showthread.php?t=327511</span><br></pre></td></tr></table></figure><p>加上此插件后，警告消失</p></li></ul></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-02-06]-增加插件</summary><div class="toggle-content"><p><strong>增加插件</strong></p><blockquote><ul><li>幸存者死亡产生墓碑</li><li>倒地按<code>w</code>爬行</li><li><a href="https://forums.alliedmods.net/showthread.php?p=2757313">设置手持不同物品的移速</a></li></ul></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-02-05]-修改启动文件</summary><div class="toggle-content"><p><strong>修改Server.cfg</strong></p><blockquote><p>参考lvtouzu大佬的<a href="https://www.bilibili.com/video/BV1sw411p7TV/?spm_id_from=333.999.0.0&vd_source=43f3f41b9a99cfe3d5248db59a3897c7">【求生之路2&#x2F;教程】第四十六期——2023年最新Linux服务器搭服教程</a>开服参数</p><p>lvt’s教程资料整合包（持续更新中） </p><p>链接：<code>https://pan.baidu.com/s/1CInvBi7hpflUSc3UfcfQ0Q?pwd=phet</code></p><p>提取码：<code>phet</code></p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-02-04]-功能增加</summary><div class="toggle-content"><p><strong>增加插件</strong></p><blockquote><p>自选-动态大厅(v2.0.4)(Downtown1, Anime4000, sorallll, HatsuneImagine)</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-02-04]-重装服务器</summary><div class="toggle-content"><p><strong>重装服务器</strong></p><blockquote><p>今天做了些修改后发现服务器有人退出就会导致服务器10秒重启</p><p>而且不知道原因，所以直接重装了，气死了！</p></blockquote><p><strong>安装豆瓣酱插件</strong></p><blockquote><p>使用<code>2023-9-20豆瓣酱な (v1.11)(6934-1148)战役整合包</code></p><ul><li>1.11插件平台linux版(6936-1148)(必须先启用这个)</li><li>必选-多人破解扩展(v1.1.1)(lakwsh)</li><li>必选-功能类插件(left4dhooks)(v1.136)(SilverShot)</li><li>必选-功能类插件(WeaponHandling)(v1.0.6)(Lux)</li><li>必选-功能类插件(原生键值函数库)(v0.1)(fdxx)</li><li>必选-功能类插件(原生投票函数库)(v0.2)(Powerlord, fdxx)</li><li>必选-功能类扩展(sourcescramble.ext)(v0.7.1.1)</li><li>必选-修复类(v1.1)(修复部分梯子导致的崩溃)(SilverShot and Peace-Maker)</li><li>必选-修复类(v1.2.2-git135)(linux版本)(修复c6m1实体过多任务失败炸服)</li><li>必选-修复类(v1.4)(修复女巫攻击错误的惊扰者)(Lux)</li><li>必选-修复类(v2)(修复SG552开镜换弹鬼畜)(bullet28)</li><li>必选-修复类(v2.8b)(解决linux系统CFG不加载)(SilverShot, Peace-Maker)</li><li>自选-tick解锁扩展(启动项加 -tickrate 100)(v1.1.0)(lakwsh)</li><li>自选-tick设置插件(启动项加 -tickrate 100)(v2.1.4)(豆瓣酱な)</li><li>自选-点燃或打爆物品提示(v1.0.7)(Mart)</li><li>自选-多人插件superversus1.8.15.5改(v1.11.8)(DDRKhat, Marcus101RR, Merudo, Lux, Shadowysn, sorallll)</li><li>自选-多特感插件(v1.3.6)(Tordecybombo, breezy)</li><li>自选-根据人数设置医疗物品倍数(v1.0.5)(豆瓣酱な)</li><li>自选-管理员娱乐菜单(v1.2.3a)(sorallll)</li><li>自选-管理员指令!sset设置人数(v1.2.7)(豆瓣酱な)</li><li>自选-换图类(投票换图)(v0.9)(fdxx, sorallll)</li><li>自选-换图类(自动换图)(v1.0.5)(Alex Dragokas, fdxx, sorallll)</li><li>自选-获取自定义的女巫编号(v1.2.5)(豆瓣酱な)</li><li>自选-击杀或爆头和黑枪提示和关闭队伤(0.9.7)(原作者-Voiderest)(修改-豆瓣酱な)</li><li>自选-近战解锁(v1.6)(IA-NanaNana, sorallll)</li><li>自选-排行榜插件(v2.13.12)(豆瓣酱な)(HUD的include提供者为 sorallll)</li><li>自选-扔投掷物提示(v1.0.8)(Mart)</li><li>自选-生还者触发警报车提示(v2.0)(Eyal282)</li><li>自选-生还者对女巫的伤害排名(v1.0.5)(豆瓣酱な)</li><li>自选-生还者对坦克的伤害排名(v1.3.7)(豆瓣酱な)</li><li>自选-坦克或女巫出现时根据生还者人数增加血量(v1.6.8)(Visor,豆瓣酱な)(需要自定义女巫编号插件)</li><li>自选-坦克免疫火焰伤害或固定火焰伤害(v1.0.1)(豆瓣酱な)</li><li>自选-玩家自杀指令(v1.0.2)(豆瓣酱な)</li><li>自选-幸存者黑白发光(v2.0.2)(Lux)</li><li>自选-幸存者死亡和被制服提示(v1.3.9)(豆瓣酱な-死亡提示嫖至sorallll)(需要自定义女巫编号插件)</li><li>自选-指令!root添加或删除管理员(v2.4.8)(豆瓣酱な)</li><li>自选-阻止游戏自带的部分提示(v1.1.2)(豆瓣酱な)</li><li>自选-服务器中文名(v1.1.2)(指令!host立即刷新服名)(豆瓣酱な)</li></ul></blockquote><p><strong>安装其他插件</strong></p><blockquote><p><a href="https://github.com/fbef0102/L4D1_2-Plugins/tree/master/l4d_drop">玩家可丢弃手中的物品</a></p><p><a href="https://github.com/fbef0102/L4D2-Plugins/tree/master/drop_secondary">死亡时掉落第二把武器</a></p><p><a href="https://github.com/fbef0102/L4D2-Plugins/tree/master/l4d2_item_hint">使用“看”标记物品</a>：配合<a href="https://github.com/fbef0102/Game-Private_Plugin/tree/main/Tutorial_%E6%95%99%E5%AD%B8%E5%8D%80/Chinese_%E7%B9%81%E9%AB%94%E4%B8%AD%E6%96%87/Game#%E5%95%9F%E5%8B%95%E9%81%8A%E6%88%B2%E6%8C%87%E5%B0%8E%E7%B3%BB%E7%B5%B1">启动游戏指导系统</a></p><p><a href="https://github.com/fbef0102/L4D2-Plugins/tree/master/l4d2_skill_detect">特技展示</a></p><p><a href="https://github.com/fbef0102/L4D2-Plugins/tree/master/l4d2_weapon_csgo_reload">CSGO式换弹</a></p><p>推人出现boomer爆炸物理效果：室友<a href="https://starisora.cn/">Starisora</a>分享</p><p>击杀与命中反馈：室友<a href="https://starisora.cn/">Starisora</a>分享</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-02-04]-更换地图插件</summary><div class="toggle-content"><p><strong>更换地图插件</strong></p><blockquote><p>随豆瓣酱插件整合包的更新，更换投票换图插件</p></blockquote><p><strong>增加依赖项插件</strong></p><blockquote><p>增加一些被依赖的插件：</p><ul><li><p>必选-功能类插件(WeaponHandling)(v1.0.6)(Lux)</p></li><li><p>必选-功能类插件(原生键值函数库)(v0.1)(fdxx)</p></li><li><p>必选-功能类插件(原生投票函数库)(v0.2)(Powerlord, fdxx)</p></li><li><p>必选-功能类扩展(sourcescramble.ext)(v0.7.1.1)</p></li></ul></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-02-03]-公开服务器</summary><div class="toggle-content"><p><strong>添加服务器到组</strong></p><blockquote><p><a href="https://www.bilibili.com/read/cv28684342/">求生之路2服务器绑定组教学</a></p><p>在<code>server.cfg</code>中添加如下内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 绑定组</span><br><span class="line">sv_steamgroup &quot;628356,2630068,1016724,5442144&quot;</span><br><span class="line">//组成员游戏（0为公共游戏，任何人都可以加入；1为没人时仅限组成员加入，组成员加入后他们的非组成员好友也能加入；2为永远只有组成员可以加入游戏，即使是他们的好友，只要不是本组成员就不能加入游戏）</span><br><span class="line">sm_cvar sv_steamgroup_exclusive 0</span><br></pre></td></tr></table></figure></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-01-31]-移速修改</summary><div class="toggle-content"><p><strong>增加移速插件</strong></p><blockquote><p><a href="https://forums.alliedmods.net/showthread.php?p=2757313">持武器不同移速</a><br>感谢室友<a href="https://starisora.cn/">Starisora</a>推荐的插件</p></blockquote></div></details><!-- flag of hidden posts -->]]></content>
      
      
      <categories>
          
          <category> 游戏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 服务器 </tag>
            
            <tag> 求生之路2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>求生之路插件推荐</title>
      <link href="/posts/e9f8c18b/"/>
      <url>/posts/e9f8c18b/</url>
      
        <content type="html"><![CDATA[<h2 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h2><p><a href="https://www.hxzct.asia/">黄向真仇天的插件记录网站</a>：记录了各大插件的网站，无意间搜索到的，强推！！！</p><p><a href="http://l4d.vihh.net/forum.php?mod=viewthread&tid=75422&extra=page=1">豆瓣酱整合包</a>：非常好用的插件整合包</p><p><a href="https://github.com/fbef0102/Game-Private_Plugin">哈利波特插件</a>：非常友好的插件作者</p><p><a href="https://pan.baidu.com/s/1bdQAzupBq5PstC1fku162g">自用插件链接</a> 提取码：left</p><p><a href="https://forums.alliedmods.net/showthread.php?p=2757313">持武器不同移速</a></p><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://www.alsaces.cn/posts/314a5cd5/">搭建求生之路2服务器和插件分享</a></p><h2 id="后语"><a href="#后语" class="headerlink" title="后语"></a>后语</h2><p>特别感谢室友<a href="https://starisora.cn/">Starisora</a>推荐的插件</p>]]></content>
      
      
      <categories>
          
          <category> 游戏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 服务器 </tag>
            
            <tag> 求生之路2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ChatGLM2-6B API的使用</title>
      <link href="/posts/e7cbc711/"/>
      <url>/posts/e7cbc711/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>之前已经完成了ChatGLM2-6B的本地部署，但是只能直接使用，而不能接入自己的程序。</p><p>官方也提供了API的启动文件，本文将会记录API的使用方法。</p><p>在阅读之前确保已完成<a href="/posts/6677227f/" title="本地部署开源语言模型ChatGLM2-6b">本地部署开源语言模型ChatGLM2-6b</a>。</p><h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><p>官方提供两种格式的API启动脚本，一种是HTTP形式的接口，一种是OpenAI格式的流式API，分别是<code>api.py</code>与<code>openai_api.py</code>。</p><p><strong>安装额外依赖</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用openai_api.py需要安装这两个包</span></span><br><span class="line">pip install fastapi uvicorn</span><br></pre></td></tr></table></figure><p><strong>修改启动文件</strong></p><p>如果系统为<strong>Windows</strong>则需要将<code>api.py</code>与<code>openai_api.py</code>中的<code>THUDM/chatglm2-6b</code>修改为<code>THUDM\chatglm2-6b</code>。</p><h2 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h2><h3 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h3><p>使用以下指令启动HTTP的API脚本（自行替换项目目录）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入到项目目录</span></span><br><span class="line"><span class="built_in">cd</span> D:\ChatGLM2-6B</span><br><span class="line"><span class="comment"># 激活环境</span></span><br><span class="line">conda activate D:\ChatGLM2-6B\ENV</span><br><span class="line"><span class="comment"># 运行</span></span><br><span class="line">python api.py</span><br></pre></td></tr></table></figure><p>出现以下内容即表示启动成功</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/chatglm2-6b-api/image-20240126161714790.png" alt="image-20240126161714790"></p><p>根据不同的终端测试API</p><div class="tabs" id="http_api_test"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="http_api_test-1">Windows-CMD</button><button type="button" class="tab " data-href="http_api_test-2">Windows-Powershell</button><button type="button" class="tab " data-href="http_api_test-3">Linux</button></ul><div class="tab-contents"><div class="tab-item-content active" id="http_api_test-1"><p>请求</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST http://<span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">8000</span> -H &quot;Content-<span class="built_in">Type</span>: application/json&quot; -d &quot;&#123;\&quot;prompt\&quot;: \&quot;你好\&quot;, \&quot;history\&quot;: []&#125;&quot;</span><br></pre></td></tr></table></figure><p>响应（经过格式美化）</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;response&quot;</span><span class="punctuation">:</span><span class="string">&quot;你好👋！我是人工智能助手 ChatGLM2-6B，很高兴见到你，欢迎问我任何问题。&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;history&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">[</span></span><br><span class="line">            <span class="string">&quot;你好&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="string">&quot;你好👋！我是人 工智能助手 ChatGLM2-6B，很高兴见到你，欢迎问我任何问题。&quot;</span></span><br><span class="line">        <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span><span class="number">200</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;time&quot;</span><span class="punctuation">:</span><span class="string">&quot;2024-01-26 16:20:04&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="http_api_test-2"><p>请求</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$body</span> = <span class="string">&#x27;&#123;&quot;prompt&quot;: &quot;你好&quot;, &quot;history&quot;: []&#125;&#x27;</span></span><br><span class="line"><span class="variable">$headers</span> = <span class="selector-tag">@</span>&#123;<span class="string">&quot;Content-Type&quot;</span> = <span class="string">&quot;application/json&quot;</span>&#125;</span><br><span class="line"><span class="built_in">Invoke-RestMethod</span> <span class="literal">-Method</span> POST <span class="literal">-Uri</span> http://<span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">8000</span> <span class="literal">-Body</span> <span class="variable">$body</span> <span class="literal">-Headers</span> <span class="variable">$headers</span></span><br></pre></td></tr></table></figure><p>响应（这里回答英文的原因可能是字符集的问题，接口接收消息时乱码了，导致默认返回英文。）</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">response                           history                                 status time</span><br><span class="line">--------                           -------                                 ------ ----</span><br><span class="line">Hello! How can I assist you today? &#123;?? Hello! How can I assist you today?&#125;    200 2024-01-26 16:29:43</span><br></pre></td></tr></table></figure></div><div class="tab-item-content" id="http_api_test-3"><p><strong>未经测试，通过官方文档得知</strong></p><p>请求</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST &quot;http://127.0.0.1:8000&quot; \</span><br><span class="line">     -H &#x27;Content-Type: application/json&#x27; \</span><br><span class="line">     -d &#x27;&#123;&quot;prompt&quot;: &quot;你好&quot;, &quot;history&quot;: []&#125;&#x27;</span><br></pre></td></tr></table></figure><p>响应</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;response&quot;</span><span class="punctuation">:</span><span class="string">&quot;你好👋！我是人工智能助手 ChatGLM2-6B，很高兴见到你，欢迎问我任何问题。&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;history&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="punctuation">[</span><span class="string">&quot;你好&quot;</span><span class="punctuation">,</span><span class="string">&quot;你好👋！我是人工智能助手 ChatGLM2-6B，很高兴见到你，欢迎问我任何问题。&quot;</span><span class="punctuation">]</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span><span class="number">200</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;time&quot;</span><span class="punctuation">:</span><span class="string">&quot;2023-03-23 21:38:40&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><h3 id="OpenAI流式"><a href="#OpenAI流式" class="headerlink" title="OpenAI流式"></a>OpenAI流式</h3><p>使用以下指令启动OpenAI格式的流式API脚本（自行替换项目目录）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入到项目目录</span></span><br><span class="line"><span class="built_in">cd</span> D:\ChatGLM2-6B</span><br><span class="line"><span class="comment"># 激活环境</span></span><br><span class="line">conda activate D:\ChatGLM2-6B\ENV</span><br><span class="line"><span class="comment"># 运行</span></span><br><span class="line">python openai_api.py</span><br></pre></td></tr></table></figure><p>出现以下内容即表示启动成功</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/chatglm2-6b-api/image-20240126164204333.png" alt="image-20240126164204333"></p><p>使用python脚本测试API，脚本内容如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> openai</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    openai.api_base = <span class="string">&quot;http://localhost:8000/v1&quot;</span></span><br><span class="line">    openai.api_key = <span class="string">&quot;none&quot;</span></span><br><span class="line">    <span class="keyword">for</span> chunk <span class="keyword">in</span> openai.ChatCompletion.create(</span><br><span class="line">        model=<span class="string">&quot;chatglm2-6b&quot;</span>,</span><br><span class="line">        messages=[</span><br><span class="line">            &#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;user&quot;</span>, <span class="string">&quot;content&quot;</span>: <span class="string">&quot;你好&quot;</span>&#125;</span><br><span class="line">        ],</span><br><span class="line">        stream=<span class="literal">True</span></span><br><span class="line">    ):</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">hasattr</span>(chunk.choices[<span class="number">0</span>].delta, <span class="string">&quot;content&quot;</span>):</span><br><span class="line">            <span class="built_in">print</span>(chunk.choices[<span class="number">0</span>].delta.content, end=<span class="string">&quot;&quot;</span>, flush=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p>可以在项目目录下创建一个<code>openai_api_test.py</code>文件来装载以上内容，然后使用ChatGLM的环境来运行此脚本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入到项目目录</span></span><br><span class="line"><span class="built_in">cd</span> D:\ChatGLM2-6B</span><br><span class="line"><span class="comment"># 激活环境</span></span><br><span class="line">conda activate D:\ChatGLM2-6B\ENV</span><br><span class="line"><span class="comment"># 运行</span></span><br><span class="line">python openai_api_test.py</span><br></pre></td></tr></table></figure><p>如果提示<code>No module named &#39;openai&#39;</code>，说明没有安装第三方包，执行<code>pip install openai==0.28.0</code>并重启终端（博主是重启终端后才生效）后再执行脚本。</p><p>执行成功后终端会打印如下内容：</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">你好👋！我是人工智能助手 ChatGLM2-6B，很高兴见到你，欢迎问我任何问题。</span><br></pre></td></tr></table></figure><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://github.com/THUDM/ChatGLM2-6B/tree/main">官方README文档</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 毕业设计 </tag>
            
            <tag> ChatGLM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Anaconda的安装与基本使用</title>
      <link href="/posts/d2f4b39f/"/>
      <url>/posts/d2f4b39f/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>最近又要折腾人工智能了，又要狩猎新的领域了，头痛。</p><p>在学习过程中了解到了Anaconda这款软件，对于我来说就是用来进行Python的环境管理。</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>进入到<a href="https://www.anaconda.com/download">Anaconda官方下载页</a>进行下载。</p><p>根据需要安装即可，安装完成后打开终端输入<code>conda --version</code>回车，成功打印版本号则安装成功。</p><p>如果显示<code>&#39;conda&#39; 不是内部或外部命令，也不是可运行的程序或批处理文件。</code>，那可能是环境变量没有配上。</p><p>找到Anaconda的安装路径，我这里是<code>E:\software-for-developer\anaconda3</code>，然后在path环境变量下添加以下变量值：</p><ul><li><code>E:\software-for-developer\anaconda3</code></li><li><code>E:\software-for-developer\anaconda3\Scripts</code>：加上这个不能使用<code>conda activate &lt;环境名&gt;</code>（不知道为什么），可以不加</li><li><code>E:\software-for-developer\anaconda3\Library\bin</code></li></ul><p>然后再打开终端输入<code>conda --version</code>回车，验证是否安装成功。</p><h2 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h2><p>可以参考<a href="https://www.runoob.com/python-qt/anaconda-tutorial.html">Anaconda菜鸟教程</a>。</p><p><strong>环境管理</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看存在的环境</span></span><br><span class="line">conda info -e</span><br><span class="line"><span class="comment"># 创建一个名为 &quot;myenv&quot; 的新环境:</span></span><br><span class="line">conda create --name myenv</span><br><span class="line"><span class="comment"># 创建指定版本的环境：</span></span><br><span class="line">conda create --name myenv python=3.8</span><br><span class="line"><span class="comment"># 激活环境：</span></span><br><span class="line">conda activate myenv</span><br><span class="line"><span class="comment"># 要退出当前环境使用以下命令：</span></span><br><span class="line">conda deactivate</span><br><span class="line"><span class="comment"># 查看所有环境：</span></span><br><span class="line">conda <span class="built_in">env</span> list</span><br><span class="line"><span class="comment"># 复制环境：</span></span><br><span class="line">conda create --name myclone --<span class="built_in">clone</span> myenv</span><br></pre></td></tr></table></figure><p><strong>包管理</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装包：</span></span><br><span class="line">conda install package_name</span><br><span class="line"><span class="comment"># 安装指定版本的包：</span></span><br><span class="line">conda install package_name=1.2.3</span><br><span class="line"><span class="comment"># 更新包：</span></span><br><span class="line">conda update package_name</span><br><span class="line"><span class="comment"># 卸载包：</span></span><br><span class="line">conda remove package_name</span><br><span class="line"><span class="comment"># 查看已安装的包：</span></span><br><span class="line">conda list</span><br></pre></td></tr></table></figure><p><strong>其他</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看帮助：</span></span><br><span class="line">conda --<span class="built_in">help</span></span><br><span class="line"><span class="comment"># 查看 conda 版本：</span></span><br><span class="line">conda --version</span><br><span class="line"><span class="comment"># 搜索包：</span></span><br><span class="line">conda search package_name</span><br><span class="line"><span class="comment"># 清理不再需要的包：</span></span><br><span class="line">conda clean --all</span><br></pre></td></tr></table></figure><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a href="https://openai.wiki/anaconda-and-miniconda-windows-env-fixes.html">Anaconda｜Miniconda｜Windows环境变量修复</a></p><p><a href="https://www.runoob.com/python-qt/anaconda-tutorial.html">Anaconda菜鸟教程</a></p>]]></content>
      
      
      <categories>
          
          <category> 知识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> Conda </tag>
            
            <tag> Anaconda </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>搭建我的世界混合服务器</title>
      <link href="/posts/8399162a/"/>
      <url>/posts/8399162a/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>最近有点儿游戏荒了，打算再次拾起我的世界，但是朋友想玩儿mod服，之前搭建的都是纯净官方服，没有插件和模组，看来又得踩踩坑了。</p><p>本片博文将会记录在<code>ubuntu20</code>上搭建我的世界<code>1.20.1</code>Java版混合服的步骤。</p><p>在搭建之前需要知道一些服务端的基本知识：MC是有许多不同的服务端启动核心的，不同的服务端启动核心有不同的功能，大致分为四类：<code>官方服核心</code>、<code>插件服核心</code>、<code>模组服核心</code>、<code>混合服核心</code>。</p><p>下面对这四种服务端作简要的说明：</p><ul><li>官方服核心：即在<a href="https://www.minecraft.net/zh-hans/download/server">官方服务端下载页</a>下载的<code>jar</code>文件，其中包含了服务端最基础的功能。</li><li>插件服核心：在官方服核心的基础上又增加了插件功能，主要对服务器的功能进行扩展，例如传送、白名单等，插件只需要在服务端安装，客户端通常只需要在控制台输入指令即可使用。</li><li>模组服核心：在官方服核心的基础上又增加了mod功能，主要对服务器的玩儿法进行扩展，例如枪械、机械动力等，一般要服务器和客户端同时安装。</li><li>混合服核心：结合了以上三种核心的功能、既有插件又有模组。</li></ul><p><strong>注意</strong>：由于互联网更新频繁，注意灵活识别页面与文件名。</p><h2 id="搭建"><a href="#搭建" class="headerlink" title="搭建"></a>搭建</h2><p>首先需要在服务器上安装jre17，运行以下指令进行安装：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 更新软件包</span></span><br><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"><span class="comment"># 安装jre</span></span><br><span class="line"><span class="built_in">sudo</span> apt install openjdk-17-jre</span><br></pre></td></tr></table></figure><p>然后再下载混合服核心，除了官方服核心，其他的核心都有多种平台，可以根据自己的需要选择合适的平台，这里我选择<a href="https://new.mohistmc.com/">MohistMC混合服核心</a>。</p><p>进入到<a href="https://new.mohistmc.com/downloadSoftware?project=mohist&projectVersion=1.20.1">1.20.1下载页</a>后，选择第一个进行下载</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/game/minecraft-mohist/image-20240124160826906.png" alt="image-20240124160826906"></p><p>将<code>mohist-1.20.1-521-server.jar</code>上传到服务器的一个空目录里，我这里是<code>/home/game/Minecraft/minecraft-test</code>，然后运行以下指令开服：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入到核心目录</span></span><br><span class="line"><span class="built_in">cd</span> /home/game/Minecraft/minecraft-test</span><br><span class="line"><span class="comment"># 开启服务</span></span><br><span class="line">java -Xmx2048M -Xms1024M -jar mohist-1.20.1-521-server.jar nogui</span><br></pre></td></tr></table></figure><p>等待同意协议的提示<code>You need to accept the eula to launch your server. Type true to continue.</code>，然后在终端输入<code>true</code>回车，会创建一个随机世界。</p><p>至此混合服已搭建完毕！</p><h2 id="维护"><a href="#维护" class="headerlink" title="维护"></a>维护</h2><h3 id="开服文件"><a href="#开服文件" class="headerlink" title="开服文件"></a>开服文件</h3><p><code>server.properties</code>，以下只对部分参数进行解释，详细见<a href="https://zh.minecraft.wiki/w/Server.properties">Minecraft Wiki</a>。</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 世界难度[easy|hard|normal|peaceful]</span></span><br><span class="line"><span class="attr">difficulty</span>=<span class="string">hard</span></span><br><span class="line"><span class="comment"># 强制执行白名单</span></span><br><span class="line"><span class="attr">enforce-whitelist</span>=<span class="string">false</span></span><br><span class="line"><span class="comment"># 游戏模式(adventure|creative|spectator|survival)</span></span><br><span class="line"><span class="attr">gamemode</span>=<span class="string">survival</span></span><br><span class="line"><span class="comment"># 存档文件夹名</span></span><br><span class="line"><span class="attr">level-name</span>=<span class="string">world</span></span><br><span class="line"><span class="comment"># 世界种子（混合开服默认创建一个随机世界，需要指定种子，在这里填写后重启核心）</span></span><br><span class="line"><span class="attr">level-seed</span>=<span class="string">735892006</span></span><br><span class="line"><span class="comment"># 最大玩家数</span></span><br><span class="line"><span class="attr">max-players</span>=<span class="string">8</span></span><br><span class="line"><span class="comment"># 服务器描述（mohist混合服无效，需修改mohist-config/mohist.yml下的motd参数）</span></span><br><span class="line"><span class="attr">motd</span>=<span class="string">InsectMk&#x27;s Server</span></span><br><span class="line"><span class="comment"># 正版验证</span></span><br><span class="line"><span class="attr">online-mode</span>=<span class="string">false</span></span><br><span class="line"><span class="comment"># 友伤</span></span><br><span class="line"><span class="attr">pvp</span>=<span class="string">true</span></span><br><span class="line"><span class="comment"># 服务端口</span></span><br><span class="line"><span class="attr">server-port</span>=<span class="string">25565</span></span><br></pre></td></tr></table></figure><h3 id="后台挂起"><a href="#后台挂起" class="headerlink" title="后台挂起"></a>后台挂起</h3><p>可以<a href="/posts/eae9cf00/" title="使用screen后台运行">使用Screen</a>进行管理，用以下命令即可快速启动</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /home/game/Minecraft/minecraft-test/ &amp;&amp; \</span><br><span class="line">screen -S minecraft \</span><br><span class="line">java -Xmx2048M -Xms1024M \</span><br><span class="line">-jar mohist-1.20.1-521-server.jar nogui</span><br></pre></td></tr></table></figure><p>然后使用<code>ctrl</code>+<code>a</code>，再按<code>d</code>，即可挂起。</p><p>或者使用<a href="https://github.com/MCSManager/MCSManager/blob/master/README_CN.md">MCSManager</a>进行管理。</p><h3 id="文件解释"><a href="#文件解释" class="headerlink" title="文件解释"></a>文件解释</h3><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/game/minecraft-mohist/image-20240124162834742.png" alt="image-20240124162834742"></p><p><a href="https://wiki.mohistmc.com/#/">mohistmc文档</a>包含对mohist服务端文件的解释。</p><h3 id="模组下载"><a href="#模组下载" class="headerlink" title="模组下载"></a>模组下载</h3><p>将下载好的模组放到服务器的<code>mods</code>文件夹，重启服务器即可。</p><p>以下是部分找模组的网站：</p><ul><li><a href="https://www.mcmod.cn/download/">MC百科</a></li><li><a href="https://modrinth.com/mods">modrinth</a></li></ul><h3 id="插件下载"><a href="#插件下载" class="headerlink" title="插件下载"></a>插件下载</h3><p>将下载好的模放到服务器的<code>plugins</code>文件夹，重启服务器即可。</p><p>以下是部分找插件的网站：</p><ul><li><a href="https://www.spigotmc.org/search/?type=resource_update">spigotmc</a></li><li><a href="https://modrinth.com/plugins">modrinth</a></li></ul><h3 id="存档保存"><a href="#存档保存" class="headerlink" title="存档保存"></a>存档保存</h3><p>只需要保留<code>world</code>文件夹，以后需要换启动核心，替换world文件夹即可。</p><h3 id="更新核心"><a href="#更新核心" class="headerlink" title="更新核心"></a>更新核心</h3><p>Mohist会自动更新， 但是国内老是访问不了，所以可以到<a href="https://new.mohistmc.com/software/mohist">MohistMC混合服启动核心页</a>手动下载最新的核心启动文件。</p><p>将原来的旧版本的启动文件替换掉，但是有时候会出现一些问题，可能新版本的Mohist与旧版本的Mohist所需的<strong>游戏全局运行库</strong>文件不一样。</p><p>就会报错，这时候就需要将根目录下的<code>libraries</code>文件夹删除，让启动核心文件重新下载生成就行了。</p><h2 id="相关链接"><a href="#相关链接" class="headerlink" title="相关链接"></a>相关链接</h2><ul><li><a href="https://www.minecraftskins.com/">皮肤下载网站</a></li><li><a href="https://zh.minecraft.wiki/">中文文档</a></li><li><a href="https://www.minecraft.net/zh-hans">官网</a></li><li><a href="https://www.minecraft.net/en-us/download/server">最新官方启动核心</a></li><li><a href="https://cloud.chriskim.cn/s/louN?path=/">以往官方启动核心</a></li><li><a href="https://papermc.io/">paper插件服启动核心</a></li><li><a href="https://new.mohistmc.com/software/mohist">MohistMC混合服启动核心</a></li><li><a href="https://files.minecraftforge.net/net/minecraftforge/forge/">Forge模组服启动核心</a></li><li><a href="https://hmcl.huangyuhui.net/">HMCL第三方启动器</a></li><li><a href="https://www.curseforge.com/">curseforge社区</a></li></ul><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://blog.csdn.net/u012513463/article/details/135222470">Linux搭建我的世界Mohist1.20.2版服务器教程，MOD和插件服开服教程，MC开服教程</a></p><p><a href="https://zhuanlan.zhihu.com/p/592068847">我的世界(Minecraft)服务器添加MOD和插件的教程</a></p>]]></content>
      
      
      <categories>
          
          <category> 游戏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 我的世界 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>本地部署开源语言模型ChatGLM2-6b</title>
      <link href="/posts/6677227f/"/>
      <url>/posts/6677227f/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>最近要开始忙毕业设计了，毕业设计的选题为《智能问答机器人的设计与实现》。</p><p>本来打算用一个国内的大语言模型的API做个对话网站就行了，结果开题答辩的时候导师说太简单了，能不能自己训练模型。</p><p>作为软件工程摆烂人，表示有点儿难为我了，就打算使用别人训练好的模型，降低学习成本。</p><p>然后就找到了<code>ChatGLM</code>这个开源语言模型项目，本来想使用ChatGLM3的但是教程太少了，不敢踩坑，就选择了ChatGLM2。</p><p>本地部署ChatGLM需要较好的硬件配置，否则会很慢，以下是我的电脑配置：</p><table><thead><tr><th>部位</th><th>型号</th></tr></thead><tbody><tr><td>CPU</td><td>i3 12100F</td></tr><tr><td>GPU</td><td>RTX 2060 super</td></tr><tr><td>内存</td><td>2 * 8G 3200MHz</td></tr><tr><td>系统</td><td>Windows 11 专业工作站版</td></tr></tbody></table><p>之前在笔记本也部署成功了，只是响应很慢，大概1秒一个字，笔记本为<code>联想拯救者Y7000P2022 12700H+3050ti</code>。</p><h2 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h2><p><strong>安装conda</strong></p><p>用于Python环境管理，可以参考<a href="/posts/d2f4b39f/" title="Anaconda的安装与基本使用">Anaconda的安装与基本使用</a>。</p><p><strong>克隆项目</strong></p><p>可先到<a href="https://github.com/THUDM/ChatGLM2-6b">官方仓库</a>查看部署步骤。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 克隆项目仓库</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/THUDM/ChatGLM2-6B</span><br><span class="line"><span class="comment"># 进入到项目目录</span></span><br><span class="line"><span class="built_in">cd</span> ChatGLM2-6B</span><br></pre></td></tr></table></figure><p>我的项目路径为<code>D:/ChatGLM2-6B</code>。</p><p><strong>下载模型</strong></p><p>这里使用<a href="https://hf-mirror.com/">Huggingface 镜像站</a>下载模型，原仓库地址在<a href="https://huggingface.co/THUDM/chatglm2-6b">这里</a>。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://hf-mirror.com/THUDM/chatglm2-6b</span><br></pre></td></tr></table></figure><p>因为文件很大，克隆的时候很慢，请耐心等待克隆结束。</p><p>克隆完成后将整个仓库存放到项目目录下的<code>THUDM</code>目录，即我的<code>D:/ChatGLM2-6B/THUDM</code>目录，没有就自行创建。</p><p><strong>创建Python环境</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建一个指定路径为D:\ChatGLM2-6B\ENV的环境并且跳过同意选项的python3.8环境</span></span><br><span class="line">conda create -y -p D:\ChatGLM2-6B\ENV python=3.8</span><br><span class="line"><span class="comment"># 激活环境</span></span><br><span class="line">conda activate D:\ChatGLM2-6B\ENV</span><br><span class="line"><span class="comment"># 安装项目依赖库</span></span><br><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure><p><strong>安装CUDA</strong></p><p>在终端输入<code>nvidia-smi</code>查看所支持的最高CUDA版本，我这里是<code>CUDA Version: 12.3</code>。</p><p>到<a href="https://developer.nvidia.com/cuda-toolkit-archive">NVIDIA.DEVELOP</a>下载CUDA，我这里下载<code>12.1.1</code>版本。</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/chatglm2-6b/image-20240125152244809.png" alt="image-20240125152244809"></p><p>下载完成后进行安装，安装完成后再到<a href="https://pytorch.org/">PyTorch官网</a>，查看对应的PyTorch包安装指令。</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/chatglm2-6b/image-20240125152601337.png" alt="image-20240125152601337"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装PyTorch包（PyTorch官网复制）</span></span><br><span class="line">conda install pytorch torchvision torchaudio pytorch-cuda=12.1 -c pytorch -c nvidia</span><br></pre></td></tr></table></figure><p>安装途中需要键入<code>y</code>确认，安装完成后显示<code>done</code>则表示安装成功。</p><h2 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h2><h3 id="修改配置"><a href="#修改配置" class="headerlink" title="修改配置"></a>修改配置</h3><p>因为Windows和Linux表示路径的符号不一样，Windows为<code>\</code>，Linux为<code>/</code>，如果直接启动会出现未找到模型的问题。</p><ul><li><p>web_demo.py</p><p>修改所有的<code>THUDM/chatglm2-6b</code>为<code>THUDM\chatglm2-6b</code>。</p><p>由于<code>gradio</code>版本的更新，还需要修改以下内容。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 修改前</span></span><br><span class="line">user_input = gr.Textbox(show_label=<span class="literal">False</span>, placeholder=<span class="string">&quot;Input...&quot;</span>, lines=<span class="number">10</span>).style(</span><br><span class="line">                    container=<span class="literal">False</span>)</span><br><span class="line"><span class="comment"># 修改后</span></span><br><span class="line">user_input = gr.Textbox(show_label=<span class="literal">False</span>, placeholder=<span class="string">&quot;Input...&quot;</span>, lines=<span class="number">10</span>, container=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure></li><li><p>web_demo2.py</p><p>修改所有的<code>THUDM/chatglm2-6b</code>为<code>THUDM\chatglm2-6b</code></p></li><li><p>cli_demo.py</p><p>修改所有的<code>THUDM/chatglm2-6b</code>为<code>THUDM\chatglm2-6b</code></p></li></ul><h3 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h3><p>在运行前需要更新一些东西</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 更新charset_normalizer依赖库</span></span><br><span class="line">pip install --upgrade charset_normalizer</span><br><span class="line"><span class="comment"># 安装CLI所用到的charset_normalizer依赖库</span></span><br><span class="line">pip install pyreadline</span><br></pre></td></tr></table></figure><p>项目有多种运行方法，分为Web、终端、API，有两种方式</p><h4 id="Web方式1"><a href="#Web方式1" class="headerlink" title="Web方式1"></a>Web方式1</h4><blockquote><p><strong>此方式有些问题</strong></p><p>前端控制台报错，且对话结果不显示</p><p>可以在<a href="https://github.com/THUDM/ChatGLM-6B/issues/1417">lssues</a>蹲解决方案。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入到项目目录</span></span><br><span class="line"><span class="built_in">cd</span> D:\ChatGLM2-6B</span><br><span class="line"><span class="comment"># 激活环境</span></span><br><span class="line">conda activate D:\ChatGLM2-6B\ENV</span><br><span class="line"><span class="comment"># 运行</span></span><br><span class="line">python web_demo.py</span><br></pre></td></tr></table></figure></blockquote><h4 id="Web方式2"><a href="#Web方式2" class="headerlink" title="Web方式2"></a>Web方式2</h4><blockquote><p><strong>官方推荐</strong>，速度比Web方式1要快</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入到项目目录</span></span><br><span class="line"><span class="built_in">cd</span> D:\ChatGLM2-6B</span><br><span class="line"><span class="comment"># 激活环境</span></span><br><span class="line">conda activate D:\ChatGLM2-6B\ENV</span><br><span class="line"><span class="comment"># 运行（出现邮箱提示直接回车即可）</span></span><br><span class="line">streamlit run web_demo2.py</span><br></pre></td></tr></table></figure><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/chatglm2-6b/image-20240125160229241.png" alt="web_demo2"></p></blockquote><h4 id="终端方式"><a href="#终端方式" class="headerlink" title="终端方式"></a>终端方式</h4><blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入到项目目录</span></span><br><span class="line"><span class="built_in">cd</span> D:\ChatGLM2-6B</span><br><span class="line"><span class="comment"># 激活环境</span></span><br><span class="line">conda activate D:\ChatGLM2-6B\ENV</span><br><span class="line"><span class="comment"># 运行</span></span><br><span class="line">python cli_demo.py</span><br></pre></td></tr></table></figure><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/chatglm2-6b/image-20240125171550865.png" alt="cli_demo"></p></blockquote><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://github.com/THUDM/ChatGLM2-6b">官方仓库</a></p><p><a href="https://openai.wiki/chatglm2-6b.html">ChatGLM2-6B｜开源本地化语言模型</a></p><p><a href="https://openai.wiki/pytorch-install.html">PyTorch｜安装教程</a></p><p><a href="https://zhuanlan.zhihu.com/p/644406848">什么是temperature、top_p？ChatGPT 中 随机性控制概念解读：理解如何控制模型回应的随机性</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 毕业设计 </tag>
            
            <tag> ChatGLM </tag>
            
            <tag> 搭建 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用Docker部署Waline评论服务端</title>
      <link href="/posts/3459702e/"/>
      <url>/posts/3459702e/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>最近在浏览自己博客的时候发现一些问题。</p><p>博客的Waline评论系统服务端是托管在<a href="https://vercel.com/">vercel平台</a>的，因为是国外网站，所以访问会比较慢。</p><p>但是最近发现有时候还会出现访问不了的情况，这让我很头痛，所以打算自己本地部署Waline服务端。</p><p>如需使用Docker部署Waline评论服务端，请提前做好以下准备：</p><ul><li><a href="https://waline.js.org/guide/get-started/">LeanCloud 设置 (数据库)</a></li><li><a href="/posts/f5f9fa9b/" title="Docker">Docker的安装</a></li></ul><h2 id="启动容器"><a href="#启动容器" class="headerlink" title="启动容器"></a>启动容器</h2><p>使用以下命令启动容器，记得开放<strong>8360端口</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> docker run -d \</span><br><span class="line">  -e LEAN_ID=xxx \</span><br><span class="line">  -e LEAN_KEY=xxx \</span><br><span class="line">  -e LEAN_MASTER_KEY=xxx \</span><br><span class="line">  -e LEAN_SERVER=xxx \</span><br><span class="line">  -p 8360:8360 \</span><br><span class="line">  --restart=always \</span><br><span class="line">  --name waline-server \</span><br><span class="line">  lizheming/waline</span><br></pre></td></tr></table></figure><p><strong>参数解释</strong></p><table><thead><tr><th align="left">参数</th><th>解释</th></tr></thead><tbody><tr><td align="left">-e LEAN_ID&#x3D;xxx</td><td>LeanCloud的APP ID</td></tr><tr><td align="left">-e LEAN_KEY&#x3D;xxx</td><td>LeanCloud的APP KEY</td></tr><tr><td align="left">-e LEAN_MASTER_KEY&#x3D;xxx</td><td>LeanCloud的Master Key</td></tr><tr><td align="left">-e LEAN_SERVER&#x3D;xxx</td><td>如果LeanCloud为国内版，需要加上绑定LeanCloud的域名</td></tr><tr><td align="left">-p 8360:8360</td><td>映射8360端口</td></tr><tr><td align="left">–restart&#x3D;always</td><td>系统重启时容器也启动</td></tr><tr><td align="left">–name waline-server</td><td>容器名</td></tr></tbody></table><h2 id="配置SSL"><a href="#配置SSL" class="headerlink" title="配置SSL"></a>配置SSL</h2><p>如需使用<strong>HTTPS</strong>访问，则需配置SSL，使用Nginx配置SSL。</p><p>首先需要下载证书，得到<code>.pem</code>与<code>.key</code>文件，在Nginx配置文件中添加如下配置：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen  80;</span><br><span class="line">    listen 443 ssl http2;</span><br><span class="line">    # 域名</span><br><span class="line">    server_name waline-server.insectmk.cn;</span><br><span class="line">    if ($server_port !~ 443)&#123;</span><br><span class="line">      rewrite ^(/.*)$ https://$host$1 permanent;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    # ssl证书的pem文件路径</span><br><span class="line">    ssl_certificate  /root/Token/SSL/waline-server.insectmk.cn_nginx/waline-server.insectmk.cn_bundle.pem;</span><br><span class="line">    # ssl证书的key文件路径</span><br><span class="line">    ssl_certificate_key /root/Token/SSL/waline-server.insectmk.cn_nginx/waline-server.insectmk.cn.key;</span><br><span class="line">    ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3;</span><br><span class="line">    ssl_ciphers EECDH+CHACHA20:EECDH+CHACHA20-draft:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5;</span><br><span class="line">    ssl_prefer_server_ciphers on;</span><br><span class="line">    ssl_session_cache shared:SSL:10m;</span><br><span class="line">    ssl_session_timeout 10m;</span><br><span class="line">    add_header Strict-Transport-Security &quot;max-age=31536000&quot;;</span><br><span class="line">    </span><br><span class="line">    location / &#123;</span><br><span class="line">        proxy_pass  http://127.0.0.1:8360/;</span><br><span class="line">        index index.html index.htm;</span><br><span class="line">        proxy_set_header Host $host;</span><br><span class="line">        proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">        proxy_set_header X-Forwarded-Proto $scheme;</span><br><span class="line">        proxy_set_header REMOTE-HOST $remote_addr;</span><br><span class="line">        add_header X-Cache $upstream_cache_status;</span><br><span class="line">    &#125;</span><br><span class="line">    access_log /www/wwwlogs/nginx/product/ssl-waline-server.log;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>重载配置后就能使用HTTPS访问了。</p><h2 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h2><p>想要更新Docker版本的Waline服务端，只需要重新拉取镜像即可更新。</p><p>参考<a href="https://waline.js.org/advanced/faq.html#%E6%9C%8D%E5%8A%A1%E7%AB%AF">Waline官方文档</a>。</p><h2 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h2><p>参考<a href="https://waline.js.org/reference/server/env.html">服务端环境变量</a></p><h3 id="评论者等级"><a href="#评论者等级" class="headerlink" title="评论者等级"></a>评论者等级</h3><p>通过增加<code>LEVELS</code>环境变量增加评论者等级标签，变量值为一串给定的数的逗号拼接，可设置为<code>0,10,20,50,100,200</code>，即：</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">LEVELS</span>=<span class="string">0,10,20,50,100,200</span></span><br></pre></td></tr></table></figure><p> <code>0,10,20,50,100,200</code> 的含义如下：</p><table><thead><tr><th>等级</th><th>条件</th><th>默认等级标签</th></tr></thead><tbody><tr><td>0</td><td>0 &lt;&#x3D; count &lt; 10</td><td>潜水</td></tr><tr><td>1</td><td>10 &lt;&#x3D; count &lt; 20</td><td>冒泡</td></tr><tr><td>2</td><td>20 &lt;&#x3D; count &lt; 50</td><td>吐槽</td></tr><tr><td>3</td><td>50 &lt;&#x3D; count &lt; 100</td><td>活跃</td></tr><tr><td>4</td><td>100 &lt;&#x3D; count &lt; 200</td><td>话痨</td></tr><tr><td>5</td><td>200 &lt;&#x3D; count</td><td>传说</td></tr></tbody></table><h3 id="游客头像"><a href="#游客头像" class="headerlink" title="游客头像"></a>游客头像</h3><p>通过配置<code>GRAVATAR_STR</code>环境变量，默认参数<code>https://seccdn.libravatar.org/avatar/&#123;&#123;mail|md5&#125;&#125;</code>，即：</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">GRAVATAR_STR</span>=<span class="string">https://seccdn.libravatar.org/avatar/&#123;&#123;mail|md5&#125;&#125;</span></span><br></pre></td></tr></table></figure><p>游客需要到<a href="https://cn.gravatar.com/">Gravatar</a>注册并修改自己的头像，否则默认头像会很丑。</p><p>参考<a href="https://waline.netlify.app/client/avatar.html">头像配置|Waline</a></p><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a href="https://waline.js.org/guide/deploy/vps.html">Waline独立部署</a></p><p><a href="https://www.cnblogs.com/ambition26/p/14077773.html">Nginx配置Https（详细、完整）</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Waline </tag>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot配置JWT</title>
      <link href="/posts/89d6d146/"/>
      <url>/posts/89d6d146/</url>
      
        <content type="html"><![CDATA[<h2 id="案例代码"><a href="#案例代码" class="headerlink" title="案例代码"></a>案例代码</h2><p>导入<strong>JWT的Maven坐标</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--跨域身份验证解决⽅案 Json web token包--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.jsonwebtoken<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jjwt<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.7.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>创建JWTUtil工具包</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> top.marken.onlineclass.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.jsonwebtoken.Claims;</span><br><span class="line"><span class="keyword">import</span> io.jsonwebtoken.Jwts;</span><br><span class="line"><span class="keyword">import</span> io.jsonwebtoken.SignatureAlgorithm;</span><br><span class="line"><span class="keyword">import</span> top.marken.onlineclass.model.entity.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JWTUtil</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 主题，是由谁颁布的</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">SUBJECT</span> <span class="operator">=</span> <span class="string">&quot;online_class&quot;</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 过期时间，一周</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">EXPIRE</span> <span class="operator">=</span> <span class="number">60000</span> * <span class="number">60</span> * <span class="number">24</span> * <span class="number">7</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 加密密钥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">SECRET</span> <span class="operator">=</span> <span class="string">&quot;online_class&quot;</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 令牌前缀</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">TOKEN_PREFIX</span> <span class="operator">=</span> <span class="string">&quot;online_class&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 通过一个User对象生成一个JWT令牌</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> user</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">generateJWT</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> Jwts.builder()</span><br><span class="line">                <span class="comment">// 设置主题</span></span><br><span class="line">                .setSubject(SUBJECT)</span><br><span class="line">                <span class="comment">// 设置负载信息</span></span><br><span class="line">                .claim(<span class="string">&quot;head_img&quot;</span>,user.getHeadImg())</span><br><span class="line">                .claim(<span class="string">&quot;id&quot;</span>,user.getId())</span><br><span class="line">                .claim(<span class="string">&quot;name&quot;</span>,user.getName())</span><br><span class="line">                <span class="comment">// 设置发布时间</span></span><br><span class="line">                .setIssuedAt(<span class="keyword">new</span> <span class="title class_">Date</span>())</span><br><span class="line">                <span class="comment">// 设置过期时间</span></span><br><span class="line">                .setExpiration(<span class="keyword">new</span> <span class="title class_">Date</span>(System.currentTimeMillis() + EXPIRE))</span><br><span class="line">                <span class="comment">// 设置加密规则和密钥</span></span><br><span class="line">                .signWith(SignatureAlgorithm.HS256,SECRET)</span><br><span class="line">                <span class="comment">// 生成令牌</span></span><br><span class="line">                .compact();</span><br><span class="line">        <span class="comment">// 给令牌加上前缀（更安全）</span></span><br><span class="line">        token = TOKEN_PREFIX + token;</span><br><span class="line">        <span class="keyword">return</span> token;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 校验token令牌是否合法</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> token</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Claims <span class="title function_">checkJWT</span><span class="params">(String token)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">             <span class="keyword">return</span> Jwts.parser()</span><br><span class="line">                     <span class="comment">// 填入密钥</span></span><br><span class="line">                    .setSigningKey(SECRET)</span><br><span class="line">                     <span class="comment">// 替换令牌前缀</span></span><br><span class="line">                    .parseClaimsJws(token.replace(TOKEN_PREFIX,<span class="string">&quot;&quot;</span>))</span><br><span class="line">                    <span class="comment">// 获取负载信息</span></span><br><span class="line">                    .getBody();</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 程序配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 毕业设计 </tag>
            
            <tag> SpringBoot </tag>
            
            <tag> JWT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue2导航守卫</title>
      <link href="/posts/2812ec90/"/>
      <url>/posts/2812ec90/</url>
      
        <content type="html"><![CDATA[<h2 id="案例代码"><a href="#案例代码" class="headerlink" title="案例代码"></a>案例代码</h2><p><strong>登录验证案例</strong></p><p><strong>main.js</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//路由拦截，拦截全部路由，每次操作路由都是被拦截进⾏判断</span></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> token = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;token&quot;</span>);</span><br><span class="line">  <span class="comment">//筛选需要传token的路由，匹配route⾥⾯需要登录的路径，如果匹配到就是true</span></span><br><span class="line">  <span class="keyword">if</span> (to.<span class="property">matched</span>.<span class="title function_">some</span>(<span class="function"><span class="params">record</span> =&gt;</span> record.<span class="property">meta</span>.<span class="property">requiresAuth</span>)) &#123;</span><br><span class="line">    <span class="comment">//根据token是否有，判断是否需要调到登录⻚⾯</span></span><br><span class="line">    <span class="keyword">if</span> (token) &#123;</span><br><span class="line">      <span class="title function_">next</span>()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="title function_">next</span>(&#123; <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span> &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_">next</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>router&#x2F;index.js</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;../views/Home/Home.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Login</span> <span class="keyword">from</span> <span class="string">&#x27;../views/Login/Login.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Order</span> <span class="keyword">from</span> <span class="string">&#x27;../views/Order/Order.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Pay</span> <span class="keyword">from</span> <span class="string">&#x27;../views/Pay/Pay.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Personal</span> <span class="keyword">from</span> <span class="string">&#x27;../views/Personal/Personal.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Register</span> <span class="keyword">from</span> <span class="string">&#x27;../views/Register/Register.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Home&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Home</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/coursedetail&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;CourseDetail&#x27;</span>,</span><br><span class="line">    <span class="comment">// 按需加载</span></span><br><span class="line">    <span class="attr">component</span>: <span class="function">()=&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/CourseDetail/CourseDetail.vue&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Login&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Login</span> </span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/order&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Order&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Order</span>,</span><br><span class="line">    <span class="attr">meta</span>: &#123;</span><br><span class="line">      <span class="attr">requiresAuth</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/pay&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Pay&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Pay</span>,</span><br><span class="line">    <span class="attr">meta</span>: &#123;</span><br><span class="line">      <span class="attr">requiresAuth</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/personal&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Personal&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Personal</span>,</span><br><span class="line">    <span class="attr">meta</span>: &#123;</span><br><span class="line">      <span class="attr">requiresAuth</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/register&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Register&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Register</span> </span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  routes</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure><p><strong>views&#x2F;Login&#x2F;Login.vue</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;main&quot;&gt;</span><br><span class="line">        &lt;cube-form :model=&quot;model&quot; @submit=&quot;submitHandler&quot;&gt;</span><br><span class="line">            &lt;cube-form-group&gt;</span><br><span class="line">                &lt;!--⼿机号--&gt;</span><br><span class="line">                &lt;cube-form-item :field=&quot;fields[0]&quot;&gt;&lt;/cube-form-item&gt;</span><br><span class="line">                &lt;!--密码--&gt;</span><br><span class="line">                &lt;cube-form-item :field=&quot;fields[1]&quot;&gt;&lt;/cube-form-item&gt;</span><br><span class="line">            &lt;/cube-form-group&gt;</span><br><span class="line">            &lt;cube-form-group&gt;</span><br><span class="line">                &lt;cube-button type=&quot;submit&quot;&gt;登录&lt;/cube-button&gt;</span><br><span class="line">            &lt;/cube-form-group&gt;</span><br><span class="line">        &lt;/cube-form&gt;</span><br><span class="line">        &lt;router-link to=&quot;/register&quot; class=&quot;reg&quot;&gt;注册&lt;/router-link&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// 登录接口</span><br><span class="line">import &#123;userLogin&#125; from &#x27;@/api/getData.js&#x27;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">    data:()=&gt; &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            model: &#123;</span><br><span class="line">                phoneValue:&#x27;&#x27;,</span><br><span class="line">                pwdValue:&#x27;&#x27;,</span><br><span class="line">            &#125;,</span><br><span class="line">            fields: [</span><br><span class="line">                &#123;</span><br><span class="line">                    type: &#x27;input&#x27;,</span><br><span class="line">                    modelKey: &#x27;phoneValue&#x27;,</span><br><span class="line">                    label: &#x27;手机号&#x27;,</span><br><span class="line">                    props: &#123;</span><br><span class="line">                        placeholder: &#x27;请输入手机&#x27;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    rules: &#123;</span><br><span class="line">                        required: true</span><br><span class="line">                    &#125;,</span><br><span class="line">                    messages: &#123;</span><br><span class="line">                        required: &#x27;手机号不能为空&#x27;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    type: &#x27;input&#x27;,</span><br><span class="line">                    modelKey: &#x27;pwdValue&#x27;,</span><br><span class="line">                    label: &#x27;密码&#x27;,</span><br><span class="line">                    props: &#123;</span><br><span class="line">                        placeholder: &#x27;请输入密码&#x27;,</span><br><span class="line">                        type: &#x27;password&#x27;,</span><br><span class="line">                        eye: &#123;</span><br><span class="line">                            open: false</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    rules: &#123;</span><br><span class="line">                        required: true</span><br><span class="line">                    &#125;,</span><br><span class="line">                    messages: &#123;</span><br><span class="line">                        required: &#x27;密码不能为空&#x27;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        submitHandler(e, model) &#123;</span><br><span class="line">            e.preventDefault();</span><br><span class="line">            //调⽤注册接⼝</span><br><span class="line">            userLogin(model.phoneValue,model.pwdValue)</span><br><span class="line">            .then((res) =&gt; &#123;</span><br><span class="line">                if (res.data.code === 0) &#123;</span><br><span class="line">                    localStorage.setItem(&#x27;token&#x27;,res.data.data)</span><br><span class="line">                    </span><br><span class="line">                    this.$store.dispatch(&#x27;setToken&#x27;, res.data.data)</span><br><span class="line"></span><br><span class="line">                    // 跳转到主页</span><br><span class="line">                    this.$router.push(&#123;path:&#x27;/&#x27;&#125;)</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    const toast = this.$createToast(&#123;</span><br><span class="line">                    txt: &quot;登录失败&quot;,</span><br><span class="line">                    type: &quot;error&quot;,</span><br><span class="line">                    time: 1500</span><br><span class="line">                    &#125;);</span><br><span class="line">                    toast.show();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">.main &#123;</span><br><span class="line">    padding: 50px 5% 0;</span><br><span class="line">    text-align: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//注册</span><br><span class="line">.cube-btn &#123;</span><br><span class="line">    margin-top: 20px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 登录</span><br><span class="line">.reg &#123;</span><br><span class="line">    display: inline-block;</span><br><span class="line">    margin-top: 30px;</span><br><span class="line">    font-size: 18px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://router.vuejs.org/zh/guide/advanced/navigation-guards.html">导航守卫</a></p>]]></content>
      
      
      <categories>
          
          <category> 程序配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue2使用路由</title>
      <link href="/posts/444569cc/"/>
      <url>/posts/444569cc/</url>
      
        <content type="html"><![CDATA[<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><strong>router&#x2F;index.js</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">HomeView</span> <span class="keyword">from</span> <span class="string">&#x27;../views/HomeView.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;home&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">HomeView</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;about&#x27;</span>,</span><br><span class="line">    <span class="comment">// route level code-splitting</span></span><br><span class="line">    <span class="comment">// this generates a separate chunk (about.[hash].js) for this route</span></span><br><span class="line">    <span class="comment">// which is lazy-loaded when the route is visited.</span></span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="comment">/* webpackChunkName: &quot;about&quot; */</span> <span class="string">&#x27;../views/AboutView.vue&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;history&#x27;</span>,</span><br><span class="line">  <span class="attr">base</span>: process.<span class="property">env</span>.<span class="property">BASE_URL</span>,</span><br><span class="line">  routes</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>main.js</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  router,</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>)</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><p><strong>使用</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;nav&gt;</span><br><span class="line">      &lt;router-link to=&quot;/&quot;&gt;Home&lt;/router-link&gt; |</span><br><span class="line">      &lt;router-link to=&quot;/about&quot;&gt;About&lt;/router-link&gt;</span><br><span class="line">    &lt;/nav&gt;</span><br><span class="line">    &lt;router-view/&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://router.vuejs.org/zh/">Vue.js 的官方路由</a></p>]]></content>
      
      
      <categories>
          
          <category> 程序配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot解决跨域问题</title>
      <link href="/posts/f0af8afd/"/>
      <url>/posts/f0af8afd/</url>
      
        <content type="html"><![CDATA[<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p>首先创建跨域拦截器</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> top.marken.onlineclass.interceptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.http.HttpMethod;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CrossInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//表示接受任意域名的请求,也可以指定域名</span></span><br><span class="line">        response.setHeader(<span class="string">&quot;Access-Control-Allow-Origin&quot;</span>, request.getHeader(<span class="string">&quot;origin&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//该字段可选，是个布尔值，表示是否可以携带cookie</span></span><br><span class="line">        response.setHeader(<span class="string">&quot;Access-Control-Allow-Credentials&quot;</span>, <span class="string">&quot;true&quot;</span>);</span><br><span class="line">        response.setHeader(<span class="string">&quot;Access-Control-Allow-Methods&quot;</span>, <span class="string">&quot;GET, HEAD, POST, PUT,PATCH, DELETE, OPTIONS&quot;</span>);</span><br><span class="line">        response.setHeader(<span class="string">&quot;Access-Control-Allow-Headers&quot;</span>, <span class="string">&quot;*&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (HttpMethod.OPTIONS.toString().equals(request.getMethod())) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        HandlerInterceptor.<span class="built_in">super</span>.postHandle(request, response, handler, modelAndView);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        HandlerInterceptor.<span class="built_in">super</span>.afterCompletion(request, response, handler, ex);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>然后将拦截器注入到容器中并配置拦截规则</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.edu.cdtu.contactmanagement.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.edu.cdtu.contactmanagement.intercept.CrossInterceptor;</span><br><span class="line"><span class="keyword">import</span> cn.edu.cdtu.contactmanagement.intercept.LoginInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.InterceptorRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InterceptorConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 向容器中添加跨域验证拦截器</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> CrossInterceptor <span class="title function_">crossInterceptor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">CrossInterceptor</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 拦截规则</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> registry</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">        registry.addInterceptor(crossInterceptor())</span><br><span class="line">                .addPathPatterns(<span class="string">&quot;/**&quot;</span>);</span><br><span class="line">        WebMvcConfigurer.<span class="built_in">super</span>.addInterceptors(registry);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 程序配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>版本控制工具Git</title>
      <link href="/posts/ece40106/"/>
      <url>/posts/ece40106/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>平时在开发的过程中，代码在不断的更新中会出现各种各样的问题，但是进行排查的时候已经回忆不起以前到底操作了什么，只能够全部排查，这样会特别头痛。</p><p>或者是每次代码的更新到底更新了什么，如果让我们用脑子去记或者是专门写个文档来记录，那也太麻烦了，所以我们得引入我们的版本控制工具，别人已经帮我们解决这类问题了。</p><p>版本控制工具有很多，我这里只用过Git，那是相当好用呀，做了什么修改，提交了什么内容，一目了然，出现问题也方便回溯。</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>到<a href="https://git-scm.com/downloads">官网下载地址</a>进行下载。</p><p>如果安装也有对应的<a href="https://git-scm.com/book/zh/v2/%E8%B5%B7%E6%AD%A5-%E5%AE%89%E8%A3%85-Git">官方安装文档</a>。</p><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>我们可以使用第三方的远程仓库，例如：<a href="https://github.com/">GitHub</a>、<a href="https://gitee.com/">Gitee</a></p><p><strong>常用命令</strong></p><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>git clone &lt;仓库地址&gt;</td><td>克隆一个仓库到当前目录</td></tr><tr><td>git add *</td><td>跟踪所有文件</td></tr><tr><td>git commit -m “&lt;提交消息&gt;”</td><td>提交所有跟踪文件的变化信息</td></tr><tr><td>git push</td><td>将本地仓库的信息提交到远程仓库</td></tr><tr><td>git pull</td><td>将远程仓库的信息更新到本地仓库</td></tr></tbody></table><h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><p>不懂Git，在使用时常常会出现一些难以理解的问题，这里会记录常见的问题以及解决方法。</p><h3 id="忽略文件"><a href="#忽略文件" class="headerlink" title="忽略文件"></a>忽略文件</h3><p>在修改忽略文件时，那些已经被跟踪的文件不会被忽略掉，这样让我很头痛。</p><p>在网上找到的文章能够让忽略文件立即生效，运行以下代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 清除 Git 缓存中的所有文件，以确保 Git 会重新读取 .gitignore 文件</span></span><br><span class="line"><span class="comment"># 这个命令会将 Git 缓存中的所有文件标记为需要删除。</span></span><br><span class="line">git <span class="built_in">rm</span> -r --cached .</span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行以下命令，将未被 Git 跟踪的文件添加回到 Git 仓库中：</span></span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行以下命令，提交更改</span></span><br><span class="line">git commit -m <span class="string">&quot;Update .gitignore&quot;</span></span><br></pre></td></tr></table></figure><h3 id="提交信息"><a href="#提交信息" class="headerlink" title="提交信息"></a>提交信息</h3><p>使用<code>git commit --amend</code>命令能够编辑最近一次的提交信息，编辑好后使用<code>git push</code>即可提交到远程仓库。</p><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a href="https://juejin.cn/post/7224696614458523709">更改.gitignore文件并立刻生效</a></p><p><a href="https://blog.csdn.net/qq_17011423/article/details/104648075">git修改历史提交(commit)信息（超详细，图文并茂）</a></p>]]></content>
      
      
      <categories>
          
          <category> 知识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用Vue脚手架快速创建项目</title>
      <link href="/posts/bb9cf702/"/>
      <url>/posts/bb9cf702/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>最近在学校老师的带领下，开发一个练手项目，叫做<a href="https://gitee.com/makuning/itheima-health">传智健康</a>。</p><p>这是一个单体项目，后端还是比较常规，前端使用的是Vue+Element，但是并未使用组件化。</p><p>再加上没有使用前端工程化，前端的代码显得非常杂乱，难以维护，所以想对其进行修改，打算将其修改为前后分离的项目。</p><p>之前没有接触过前端开发，所以从最简单的搭建脚手架开始吧~</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>因为要使用前端工程化，所以必须要用到Node来构建我们的工程化项目。</p><p>你可以选择去<a href="https://nodejs.cn/download/">官网下载</a>单体的Node。</p><p>也可以选择下载NVM，NVM的下载可以参考站内文章：<a href="/posts/4135d62/" title="安装Node版本管理工具">安装Node版本管理工具</a>。</p><p>安装好Node后，就可以安装我们的<strong>Vue脚手架</strong>了，在终端执行<code>npm install -g @vue/cli</code>以安装<strong>Vue脚手架</strong></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/node-vue2/image-20231001173752834.png" alt="image-20231001173752834"></p><p>程序员金句：<strong>警告不是错</strong>。</p><p>执行完成后，会出现<code>added xxx packages in xxm</code>，就安装成功啦。</p><h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2><p>进入终端，并切换到你项目想存放的目录后键入<code>vue create &lt;项目名称&gt; </code>以开始创建。</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/node-vue2/image-20231001175247117.png" alt="image-20231001175247117"></p><p>可以看到默认给了我们三种方案：</p><ol><li>快速创建Vue3：带babel与eslint</li><li>快速创建Vue2：带babel与eslint</li><li>手动创建</li></ol><p><strong>这里演示手动安装</strong></p><p>使用方向键选择<code>Manually select features</code>选项，使用<code>空格键</code>选中（基于我的认知，选择了如下内容）：</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/node-vue2/image-20231001181417402.png" alt="image-20231001181417402"></p><p>选项解释如下：</p><table><thead><tr><th>选项</th><th>说明</th></tr></thead><tbody><tr><td>Babel</td><td>使用Babel可以将新的JavaScript语法转换为浏览器可以理解的旧版本语法，以兼容性更好地支持不同浏览器。</td></tr><tr><td>TypeScript</td><td>选择此选项可以使用TypeScript来编写你的Vue应用程序，它是一种类型安全的JavaScript超集。</td></tr><tr><td>Progressive Web App (PWA) Support</td><td>选择此选项会为你的应用程序添加Progressive Web App支持，使你的应用可以像本地应用一样运行。</td></tr><tr><td>Router</td><td>选择此选项将自动安装和配置Vue Router，它是Vue的官方路由器，用于管理应用程序的不同页面之间的导航。</td></tr><tr><td>Vuex</td><td>选择此选项将自动安装和配置Vuex，它是Vue的官方状态管理库，用于在应用程序中管理全局状态。</td></tr><tr><td>CSS Pre-processors</td><td>选择此选项可以选择使用哪种CSS预处理器，例如Sass、Less或Stylus，以增强你的样式表编写体验。</td></tr><tr><td>Linter &#x2F; Formatter</td><td>选择此选项将添加代码质量和风格检查工具，例如ESLint，并自动格式化你的代码。</td></tr><tr><td>Unit Testing</td><td>选择此选项将添加单元测试的支持，你可以使用工具如Jest或Mocha来编写和运行测试。</td></tr><tr><td>E2E Testing</td><td>选择此选项将添加端到端测试的支持，你可以使用工具如Cypress或Puppeteer来模拟用户操作并进行应用的整体测试。</td></tr></tbody></table><p>回车后选择<code>vue2.x</code>版本：</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/node-vue2/image-20231001181504821.png" alt="image-20231001181504821"></p><p>选择后会根据之前的选项配置各个选项，按需配置就行，也可以一直回车，构建完成后出现以下内容：</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/node-vue2/image-20231001181818370.png" alt="image-20231001181818370"></p><p>进入项目目录<code>cd &lt;项目目录&gt;</code>，执行<code>npm run serve</code>，跑起来后访问<code>http://localhost:8080/</code>就可以看到已经搭建成功啦~</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/node-vue2/image-20231001182129068.png" alt="image-20231001182129068"></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/node-vue2/image-20231001182227740.png" alt="image-20231001182227740"></p><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://zhuanlan.zhihu.com/p/628439854">手动搭建一个完整的vue2项目（超详细_完整步骤）</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue2 </tag>
            
            <tag> Node </tag>
            
            <tag> NPM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>安装Node版本管理工具</title>
      <link href="/posts/4135d62/"/>
      <url>/posts/4135d62/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在使用Node时，经常会遇到版本不匹配的问题。</p><p>平时会去下载一些别人的Node项目，但是这些优秀的项目使用的Node版本经常是不兼容的。</p><p>但是电脑的环境变量只能配置一个Node版本，如果每次使用不同的版本就指定Node目录或者重新配置新的环境变量，这样是特别麻烦的。</p><p>所以这时候我们就需要使用一个Node版本管理工具，推荐使用NVM，这是Github上面的一个开源项目，目前已经有70k+的star了。</p><p><a href="https://github.com/nvm-sh/nvm">NVM Github仓库地址</a>，NVM支持很多平台，这里就演示Windows平台下的安装。</p><h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p>Windows的NVM单独创建了一个仓库，<a href="https://github.com/coreybutler/nvm-windows">仓库地址</a>。</p><p>我们到<a href="https://github.com/coreybutler/nvm-windows/releases">MVN Windows版的发行版页面</a>进行下载，下载<strong>noinstall</strong>版本即可，本次教程为目前最新版本<code>1.1.11</code></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/node-nvm/image-20231001141300900.png" alt="image-20231001141300900"></p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>下载完成后将压缩包解压。</p><p>接下来就是比较重要的配置了，首先需要创建环境变量：</p><p>其中<strong>NVM_HOME</strong>是解压后的文件夹中<code>nvm.exe</code>可执行文件的全路径。</p><p><strong>NVM_SYMLINK</strong>就像是你Node的家目录。</p><table><thead><tr><th>变量名</th><th>变量值</th></tr></thead><tbody><tr><td>NVM_HOME</td><td>E:\download\compressed\nvm-noinstall\nvm</td></tr><tr><td>NVM_SYMLINK</td><td>E:\software-for-support\nvm-nodejs</td></tr></tbody></table><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/node-nvm/image-20231001142620518.png" alt="image-20231001142620518"></p><p>然后再在<strong>Path</strong>环境变量中引入这两个环境变量：</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/node-nvm/image-20231001142754259.png" alt="image-20231001142754259"></p><p>最后在NVM的根目录，即本文中的<code>E:\download\compressed\nvm-noinstall</code>目录下创建<code>settings.txt</code>文件，写入以下内容：</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root: E:<span class="keyword">\download</span><span class="keyword">\compressed</span><span class="keyword">\nvm</span>-noinstall</span><br><span class="line">path: E:<span class="keyword">\software</span>-for-support<span class="keyword">\nvm</span>-nodejs</span><br></pre></td></tr></table></figure><p>其中<strong>root</strong>表示你下载的不同的版本的Node会放在哪里，<strong>path</strong>表示当前选择的Node版本是放在哪个路径。</p><p>当你切换Node版本时，NVM会从指定的<strong>root</strong>的路径中去寻找对应版本的Node，然后覆盖到指定的<strong>path</strong>路径中。</p><p>这也就意味着如果你想要在任意工作目录访问Node，那么你配置的<strong>NVM_SYMLINK</strong>环境便令就必须跟这里指定的<strong>path</strong>的值一样。</p><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>完成上面两节的步骤后，就已经安装完成了。</p><p>这里我们就需要打开终端输入<code>nvm --version</code>验证一下是否安装成功，成功打印版本号即表示安装成功。</p><p>以下列出自己常用的命令：</p><table><thead><tr><th>命令</th><th>解释</th></tr></thead><tbody><tr><td>nvm</td><td>查看指令说明</td></tr><tr><td>nvm install <version></td><td>安装指定版本Node</td></tr><tr><td>nvm uninstall <version></td><td>卸载指定版本Node</td></tr><tr><td>nvm use <version></td><td>使用指定版本的Node</td></tr><tr><td>nvm list</td><td>查看本机安装了哪些版本的Node以及正在使用的Node</td></tr></tbody></table><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://www.cnblogs.com/Jamie1032797633/p/9855647.html">绿色版NVM安装与配置详细说明</a></p>]]></content>
      
      
      <categories>
          
          <category> 软件配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Node </tag>
            
            <tag> NVM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在Java项目中使用阿里云OSS</title>
      <link href="/posts/2fa6999c/"/>
      <url>/posts/2fa6999c/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>很多时候我们需要将项目部署到远程服务器上供别人使用，项目中难免会需要存放一些静态文件，例如Excel表格模板、Word文档模板、图片、视频之类的。</p><p>但是像图片、视频这种资源往往都是很大的，在网络上传输特别吃带宽，便宜的服务器一般都是5Mbps，传个图片都要转很久。</p><p>这时候就需要我们的静态文件托管平台来帮我们管理了。</p><p>平台有很多，常用的有<a href="https://cloud.tencent.com/product/cos">腾讯云对象存储COS</a>、<a href="https://www.aliyun.com/product/oss">阿里云对象存储OSS</a>、<a href="https://www.qiniu.com/products/kodo">七牛云对象存储Kodo</a>，这里将会演<strong>阿里云OSS</strong>在<strong>SpringBoot</strong>项目中的使用（个人理解）。</p><h2 id="创建存储桶"><a href="#创建存储桶" class="headerlink" title="创建存储桶"></a>创建存储桶</h2><p>进入<a href="https://oss.console.aliyun.com/bucket">阿里云对象存储OSS控制台</a>,点击<code>创建Bucket</code>，选择低频访问（适用于自己玩儿的项目，详见<a href="https://help.aliyun.com/zh/oss/user-guide/overview-53%EF%BC%89">官方文档</a>),如果想要URL干净一些，可以把公共读勾选上，然后确定创建。</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure/oss-java/image-20230928155906543.png" alt="image-20230928155906543"></p><h2 id="创建RAM用户"><a href="#创建RAM用户" class="headerlink" title="创建RAM用户"></a>创建RAM用户</h2><p>如果直接使用你的阿里云账号的令牌来访问的话，如果令牌泄露问题会特别大，就像root账号被泄露一样。</p><p>所以为存储桶创建新的用户，为了方便管理资源的权限。</p><p>进入<a href="https://ram.console.aliyun.com/overview">阿里云RAM访问控制</a>，可以在页面添加用户，再添加用户组，然后将用户加入到用户组中，再给用户组分配权限。</p><p>我这里只创建用户，然后直接给用户权限。</p><p>勾选OpenAPI调用访问</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure/oss-java/image-20230928161043856.png" alt="image-20230928161043856"></p><p>创建完成后会有<code>ID</code>与<code>KEY</code>生成，<strong>一定要复制好</strong>。</p><p>然后给这个用户分配权限，点击<code>添加权限</code>，指定资源组、选择OSS权限，点击确定。</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure/oss-java/image-20230928161505320.png" alt="image-20230928161505320"></p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p>首先导入OSS的Maven坐标</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span><span class="comment">&lt;!-- 阿里云OSS依赖 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun.oss<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-sdk-oss<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.15.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在<code>application.yml</code>中加入阿里云OSS相关配置：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 阿里云OSS相关配置</span></span><br><span class="line"><span class="attr">aliyun:</span></span><br><span class="line">  <span class="attr">oss:</span></span><br><span class="line">    <span class="attr">endpoint:</span> <span class="string">&#x27;https://oss-cn-chengdu.aliyuncs.com&#x27;</span></span><br><span class="line">    <span class="attr">access-key-id:</span> <span class="string">&#x27;xxxxx&#x27;</span></span><br><span class="line">    <span class="attr">access-key-secret:</span> <span class="string">&#x27;xxxxxx&#x27;</span></span><br><span class="line">    <span class="attr">bucket-name:</span> <span class="string">&#x27;存储桶名称&#x27;</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">&#x27;资源URL前缀&#x27;</span></span><br><span class="line">    <span class="attr">path-set-meal:</span> <span class="string">&#x27;随便定义的上传目录&#x27;</span></span><br></pre></td></tr></table></figure><p>创建读取配置的类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.configure.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;aliyun.oss&quot;)</span></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AliyunOSSConfig</span> &#123;</span><br><span class="line">    <span class="keyword">protected</span> String endpoint;</span><br><span class="line">    <span class="keyword">protected</span> String accessKeyId;</span><br><span class="line">    <span class="keyword">protected</span> String accessKeySecret;</span><br><span class="line">    <span class="keyword">protected</span> String bucketName;</span><br><span class="line">    <span class="keyword">protected</span> String pathSetMeal;</span><br><span class="line">    <span class="keyword">protected</span> String url;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>创建工具类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.ClientException;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.OSS;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.OSSClientBuilder;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.OSSException;</span><br><span class="line"><span class="keyword">import</span> com.itheima.configure.config.AliyunOSSConfig;</span><br><span class="line"><span class="keyword">import</span> com.itheima.exception.BizException;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.EqualsAndHashCode;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.net.MalformedURLException;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Path;</span><br><span class="line"><span class="keyword">import</span> java.nio.file.Paths;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.Objects;</span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"><span class="meta">@EqualsAndHashCode(callSuper = true)</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AliyunOSSUtil</span> <span class="keyword">extends</span> <span class="title class_">AliyunOSSConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AliyunOSSUtil</span><span class="params">(AliyunOSSConfig aliyunOSSConfig)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.setEndpoint(aliyunOSSConfig.getEndpoint());</span><br><span class="line">        <span class="built_in">this</span>.setAccessKeyId(aliyunOSSConfig.getAccessKeyId());</span><br><span class="line">        <span class="built_in">this</span>.setAccessKeySecret(aliyunOSSConfig.getAccessKeySecret());</span><br><span class="line">        <span class="built_in">this</span>.setBucketName(aliyunOSSConfig.getBucketName());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 通过URL获取文件名</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> urlStr</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getFileNameByURL</span><span class="params">(String urlStr)</span> &#123;</span><br><span class="line">        <span class="comment">// 创建URL对象</span></span><br><span class="line">        <span class="type">URL</span> <span class="variable">url</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            url = <span class="keyword">new</span> <span class="title class_">URL</span>(urlStr);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (MalformedURLException e) &#123;</span><br><span class="line">            <span class="comment">//throw new BizException(&quot;文件名异常&quot;);</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 使用Paths.get方法将URL转换成Path对象</span></span><br><span class="line">        <span class="type">Path</span> <span class="variable">path</span> <span class="operator">=</span> Paths.get(url.getPath());</span><br><span class="line">        <span class="keyword">return</span> path.getFileName().toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 上传图片到阿里云OSS</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> multipartFile</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> folderPath</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">upload</span><span class="params">(MultipartFile multipartFile, String folderPath)</span>&#123;</span><br><span class="line">        <span class="comment">// 创建OSSClient实例。</span></span><br><span class="line">        <span class="type">OSS</span> <span class="variable">ossClient</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OSSClientBuilder</span>().build(endpoint, accessKeyId, accessKeySecret);</span><br><span class="line">        <span class="comment">// 定义文件名称</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> generateFileName(Objects.requireNonNull(multipartFile.getOriginalFilename()));</span><br><span class="line">        <span class="comment">// 上传图片</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ossClient.putObject(getBucketName(), folderPath + fileName, multipartFile.getInputStream());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BizException</span>(<span class="string">&quot;图片上传失败&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="comment">// 关闭OSSClient。</span></span><br><span class="line">            ossClient.shutdown();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span>  url + folderPath + fileName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除一个文件</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> folderPath</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> fileName</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(String folderPath, String fileName)</span> &#123;</span><br><span class="line">        <span class="comment">// 创建OSSClient实例。</span></span><br><span class="line">        <span class="type">OSS</span> <span class="variable">ossClient</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OSSClientBuilder</span>().build(endpoint, accessKeyId, accessKeySecret);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 删除文件或目录。如果要删除目录，目录必须为空。</span></span><br><span class="line">            ossClient.deleteObject(bucketName, folderPath + fileName);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (OSSException oe) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Caught an OSSException, which means your request made it to OSS, &quot;</span></span><br><span class="line">                    + <span class="string">&quot;but was rejected with an error response for some reason.&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;Error Message:&quot;</span> + oe.getErrorMessage());</span><br><span class="line">            System.out.println(<span class="string">&quot;Error Code:&quot;</span> + oe.getErrorCode());</span><br><span class="line">            System.out.println(<span class="string">&quot;Request ID:&quot;</span> + oe.getRequestId());</span><br><span class="line">            System.out.println(<span class="string">&quot;Host ID:&quot;</span> + oe.getHostId());</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BizException</span>(<span class="string">&quot;阿里云OSS删除图片失败&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClientException ce) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Caught an ClientException, which means the client encountered &quot;</span></span><br><span class="line">                    + <span class="string">&quot;a serious internal problem while trying to communicate with OSS, &quot;</span></span><br><span class="line">                    + <span class="string">&quot;such as not being able to access the network.&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;Error Message:&quot;</span> + ce.getMessage());</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BizException</span>(<span class="string">&quot;阿里云OSS删除图片失败&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (ossClient != <span class="literal">null</span>) &#123;</span><br><span class="line">                ossClient.shutdown();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 生成唯一的文件名</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> originalFilename 文件本来的名称</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">generateFileName</span><span class="params">(String originalFilename)</span> &#123;</span><br><span class="line">        <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">        <span class="type">SimpleDateFormat</span> <span class="variable">dateFormat</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyyMMddHHmmss&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">suffix</span> <span class="operator">=</span> originalFilename.substring(originalFilename.lastIndexOf(<span class="string">&quot;.&quot;</span>) + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> dateFormat.format(date) + <span class="string">&quot;-&quot;</span> + UUID.randomUUID() + <span class="string">&quot;.&quot;</span> + suffix;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>将工具类注入到bean中</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.configure;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.configure.config.AliyunOSSConfig;</span><br><span class="line"><span class="keyword">import</span> com.itheima.util.AliyunOSSUtil;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AliyunOSSConfigure</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AliyunOSSConfig aliyunOSSConfig;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> AliyunOSSUtil <span class="title function_">ossUtil</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">AliyunOSSUtil</span>(aliyunOSSConfig);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://help.aliyun.com/zh/oss/developer-reference/getting-started">阿里云官网文档</a></p><p><a href="https://blog.csdn.net/qq_40298902/article/details/112312750">java整合阿里云OSS</a></p>]]></content>
      
      
      <categories>
          
          <category> 程序配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> OSS </tag>
            
            <tag> 毕业设计 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MybatisPlus配置分页功能</title>
      <link href="/posts/fa8d72c6/"/>
      <url>/posts/fa8d72c6/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在实际使用时，看到项目并没有在MybatisPlus的拦截器中配置分页插件也能够使用分页功能，在配置前可以看看如果不配置是否能够直接分页。</p><h2 id="拦截器"><a href="#拦截器" class="headerlink" title="拦截器"></a>拦截器</h2><p>在配置分页功能前，请确保配置好了MybatisPlus，<a href="/posts/9f1b6858/" title="SpringBoot整合MybaitsPlus">参考文章</a>。</p><p>使用SpringBoot的配置类创建一个MybatisPlus拦截器的Bean，并给这个Bean加上分页的功能（PS：3.4.0之后的版本）</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springbootmybatisplus.configure;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.inner.PaginationInnerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> Mybatis相关配置</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2023/9/11 15:58</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Version</span> 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisConfigure</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MybatisPlusInterceptor <span class="title function_">mybatisPlusInterceptor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">MybatisPlusInterceptor</span> <span class="variable">mybatisPlusInterceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MybatisPlusInterceptor</span>();</span><br><span class="line">        <span class="comment">// 添加分页拦截</span></span><br><span class="line">        mybatisPlusInterceptor.addInnerInterceptor(<span class="keyword">new</span> <span class="title class_">PaginationInnerInterceptor</span>());</span><br><span class="line">        <span class="keyword">return</span> mybatisPlusInterceptor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springbootmybatisplus.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.pagination.Page;</span><br><span class="line"><span class="keyword">import</span> com.example.springbootmybatisplus.entity.User;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootTest()</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserMapperTest</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line">    </span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">selectPage</span><span class="params">()</span> &#123;</span><br><span class="line">        Page&lt;User&gt; userPage = <span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(<span class="number">1</span>, <span class="number">4</span>);</span><br><span class="line">        userMapper.selectPage(userPage, <span class="literal">null</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;一共有多少页：&quot;</span> + userPage.getPages());</span><br><span class="line">        System.out.println(<span class="string">&quot;分页最大行数：&quot;</span> + userPage.getSize());</span><br><span class="line">        System.out.println(<span class="string">&quot;所有数据行数：&quot;</span> + userPage.getTotal());</span><br><span class="line">        System.out.println(<span class="string">&quot;当前为第几页：&quot;</span> + userPage.getCurrent());</span><br><span class="line">        System.out.println(userPage.getRecords());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 程序配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MybatisPlus </tag>
            
            <tag> 分页 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot整合MybaitsPlus</title>
      <link href="/posts/9f1b6858/"/>
      <url>/posts/9f1b6858/</url>
      
        <content type="html"><![CDATA[<h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2><p>使用Intellj IDEA创建SpringBoot项目，其中Server URL可以使用阿里云的URL，地址为<code>https://start.aliyun.com/</code>，填写完毕后点击Next</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure/springboot-mybatisplus/image-20230911153835664.png" alt="image-20230911153835664"></p><p>选择3.0以下的SpringBoot版本，并引入SpringWeb依赖，点击Create创建项目</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure/springboot-mybatisplus/image-20230911154102478.png" alt="image-20230911154102478"></p><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><h3 id="导入坐标"><a href="#导入坐标" class="headerlink" title="导入坐标"></a>导入坐标</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span><span class="comment">&lt;!-- mysql  驱动--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.26<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span><span class="comment">&lt;!-- lombok  ,自动生成get,Set 方法--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span><span class="comment">&lt;!--mybatisplus起步依赖--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span><span class="comment">&lt;!--boot整合mybatis所需要的包，为了使用xml映射文件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="数据源"><a href="#数据源" class="headerlink" title="数据源"></a>数据源</h3><p>在<code>application.yml</code>文件中写入以下内容：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 应用服务 WEB 访问端口</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8080</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://127.0.0.1:3307/itheima?useSSL=false</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">manager</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">mk123456</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># MyBatisPlus相关配置</span></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="comment"># 表名前缀</span></span><br><span class="line">      <span class="attr">table-prefix:</span> <span class="string">tb_</span></span><br><span class="line">      <span class="comment"># id生成策略 数据库自增</span></span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">auto</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">  <span class="comment"># 下划线转驼峰</span></span><br><span class="line">    <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># 日志</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># MyBatis相关配置</span></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="comment"># 告诉mybatis对应的实体类位置</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.example.springbootmybatisplus.entity</span></span><br><span class="line">  <span class="comment"># 告诉mybatisSQL的映射文件在这里</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath*:mapper/*.xml</span></span><br></pre></td></tr></table></figure><h2 id="建表"><a href="#建表" class="headerlink" title="建表"></a>建表</h2><p>执行下面的sql脚本，创建测试用的表</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> tb_user;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> tb_user(</span><br><span class="line">id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">username <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">password <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">gender <span class="type">char</span>(<span class="number">1</span>),</span><br><span class="line">addr <span class="type">varchar</span>(<span class="number">30</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> tb_user <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;zhangsan&#x27;</span>, <span class="string">&#x27;123&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;北京&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> tb_user <span class="keyword">VALUES</span> (<span class="number">2</span>, <span class="string">&#x27;李四&#x27;</span>, <span class="string">&#x27;234&#x27;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="string">&#x27;天津&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> tb_user <span class="keyword">VALUES</span> (<span class="number">3</span>, <span class="string">&#x27;王五&#x27;</span>, <span class="string">&#x27;11&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;西安&#x27;</span>);</span><br></pre></td></tr></table></figure><h2 id="实体类"><a href="#实体类" class="headerlink" title="实体类"></a>实体类</h2><p>新建实体类<code>com.example.springbootmybatisplus.entity.User</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springbootmybatisplus.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableId;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.annotation.TableName;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName(&quot;tb_user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="meta">@TableId()</span></span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> Character gender;</span><br><span class="line">    <span class="keyword">private</span> String addr;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="映射"><a href="#映射" class="headerlink" title="映射"></a>映射</h2><h3 id="注解映射"><a href="#注解映射" class="headerlink" title="注解映射"></a>注解映射</h3><p>新建Mapper接口<code>com.example.springbootmybatisplus.mapper.UserMapper</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springbootmybatisplus.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"><span class="keyword">import</span> com.example.springbootmybatisplus.entity.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Mapper;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="XML映射"><a href="#XML映射" class="headerlink" title="XML映射"></a>XML映射</h3><p>在<code>src/resources/mapper</code>下创建<code>UserMapper.xml</code>文件，模板如下</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.example.springbootmybatisplus.mapper.UserMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="配置扫描"><a href="#配置扫描" class="headerlink" title="配置扫描"></a>配置扫描</h3><p>在启动类加上<code>@MapperScan(&#123;&quot;com.example.springbootmybatisplus.mapper&quot;&#125;)</code>以配置Mapper扫描</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@MapperScan(&#123;&quot;com.example.springbootmybatisplus.mapper&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringbootmybatisplusApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(SpringbootmybatisplusApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="服务类"><a href="#服务类" class="headerlink" title="服务类"></a>服务类</h2><p>新建Service接口<code>com.example.springbootmybatisplus.service.UserService</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springbootmybatisplus.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.springbootmybatisplus.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.IService;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> <span class="keyword">extends</span> <span class="title class_">IService</span>&lt;User&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>新建Service实现类<code>com.example.springbootmybatisplus.service.impl.UserServiceImpl</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springbootmybatisplus.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.springbootmybatisplus.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.example.springbootmybatisplus.mapper.UserMapper;</span><br><span class="line"><span class="keyword">import</span> com.example.springbootmybatisplus.service.UserService;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;UserMapper, User&gt; <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="控制器"><a href="#控制器" class="headerlink" title="控制器"></a>控制器</h2><p>新建Controller控制器<code>com.example.springbootmybatisplus.controller.UserController</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.springbootmybatisplus.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.springbootmybatisplus.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.example.springbootmybatisplus.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userService.list();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><p>运行启动类，使用浏览器访问<a href="http://localhost:8080/user">http://localhost:8080/user</a>，返回值如下：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        id<span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">username<span class="punctuation">:</span> <span class="string">&quot;zhangsan&quot;</span><span class="punctuation">,</span></span><br><span class="line">password<span class="punctuation">:</span> <span class="string">&quot;123&quot;</span><span class="punctuation">,</span></span><br><span class="line">gender<span class="punctuation">:</span> <span class="string">&quot;男&quot;</span><span class="punctuation">,</span></span><br><span class="line">addr<span class="punctuation">:</span> <span class="string">&quot;北京&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        id<span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">username<span class="punctuation">:</span> <span class="string">&quot;李四&quot;</span><span class="punctuation">,</span></span><br><span class="line">password<span class="punctuation">:</span> <span class="string">&quot;234&quot;</span><span class="punctuation">,</span></span><br><span class="line">gender<span class="punctuation">:</span> <span class="string">&quot;女&quot;</span><span class="punctuation">,</span></span><br><span class="line">addr<span class="punctuation">:</span> <span class="string">&quot;天津&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">        id<span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">username<span class="punctuation">:</span> <span class="string">&quot;王五&quot;</span><span class="punctuation">,</span></span><br><span class="line">password<span class="punctuation">:</span> <span class="string">&quot;11&quot;</span><span class="punctuation">,</span></span><br><span class="line">gender<span class="punctuation">:</span> <span class="string">&quot;男&quot;</span><span class="punctuation">,</span></span><br><span class="line">addr<span class="punctuation">:</span> <span class="string">&quot;西安&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 程序配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringBoot </tag>
            
            <tag> MyBatisPlus </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu部署Qmsg私有云</title>
      <link href="/posts/3ce4dbad/"/>
      <url>/posts/3ce4dbad/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>最近大蝶衣又更新Qmsg酱机器人了，添加了私有云版本，就是能够把消息发送的接口部署在本地，不用再去访问官网了。</p><p>目前是内测，内测期间可以免费使用，目前还没有做优化之类的，但是使用起来已经非常方便了。</p><h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p>使用私有云版本必须得搭建捐赠版QQ机器人。</p><p>浏览官方教程并下载好对应的文件。</p><p><a href="https://qmsg.zendee.cn/docs/pvt/">捐赠版</a>，<a href="https://qmsgpvt.zendee.cn/docs/plus/">私有云版</a></p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>先按照<a href="https://qmsgpvt.zendee.cn/docs/plus/">私有云文档</a>部署好私有云接口。</p><p>部署好私有云接口后，按照<a href="https://qmsg.zendee.cn/docs/start/#%E7%A7%81%E8%81%8A%E6%B6%88%E6%81%AF%E6%8E%A8%E9%80%81%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4%E7%AE%80%E8%BF%B0">私聊消息推送</a>配置好。</p><p>然后按照<a href="https://qmsg.zendee.cn/docs/pvt/">捐赠版文档</a>部署捐赠版QQ机器人。</p><p>Linux搭建捐赠版QQ机器人与官方文档有些出入，可以参考<a href="/posts/144bac1a/" title="Ubuntu搭建QQ消息提醒机器人">Ubuntu搭建QQ消息提醒机器人</a></p><p>全部竣工后，你需要向大蝶衣申请授权码，然后填入到你的私有云控制台的最下面。（内测期间免费使用）</p><p>以上全部完成后，就可以参考<a href="https://qmsg.zendee.cn/docs/api/">官方API文档</a>给自己发送消息了。</p>]]></content>
      
      
      <categories>
          
          <category> 软件配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 服务器 </tag>
            
            <tag> Ubuntu </tag>
            
            <tag> Qmsg </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用docker部署禅道项目管理</title>
      <link href="/posts/d34c83ad/"/>
      <url>/posts/d34c83ad/</url>
      
        <content type="html"><![CDATA[<h2 id="下载镜像"><a href="#下载镜像" class="headerlink" title="下载镜像"></a>下载镜像</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 此为最新镜像</span></span><br><span class="line"><span class="built_in">sudo</span> docker pull easysoft/zentao</span><br></pre></td></tr></table></figure><h2 id="创建禅道容器"><a href="#创建禅道容器" class="headerlink" title="创建禅道容器"></a>创建禅道容器</h2><p><strong>创建网络驱动</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> docker network create --subnet=172.172.172.0/24 zentaonet</span><br></pre></td></tr></table></figure><p><strong>启动容器</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> docker run --name zentao \</span><br><span class="line">-p 3001:80 \</span><br><span class="line">-p 3300:3306 \</span><br><span class="line">--network=zentaonet \</span><br><span class="line">--ip 172.172.172.2 \</span><br><span class="line">--mac-address 02:42:ac:11:00:01 \</span><br><span class="line">-v /opt/docker/data/zentao/zentaopms:/www/zentaopms \</span><br><span class="line">-v /opt/docker/data/zentao/mysql:/var/lib/mysql \</span><br><span class="line">-e MYSQL_ROOT_PASSWORD=[root密码] \</span><br><span class="line">-d \</span><br><span class="line">easysoft/zentao</span><br></pre></td></tr></table></figure><h2 id="安装禅道"><a href="#安装禅道" class="headerlink" title="安装禅道"></a>安装禅道</h2><p>访问<code>[服务器ip]:[映射容器80端口的主机端口]</code>，记得放行防火墙。</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/docker-zentao/image-20230816171451146.png" alt="image-20230816171451146"></p><p>点击开始安装，同意协议后点击下一步</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/docker-zentao/image-20230816171625846.png" alt="image-20230816171625846"></p><p>编辑配置，这里只用修改root密码</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/docker-zentao/image-20230816171744785.png" alt="image-20230816171744785"></p><p>预览配置后点击下一步，我这里选择<code>使用全生命周期管理模式</code></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/docker-zentao/image-20230816171908734.png" alt="image-20230816171908734"></p><p>设置公司、管理员账号以及密码，不熟悉可以导入demo数据，点击保存</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/docker-zentao/image-20230816172020891.png" alt="image-20230816172020891"></p><p>保存后会提示我们注册一个社区账号，可以不用注册，直接点击登录按钮跳转到登录页面，并输入上面设置的管理员账号以及密码</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/docker-zentao/image-20230816172349347.png" alt="image-20230816172349347"></p><p>点击登录进入系统，成功进入后台，即表示安装成功</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/docker-zentao/image-20230816172435507.png" alt="image-20230816172435507"></p><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://hub.docker.com/r/easysoft/zentao">禅道官方Docker文档</a></p>]]></content>
      
      
      <categories>
          
          <category> 软件配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 服务器 </tag>
            
            <tag> Docker </tag>
            
            <tag> 禅道 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用screen后台运行</title>
      <link href="/posts/eae9cf00/"/>
      <url>/posts/eae9cf00/</url>
      
        <content type="html"><![CDATA[<h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>平常很多应用都需要一直运行，但是不可能一直保持在终端，就需要将其后台挂起，用<code>nohup</code>指令不太好管理，所以这里使用到<code>screen</code>这个后台程序管理工具。</p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"><span class="built_in">sudo</span> apt install screen</span><br></pre></td></tr></table></figure><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>所有命令的权限都是基于你执行screen命令时使用的权限，如果你需要screen终端使用的是管理员权限，就使用<code>sudo screen</code></p><p><strong>基本命令</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 挂起一个后台程序</span></span><br><span class="line">screen [-S 会话名] &lt;你需要挂起的命令&gt;</span><br><span class="line"><span class="comment"># 查看当前用户挂起的后台程序的信息（包含会话名）</span></span><br><span class="line">screen -list</span><br><span class="line"><span class="comment"># 重新连接到后台程序，-D表示关闭之前的会话</span></span><br><span class="line">screen [-D] -r &lt;会话的名字&gt;</span><br></pre></td></tr></table></figure><p><strong>快捷键</strong></p><ul><li><p><code>Ctrl + a</code>，然后按下 <code>d</code>：<strong>挂起当前会话并回到原来的终端窗口</strong>。</p></li><li><p><code>Ctrl + a</code>：进入命令模式（<code>command mode</code>），用于执行 <code>screen</code> 命令。</p></li><li><p><code>Ctrl + a</code>，然后按下 <code>c</code>：创建新的终端窗口。</p></li><li><p><code>Ctrl + a</code>，然后按下 <code>n</code>：切换到下一个终端窗口。</p></li><li><p><code>Ctrl + a</code>，然后按下 <code>p</code>：切换到上一个终端窗口。</p></li><li><p><code>Ctrl + a</code>，然后按下 <code>&quot;</code>：显示当前会话的所有终端窗口列表，可以选择要切换的窗口。</p></li><li><p><code>Ctrl + a</code>，然后按下 <code>A</code>：设置当前窗口的标题。</p></li><li><p><code>Ctrl + a</code>，然后按下 <code>k</code>：关闭当前终端窗口。</p></li><li><p><code>Ctrl + a</code>，然后按下 <code>r</code>：重新连接到失去连接的会话。</p></li><li><p><code>Ctrl + a</code>，然后按下 <code>?</code>：显示 <code>screen</code> 快捷键帮助。</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> 知识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 服务器 </tag>
            
            <tag> Linux </tag>
            
            <tag> screen </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSGO局域网服务器搭建</title>
      <link href="/posts/949e1b5a/"/>
      <url>/posts/949e1b5a/</url>
      
        <content type="html"><![CDATA[<h2 id="安装SteamCMD"><a href="#安装SteamCMD" class="headerlink" title="安装SteamCMD"></a>安装SteamCMD</h2><p>安装过程中会有协议界面弹出，需要同意一下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 64位机器执行</span></span><br><span class="line"><span class="built_in">sudo</span> add-apt-repository multiverse</span><br><span class="line"><span class="built_in">sudo</span> dpkg --add-architecture i386</span><br><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"><span class="comment"># 安装steamcmd</span></span><br><span class="line"><span class="built_in">sudo</span> apt install steamcmd</span><br></pre></td></tr></table></figure><h2 id="安装CSGO"><a href="#安装CSGO" class="headerlink" title="安装CSGO"></a>安装CSGO</h2><p>进入steamcmd</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">steamcmd</span><br></pre></td></tr></table></figure><p>进入后输入以下命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置下载目录</span></span><br><span class="line">force_install_dir /home/game/csgo/</span><br><span class="line"><span class="comment"># 匿名登陆</span></span><br><span class="line">login anonymous</span><br><span class="line"><span class="comment"># 下载CSGO</span></span><br><span class="line">app_update 740 validate</span><br><span class="line"><span class="comment"># 下载完成后退出</span></span><br><span class="line">quit</span><br></pre></td></tr></table></figure><p>下载<a href="https://metamodsource.net/downloads.php?branch=stable">Metamod:Source</a>与<a href="https://www.sourcemod.net/post-download.php">SourceMod</a>插件平台，并将两个压缩包上传到<code>/home/game/csgo/csgo</code>目录，并解压</p><h2 id="配置服务器"><a href="#配置服务器" class="headerlink" title="配置服务器"></a>配置服务器</h2><p>修改<code>/home/game/csgo/csgo/addons/sourcemod/configs/admins_simple.ini</code>文件，在最末尾添加你的id（在游戏局内用控制台输入status即可查看）</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;STEAM<span class="built_in">_</span>1:1:440876565&quot; &quot;99:z&quot;</span><br></pre></td></tr></table></figure><p>新建<code>/home/game/csgo/csgo/cfg/server.cfg</code>，写入以下内容：</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">rcon<span class="built_in">_</span>password &quot;mk20010624&quot; //rcon密码，用于游戏里控制台命令服务器</span><br><span class="line">sv<span class="built_in">_</span>password &quot;&quot; //服务器密码（可留空即为公开）</span><br><span class="line">ip 0.0.0.0 //很离谱的bug，不加这个rcon就没办法命令服务器，保持里面是0.0.0.0不要更改</span><br><span class="line">sv<span class="built_in">_</span>lan 1 // 局域网</span><br><span class="line">sv<span class="built_in">_</span>consistency 0 // 关闭模型(MOD)冲突</span><br><span class="line">sv<span class="built_in">_</span>cheats 1 // 开启作弊</span><br><span class="line">sv<span class="built_in">_</span>maxupdaterate 128</span><br></pre></td></tr></table></figure><p>新建<code>/home/game/csgo/start.sh</code>，写入脚本内容：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /home/game/csgo &amp;&amp; ./srcds_run -game csgo -insecure -usercon -console -debug -nomaster +port 27015 +mapgroup mg_active +map de_dust2 +game_type 3 +game_mode 0 +<span class="built_in">exec</span> server.cfg -maxplayers_override 10 -tickrate 128</span><br></pre></td></tr></table></figure><p>运行服务端：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash /home/game/csgo/start.sh</span><br></pre></td></tr></table></figure><h2 id="校验"><a href="#校验" class="headerlink" title="校验"></a>校验</h2><p>服务器控制台可以输入作弊指令，例如<code>sv_cheats 1</code></p><p>客户端想要输入指令，需要先输入：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rcon_passwd [之前在autoexec.cfg输入的rcon密码]</span><br></pre></td></tr></table></figure><p>验证通过后，在客户端的控制台输入指令时，加上<code>rcon</code>前缀即可，例如<code>rcon sv_cheats 1</code></p><h2 id="全皮肤"><a href="#全皮肤" class="headerlink" title="全皮肤"></a>全皮肤</h2><p>下载插件：<a href="https://github.com/kgns/weapons/releases/tag/v1.7.7">武器换肤</a>，<a href="https://github.com/kgns/gloves/releases/tag/v1.0.5">手套换肤</a>，<a href="https://github.com/komashchenko/PTaH/releases">武器换肤的前置插件</a></p><p>修改<code>/home/game/csgo/csgo/addons/sourcemod/configs/core.cfg</code>的<strong>147</strong>行如下（将yes改为no）：</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;FollowCSGOServerGuidelines&quot;&quot;no&quot;</span><br></pre></td></tr></table></figure><p>重启服务器后，在聊天框输入以下内容即可使用：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#换皮肤  </span><br><span class="line">!ws</span><br><span class="line">#换刀     </span><br><span class="line">!knife</span><br><span class="line">#换手套  </span><br><span class="line">!glove</span><br></pre></td></tr></table></figure><h2 id="参考教程"><a href="#参考教程" class="headerlink" title="参考教程"></a>参考教程</h2><p><a href="https://www.bilibili.com/read/cv19738844">从零开始的CSGO私人服务器搭建（二）游戏服务端安装及配置</a></p><p><a href="https://blog.csdn.net/qq_50843126/article/details/126094013">CSGO服务器搭建（Linux基础向+全皮肤插件安装）</a></p><p><a href="https://www.bilibili.com/read/cv7409672/">从零开始的CSGO服务器教程（三）：实战2——全皮肤全贴纸&#x2F;回防服务器</a></p>]]></content>
      
      
      <categories>
          
          <category> 游戏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 服务器 </tag>
            
            <tag> CSGO </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker部署蚂蚁笔记</title>
      <link href="/posts/2ade48a6/"/>
      <url>/posts/2ade48a6/</url>
      
        <content type="html"><![CDATA[<h2 id="安装镜像"><a href="#安装镜像" class="headerlink" title="安装镜像"></a>安装镜像</h2><p>镜像内有如下文件，建议映射：</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/data/db                <span class="params">#</span> 内置mongodb的数据目录，nodb版无此目录</span><br><span class="line">/data/leanote/conf      <span class="params">#</span> 笔记的配置文件目录</span><br><span class="line">/data/leanote/files     <span class="params">#</span> 笔记内上传的图片、文件存放目录</span><br><span class="line">/data/leanote/public/upload     <span class="params">#</span> 头像上传路径</span><br></pre></td></tr></table></figure><p>进入你自定义的docker挂载卷目录再执行，我的目录为<code>/opt/docker/data/leanote</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> docker run -d \</span><br><span class="line">    --name leanote \</span><br><span class="line">    -v `<span class="built_in">pwd</span>`/db:/data/db \</span><br><span class="line">    -v `<span class="built_in">pwd</span>`/conf/:/data/leanote/conf \</span><br><span class="line">    -v `<span class="built_in">pwd</span>`/files:/data/leanote/files \</span><br><span class="line">    -v `<span class="built_in">pwd</span>`/upload:/data/leanote/public/upload \</span><br><span class="line">    --privileged=<span class="literal">true</span> \</span><br><span class="line">    -p 3000:9000 \</span><br><span class="line">    --restart=always \</span><br><span class="line">    axboy/leanote</span><br></pre></td></tr></table></figure><p>修改<code>conf/app.conf</code>配置文件（修改后需要重启容器）：</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="params">#</span> 修改此url请求不会发送到localhost主机，也可以使用域名，就是网站对外暴露的url</span><br><span class="line">site.url=http://[服务器IP]:[服务器端口]</span><br></pre></td></tr></table></figure><h2 id="维护"><a href="#维护" class="headerlink" title="维护"></a>维护</h2><p>默认有一个管理员账户，账户名：<strong>admin</strong>，密码：<strong>abc123</strong>，登录进入后及时修改密码。</p><p>默认有一个体验账户，账户名：<strong>demo</strong>，密码：<strong><a href="mailto:&#100;&#x65;&#109;&#x6f;&#x40;&#x6c;&#101;&#x61;&#110;&#x6f;&#x74;&#x65;&#46;&#x63;&#111;&#109;">&#100;&#x65;&#109;&#x6f;&#x40;&#x6c;&#101;&#x61;&#110;&#x6f;&#x74;&#x65;&#46;&#x63;&#111;&#109;</a></strong>。</p><h3 id="关闭注册"><a href="#关闭注册" class="headerlink" title="关闭注册"></a>关闭注册</h3><p>使用管理员登录后，点击右上角头像附近的下拉菜单，点击后台管理，<strong>Configuration</strong> &gt; <strong>Open Register</strong>，取消复选框，点击<strong>Submit</strong>。</p><p><strong>不要修改</strong>admin<strong>用户的用户名</strong></p><h3 id="转移数据"><a href="#转移数据" class="headerlink" title="转移数据"></a>转移数据</h3><p>保存挂载卷，即本篇文章的<code>/opt/docker/data/leanote</code>目录下的文件.</p><p>然后在创建容器时挂载之前保存的挂载卷即可。</p><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://hub.docker.com/r/axboy/leanote">axboy&#x2F;leanote</a></p>]]></content>
      
      
      <categories>
          
          <category> 软件配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> Leanote </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSGO指令</title>
      <link href="/posts/f0272472/"/>
      <url>/posts/f0272472/</url>
      
        <content type="html"><![CDATA[<h2 id="服务器"><a href="#服务器" class="headerlink" title="服务器"></a>服务器</h2><p>使用服务器时，客户端输入的指令都需要加上<code>rcon</code>前缀，使用前需要输入<strong>rcon密码</strong>：</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rcon<span class="built_in">_</span>password [rcon密码]</span><br></pre></td></tr></table></figure><h2 id="控制台"><a href="#控制台" class="headerlink" title="控制台"></a>控制台</h2><h3 id="通用"><a href="#通用" class="headerlink" title="通用"></a>通用</h3><p>切换左右手，鼠标5（侧键）</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BindToggle &quot;mouse5&quot; &quot;cl<span class="built_in">_</span>righthand&quot;</span><br></pre></td></tr></table></figure><p>滚轮跳，向下</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bind &quot;MWHEELDOWN&quot; &quot;+jump&quot;</span><br></pre></td></tr></table></figure><p>滚轮跳，向上</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bind &quot;MWHEELUP&quot; &quot;+jump&quot;</span><br></pre></td></tr></table></figure><p>清除血迹，e</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bind e &quot;+use;r<span class="built_in">_</span>cleardecals&quot;</span><br></pre></td></tr></table></figure><p>清除血迹，shift</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bind shift &quot;+speed;r<span class="built_in">_</span>cleardecals&quot;</span><br></pre></td></tr></table></figure><p>狙击镜两像素</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cl<span class="built_in">_</span>crosshair<span class="built_in">_</span>sniper<span class="built_in">_</span>width 2</span><br></pre></td></tr></table></figure><h3 id="对局"><a href="#对局" class="headerlink" title="对局"></a>对局</h3><p>关闭自动平衡</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mp<span class="built_in">_</span>autoteambalance 0</span><br></pre></td></tr></table></figure><p>关闭最大队伍人数</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mp<span class="built_in">_</span>limitteams 0</span><br></pre></td></tr></table></figure><p>踢出所有人机</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bot<span class="built_in">_</span>kick</span><br></pre></td></tr></table></figure><p>添加一个CT</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bot<span class="built_in">_</span>add<span class="built_in">_</span>ct</span><br></pre></td></tr></table></figure><p>添加一个T</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bot<span class="built_in">_</span>add<span class="built_in">_</span>t</span><br></pre></td></tr></table></figure><p>人机难度</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bot<span class="built_in">_</span>difficulty [难度等级0-3]</span><br></pre></td></tr></table></figure><p>开启作弊</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sv<span class="built_in">_</span>cheats 1</span><br></pre></td></tr></table></figure><p>开启扔刀</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mp<span class="built_in">_</span>drop<span class="built_in">_</span>knife<span class="built_in">_</span>enable 1</span><br></pre></td></tr></table></figure><details class="toggle" ><summary class="toggle-button" style="">发刀指令</summary><div class="toggle-content"><p>蝴蝶刀</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">give weapon<span class="built_in">_</span>knife<span class="built_in">_</span>butterfly;ent<span class="built_in">_</span>fire weapon<span class="built_in">_</span>knife addoutput &quot;classname weapon<span class="built_in">_</span>knifegg&quot;</span><br></pre></td></tr></table></figure><p>M9刺刀</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">give weapon<span class="built_in">_</span>knife<span class="built_in">_</span>m9<span class="built_in">_</span>bayonet;ent<span class="built_in">_</span>fire weapon<span class="built_in">_</span>knife addoutput &quot;classname weapon<span class="built_in">_</span>knifegg&quot;</span><br></pre></td></tr></table></figure><p>爪子刀 </p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">give weapon<span class="built_in">_</span>knife<span class="built_in">_</span>karambit;ent<span class="built_in">_</span>fire weapon<span class="built_in">_</span>knife addoutput &quot;classname weapon<span class="built_in">_</span>knifegg&quot;</span><br></pre></td></tr></table></figure><p>锯齿爪</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">give weapon<span class="built_in">_</span>knife<span class="built_in">_</span>widowmaker;ent<span class="built_in">_</span>fire weapon<span class="built_in">_</span>knife addoutput &quot;classname weapon<span class="built_in">_</span>knifegg&quot;</span><br></pre></td></tr></table></figure><p>短剑</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">give weapon<span class="built_in">_</span>knife<span class="built_in">_</span>stiletto;ent<span class="built_in">_</span>fire weapon<span class="built_in">_</span>knife addoutput &quot;classname weapon<span class="built_in">_</span>knifegg&quot;</span><br></pre></td></tr></table></figure><p>猎杀者匕首</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">give weapon<span class="built_in">_</span>knife<span class="built_in">_</span>tactical;ent<span class="built_in">_</span>fire weapon<span class="built_in">_</span>knife addoutput &quot;classname weapon<span class="built_in">_</span>knifegg&quot;</span><br></pre></td></tr></table></figure><p>海豹短刀</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">give weapon<span class="built_in">_</span>knife<span class="built_in">_</span>css; ent<span class="built_in">_</span>fire weapon<span class="built_in">_</span>knife addoutput &quot;classname weapon<span class="built_in">_</span>knifegg&quot;</span><br></pre></td></tr></table></figure><p>折叠刀</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">give weapon<span class="built_in">_</span>knife<span class="built_in">_</span>flip;ent<span class="built_in">_</span>fire weapon<span class="built_in">_</span>knife addoutput &quot;classname weapon<span class="built_in">_</span>knifegg&quot; </span><br></pre></td></tr></table></figure><p>刺刀</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">give weapon<span class="built_in">_</span>bayonet;ent<span class="built_in">_</span>fire weapon<span class="built_in">_</span>knife addoutput &quot;classname weapon<span class="built_in">_</span>knifegg&quot;</span><br></pre></td></tr></table></figure><p>熊刀</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">give weapon<span class="built_in">_</span>knife<span class="built_in">_</span>ursus;ent<span class="built_in">_</span>fire weapon<span class="built_in">_</span>knife addoutput &quot;classname weapon<span class="built_in">_</span>knifegg&quot;</span><br></pre></td></tr></table></figure><p>流浪者匕首</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">give weapon<span class="built_in">_</span>knife<span class="built_in">_</span>outdoor;ent<span class="built_in">_</span>fire weapon<span class="built_in">_</span>knife addoutput &quot;classname weapon<span class="built_in">_</span>knifegg&quot;</span><br></pre></td></tr></table></figure><p>骷髅匕首</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">give weapon<span class="built_in">_</span>knife<span class="built_in">_</span>skeleton;ent<span class="built_in">_</span>fire weapon<span class="built_in">_</span>knife addoutput &quot;classname weapon<span class="built_in">_</span>knifegg&quot;</span><br></pre></td></tr></table></figure><p>求生匕首</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">give weapon<span class="built_in">_</span>knife<span class="built_in">_</span>canis;ent<span class="built_in">_</span>fire weapon<span class="built_in">_</span>knife addoutput &quot;classname weapon<span class="built_in">_</span>knifegg&quot;</span><br></pre></td></tr></table></figure><p>系绳匕首</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">give weapon<span class="built_in">_</span>knife<span class="built_in">_</span>cord;ent<span class="built_in">_</span>fire weapon<span class="built_in">_</span>knife addoutput &quot;classname weapon<span class="built_in">_</span>knifegg&quot;</span><br></pre></td></tr></table></figure><p>鲍伊</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">give weapon<span class="built_in">_</span>knife<span class="built_in">_</span>survival<span class="built_in">_</span>bowie;ent<span class="built_in">_</span>fire weapon<span class="built_in">_</span>knife addoutput &quot;classname weapon<span class="built_in">_</span>knifegg&quot;</span><br></pre></td></tr></table></figure><p>穿肠刀</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">give weapon<span class="built_in">_</span>knife<span class="built_in">_</span>gut;ent<span class="built_in">_</span>fire weapon<span class="built_in">_</span>knife addoutput &quot;classname weapon<span class="built_in">_</span>knifegg&quot;</span><br></pre></td></tr></table></figure><p>双匕</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">give weapon<span class="built_in">_</span>knife<span class="built_in">_</span>push;ent<span class="built_in">_</span>fire weapon<span class="built_in">_</span>knife addoutput &quot;classname weapon<span class="built_in">_</span>knifegg&quot;</span><br></pre></td></tr></table></figure><p>弯刀</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">give weapon<span class="built_in">_</span>knife<span class="built_in">_</span>falchion;ent<span class="built_in">_</span>fire weapon<span class="built_in">_</span>knife addoutput &quot;classname weapon<span class="built_in">_</span>knifegg&quot;</span><br></pre></td></tr></table></figure><p>折刀</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">give weapon<span class="built_in">_</span>knife<span class="built_in">_</span>gypsy<span class="built_in">_</span>jackknife;ent<span class="built_in">_</span>fire weapon<span class="built_in">_</span>knife addoutput &quot;classname weapon<span class="built_in">_</span>knifegg&quot;</span><br></pre></td></tr></table></figure><p>黄金匕首</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">give weapon<span class="built_in">_</span>knifegg</span><br></pre></td></tr></table></figure></div></details><h2 id="脚本文件"><a href="#脚本文件" class="headerlink" title="脚本文件"></a>脚本文件</h2><p>局内执行脚本文件</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exec xxx.cfg</span><br></pre></td></tr></table></figure><p>一键跳投，v</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alias +jumpthrow&quot;+jump;-attack;-attack2&quot;; alias -jumpthrow -jump; bind v +jumpthrow</span><br></pre></td></tr></table></figure><p>一键大跳，空格</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alias +cjump &quot;+jump; +duck&quot;</span><br><span class="line">alias -cjump &quot;-jump; -duck&quot;</span><br><span class="line">bind &quot;space&quot; &quot;+cjump&quot;</span><br></pre></td></tr></table></figure><h2 id="启动项"><a href="#启动项" class="headerlink" title="启动项"></a>启动项</h2><p>延迟补偿</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">+cl<span class="built_in">_</span>interp<span class="built_in">_</span>ratio 1</span><br></pre></td></tr></table></figure><p>128tick</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-tickrate 128</span><br><span class="line"><span class="params">#</span> 需要配合游戏内控制台指令（进入地图无效）</span><br><span class="line">cl<span class="built_in">_</span>updaterate 128</span><br><span class="line">cl<span class="built_in">_</span>cmdrate 128</span><br></pre></td></tr></table></figure><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://www.bilibili.com/read/cv5829987/">CSGO 最全“刀”代码，另附创意工坊玩“刀”地图</a></p>]]></content>
      
      
      <categories>
          
          <category> 游戏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSGO </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>求生之路2服务器100tick</title>
      <link href="/posts/1e300064/"/>
      <url>/posts/1e300064/</url>
      
        <content type="html"><![CDATA[<h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p><a href="https://forums.alliedmods.net/showthread.php?t=299669">下载tick解锁插件</a></p><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><h3 id="服务端"><a href="#服务端" class="headerlink" title="服务端"></a>服务端</h3><p>将下载的压缩包解压后，会有两个版本，使用<code>Package-l4d2</code>文件夹下的插件，将<code>Tickrate_Enabler\Package-l4d2\addons</code>文件夹下的内容放到服务端的<code>addons</code>文件夹下</p><p>修改启动参数，增加<code> -tickrate 100</code>参数，修改<code>server.cfg</code>，增加以下内容：</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// 100tick</span><br><span class="line">sm<span class="built_in">_</span>cvar net<span class="built_in">_</span>splitpacket<span class="built_in">_</span>maxrate 50000</span><br><span class="line">sm<span class="built_in">_</span>cvar nb<span class="built_in">_</span>update<span class="built_in">_</span>frequency 0.024</span><br><span class="line">sm<span class="built_in">_</span>cvar tick<span class="built_in">_</span>door<span class="built_in">_</span>speed 1.3</span><br><span class="line">sm<span class="built_in">_</span>cvar fps<span class="built_in">_</span>max 0</span><br><span class="line">sm<span class="built_in">_</span>cvar sv<span class="built_in">_</span>minrate 100000</span><br><span class="line">sm<span class="built_in">_</span>cvar sv<span class="built_in">_</span>maxrate 100000</span><br><span class="line">sm<span class="built_in">_</span>cvar sv<span class="built_in">_</span>mincmdrate 100</span><br><span class="line">sm<span class="built_in">_</span>cvar sv<span class="built_in">_</span>maxcmdrate 100</span><br><span class="line">sm<span class="built_in">_</span>cvar sv<span class="built_in">_</span>minupdaterate 100</span><br><span class="line">sm<span class="built_in">_</span>cvar sv<span class="built_in">_</span>maxupdaterate 100</span><br><span class="line">sm<span class="built_in">_</span>cvar sv<span class="built_in">_</span>client<span class="built_in">_</span>min<span class="built_in">_</span>interp<span class="built_in">_</span>ratio -1</span><br><span class="line">sm<span class="built_in">_</span>cvar sv<span class="built_in">_</span>client<span class="built_in">_</span>max<span class="built_in">_</span>interp<span class="built_in">_</span>ratio 2</span><br></pre></td></tr></table></figure><h3 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h3><p>在求生之路根目录下的<code>left4dead2/cfg</code>目录下创建<code>autoexec.cfg</code>，写入以下内容</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cl<span class="built_in">_</span>interp<span class="built_in">_</span>ratio -1 // 自由修改本地lerp值所必须的设置</span><br><span class="line">cl<span class="built_in">_</span>interp 0  // lerp值，100tick建议为0，单位ms</span><br><span class="line">sv<span class="built_in">_</span>minupdaterate &quot;100&quot; // 参见上面参考文章参数备注,100tick设置为100</span><br><span class="line">sv<span class="built_in">_</span>maxupdaterate &quot;100&quot; // 参见上面参考文章参数备注,100tick设置为100</span><br><span class="line">cl<span class="built_in">_</span>updaterate &quot;100&quot; // 设置为服务端的tickrate</span><br><span class="line">sv<span class="built_in">_</span>mincmdrate &quot;100&quot;// 参见上面参考文章参数备注</span><br><span class="line">sv<span class="built_in">_</span>maxcmdrate &quot;100&quot;// 参见上面参考文章参数备注</span><br><span class="line">cl<span class="built_in">_</span>cmdrate &quot;100&quot; // 设置为服务端的tickrate同样的值</span><br></pre></td></tr></table></figure><p>重启服务端与客户端，即可开启100tick在，客户端输入<code>net_graph 1</code>查看网络参数，最右边一列都接近<code>100/s</code>则表示100tick开启成功。</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/game/l4d2-server-tick/image-20230804170331781.png" alt="image-20230804170331781"></p><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a href="https://www.bilibili.com/read/cv12184844/">求生之路2 服务器设置100tick方法</a></p><p><a href="https://www.bilibili.com/read/cv12114177">求生之路2 L4D2 服务器网络参数设置</a></p>]]></content>
      
      
      <categories>
          
          <category> 游戏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 服务器 </tag>
            
            <tag> 求生之路2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>搭建求生之路2服务器</title>
      <link href="/posts/1a99b274/"/>
      <url>/posts/1a99b274/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p><strong>注意：</strong>文档内容有更新，图片未更新，安装目录由<code>/home/game/l4d2</code>改为<code>/home/game/.steam/SteamApps/common/Left4Dead2</code></p><h2 id="安装SteamCMD"><a href="#安装SteamCMD" class="headerlink" title="安装SteamCMD"></a>安装SteamCMD</h2><p>安装过程中会有协议界面弹出，需要同意一下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 64位机器执行</span></span><br><span class="line"><span class="built_in">sudo</span> add-apt-repository multiverse</span><br><span class="line"><span class="built_in">sudo</span> dpkg --add-architecture i386</span><br><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"><span class="comment"># 安装steamcmd</span></span><br><span class="line"><span class="built_in">sudo</span> apt install steamcmd</span><br></pre></td></tr></table></figure><h2 id="安装求生之路2"><a href="#安装求生之路2" class="headerlink" title="安装求生之路2"></a>安装求生之路2</h2><p>使用<code>steamcmd</code>命令进入steamcmd终端</p><p>首次使用<code>steamcmd</code>指令会生成一个<code>.steam</code>目录，可以将游戏安装到<code>xxx/.steam/SteamApps/common</code>目录下，我这里是<code>/home/game/.steam/SteamApps/common</code></p><p>输入以下指令安装求生之路2</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置安装目录</span></span><br><span class="line">force_install_dir /home/game/.steam/SteamApps/common/Left4Dead2</span><br><span class="line"><span class="comment"># 匿名登录</span></span><br><span class="line">login anonymous</span><br><span class="line"><span class="comment"># 安装求生之路2，等待安装完成</span></span><br><span class="line">app_update 222860 validate</span><br><span class="line"><span class="comment"># 安装完成后退出steam终端</span></span><br><span class="line">quit</span><br></pre></td></tr></table></figure><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/game/l4d2-server/image-20230804155530954.png" alt="image-20230804155530954"></p><p>下载<a href="https://metamodsource.net/downloads.php?branch=stable">metamod</a>与<a href="https://www.sourcemod.net/downloads.php?branch=stable">sourcemod</a>，点击有图案的下载链接表示为最新版</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/game/l4d2-server/image-20230804155903285.png" alt="image-20230804155903285"></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/game/l4d2-server/image-20230804155921459.png" alt="image-20230804155921459"></p><p>将<code>metamod</code>与<code>sourcemod</code>添加到服务器中，将两个tar包上传到<code>/home/game/.steam/SteamApps/common/Left4Dead2/left4dead2</code>目录下</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/game/l4d2-server/image-20230804162325997.png" alt="image-20230804162325997"></p><p>解压后会将文件覆盖到<code>addons</code>与<code>cfg</code>文件夹，如果是使用的宝塔上传，记得给用户权限</p><p>找到<code>/home/game/.steam/SteamApps/common/Left4Dead2/left4dead2/addons/sourcemod/configs/admins_simple.ini</code>文件，在文件的末尾添加管理员</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/game/l4d2-server/image-20230804164432436.png" alt="image-20230804164432436"></p><p>下面两个目录很重要</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/game/l4d2-server/image-20230804160404409.png" alt="image-20230804160404409"></p><p>在&#96;&#96;路径下创建<code>server.cfg</code>服务器配置文件，并写入以下内容：</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">rcon<span class="built_in">_</span>password &quot;&quot; //在引号内填写远程管理密码，引号内不填即为不设密码</span><br><span class="line">sv<span class="built_in">_</span>password &quot;&quot; //在引号内填写服务器密码，引号内不填即为不设密码</span><br><span class="line">sv<span class="built_in">_</span>allow<span class="built_in">_</span>lobby<span class="built_in">_</span>connect<span class="built_in">_</span>only 0 //不允许从大厅选择组服务器来连接</span><br><span class="line">sv<span class="built_in">_</span>tags hidden //在服务器浏览列表的中隐藏（防止别人恶意攻击服务器）</span><br><span class="line">//coop合作；versus对抗；survival生还者；realism写实；scavenge清道夫</span><br><span class="line">sv<span class="built_in">_</span>gametypes &quot;coop,versus,survival,realism&quot; //设定服务器可用的游戏模式</span><br><span class="line">mp<span class="built_in">_</span>gamemode coop //设定当前游戏模式为合作战役</span><br><span class="line">z<span class="built_in">_</span>difficulty hard //游戏难度：easy简单；normal普通；hard高级；impossible专家</span><br><span class="line">sv<span class="built_in">_</span>region 4 //设定服务器地区为亚洲</span><br><span class="line">sv<span class="built_in">_</span>lan 0 //非局域网</span><br><span class="line">sv<span class="built_in">_</span>consistency 0 //关闭模型(MOD)冲突</span><br><span class="line">motd<span class="built_in">_</span>enabled 0 //进入游戏自动打开[今日消息]界面</span><br><span class="line">sv<span class="built_in">_</span>cheats 0 //关闭作弊</span><br></pre></td></tr></table></figure><p>在<code>/home/game/.steam/SteamApps/common/Left4Dead2</code>路径下创建<code>start.sh</code>脚本文件，并写入以下内容：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/home/game/.steam/SteamApps/common/Left4Dead2/srcds_run -game left4dead2 -insecure +hostport 27015 -condebug +map c1m2_streets +<span class="built_in">exec</span> server.cfg -nomaster -tickrate 30</span><br></pre></td></tr></table></figure><p>服务器需要开放对应端口，默认端口是<strong>27015</strong>，并且为<strong>UDP</strong>协议。</p><p>在终端输入<code>bash /home/game/.steam/SteamApps/common/Left4Dead2/start.sh</code>以开启服务器，出现**VAC secure mode disabled.**表示启动成功</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/game/l4d2-server/image-20230804161751268.png" alt="image-20230804161751268"></p><p>在求生之路2客户端终端，输入<code>connect [服务器ip]:[端口号]</code>，例：<code>connect 192.168.1.2:27015</code>，可进入服务器</p><p>如果你正确添加了管理员，管理员在游戏中可以在聊天框输入管理员指令，例如：<code>!admin</code>,<code>!map</code></p><p>在服务器终端输入<code>quit</code>可规范关闭服务器。</p><h2 id="更新应用"><a href="#更新应用" class="headerlink" title="更新应用"></a>更新应用</h2><p>更新应用其实与安装应用一样，比较不同的就是<strong>需要指定应用的目录</strong>。</p><p>例如，上一节指定的应用安装目录为<code>/home/game/.steam/SteamApps/common/Left4Dead2</code>，那么更新应用的指令就如下（以求生之路2为例）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入steamcmd终端</span></span><br><span class="line">steamcmd</span><br><span class="line"><span class="comment"># 指定需要更新的应用的安装目录</span></span><br><span class="line">force_install_dir /home/game/.steam/SteamApps/common/Left4Dead2</span><br><span class="line"><span class="comment"># 匿名登录</span></span><br><span class="line">login anonymous</span><br><span class="line"><span class="comment"># 更新求生之路2，等待安装完成</span></span><br><span class="line">app_update 222860 validate</span><br></pre></td></tr></table></figure><p>执行完成后，在steamcmd的终端使用<code>quit</code>指令退出就OK啦~</p><h2 id="服务器插件"><a href="#服务器插件" class="headerlink" title="服务器插件"></a>服务器插件</h2><p>可以参考<a href="/posts/e9f8c18b/" title="求生之路插件推荐">求生之路插件推荐</a></p><h2 id="后语"><a href="#后语" class="headerlink" title="后语"></a>后语</h2><p>特别感谢室友<a href="https://starisora.cn/">Starisora</a>提供的部分插件以及技术指导</p><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://www.bilibili.com/read/cv16824745">求生之路2服务器搭建（Linux-CentOS）</a></p><p><a href="https://developer.valvesoftware.com/wiki/SteamCMD:zh-cn#.E5.AE.89.E8.A3.85.E6.9D.A5.E8.87.AA.E8.BD.AF.E4.BB.B6.E4.BB.93.E5.BA.93.E7.9A.84.E8.BD.AF.E4.BB.B6.E5.8C.85">Steam 控制台客户端安装</a></p>]]></content>
      
      
      <categories>
          
          <category> 游戏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 服务器 </tag>
            
            <tag> 求生之路2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux常用命令</title>
      <link href="/posts/d0edc1ed/"/>
      <url>/posts/d0edc1ed/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>用于记录平时使用的命令，因为使用的Linux系统是<a href="https://releases.ubuntu.com/20.04/">Ubuntu20</a>，命令会不通用。</p><h2 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h2><p><strong>常用</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看当前目录</span></span><br><span class="line"><span class="built_in">pwd</span></span><br><span class="line"><span class="comment"># 切换用户</span></span><br><span class="line">su [用户名]</span><br><span class="line"><span class="comment"># 进入某个目录</span></span><br><span class="line"><span class="built_in">cd</span> [目录]</span><br></pre></td></tr></table></figure><p><strong>防火墙</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启防火墙</span></span><br><span class="line">ufw <span class="built_in">enable</span></span><br><span class="line"><span class="comment"># 禁用防火墙</span></span><br><span class="line">ufw <span class="built_in">disable</span></span><br><span class="line"><span class="comment"># 查看防火墙状态</span></span><br><span class="line">ufw status</span><br><span class="line"><span class="comment"># 添加规则</span></span><br><span class="line">ufw allow [端口]</span><br><span class="line"><span class="comment"># 删除已添加的规则</span></span><br><span class="line">ufw delete allow [端口]</span><br></pre></td></tr></table></figure><p><strong>监控</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 性能监控</span></span><br><span class="line">top</span><br><span class="line"><span class="comment"># 性能监控，需安装</span></span><br><span class="line">htop</span><br><span class="line"><span class="comment"># 查看进程</span></span><br><span class="line">ps -ef</span><br><span class="line"><span class="comment"># 监视虚拟内存、进程、CPU等，秒为单位</span></span><br><span class="line">vmstat &lt;间隔时间&gt;</span><br><span class="line"><span class="comment"># 用于监测系统的磁盘I/O性能，秒为单位，需安装</span></span><br><span class="line">iostat -d [间隔时间]</span><br></pre></td></tr></table></figure><p><strong>磁盘</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看磁盘分区</span></span><br><span class="line">fdisk -l</span><br><span class="line"><span class="comment"># 查看挂载点？</span></span><br><span class="line"><span class="built_in">df</span> -h</span><br></pre></td></tr></table></figure><p><strong>文件</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 新建文件</span></span><br><span class="line"><span class="built_in">touch</span> [文件名]</span><br><span class="line"><span class="comment"># 编辑文件</span></span><br><span class="line">vim [文件名]</span><br><span class="line"><span class="comment"># 删除文件</span></span><br><span class="line"><span class="built_in">rm</span> [文件名]</span><br><span class="line"><span class="comment"># 查找文件</span></span><br><span class="line">find [路径] -name [文件名]</span><br><span class="line"><span class="comment"># 使用locate，会创建数据库索引，使用前需要更新，需安装</span></span><br><span class="line">updatedb</span><br><span class="line">locate [文件名]</span><br><span class="line"><span class="comment"># 查找可执行文件、特定命令、源代码文件、帮助文档</span></span><br><span class="line">whereis [文件名]</span><br></pre></td></tr></table></figure><p><strong>用户</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建用户</span></span><br><span class="line">adduser [用户名]</span><br><span class="line"><span class="comment"># 为用户添加组</span></span><br><span class="line">usermod -aG [组名] [用户名]</span><br></pre></td></tr></table></figure><p><strong>组</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建组</span></span><br><span class="line">groupadd [组名]</span><br><span class="line"><span class="comment"># 创建组并指定组ID</span></span><br><span class="line">groupadd -g [组ID] [组名]</span><br><span class="line"><span class="comment"># 查看组是否存在，（就是查看配置文件中有没有这个组的记录）</span></span><br><span class="line">grep [组名] /etc/group</span><br></pre></td></tr></table></figure><p><strong>管理员权限</strong></p><p>先创建admin组，然后再给admin权限，并且使用管理员权限时不需要输入密码，使用<code>visudo</code>添加内容：</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%admin  ALL=(ALL:ALL) NOPASSWD: ALL</span></span><br></pre></td></tr></table></figure><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://www.runoob.com/linux/linux-command-manual.html">Linux命令大全|菜鸟教程</a></p>]]></content>
      
      
      <categories>
          
          <category> 知识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 服务器 </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>服务器搭建Frp内网穿透</title>
      <link href="/posts/4e458635/"/>
      <url>/posts/4e458635/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>最近开始玩儿服务器了，从最开始的<a href="https://www.aliyun.com/product/swas?spm=5176.8789780.J_3207526240.424.1c0845b5B7nu2U&scm=20140722.M_4691655._.V_1">阿里云轻量级服务器</a>到现在的<a href="https://cloud.tencent.com/product/lighthouse">腾讯云轻量级服务器</a>，从最开始的<code>2核1G</code>升级到后面的<code>2核4G</code>，对性能的需求越来越高。</p><p>要是一直这样砸钱升配置也太难受了，为了解决这个痛点，在百度上了解到了<a href="https://baike.baidu.com/item/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/8597835">内网穿透</a>这个技术，具体的实现我也不懂，咱们用别人的工具就行了，站在巨人的肩膀上嘛。</p><p>如果你想跟着本篇文章搭建内网穿透并能在公网访问，请确保你具备以下条件：</p><ul><li>一台带有公网IP的服务器</li><li>一台Windows系统的电脑（PS，其他系统的也行，配置是差不多的）</li><li>能够使用的域名（PS：如果服务器是国内的，则域名需要备案）</li></ul><h2 id="Frp"><a href="#Frp" class="headerlink" title="Frp"></a>Frp</h2><h3 id="是什么"><a href="#是什么" class="headerlink" title="是什么"></a>是什么</h3><p><code>Frp</code>是一种用于网络穿透的工具。”Frp”代表”Fast Reverse Proxy”，它允许用户通过在内部网络中设置一个服务器，访问位于防火墙后面或者在NAT网络中的设备。</p><p>简单来说，它可以帮助用户从外部网络访问内部网络中的服务或设备，同时绕过网络配置方面的限制。</p><p><code>Frp</code>可以用于远程访问、内网穿透、端口转发等场景，提供了一种简单、安全和灵活的方式来管理和访问网络设备和服务。（PS：ChatGPT说的）</p><p>内网穿透的工具有很多，也有一些免费的内网穿透服务，你不需要自己配置服务端，用别人的就行了，但是追求稳定，还是自己搭比较好。</p><p>根据我个人的使用体验，感觉<code>Frp</code>使用起来有点儿像微服务的注册中心，你需要穿透的内容就是一个服务，每个服务有不同的协议，例如：<code>http</code>、<code>tcp</code>、<code>udp</code>，这是最常用的三个。</p><p>传输层与应用层协议同时出现，应该是为了更好地管理应用层的协议，不太懂，反正你需要将它们注册到<code>Frp</code>的服务端。</p><h3 id="优缺点"><a href="#优缺点" class="headerlink" title="优缺点"></a>优缺点</h3><ul><li><p>解决高性能服务器需求，节约服务器成本，运算交给本地机器处理。</p></li><li><p>云服务器只负责数据传输，服务器性能瓶颈在于带宽的大小。</p></li><li><p>延迟翻一倍，如果搭建竞技游戏服务器不友好，例如我本地机器访问云服务器的延迟是40ms，那么穿透后的延迟即为80ms，根据实际情况会更高。</p></li></ul><h3 id="如何下载"><a href="#如何下载" class="headerlink" title="如何下载"></a>如何下载</h3><p><a href="https://github.com/fatedier/frp/releases">Frp官方下载地址</a>，需要下载系统对应的压缩包，下载最新的版本也是可以的，我这里下载的版本是<code>0.51.1</code>。</p><p><strong>Windows X86_64</strong>下载<code>frp_x.x.x_windwos_amd64.zip</code>，<strong>Linux X86_64</strong>下载<code>frp_x.x.x_linux_amd64.tar.gz</code>。</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/frp/image-20230808095357365.png" alt="image-20230808095357365"></p><h3 id="如何安装"><a href="#如何安装" class="headerlink" title="如何安装"></a>如何安装</h3><p>下面我将<code>Frp</code>的服务端类比为Java开发中微服务的注册中心，你需要穿透的内容类比为服务，例如：我的世界服务器、博客网站。</p><p><code>Frp</code>的压缩包是包含服务端与客户端的，服务端即<code>frps</code>，客户端即<code>frpc</code>，你可以将不需要的那端删除，也可以保留它们。</p><h4 id="服务端"><a href="#服务端" class="headerlink" title="服务端"></a>服务端</h4><p>首先需要<strong>开放对应的端口</strong></p><p>我这里开放了<code>7000:tcp/udp</code>、<code>10000:tcp</code>、<code>7500:tcp</code>、<code>27010-27020:udp</code>、<code>25560-25570:tcp</code>，解释如下：</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">7000:tcp/udp<span class="params">#</span> 服务注册的端口，我这里开放了tcp协议与udp协议，应该是只用开放tcp</span><br><span class="line">10000:tcp<span class="params">#</span> Http服务的端口，可以想象成Nginx代理的那个端口，它会监测你的域名，然后转发到对应的服务</span><br><span class="line">7500:tcp<span class="params">#</span> 注册中心面板的端口，参考阿里云的Nacos</span><br><span class="line">27010-27020:udp <span class="params">#</span> udp协议应用端口，你看着来，这里是我的应用</span><br><span class="line">25560-25570:tcp <span class="params">#</span> tcp协议应用的端口，（同上）</span><br></pre></td></tr></table></figure><p>将tar.gz包解压在软件目录，我这里解压在了<code>/opt</code>，进入<code>/opt/frp_x.x.x_linux_amd64</code>目录，编辑<code>frps.ini</code>，内容如下（使用时可能需要删除注释）：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[common]</span></span><br><span class="line"><span class="attr">bind_port</span> = <span class="number">7000</span> <span class="comment"># frp注册端口</span></span><br><span class="line"><span class="attr">vhost_http_port</span> = <span class="number">10000</span> <span class="comment"># http服务端口</span></span><br><span class="line"><span class="attr">dashboard_port</span> = <span class="number">7500</span> <span class="comment"># 面板端口</span></span><br><span class="line"><span class="attr">dashboard_user</span> = admin <span class="comment"># 面板用户名</span></span><br><span class="line"><span class="attr">dashboard_pwd</span> = admin <span class="comment"># 面板密码</span></span><br><span class="line"><span class="attr">max_pool_count</span> = <span class="number">10</span></span><br><span class="line"><span class="attr">log_file</span> = /opt/frp_0.<span class="number">51.1</span>_linux_amd64 <span class="comment"># 日志存放的位置</span></span><br><span class="line"><span class="attr">log_level</span> = info <span class="comment"># 日志记录级别</span></span><br><span class="line"><span class="attr">log_max_days</span> = <span class="number">3</span> <span class="comment"># 日志最大保存时间</span></span><br><span class="line"><span class="attr">token</span> = token <span class="comment"># 连接令牌，需要与Frp客户端一致</span></span><br></pre></td></tr></table></figure><p><strong>以服务的形式挂后台，非必须</strong>，但是每次你系统都需要手动执行<code>/home/frp_0.27.0_linux_amd64/frps -c /home/frp_0.27.0_linux_amd64/frps.ini</code>命令。</p><p>在目录 <code>/etc/systemd/system</code> 下新建文件名为 <code>frps.service</code> 的文件，编辑内容如下：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Unit]</span></span><br><span class="line"><span class="attr">Description</span>=Frp Server Service</span><br><span class="line"><span class="attr">After</span>=network.target</span><br><span class="line"></span><br><span class="line"><span class="section">[Service]</span></span><br><span class="line"><span class="attr">Type</span>=simple</span><br><span class="line"><span class="attr">User</span>=nobody</span><br><span class="line"><span class="attr">Restart</span>=<span class="literal">on</span>-failure</span><br><span class="line"><span class="attr">RestartSec</span>=<span class="number">5</span>s</span><br><span class="line"><span class="attr">ExecStart</span>=/home/frp_0.<span class="number">27.0</span>_linux_amd64/frps -c /home/frp_0.<span class="number">27.0</span>_linux_amd64/frps.ini</span><br><span class="line"></span><br><span class="line"><span class="section">[Install]</span></span><br><span class="line"><span class="attr">WantedBy</span>=multi-user.target</span><br></pre></td></tr></table></figure><p>（PS： <strong>ExecStart</strong> &#x3D; <code>frps所在的目录/frps</code> -c <code>frps.ini所在的目录/frps.ini</code>）</p><p><code>frps.service</code>文件创建成功后，服务的管理指令如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">enable</span> frps <span class="comment">#设置开机启动</span></span><br><span class="line">systemctl start frps <span class="comment">#启动</span></span><br><span class="line">systemctl stop frps <span class="comment">#停止</span></span><br><span class="line">systemctl status frps <span class="comment">#状态</span></span><br></pre></td></tr></table></figure><p>输入<code>sudo systemctl start frps</code>启动服务，并使用<code>systemctl status frps</code>查看服务运行状态，输入如下表示启动成功：</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/frp/image-20230808103236295.png" alt="image-20230808103236295"></p><h4 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h4><p>在配置客户端之前请确保你的服务端的配置文件是按照上面的模板配置的，否则我也不知道会出现什么问题。</p><p>将zip文件解压到你的软件目录下，进入解压后的目录，找到<code>frpc.ini</code>文件，编辑内容如下（PS：使用时记得要删除注释，反正我的电脑得删）：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[common]</span></span><br><span class="line"><span class="attr">server_addr</span> = x.x.x.x <span class="comment"># 服务器ip地址，也可以为域名</span></span><br><span class="line"><span class="attr">server_port</span> = <span class="number">7000</span><span class="comment"># frp注册端口，与服务端配置对应</span></span><br><span class="line"><span class="attr">token</span> = token<span class="comment"># 连接令牌，需要与Frp服务端一致</span></span><br><span class="line"></span><br><span class="line"><span class="section">[test]</span></span><br><span class="line"><span class="attr">type</span> = http<span class="comment"># 服务类型</span></span><br><span class="line"><span class="attr">local_ip</span> = <span class="number">127.0</span>.<span class="number">0.1</span> <span class="comment"># 本地服务主机的ip（PS：只要是你本机局域网能访问的IP都行，例如192.168.114.129，虚拟机也是可以的）</span></span><br><span class="line"><span class="attr">local_port</span> = <span class="number">3000</span> <span class="comment"># 本地http服务的端口</span></span><br><span class="line"><span class="attr">custom_domains</span> = test.frp.xxx.xxx <span class="comment"># 穿透后的http访问域名，例：test.frp.baidu.com</span></span><br><span class="line"></span><br><span class="line"><span class="section">[NAIFU]</span></span><br><span class="line"><span class="attr">type</span> = http</span><br><span class="line"><span class="attr">local_ip</span> = <span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line"><span class="attr">local_port</span> = <span class="number">6969</span></span><br><span class="line"><span class="attr">custom_domains</span> = naifu.frp.xxx.xxx</span><br><span class="line"></span><br><span class="line"><span class="section">[mc-classmate-1]</span></span><br><span class="line"><span class="attr">type</span> = tcp</span><br><span class="line"><span class="attr">local_ip</span> = <span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line"><span class="attr">local_port</span> = <span class="number">25560</span> <span class="comment"># 本地服务端口 </span></span><br><span class="line"><span class="attr">remote_port</span> = <span class="number">25560</span> <span class="comment"># 服务端端口</span></span><br><span class="line"></span><br><span class="line"><span class="section">[mc-classmate-2]</span></span><br><span class="line"><span class="attr">type</span> = tcp</span><br><span class="line"><span class="attr">local_ip</span> = <span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line"><span class="attr">local_port</span> = <span class="number">25561</span></span><br><span class="line"><span class="attr">remote_port</span> = <span class="number">25561</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 穿透我的求生之路服务器</span></span><br><span class="line"><span class="section">[l4d2-1]</span></span><br><span class="line"><span class="attr">type</span> = udp</span><br><span class="line"><span class="attr">local_ip</span> = <span class="number">192.168</span>.<span class="number">114.135</span></span><br><span class="line"><span class="attr">local_port</span> = <span class="number">27015</span></span><br><span class="line"><span class="attr">remote_port</span> = <span class="number">27015</span></span><br></pre></td></tr></table></figure><p>除了<code>[common]</code>，其他的方括号你可以类比为服务名（反正我是这么想象的），方括号节点下的内容就是该服务的配置了，<code>http</code>服务有点儿特殊，需要绑定域名，绑定域名需要于本篇文章后面的域名配置配合使用。</p><p>当然，我的三级域名名字与应用名称相同只是为了好区分，你也可以不一样，上面的配置文件表示配置了两个http服务，两个tcp服务与一个udp服务， 其中tcp服务与udp服务的配置相似。</p><p><strong>如果你一直按照本篇文章的步骤执行，请务必进行域名配置</strong>。</p><p><strong>需要开放对应的端口</strong>，例如<code>udp</code>服务中使用了远程的27015端口，那么你需要开放服务器的27015端口，并确保你本地的服务已经启动。</p><h2 id="域名配置"><a href="#域名配置" class="headerlink" title="域名配置"></a>域名配置</h2><p><code>Frp</code>穿透Http的服务有些特殊，需要配置域名，如果你是按照本文配置的<code>Frp</code>服务端与客户端，那么配合接下来的域名配置，会特别方便，并且访问服务时不需要指定端口。</p><h3 id="域名解析"><a href="#域名解析" class="headerlink" title="域名解析"></a>域名解析</h3><p>需要创建两个解析，即<code>frp</code>与<code>*.frp</code>，其中<code>frp</code>指向服务器IP，<code>*.frp</code>指向<code>frp.xxx.xxx</code>。</p><p>这里我将<code>frp.xxx.xxx</code>作为我的注册中心面板访问域名，<code>*.frp.xxx.xxx</code>作为http穿透服务的域名。</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/frp/image-20230802160300847.png" alt="image-20230802160300847"></p><h3 id="Nginx代理"><a href="#Nginx代理" class="headerlink" title="Nginx代理"></a>Nginx代理</h3><p>当然，配置了域名还是需要带端口使用，为了不带端口使用，需要用到Nginx的反向代理，因为服务器使用了<a href="https://www.bt.cn/new/index.html">宝塔面板</a>，这里就一键安装了。</p><p>在Nginx主配置文件的根节点下添加以下指令，解析自定义的代理规则：</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">include</span> /www/server/nginx/conf/product/<span class="regexp">*.conf</span>;</span><br></pre></td></tr></table></figure><p>在<code>/www/server/nginx/conf/product/</code>目录下创建<code>frp.conf</code>文件，并写入以下内容：</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># frp面板</span></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>  <span class="number">80</span>;</span><br><span class="line">    <span class="comment"># 填写你的二级解析域名</span></span><br><span class="line">    <span class="attribute">server_name</span> frp.xxx.xxx;</span><br><span class="line">    </span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="attribute">proxy_pass</span>  http://127.0.0.1:7500/;</span><br><span class="line">        <span class="attribute">index</span> index.html index.htm;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Real-Ip <span class="variable">$remote_addr</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$remote_addr</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attribute">access_log</span> /www/wwwlogs/nginx/product/frp.log;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># frp-http</span></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>  <span class="number">80</span>;</span><br><span class="line">    <span class="comment"># 填写你的三级泛解析</span></span><br><span class="line">    <span class="attribute">server_name</span> <span class="regexp">*.frp.xxx.xxx</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="attribute">proxy_pass</span>  http://127.0.0.1:10000/;</span><br><span class="line">        <span class="attribute">index</span> index.html index.htm;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Real-Ip <span class="variable">$remote_addr</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$remote_addr</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attribute">access_log</span> /www/wwwlogs/nginx/product/test.log;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>配置完成后，确保你的<code>Frp</code>服务端与客户端都在运行，本地服务也启动成功。</p><p>随后重载Nginx配置，访问你在客户端的<code>frpc.ini</code>文件中配置的<code>custom_domains</code>下的域名，看是否穿透成功。</p><h2 id="后语"><a href="#后语" class="headerlink" title="后语"></a>后语</h2><p>本篇博文用于记录<code>Frp</code>的配置步骤，防止遗忘，方便后续换机能够快速搭建。根据个人习惯对其他博主的配置步骤进行了整合。</p><p>如果博主的理解有误，可以在评论区指出，相互学习！</p><h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="https://gofrp.org/zh-cn/docs/">Frp文档</a></p><p><a href="https://www.cnblogs.com/sanrenblog/p/15779781.html">云服务器搭建Frp服务（超详细）</a></p><p><a href="https://blog.csdn.net/qq_43605227/article/details/120190673">配置域名访问及Nginx（命令&#x2F;宝塔）</a></p><p><a href="https://blog.csdn.net/qq_41656369/article/details/114589266">【FRP】Frp内网穿透 + Nginx域名无端口访问（一）</a></p>]]></content>
      
      
      <categories>
          
          <category> 软件配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 服务器 </tag>
            
            <tag> Frp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用Docker搭建MC服务器</title>
      <link href="/posts/bd124d01/"/>
      <url>/posts/bd124d01/</url>
      
        <content type="html"><![CDATA[<h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><p>此文档只限于将已有的<strong>纯净服务端</strong>移植到Docker容器中。</p><h2 id="创建镜像"><a href="#创建镜像" class="headerlink" title="创建镜像"></a>创建镜像</h2><p>为了降低服务器的空间占用，容器使用的JDK为本机JDK，需要自行挂载。</p><p>ubuntu下安装JDK17</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"><span class="built_in">sudo</span> apt install openjdk-17-jdk</span><br></pre></td></tr></table></figure><p>安装完成后使用<code>java -version</code>指令进行验证</p><h3 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h3><p>在<code>/home/game/Minecraft/docker</code>目录下创建<code>Dockerfile</code>文件，并写入以下内容：</p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> ubuntu</span><br><span class="line"><span class="comment"># 设置作者</span></span><br><span class="line"><span class="keyword">MAINTAINER</span> InsectMk&lt;makun_ing@<span class="number">126</span>.com&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置java环境变量</span></span><br><span class="line"><span class="keyword">ENV</span> JAVA_HOME=/usr/local/jdk-<span class="number">17.0</span>.<span class="number">8</span></span><br><span class="line"><span class="keyword">ENV</span> PATH=$PATH:$JAVA_HOME/bin</span><br><span class="line"><span class="keyword">ENV</span> PATH $JAVA_HOME/bin:$PATH</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建挂载点</span></span><br><span class="line"><span class="keyword">VOLUME</span><span class="language-bash"> /usr/local/survival-friends</span></span><br><span class="line"><span class="keyword">VOLUME</span><span class="language-bash"> /usr/local/jdk-17.0.8</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置进入时的默认工作目录</span></span><br><span class="line"><span class="keyword">ENV</span> MYPATH /usr/local/survival-friends</span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> <span class="variable">$MYPATH</span> </span></span><br><span class="line"></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">25565</span></span><br><span class="line"><span class="comment"># 设置JVM最大（Xmx）内存与最小（Xms）内存为1G</span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> java -Xmx1024M -Xms1024M -jar minecraft_server_1.20.1.jar nogui</span></span><br></pre></td></tr></table></figure><p>其中，<code>/usr/local/survival-friends</code>为容器中你的存档的根目录，<code>/usr/local/jdk-17.0.8</code>为你容器中的的JDK目录，这两个目录都需要从宿主机挂载。</p><p>存档文件夹的内容大致如下（纯净服）：</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/game/minecraft-docker/image-20230801171002742.png" alt="image-20230801171002742"></p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo docker <span class="keyword">run</span><span class="language-bash"> \</span></span><br><span class="line"><span class="language-bash">-it -d \</span></span><br><span class="line"><span class="language-bash">--name minecraft-survival-friends \</span></span><br><span class="line"><span class="language-bash">-v /home/game/Minecraft/docker/survival-friends:/usr/local/survival-friends \</span></span><br><span class="line"><span class="language-bash">-v /opt/java/jdk-17.0.8:/usr/local/jdk-17.0.8 \</span></span><br><span class="line"><span class="language-bash">-p 25565:25565/tcp -p 25565:25565/udp \</span></span><br><span class="line"><span class="language-bash">minecraft-survival-friends:0.1</span></span><br></pre></td></tr></table></figure><p>其中，<code>/usr/local/survival-friends</code>替换为你宿主机存档的根目录，<code>/usr/local/jdk-17.0.8</code>替换为你宿主机的JDK目录。</p><p><code>-p</code>参数指定映射的端口，<code>25565</code>为我的世界服务端的默认端口，可以只暴露tcp端口，左边的端口表示宿主机的端口。</p><p>运行成功会返回一个镜像ID，运行<code>sudo docker ps -a</code>，看是否运行成功，带<code>up</code>表示运行成功。</p><p>运行<code>sudo docker attach minecraft-survival-friends</code>，能够重新进入<strong>Minecraft服务端</strong>终端，退出终端使用<code>ctrl</code>+<code>p</code>+<code>q</code>，否则会使终端终止。</p><p>运行<code>sudo docker exec -it minecraft-survival-friends bash</code>，能够进入<strong>ubuntu终端</strong>，退出可以直接使用<code>exit</code>指令。</p><p>​                   </p>]]></content>
      
      
      <categories>
          
          <category> 游戏 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 服务器 </tag>
            
            <tag> 我的世界 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker</title>
      <link href="/posts/f5f9fa9b/"/>
      <url>/posts/f5f9fa9b/</url>
      
        <content type="html"><![CDATA[<h2 id="是什么"><a href="#是什么" class="headerlink" title="是什么"></a>是什么</h2><p><a href="https://www.docker.com/">Docker</a>是一个流行的容器化平台，用于构建、部署和管理应用程序。它允许开发人员将应用程序及其所有依赖项打包到一个称为容器的独立单元中。这个容器可以在任何支持Docker的环境中运行，包括开发人员的个人计算机、测试环境和生产环境。</p><p>Docker利用操作系统级虚拟化技术（例如Linux容器）来提供轻量级、可移植和隔离的执行环境。使用Docker，开发人员可以创建一个独立的容器，其中包含应用程序的代码、运行时环境、系统工具和所有依赖项。这个容器可以在任何地方运行，而无需担心环境差异或依赖项冲突。</p><p>Docker具有许多优点，包括：</p><ul><li>简化应用程序部署：使用Docker可以轻松地在不同环境中部署应用程序，而无需再次配置和安装依赖项。</li><li>快速启动和停止：容器可以在几秒钟内启动和停止，提高了开发和测试的效率。</li><li>资源隔离：每个容器拥有自己的文件系统、进程空间和网络接口，确保容器之间的应用程序隔离和安全性。</li><li>可扩展性：通过使用Docker容器，开发人员可以轻松地扩展应用程序，根据需要添加或删除容器实例。</li><li>生态系统支持：Docker拥有丰富的生态系统，提供了许多现成的容器镜像和工具，使开发人员能够快速构建和部署应用程序。</li></ul><p>总之，Docker提供了一种简单、灵活和可移植的方式来封装和交付应用程序，帮助开发人员加快开发周期，提高应用程序的可移植性和可伸缩性。</p><h2 id="如何安装"><a href="#如何安装" class="headerlink" title="如何安装"></a>如何安装</h2><p><a href="https://docs.docker.com/engine/install/">官方文档</a>，<a href="https://docs.docker.com/engine/install/ubuntu/">Ubuntu安装</a></p><p>选择你对应的系统，查看安装步骤，这里演示<strong>Ubuntu</strong>系统</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/knowledge/docker/image-20230808144357114.png" alt="image-20230808144357114"></p><p>卸载Docker相关的包</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> pkg <span class="keyword">in</span> docker.io docker-doc docker-compose podman-docker containerd runc; <span class="keyword">do</span> <span class="built_in">sudo</span> apt-get remove <span class="variable">$pkg</span>; <span class="keyword">done</span></span><br></pre></td></tr></table></figure><h3 id="设置Docker存储库"><a href="#设置Docker存储库" class="headerlink" title="设置Docker存储库"></a>设置Docker存储库</h3><p>允许apt通过HTTPS使用存储库</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get update</span><br><span class="line"><span class="built_in">sudo</span> apt-get install ca-certificates curl gnupg</span><br></pre></td></tr></table></figure><p>添加Docker官方GPG密钥（不知道啥意思）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> install -m 0755 -d /etc/apt/keyrings</span><br><span class="line">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | <span class="built_in">sudo</span> gpg --dearmor -o /etc/apt/keyrings/docker.gpg</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">chmod</span> a+r /etc/apt/keyrings/docker.gpg</span><br></pre></td></tr></table></figure><p>设置远程仓库</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> \</span><br><span class="line">  <span class="string">&quot;deb [arch=&quot;</span>$(dpkg --print-architecture)<span class="string">&quot; signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \</span></span><br><span class="line"><span class="string">  &quot;</span>$(. /etc/os-release &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$VERSION_CODENAME</span>&quot;</span>)<span class="string">&quot; stable&quot;</span> | \</span><br><span class="line">  <span class="built_in">sudo</span> <span class="built_in">tee</span> /etc/apt/sources.list.d/docker.list &gt; /dev/null</span><br></pre></td></tr></table></figure><p>更新包索引</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get update</span><br></pre></td></tr></table></figure><h3 id="安装Docker引擎"><a href="#安装Docker引擎" class="headerlink" title="安装Docker引擎"></a>安装Docker引擎</h3><p>安装最新版，包含<code>Docker</code>、<code>containerd</code>和<code>Docker Compose</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</span><br></pre></td></tr></table></figure><p>运行一个镜像测试是否安装成功，它将会在控制台打印一段话</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> docker run hello-world</span><br></pre></td></tr></table></figure><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/knowledge/docker/image-20230808150946420.png" alt="image-20230808150946420"></p><h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><h3 id="服务"><a href="#服务" class="headerlink" title="服务"></a>服务</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动Docker服务</span></span><br><span class="line">systemctl start docker</span><br><span class="line"><span class="comment"># 关闭Docker服务</span></span><br><span class="line">systemctl stop docker</span><br><span class="line"><span class="comment"># 查看Docker服务状态</span></span><br><span class="line">systemctl status docker</span><br><span class="line"><span class="comment"># 重启Docker服务</span></span><br><span class="line">systemctl restart docker</span><br><span class="line"><span class="comment"># 开启Docker服务的开机启动</span></span><br><span class="line">systemctl <span class="built_in">enable</span> docker</span><br><span class="line"><span class="comment"># 关闭Docker服务的开机启动</span></span><br><span class="line">systemctl <span class="built_in">disable</span> docker</span><br></pre></td></tr></table></figure><h3 id="镜像"><a href="#镜像" class="headerlink" title="镜像"></a>镜像</h3><p>镜像标签，例如Hello-World:0.1，格式为[镜像名]:[标签]，不带标签即为最新版本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检索仓库中的镜像</span></span><br><span class="line">docker search &lt;--limite [限制多少行]&gt; &lt;--filter [<span class="string">&quot;筛选条件&quot;</span>]&gt; [镜像名称]</span><br><span class="line"><span class="comment"># 查看本地所有的镜像</span></span><br><span class="line">docker images</span><br><span class="line"><span class="comment"># 删除一个镜像</span></span><br><span class="line">docker rmi [镜像标签]/[镜像ID]</span><br><span class="line"><span class="comment"># 从远程拉取镜像</span></span><br><span class="line">docker pull [镜像标签]</span><br></pre></td></tr></table></figure><h3 id="容器"><a href="#容器" class="headerlink" title="容器"></a>容器</h3><p>相同指令的参数可以任意组合使用，这里只演示部分组合</p><p><strong>创建容器</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 运行一个镜像，并为容器命名，其中命名的=符号可以换为空格</span></span><br><span class="line">docker run --name=[容器名称] [镜像标签]/[镜像ID]</span><br><span class="line"><span class="comment"># 运行一个镜像并为容器指定TCP端口映射，并挂在后台运行</span></span><br><span class="line">docker run -d -p [本机端口]:[容器端口]/tcp [镜像名称]/[镜像ID]</span><br><span class="line"><span class="comment"># 运行一个镜像并创建基本的输入输出流，指定UDP端口映射，并给出一个终端，使用`ctrl+p+q`退出可以保留终端</span></span><br><span class="line">docker run -it -p [本机端口]:[容器端口]/udp [镜像标签]/[镜像ID] bash</span><br><span class="line"><span class="comment"># 运行一个镜像，并映射目录，:rw表示双向绑定，--privileged=true是赋予容器足够高的权限操作本地机器</span></span><br><span class="line">docker run -d -v [本机目录]:[容器目录]:rw --privileged=<span class="literal">true</span> [镜像标签]/[镜像ID]</span><br><span class="line"><span class="comment"># 将某个容器的卷共享给此容器</span></span><br><span class="line">docker run -it --privileged=ture --volumes-from [容器名称]/[容器ID] --name [容器名称] [镜像标签]/[镜像ID]</span><br></pre></td></tr></table></figure><p><strong>管理容器</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 重新运行一个被停掉的容器</span></span><br><span class="line">docker start [容器名称]/[容器ID]</span><br><span class="line"><span class="comment"># 正常关闭一个容器</span></span><br><span class="line">docker top [容器名称]/[容器ID]</span><br><span class="line"><span class="comment"># 强制关闭一个容器</span></span><br><span class="line">docker <span class="built_in">kill</span> [容器名称]/[容器ID]</span><br><span class="line"><span class="comment"># 删除一个容器</span></span><br><span class="line">docker <span class="built_in">rm</span> [容器名称]/[容器ID]</span><br><span class="line"><span class="comment"># 将容器打包成镜像</span></span><br><span class="line">docker commit [容器ID]/[镜像标签]</span><br><span class="line"><span class="comment"># 重新进入容器，并开启新的终端，使用`ctrl+p+q`退出可以保留终端</span></span><br><span class="line">docker <span class="built_in">exec</span> -it [容器名称]/[容器ID]  bash</span><br><span class="line"><span class="comment"># 重新进入容器的终端，使用`ctrl+p+q`退出可以保留终端</span></span><br><span class="line">docker attach -it [容器名称]/[容器ID]</span><br></pre></td></tr></table></figure><p><strong>查看容器</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看正在运行的容器</span></span><br><span class="line">docker ps</span><br><span class="line"><span class="comment"># 查看所有的容器，包括已经被关闭的容器</span></span><br><span class="line">docker ps -a</span><br><span class="line"><span class="comment"># 查看容器的详细信息</span></span><br><span class="line">docker inspect [容器名称]/[容器ID]</span><br></pre></td></tr></table></figure><h3 id="安装软件"><a href="#安装软件" class="headerlink" title="安装软件"></a>安装软件</h3><h4 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h4><p>挂载数据卷，暴露端口，指定root用户的密码，并在后台运行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line">-p 3306:3306 \</span><br><span class="line">--privileged=<span class="literal">true</span> \</span><br><span class="line">-v [本机目录]:/var/log/mysql \</span><br><span class="line">-v [本机目录]:/var/lib/mysql \</span><br><span class="line">-v [本机目录]:/etc/mysql/conf.d \</span><br><span class="line">-e MYSQL_ROOT-PASSWORD=[root密码] \</span><br><span class="line">--name [容器名] \</span><br><span class="line">[mysql镜像标签]</span><br></pre></td></tr></table></figure><h4 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h4><p>挂载数据卷，暴露端口，启动服务时使用自定义的配置文件，并在后台运行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line">-p 6379:6379 \</span><br><span class="line">--name [容器名] \</span><br><span class="line">--privileged=<span class="literal">true</span> \</span><br><span class="line">-v [本机目录].conf:/etc/redis/redis.conf \</span><br><span class="line">-v [本机目录]:/data \</span><br><span class="line">[redis镜像标签] \</span><br><span class="line">redis-server /etc/redis/redis.conf</span><br></pre></td></tr></table></figure><h2 id="虚悬镜像"><a href="#虚悬镜像" class="headerlink" title="虚悬镜像"></a>虚悬镜像</h2><p>没有名字与标签的镜像，一般在构建镜像或者删除镜像操作不当时出现</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看所有的虚悬镜像</span></span><br><span class="line">docker image <span class="built_in">ls</span> -f dangling=<span class="literal">true</span></span><br><span class="line"><span class="comment"># 删除所有的虚悬镜像</span></span><br><span class="line">docker image prune</span><br></pre></td></tr></table></figure><h2 id="Docker网络"><a href="#Docker网络" class="headerlink" title="Docker网络"></a>Docker网络</h2><p>目前了解到的Docker网络有（不懂网络…）：</p><ol><li>桥接网络</li><li>主机网络</li><li>空白网络</li><li>自定义网络</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看所有的网络</span></span><br><span class="line">docker network <span class="built_in">ls</span></span><br><span class="line"><span class="comment"># 创建网络，默认为桥接</span></span><br><span class="line">docker network create [网络名称]</span><br><span class="line"><span class="comment"># 删除一个网络</span></span><br><span class="line">docker network <span class="built_in">rm</span> [网络名称]/[网络ID]</span><br><span class="line"><span class="comment"># 查看网络描述</span></span><br><span class="line">docker network inspect [网络名称]</span><br><span class="line"><span class="comment"># 创建容器时指定网络</span></span><br><span class="line">docker run --name [容器名] -d --network [网络名] -p [本机端口]:[容器端口] [镜像标签]/[镜像ID]</span><br></pre></td></tr></table></figure><h2 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h2><p><a href="https://www.runoob.com/docker/docker-dockerfile.html">DockerFile|菜鸟教程</a></p><p>用于制作Docker镜像的文件，基本步骤如下：</p><ol><li>创建<code>Dockerfile</code>文件</li><li>编写<code>Dockerfile</code>的逻辑，并在当前目录下配置需要的文件或目录</li><li>在当前目录下执行<code>docker build -t [新镜像标签] .</code>，注意命令的最后有个<code>.</code>，表示当前目录</li></ol><h2 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h2><h3 id="Docker-Compose"><a href="#Docker-Compose" class="headerlink" title="Docker-Compose"></a>Docker-Compose</h3><p><a href="https://docs.docker.com/compose/install/">官网文档</a>，<a href="https://www.runoob.com/docker/docker-compose.html">菜鸟教程</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装</span></span><br><span class="line"><span class="built_in">sudo</span> apt-get update</span><br><span class="line"><span class="built_in">sudo</span> apt-get install docker-compose-plugin</span><br><span class="line"><span class="comment"># 查看版本号</span></span><br><span class="line">docker compose version</span><br><span class="line"><span class="comment"># 卸载</span></span><br><span class="line"><span class="built_in">sudo</span> apt-get remove docker-compose-plugin</span><br></pre></td></tr></table></figure><p><strong>Compose常用命令</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">docker-compose -h                           <span class="comment"># 查看帮助</span></span><br><span class="line">docker-compose up                           <span class="comment"># 启动所有docker-compose服务</span></span><br><span class="line">docker-compose up -d                        <span class="comment"># 启动所有docker-compose服务并后台运行</span></span><br><span class="line">docker-compose down                         <span class="comment"># 停止并删除容器、网络、卷、镜像。</span></span><br><span class="line">docker-compose <span class="built_in">exec</span> [yml里面的服务<span class="built_in">id</span>]         <span class="comment"># 进入容器实例内部  docker-compose exec docker-compose.yml文件中写的服务id /bin/bash</span></span><br><span class="line">docker-compose ps                      <span class="comment"># 展示当前docker-compose编排过的运行的所有容器</span></span><br><span class="line">docker-compose top                     <span class="comment"># 展示当前docker-compose编排过的容器进程 </span></span><br><span class="line">docker-compose logs [yml里面的服务<span class="built_in">id</span>]     <span class="comment"># 查看容器输出日志</span></span><br><span class="line">docker-compose config     <span class="comment"># 检查配置</span></span><br><span class="line">docker-compose config -q  <span class="comment"># 检查配置，有问题才有输出</span></span><br><span class="line">docker-compose restart   <span class="comment"># 重启服务</span></span><br><span class="line">docker-compose start     <span class="comment"># 启动服务</span></span><br><span class="line">docker-compose stop      <span class="comment"># 停止服务</span></span><br></pre></td></tr></table></figure><p>yaml配置实例</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># yaml 配置实例</span></span><br><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">microService:</span></span><br><span class="line">  <span class="attr">image:</span> [<span class="string">镜像标签</span>]</span><br><span class="line">  <span class="attr">container_name:</span> [<span class="string">容器名</span>]</span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;6001:6001&quot;</span></span><br><span class="line">  <span class="attr">volumes:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">/app/microService:/data</span></span><br><span class="line">  <span class="attr">networks:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">xxx</span></span><br><span class="line">  <span class="attr">depends_on:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">redis</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">mysql</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">  <span class="attr">image:</span> [<span class="string">镜像标签</span>]</span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;6379:6379&quot;</span></span><br><span class="line">  <span class="attr">volumes:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">/app/redis/redis.conf:/etc/redis/redis.conf</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">/app/redis/data:/data</span></span><br><span class="line">  <span class="attr">networks:</span></span><br><span class="line">  <span class="bullet">-</span> [<span class="string">网络名称</span>]</span><br><span class="line">  <span class="attr">command:</span> <span class="string">redis-server</span> <span class="string">/etc/redis/redis.conf</span></span><br><span class="line">  </span><br><span class="line">  <span class="attr">mysql:</span></span><br><span class="line">  <span class="attr">image:</span> [<span class="string">镜像标签</span>]</span><br><span class="line">  <span class="attr">environment:</span></span><br><span class="line">  <span class="attr">MYSQL_ROOT_PASSWORD:</span> <span class="string">&#x27;[root密码]&#x27;</span></span><br><span class="line">  <span class="attr">MYSQL_ALLOW_EMPTY_PASSWORD:</span> <span class="string">&#x27;no&#x27;</span></span><br><span class="line">  <span class="attr">MYSQL_DATABASE:</span> <span class="string">&#x27;xxx&#x27;</span></span><br><span class="line">  <span class="attr">MYSQL_USER:</span> <span class="string">&#x27;xxx&#x27;</span></span><br><span class="line">  <span class="attr">MYSQL_PASSWORD:</span> <span class="string">&#x27;xxx&#x27;</span></span><br><span class="line">  <span class="attr">ports:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;3306:3306&quot;</span></span><br><span class="line">  <span class="attr">volumes:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">/app/mysql/db:/var/lib/mysql</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">/app/mysql/conf/my.cnf:/etc/my.cnf</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">/app/mysql/init:/docker-entrypoint-initdb.d</span></span><br><span class="line">  <span class="attr">networks:</span></span><br><span class="line">  <span class="bullet">-</span> [<span class="string">网络名称</span>]</span><br><span class="line">  <span class="attr">command:</span> <span class="string">--default-authentication-plugin-mysql_native_password</span> <span class="comment"># 解决外部无法访问</span></span><br><span class="line"></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">[<span class="string">网络名称</span>]<span class="string">:</span></span><br></pre></td></tr></table></figure><h3 id="Portainer"><a href="#Portainer" class="headerlink" title="Portainer"></a>Portainer</h3><p>Docker轻量级图形化工具，web版，<a href="https://www.portainer.io/">官网在这里</a>。</p><h3 id="Docker容器监控"><a href="#Docker容器监控" class="headerlink" title="Docker容器监控"></a>Docker容器监控</h3><p><a href="https://github.com/google/cadvisor">CAdvisor</a>+<a href="https://www.influxdata.com/db/">InfluxDB</a>+<a href="https://grafana.com/zh-cn/grafana/">Grafana</a>，与Portainer相比，这个更为重量级。</p><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a href="https://blog.csdn.net/qq_44797987/article/details/112681224">Docker 配置国内源加速(2023&#x2F;05&#x2F;14)</a></p><p><a href="https://www.cnblogs.com/Cherry-Linux/p/9144650.html"><a href="https://www.cnblogs.com/Cherry-Linux/p/9144650.html">使用cAdvisor+Influxdb+Grafana监控系统</a></a></p>]]></content>
      
      
      <categories>
          
          <category> 知识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu搭建QQ消息提醒机器人</title>
      <link href="/posts/144bac1a/"/>
      <url>/posts/144bac1a/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>之前一直使用的是<a href="https://qmsg.zendee.cn/">QMsg酱</a>的公共机器人，但是由于消息审核机制太严格，导致很多类型的消息无法发送，就打算使用<a href="https://qmsg.zendee.cn/docs/pvt/">QMsg酱捐赠版</a>。</p><p>请务必先浏览<a href="https://qmsg.zendee.cn/docs/start/">QMsg酱使用文档</a>与<a href="https://qmsg.zendee.cn/docs/pvt/#%E6%90%AD%E5%BB%BA%E6%8D%90%E8%B5%A0%E7%89%88">QMsg酱捐赠版搭建步骤文档</a>，这里只用作补充。</p><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>首先，确保你的电脑与Linux服务器都安装了JDK1.8环境，如果没有，可以参考<a href="/posts/47bb621c/" title="JDK1.8绿色解压版安装教程">JDK8绿色版安装</a>文档。</p><p>按照<a href="https://qmsg.zendee.cn/docs/pvt/#%E6%90%AD%E5%BB%BA%E6%AD%A5%E9%AA%A4">QMsg酱的官方文档</a>，<a href="https://ddddd.lanzout.com/b0eyk2kmd">下载机器人客户端</a>，提取码<code>g4xg</code>。</p><p>先在Windows电脑下双击执行<code>run.bat</code>批处理程序，然后在弹出的界面中输入你要作为机器人的QQ的账号和密码，勾选<code>Android Watch</code>复选框，点击扫码登录，然后进行扫码登录。</p><p><strong>登录成功后会在</strong><code>C:/Users/你的用户名/.yuq/.art/.device</code><strong>目录下生成两个文件</strong>，<code>info_机器人QQ号码.json</code>、<code>session_cache_机器人QQ号码.scs</code>。</p><p><strong>转到Linux</strong>，将Windows下登录成功生成的两个文件<code>info_机器人QQ号码.json</code>、<code>session_cache_机器人QQ号码.scs</code>，上传到Linux服务器的<code>/root/.yuq/.art/.device</code>目录下。</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/qmsg-bot/image-20230722092507351.png" alt="image-20230722092507351"></p><p>然后将QMsg的机器人客户端上传到Linux服务器上，我上传的目录为<code>/opt</code>。</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/qmsg-bot/image-20230722092926633.png" alt="image-20230722092926633"></p><p>在当前目录下<strong>使用root用户</strong>，运行<code>nohup sh run.sh &gt; qmsglog.txt &amp;</code>将在后台挂起机器人，日志文件包含以下内容即表示搭建成功。</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/qmsg-bot/image-20230722093127411.png" alt="image-20230722093127411"></p><p>在浏览器地址栏键入<code>https://qmsg.zendee.cn/send/&#123;您的KEY&#125;?msg=你好</code>，<code>Enter</code>后，你的QQ机器人就会给你发送一个<code>你好</code>的消息。</p>]]></content>
      
      
      <categories>
          
          <category> 软件配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 服务器 </tag>
            
            <tag> QQ机器人 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Waline配置QQ提醒</title>
      <link href="/posts/3a414f7f/"/>
      <url>/posts/3a414f7f/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>近两天发现我博客的评论系统没有QQ提醒了，也不知道是什么原因，按照官方文档配置了环境变量也不行。</p><p>然后找官方文档，慢慢百度，使用自定义Waline服务端的方法完成了这个功能，我这里的配置办法基于Waline服务端使用Vercel部署。</p><ul><li><a href="https://waline.js.org/reference/server/config.html">Waline服务端文档</a></li><li><a href="https://qmsg.zendee.cn/docs/api/">QMsg酱QQ提醒机器人接口文档</a></li></ul><p>想要配置QQ提醒，请确保已完成Waline评论系统的搭建，详情可参考<a href="https://waline.js.org/guide/deploy/vercel.html">官方文档</a></p><p>你可以先试试<a href="https://waline.js.org/guide/features/notification.html">官方配置QQ提醒</a>，要方便很多，我尝试了很多次都不行了，之前还可以。</p><h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>首先，你需要在<a href="https://qmsg.zendee.cn/">QMsg酱</a>申请到KEY，并绑定需要提醒的QQ号，具体配置步骤参考<a href="https://qmsg.zendee.cn/docs/start/#%E4%BD%BF%E7%94%A8%E5%8D%8F%E8%AE%AE">官方文档</a>。</p><p>当然，如果你需要使用这两个公共机器人的话，请务必先<strong>添加它们为好友</strong>哦~</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure/waline-qmsg/image-20230721172332100.png" alt="image-20230721172332100"></p><p>然后。你需要找到你部署Waline评论系统的Vercel服务器，<a href="https://vercel.com/">官网地址</a></p><p>登录后，进入对应的应用，我的应用如下：</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure/waline-qmsg/image-20230721171401603.png" alt="image-20230721171401603"></p><p>进入应用后，点击<code>Git Repository</code>，进入对应的配置仓库</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure/waline-qmsg/image-20230721171536650.png" alt="image-20230721171536650"></p><p>找到<code>index.js</code>文件，对其进行修改</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure/waline-qmsg/image-20230721171801534.png" alt="image-20230721171801534"></p><p><strong>修改文件并提交到主分支后Vercel会自动重新构建，等待构建完成即可</strong></p><p>本人的编程很烂，根据下面的案例，你就能领悟应该怎么编写代码，这只是一个示例。</p><p>修改内容如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Application</span> = <span class="built_in">require</span>(<span class="string">&#x27;@waline/vercel&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> axios = <span class="built_in">require</span>(<span class="string">&#x27;axios&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自定义环境变量</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">MY_EV_VAR</span> = &#123;</span><br><span class="line">  <span class="comment">// QMsg酱的key</span></span><br><span class="line">  <span class="attr">qMsgKey</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="comment">// 作者邮箱</span></span><br><span class="line">  <span class="attr">authorEmail</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="comment">// 网站名称</span></span><br><span class="line">  <span class="attr">siteName</span>: <span class="string">&quot;你的博客名称&quot;</span>,</span><br><span class="line">  <span class="comment">// 网站地址</span></span><br><span class="line">  <span class="attr">siteURL</span>: <span class="string">&quot;你的博客地址&quot;</span>,</span><br><span class="line">  <span class="comment">// QMsg酱消息发送接口地址</span></span><br><span class="line">  <span class="attr">qMsgApi</span>: <span class="string">&quot;https://qmsg.zendee.cn/send&quot;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title class_">Application</span>(&#123;</span><br><span class="line">  <span class="comment">// 违禁词</span></span><br><span class="line">  <span class="attr">forbiddenWords</span>: [<span class="string">&#x27;习近平&#x27;</span>, <span class="string">&#x27;毛泽东&#x27;</span>],</span><br><span class="line">  <span class="attr">plugins</span>: [],</span><br><span class="line">  <span class="comment">// 评论发布后执行的操作，参数1：评论，参数2：回复评论的父级评论</span></span><br><span class="line">  <span class="comment">// 使用async的方法，方法体内调用方法一定配合await使用</span></span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">postSave</span>(<span class="params">comment, pComment</span>) &#123;</span><br><span class="line">    <span class="comment">// 如果不是博主本人发的才通知</span></span><br><span class="line">    <span class="keyword">if</span> (comment.<span class="property">mail</span> != <span class="variable constant_">MY_EV_VAR</span>.<span class="property">authorEmail</span>) &#123;</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// 使用axios发送post请求</span></span><br><span class="line">      <span class="keyword">const</span> formData = <span class="keyword">new</span> <span class="title class_">URLSearchParams</span>(); <span class="comment">// 转载数据</span></span><br><span class="line">      <span class="comment">// 将要发送的信息格式化好后装载到POST参数中</span></span><br><span class="line">      <span class="keyword">if</span> (pComment == <span class="literal">undefined</span>) &#123;</span><br><span class="line">        formData.<span class="title function_">append</span>(<span class="string">&#x27;msg&#x27;</span>, <span class="string">`💬 <span class="subst">$&#123;MY_EV_VAR.siteName&#125;</span> 有新评论啦\n<span class="subst">$&#123;comment.nick&#125;</span> 说:\n<span class="subst">$&#123;comment.comment&#125;</span>\n评论地址:\n<span class="subst">$&#123;MY_EV_VAR.siteURL + comment.url&#125;</span>`</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        formData.<span class="title function_">append</span>(<span class="string">&#x27;msg&#x27;</span>, <span class="string">`💬 <span class="subst">$&#123;MY_EV_VAR.siteName&#125;</span> 有新评论啦\n<span class="subst">$&#123;comment.nick&#125;</span> 回复 <span class="subst">$&#123;pComment.nick&#125;</span> 的内容:\n<span class="subst">$&#123;pComment.comment&#125;</span>\n说:\n<span class="subst">$&#123;comment.comment&#125;</span>\n评论地址:\n<span class="subst">$&#123;MY_EV_VAR.siteURL + comment.url&#125;</span>`</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// 给QMsg发送请求</span></span><br><span class="line">      <span class="keyword">await</span> axios.<span class="title function_">post</span>(<span class="string">`<span class="subst">$&#123;MY_EV_VAR.qMsgApi&#125;</span>/<span class="subst">$&#123;MY_EV_VAR.qMsgKey&#125;</span>`</span>, formData);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>如果你使用的QMsg酱机器人不是捐赠版，那么发送的消息会进行审核，审核不通过则消息不会被发送，建议修改上诉的消息模板代码。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 修改前</span></span><br><span class="line"><span class="keyword">if</span> (pComment == <span class="literal">undefined</span>) &#123;</span><br><span class="line">        formData.<span class="title function_">append</span>(<span class="string">&#x27;msg&#x27;</span>, <span class="string">`💬 <span class="subst">$&#123;MY_EV_VAR.siteName&#125;</span> 有新评论啦\n<span class="subst">$&#123;comment.nick&#125;</span> 说:\n<span class="subst">$&#123;comment.comment&#125;</span>\n评论地址:\n<span class="subst">$&#123;MY_EV_VAR.siteURL + comment.url&#125;</span>`</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        formData.<span class="title function_">append</span>(<span class="string">&#x27;msg&#x27;</span>, <span class="string">`💬 <span class="subst">$&#123;MY_EV_VAR.siteName&#125;</span> 有新评论啦\n<span class="subst">$&#123;comment.nick&#125;</span> 回复 <span class="subst">$&#123;pComment.nick&#125;</span> 的内容:\n<span class="subst">$&#123;pComment.comment&#125;</span>\n说:\n<span class="subst">$&#123;comment.comment&#125;</span>\n评论地址:\n<span class="subst">$&#123;MY_EV_VAR.siteURL + comment.url&#125;</span>`</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改后 </span></span><br><span class="line"><span class="keyword">if</span> (pComment == <span class="literal">undefined</span>) &#123;</span><br><span class="line">        formData.<span class="title function_">append</span>(<span class="string">&#x27;msg&#x27;</span>, <span class="string">`💬 <span class="subst">$&#123;MY_EV_VAR.siteName&#125;</span> 有新评论啦\n<span class="subst">$&#123;comment.nick&#125;</span> 说:\n<span class="subst">$&#123;comment.comment&#125;</span>`</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        formData.<span class="title function_">append</span>(<span class="string">&#x27;msg&#x27;</span>, <span class="string">`💬 <span class="subst">$&#123;MY_EV_VAR.siteName&#125;</span> 有新评论啦\n<span class="subst">$&#123;comment.nick&#125;</span> 回复 <span class="subst">$&#123;pComment.nick&#125;</span> 的内容:\n<span class="subst">$&#123;pComment.comment&#125;</span>\n说:\n<span class="subst">$&#123;comment.comment&#125;</span>`</span>);</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure><p>当然，你也可以自己定义，审核情况可以在<a href="https://qmsg.zendee.cn/user">QMsg酱控制台</a>的近30条记录里查看，不通过会说明原因，其中<code>comment</code>与<code>pComment</code>对象的属性如下。</p><p><code>comment</code>：评论对象</p><table><thead><tr><th>属性</th><th>解释</th></tr></thead><tbody><tr><td>nick</td><td>评论者的名称</td></tr><tr><td>mail</td><td>评论者的邮箱</td></tr><tr><td>link</td><td>评论者的个人网址</td></tr><tr><td>url</td><td>评论所在的文章地址，例：&#x2F;page&#x2F;hello-word&#x2F;</td></tr><tr><td>comment</td><td>评论的内容</td></tr><tr><td>browser</td><td>评论者使用的浏览器</td></tr><tr><td>os</td><td>评论者使用的操作系统</td></tr><tr><td>addr</td><td>评论者的归属地</td></tr><tr><td>avatar</td><td>评论者头像地址</td></tr><tr><td>commentLink</td><td>评论中的链接，仅在 Telegram 通知中提供，会自动封装成 Markdown 的格式</td></tr></tbody></table><p><code>pComment</code>：如果评论是回复别人的情况，此对象表示那个父级评论的对象，否则为<code>undefined</code></p><table><thead><tr><th>属性</th><th>解释</th></tr></thead><tbody><tr><td>nick</td><td>评论者的名称</td></tr><tr><td>mail</td><td>评论者的邮箱</td></tr><tr><td>link</td><td>评论者的网址</td></tr><tr><td>browser</td><td>评论者使用的浏览器</td></tr><tr><td>os</td><td>评论者使用的操作系统</td></tr><tr><td>addr</td><td>评论者的归属地</td></tr><tr><td>avatar</td><td>评论者的头像地址</td></tr><tr><td>comment</td><td>评论的内容</td></tr></tbody></table><p>下面的案例包含通过与未通过的情况：</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure/waline-qmsg/image-20230721175026357.png" alt="image-20230721175026357"></p><p>成功案例展示：</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure/waline-qmsg/image-20230721175410790.png" alt="image-20230721175410790"></p><h2 id="后语"><a href="#后语" class="headerlink" title="后语"></a>后语</h2><p>完成这个小功能花费了一下午的时间，踩坑+查文档，完成后还是很有成就感的。</p><p><strong>踩坑点：</strong></p><ol><li><p>以为消息发送不了是因为QQ机器人出了问题，花费了许多经历在QQ机器人上。</p><p>建议在浏览器使用<code>https://qmsg.zendee.cn/send/您的KEY?msg=消息测试</code>请求测试一下。</p></li><li><p>认为是Vercel服务端环境变量配置的问题，一直删应用，创应用，浪费了很多时间，并且我还是不知道到底是不是Vercel的问题。</p></li><li><p>由于不太明白JS语法，在<code>async</code>标记的方法中，调用异步的方法没有使用<code>await</code>标记，导致程序运行出问题。</p></li></ol><p><strong>不足：</strong></p><ol><li>这段程序除了原来就有的内容，自己编写的全是<code>NodeJS</code>的原生语法，没有去调用<code>waline</code>的方法，自己也不知道它有哪些方法可以调用。</li><li>在这个<code>index.js</code>文件里面还有很多功能可以做，目前只会做这一个功能。</li></ol><p>如果你也在配置的时候出现了问题，可以将问题描述在评论区，大家一起解决。</p><p>或者是你解决了一些难题，你也可以将你的解决方案写在评论区里。</p>]]></content>
      
      
      <categories>
          
          <category> 程序配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 个人博客 </tag>
            
            <tag> Waline </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>网站更新日志（2023/07/20~2024/04/19）</title>
      <link href="/posts/9e7fad42/"/>
      <url>/posts/9e7fad42/</url>
      
        <content type="html"><![CDATA[<details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-04-19]-Hexo博客优化</summary><div class="toggle-content"><p><strong>请求优化</strong></p><blockquote><p>减少自定义CSS、JS的引入次数，将多个文件的内容融合到一起，以减少请求次数</p></blockquote><p><strong>日志目录优化</strong></p><blockquote><p>日志越来越多，导致一个文件会有很多行，现使用拆分然后引入的方式</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-04-17]-Hexo博客优化</summary><div class="toggle-content"><p><strong>更新CDN</strong></p><blockquote><p>为了解决网站加载速度慢的问题，将第三方样式从自定义的七牛云CDN<code>custom</code>改为本地加载<code>local</code></p><p>博客根目录下使用<code>npm install hexo-butterfly-extjs --save</code>安装依赖的CSS和JS</p><p>修改<code>_config.butterfly.yml</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">CDN:</span></span><br><span class="line"><span class="attr">third_party_provider:</span> <span class="string">local</span></span><br></pre></td></tr></table></figure></blockquote></div></details><details class="toggle" style="border: 1px solid #BFEFFF"><summary class="toggle-button" style="background-color: #BFEFFF;">[2024-04-16]-Hexo博客优化</summary><div class="toggle-content"><p><strong>更新主题</strong></p><blockquote><p>参考<a href="https://novnan.github.io/Hexo/update_hexo/">Hexo版本升级指南</a></p><p><strong>以下指令均在Hexo目录下操作，先定位到Hexo目录</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看当前版本，判断是否需要升级</span></span><br><span class="line">hexo version</span><br><span class="line"><span class="comment"># 全局升级hexo-cli</span></span><br><span class="line">npm i hexo-cli -g</span><br><span class="line"><span class="comment"># 再次查看版本，看hexo-cli是否升级成功</span></span><br><span class="line">hexo version</span><br><span class="line"><span class="comment"># 安装npm-check，若已安装可以跳过</span></span><br><span class="line">npm install -g npm-check</span><br><span class="line"><span class="comment"># 检查系统插件是否需要升级</span></span><br><span class="line">npm-check</span><br><span class="line"><span class="comment"># 安装npm-upgrade，若已安装可以跳过</span></span><br><span class="line">npm install -g npm-upgrade</span><br><span class="line"><span class="comment"># 更新package.json</span></span><br><span class="line">npm-upgrade</span><br><span class="line"><span class="comment"># 更新全局插件</span></span><br><span class="line">npm update -g</span><br><span class="line"><span class="comment"># 更新系统插件</span></span><br><span class="line">npm update --save</span><br><span class="line"><span class="comment"># 再次查看版本，判断是否升级成功</span></span><br><span class="line">hexo version</span><br></pre></td></tr></table></figure><p>最终版本信息如下：</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">INFO  Validating config</span><br><span class="line">INFO  </span><br><span class="line">===================================================================</span><br><span class="line">   <span class="params">#####</span>  <span class="params">#</span>    <span class="params">#</span> <span class="params">#####</span> <span class="params">#####</span> <span class="params">######</span> <span class="params">#####</span>  <span class="params">######</span> <span class="params">#</span>      <span class="params">#</span>   <span class="params">#</span></span><br><span class="line">   <span class="params">#</span>    <span class="params">#</span> <span class="params">#</span>    <span class="params">#</span>   <span class="params">#</span>     <span class="params">#</span>   <span class="params">#</span>      <span class="params">#</span>    <span class="params">#</span> <span class="params">#</span>      <span class="params">#</span>       <span class="params">#</span> <span class="params">#</span></span><br><span class="line">   <span class="params">#####</span>  <span class="params">#</span>    <span class="params">#</span>   <span class="params">#</span>     <span class="params">#</span>   <span class="params">#####</span>  <span class="params">#</span>    <span class="params">#</span> <span class="params">#####</span>  <span class="params">#</span>        <span class="params">#</span></span><br><span class="line">   <span class="params">#</span>    <span class="params">#</span> <span class="params">#</span>    <span class="params">#</span>   <span class="params">#</span>     <span class="params">#</span>   <span class="params">#</span>      <span class="params">#####</span>  <span class="params">#</span>      <span class="params">#</span>        <span class="params">#</span></span><br><span class="line">   <span class="params">#</span>    <span class="params">#</span> <span class="params">#</span>    <span class="params">#</span>   <span class="params">#</span>     <span class="params">#</span>   <span class="params">#</span>      <span class="params">#</span>   <span class="params">#</span>  <span class="params">#</span>      <span class="params">#</span>        <span class="params">#</span></span><br><span class="line">   <span class="params">#####</span>   <span class="params">####</span>    <span class="params">#</span>     <span class="params">#</span>   <span class="params">######</span> <span class="params">#</span>    <span class="params">#</span> <span class="params">#</span>      <span class="params">######</span>   <span class="params">#</span></span><br><span class="line">                         4.13.0</span><br><span class="line">===================================================================</span><br><span class="line">hexo: 7.1.1</span><br><span class="line">hexo-cli: 4.3.1</span><br><span class="line">os: win32 10.0.22631</span><br><span class="line">node: 20.11.0</span><br><span class="line">acorn: 8.11.2</span><br><span class="line">ada: 2.7.4</span><br><span class="line">ares: 1.20.1</span><br><span class="line">base64: 0.5.1</span><br><span class="line">brotli: 1.0.9</span><br><span class="line">cjs<span class="built_in">_</span>module<span class="built_in">_</span>lexer: 1.2.2</span><br><span class="line">cldr: 43.1</span><br><span class="line">icu: 73.2</span><br><span class="line">llhttp: 8.1.1</span><br><span class="line">modules: 115</span><br><span class="line">napi: 9</span><br><span class="line">nghttp2: 1.58.0</span><br><span class="line">nghttp3: 0.7.0</span><br><span class="line">ngtcp2: 0.8.1</span><br><span class="line">openssl: 3.0.12+quic</span><br><span class="line">simdutf: 4.0.4</span><br><span class="line">tz: 2023c</span><br><span class="line">undici: 5.27.2</span><br><span class="line">unicode: 15.0</span><br><span class="line">uv: 1.46.0</span><br><span class="line">uvwasi: 0.0.19</span><br><span class="line">v8: 11.3.244.8-node.17</span><br><span class="line">zlib: 1.2.13.1-motley-5daffc7</span><br></pre></td></tr></table></figure></blockquote><p><strong>更新插件</strong></p><blockquote><p>参考<a href="https://zhuanlan.zhihu.com/p/163830894">Hexo 和Next主题升级</a></p><p>执行<code>npm outdated</code></p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Package               Current   Wanted   Latest  Location                           Depended by</span><br><span class="line">hexo                    6.3.0    6.3.0    7.1.1  node<span class="built_in">_</span>modules/hexo                  hexo-gitee-blog-management</span><br><span class="line">hexo-deployer-git       3.0.0    3.0.0    4.0.0  node<span class="built_in">_</span>modules/hexo-deployer-git     hexo-gitee-blog-management</span><br><span class="line">hexo-renderer-marked    6.0.0    6.3.0    6.3.0  node<span class="built_in">_</span>modules/hexo-renderer-marked  hexo-gitee-blog-management</span><br><span class="line">hexo-theme-landscape    0.0.3    0.0.3    1.0.0  node<span class="built_in">_</span>modules/hexo-theme-landscape  hexo-gitee-blog-management</span><br><span class="line">yarn                  1.22.19  1.22.22  1.22.22  node<span class="built_in">_</span>modules/yarn                  hexo-gitee-blog-management</span><br></pre></td></tr></table></figure><p>执行<code>npm update</code>更新所有过时的版本</p></blockquote><p><strong>更新友链</strong></p><blockquote><p>更新友情链接部分头像地址，新加入可爱的室友<a href="moenya.cat">Moe_Nya</a>。</p></blockquote><p><strong>更新图标</strong></p><blockquote><p>感觉找到网站主页加载慢的原因了，就是图标用的是<a href="https://fontawesome.com/">FontAwesome</a>的CDN。</p><p>现全部更改为阿里云的<a href="https://www.iconfont.cn/">iconfont</a>。</p></blockquote><p><strong>开启chatra</strong></p><blockquote><p>昨天感觉对网站的加载速度影响很大，所以关了，今天感觉好像不是它的问题。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">chat_btn:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">chat_hide_show:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">chatra:</span></span><br><span class="line"><span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">**修改侧边栏**</span></span><br><span class="line"></span><br><span class="line"><span class="string">修改个人爱好图标，修改`source/_data/widget.yml`</span></span><br><span class="line"></span><br><span class="line"><span class="string">**跳过某些渲染**</span></span><br><span class="line"></span><br><span class="line"><span class="string">可能是因为标签外挂的原因，导致我自定义的JS解析后代码不全，在`_config.yml`中跳过这些JS文件的渲染</span></span><br><span class="line"><span class="string">```yaml</span></span><br><span class="line"><span class="comment"># 跳过渲染</span></span><br><span class="line"><span class="attr">skip_render:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&#x27;static/**&#x27;</span></span><br></pre></td></tr></table></figure></blockquote><p><strong>下载部分CDN内容到本地</strong></p><blockquote><p>最近发现博客加载速度很慢，一直排查，发现可能是CDN导致的。</p><p>尤其是首页菜单的图标，因为butterfly的Font Awesome是CDN引入的，加载速度很玄学。</p><p>现将能改的图标都改成了阿里云的iconfont，并下载其CSS到本地。</p><p>由于以上问题，延申到将大部分CDN引入的CSS和JS都转为本地加载了。</p><p>然后本地加载也有踩坑，因为所有的文件都会被Hexo编译一下，有时候就会导致一些文件被编译后跟原来的内容不一致，需要到<code>_config.yml</code>配置文件，配置下<code>skip_render:</code>。</p><p>下载<a href="https://jsd.onmicrosoft.cn/gh/qxchuckle/Post-Summary-AI@6.0/chuckle-post-ai.min.js">TianliGPT文字摘要生成工具</a>到本地</p><p>下载首页轮播图CSS与JS到本地</p><p>下载留言页的信封图片到本地</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-04-15]-Hexo博客优化</summary><div class="toggle-content"><p><strong>修改小康博客CSS</strong></p><blockquote><p>优化小康博客CSS，将鼠标样式下载到网站引入</p></blockquote><p><strong>更换AI摘要项目</strong></p><blockquote><p>tianliGPT由<a href="https://github.com/zhheo/Post-Abstract-AI">Post-Abstract-AI</a>更换到<a href="https://github.com/qxchuckle/Post-Summary-AI">Post-Summary-AI</a></p><p>尝试将CDN的JS下载到本地加载，但是会导致文章页没有AI摘要，不知道为什么，估计是CDN加速的静态文件跟放在网站的静态文件会有些不一样，后面再了解。</p></blockquote><p><strong>关闭chatra</strong></p><blockquote><p>感觉对网站的加载速度影响很大，暂时关闭在线聊天功能</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">chat_btn:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">chat_hide_show:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">chatra:</span></span><br><span class="line"><span class="attr">enable:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure></blockquote><p><strong>swiper轮播图插件</strong></p><blockquote><p>由于该插件在<code>_config.yml</code>的配置有4个CDN加速的静态文件需要加载，过于影响网站加载速度，暂时关闭。</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-04-15]-Hexo博客修复</summary><div class="toggle-content"><p><strong>修复文章页H2-H5图标的丢失</strong></p><blockquote><p>删除小康博客样式CDN的引入（有修改图标的css，导致冲突）</p><p>新增<code>/static/css/xiaokang_blog.css</code>，基于<a href="https://blog.antmoe.com/">小康博客min.css</a>修改，删除冲突内容。</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-04-12]-Hexo博客优化</summary><div class="toggle-content"><blockquote><p>随机友联，在友链页头部增加<code>random: true</code></p><p>更新菜单图标与社交图标</p></blockquote></div></details><details class="toggle" style="border: 1px solid #FF6666"><summary class="toggle-button" style="background-color: #FF6666;">[2024-04-12]-服务器更新</summary><div class="toggle-content"><p><strong>删除开源记账软件Firefly III</strong></p><blockquote><p>删除Docker容器，删除数据库</p></blockquote><p><strong>1Panel申请证书</strong></p><blockquote><p><a href="https://zhuanlan.zhihu.com/p/680061414">1Panel CloudFlare证书申请失败的解决方案</a><br><a href="https://dash.cloudflare.com/profile/api-tokens">cloudflare</a></p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-04-11]-Hexo博客美化</summary><div class="toggle-content"><p><strong>修改首页社交图表颜色</strong></p><blockquote><p>修改网站目录<code>/source/static/css/iconfont.css</code></p></blockquote><p><strong>关闭某些页面的侧边栏</strong></p><blockquote><p>在源码信息头中加入<code>aside: false</code>即可关闭</p></blockquote><p><strong>更新留言页</strong></p><blockquote><p>在站点根目录执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-butterfly-envelope --save</span><br></pre></td></tr></table></figure><p>安装完成之后打开站点的配置文件<code>_config.yml</code>或主题的配置文件<code>_config.butterfly.yml</code>，添加如下配置</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 信笺式浏览页</span></span><br><span class="line"><span class="comment"># https://github.com/Akilarlxh/hexo-butterfly-envelope</span></span><br><span class="line"><span class="comment"># envelope_comment</span></span><br><span class="line"><span class="comment"># see https://akilar.top/posts/e2d3c450/</span></span><br><span class="line"><span class="attr">envelope_comment:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span> <span class="comment">#控制开关</span></span><br><span class="line">  <span class="attr">custom_pic:</span>      </span><br><span class="line">    <span class="attr">cover:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-envelope/lib/violet.jpg</span> <span class="comment">#信笺头部图片</span></span><br><span class="line">    <span class="attr">line:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-envelope/lib/line.png</span> <span class="comment">#信笺底部图片</span></span><br><span class="line">    <span class="attr">beforeimg:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-envelope/lib/before.png</span> <span class="comment"># 信封前半部分</span></span><br><span class="line">    <span class="attr">afterimg:</span> <span class="string">https://npm.elemecdn.com/hexo-butterfly-envelope/lib/after.png</span> <span class="comment"># 信封后半部分</span></span><br><span class="line">  <span class="attr">message:</span> <span class="comment">#信笺正文，多行文本，写法如下</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">有什么想问的？</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">有什么想说的？</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">有什么想吐槽的？</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">哪怕是有什么想吃的，都可以告诉我哦~</span></span><br><span class="line">  <span class="attr">bottom:</span> <span class="string">自动书记人偶竭诚为您服务！</span> <span class="comment">#仅支持单行文本</span></span><br><span class="line">  <span class="attr">height:</span> <span class="comment">#1050px，信封划出的高度</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">/contact/comments/</span> <span class="comment">#【可选】comments 的路径名称。默认为 comments，生成的页面为 comments/index.html</span></span><br><span class="line">  <span class="attr">front_matter:</span> <span class="comment">#【可选】comments页面的 front_matter 配置</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">留言板</span></span><br><span class="line">    <span class="attr">aside:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">comments:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-04-07]-Hexo博客美化</summary><div class="toggle-content"><p><strong>页脚增加标签</strong></p><blockquote><p>使用<a href="https://shields.io/">shields</a>生成标签。</p><p>编辑<code>_config.butterfly.yml</code>文件，关闭主题默认的版权信息，并加入标签信息：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">footer:</span></span><br><span class="line"><span class="attr">custom_text:</span> <span class="string">&lt;p&gt;&lt;a</span> <span class="string">style=&quot;margin-inline:5px&quot;target=&quot;_blank&quot;</span> <span class="string">href=&quot;https://hexo.io/&quot;&gt;&lt;img</span> <span class="string">src=&quot;https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo&quot;</span> <span class="string">title=&quot;博客框架为</span> <span class="string">Hexo&quot;</span> <span class="string">alt=&quot;HEXO&quot;&gt;&lt;/a&gt;&lt;a</span> <span class="string">style=&quot;margin-inline:5px&quot;target=&quot;_blank&quot;</span> <span class="string">href=&quot;https://butterfly.js.org/&quot;&gt;&lt;img</span> <span class="string">src=&quot;https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender&quot;</span> <span class="string">title=&quot;主题采用</span> <span class="string">Butterfly&quot;</span> <span class="string">alt=&quot;Butterfly&quot;&gt;&lt;/a&gt;&lt;/a&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="attr">copyright:</span> <span class="literal">false</span> <span class="comment"># Copyright of theme and framework</span></span><br></pre></td></tr></table></figure></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-04-03]-Hexo博客美化</summary><div class="toggle-content"><p><strong>引入小康博客样式</strong></p><blockquote><p>参考<a href="https://blog.antmoe.com/posts/a811d614/">Hexo 博客之 butterfly 主题优雅魔改系列</a></p></blockquote><p><strong>关闭背景跟随鼠标的线条</strong></p><blockquote><p>修改<code>_config.butterfly.yml</code></p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">canvas_nest:</span></span><br><span class="line"><span class="attr">enable:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure></blockquote><p><strong>修改背景颜色为渐变色</strong></p><blockquote><p>参考<a href="https://blog.ffing.cn/hexo/hexo%E6%90%AD%E5%BB%BAbutterfly%E5%8D%9A%E5%AE%A2-%EF%BC%88%E5%9B%9B%EF%BC%89%E6%B8%90%E5%8F%98%E8%83%8C%E6%99%AF">Hexo搭建butterfly博客—（四）渐变背景</a></p><p>增加<code>/source/static/css/bg_color.css</code>文件，写入</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;light&quot;</span>]</span> </span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line"><span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(-<span class="number">45deg</span>, <span class="number">#fbede8</span>, <span class="number">#b4cef7</span>, <span class="number">#b7f9b8</span>, <span class="number">#f6ced8</span>);</span><br><span class="line"><span class="attribute">background-size</span>: <span class="number">400%</span> <span class="number">400%</span>;</span><br><span class="line"></span><br><span class="line"><span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line"><span class="attribute">background-attachment</span>:fixed;</span><br><span class="line">&#125;    </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line"><span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(-<span class="number">45deg</span>, <span class="number">#6f1b01</span>, <span class="number">#113878</span>, <span class="number">#016801</span>, <span class="number">#540818</span>);</span><br><span class="line"><span class="attribute">background-size</span>: <span class="number">400%</span> <span class="number">400%</span>;</span><br><span class="line"></span><br><span class="line"><span class="attribute">height</span>: <span class="number">100vh</span>;</span><br><span class="line"><span class="attribute">background-attachment</span>:fixed;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure><p>编辑<code>_config.butterfly.yml</code>，引入css文件</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line"><span class="attr">head:</span></span><br><span class="line"> <span class="comment">#渐变背景</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&lt;link</span> <span class="string">rel=&quot;stylesheet&quot;</span> <span class="string">href=&quot;/css/bg_color.css&quot;&gt;</span></span><br></pre></td></tr></table></figure></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-03-31]-Hexo博客优化</summary><div class="toggle-content"><p><strong>搜索功能转为Algolia</strong></p><blockquote><p>本地搜索转为Algolia搜索<br><a href="https://zhuanlan.zhihu.com/p/645394591">Hexo + Butterfly 搜索功能</a><br>更新索引需要执行<code>hexo algolia</code>。<br>相关网站：<a href="https://dashboard.algolia.com/">Algolia</a></p></blockquote><p><strong>取消各种图片的显示</strong></p><blockquote><p>在<code>_config.butterfly.yml</code>中设置如下内容</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 取消首页图片</span></span><br><span class="line"><span class="attr">index_img:</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># 取消顶部图片</span></span><br><span class="line"><span class="attr">disable_top_img:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></blockquote><p><strong>修改侧边栏内容</strong></p><blockquote><p><strong>取消</strong>最新文章侧边栏，最新评论由6个限制为<strong>3个</strong></p></blockquote><p><strong>压缩生成的静态文件</strong></p><blockquote><p>使用<code>hexo-neat</code>第三方包压缩网站文件，加快访问速度。<br>参考博文：<a href="https://cloud.tencent.com/developer/article/1833981">使用Hexo-neat插件对网页进行压缩</a></p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-03-28]-Hexo博客美化</summary><div class="toggle-content"><p><strong>修改URL生成方式</strong></p><blockquote><p><a href="https://www.imbhj.com/posts/b6a99401/">Hexo 博客生成永久链接</a><br>然后修改leancloud数据库中的评论地址</p></blockquote><p><strong>增加首页推荐轮播图</strong></p><blockquote><p>参考<a href="https://akilar.top/posts/8e1264d1/">首页置顶轮播图</a><br>使用时在文章的<code>front_matter</code>中添加<code>s</code>wiper_index<code>配置项即可。 </code>swiper_index: 1 #置顶轮播图顺序，非负整数，数字越大越靠前&#96;</p></blockquote><p><strong>增加AI摘要</strong></p><blockquote><p>参考<a href="https://blog.zhheo.com/p/ec57d8b2.html">如何让博客支持AI摘要，使用TianliGPT自动生成文章的AI摘要</a><br>相关网站：<a href="https://afdian.net/">爱发电-产品购买</a>，<a href="https://summary.zhheo.com/admin">TianliGPT后台管理系统</a>。</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-03-28]-Hexo博客增加在线聊天功能</summary><div class="toggle-content"><p><strong>增加在线聊天功能</strong></p><blockquote><p>使用<a href="https://app.chatra.io/settings/preferences">Chatra</a>提供在线聊天功能。<br><a href="https://butterfly.js.org/posts/ceeb73f/?highlight=%E5%9C%A8%E7%B6%AB#%E5%9C%A8%E7%B6%AB%E8%81%8A%E5%A4%A9">Butterfly官方教程</a></p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-03-25]-新增记账网站</summary><div class="toggle-content"><p><strong>增加记账网站</strong></p><blockquote><p>参考博文<a href="https://maling.io/posts/firefly-iii-install/">如何利用 Docker &amp; Nginx 在 VPS 上部署 Firefly III 记账软件</a>。</p></blockquote></div></details><details class="toggle" style="border: 1px solid #BFEFFF"><summary class="toggle-button" style="background-color: #BFEFFF;">[2024-03-23]-服务器大更新</summary><div class="toggle-content"><p><strong>更新服务器</strong></p><blockquote><p>废弃宝塔面板，转入免费开源的<a href="https://github.com/1Panel-dev/1Panel">1Panel面板</a>，<strong>搞了一天都还没搞完，真的很辛苦！！！</strong>。</p><p>本次更新为重装系统，将会慢慢恢复各种功能，<strong>本次更新后将会放弃Gitee项目的展示部署</strong>。</p><p>1Panel初次体验感受：</p><ol><li>界面更为现代化</li><li>响应速度更快</li><li>应用管理更加透明</li><li>使用<code>OpenResty</code>配置反向代理和SSL证书更加方便</li><li>文件系统没有备注功能</li></ol></blockquote><p><strong>以下列出服务器需要恢复的功能及恢复情况</strong></p><ul><li><input checked="" disabled="" type="checkbox"> Hexo个人博客 + SSL证书</li><li><input checked="" disabled="" type="checkbox"> Waline评论服务端 + SSL证书</li><li><input checked="" disabled="" type="checkbox"> 求生之路仿CS特性服务器</li><li><input checked="" disabled="" type="checkbox"> Frp内网穿透</li><li><input checked="" disabled="" type="checkbox"> EasyN2N&#x2F;小黄鸭</li><li><input checked="" disabled="" type="checkbox"> Halo个人博客</li><li><input checked="" disabled="" type="checkbox"> 蚂蚁笔记</li></ul><p><strong>增加fail2ban</strong></p><blockquote><p><a href="https://1panel.cn/docs/user_manual/toolbox/fail2ban/">安装fail2ban</a><br>Fail2ban 是一个用于防御暴力攻击的开源工具。<br>它通过监控系统日志文件，检测恶意行为并自动采取措施来保护 Linux 服务器免受攻击。<br>Fail2ban 可以分析登录失败的日志记录，并根据预定义的规则和策略来禁止攻击者的 IP 地址。</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-03-10]-Hexo博客主题更新</summary><div class="toggle-content"><p><strong>更新主题</strong></p><blockquote><p>将<a href="https://butterfly.js.org/">Butterfly主题</a>从<code>4.12.0</code>更新到<code>4.13.0</code>。<br>使用<code>npm i hexo-theme-butterfly</code>即可将主题更新到最新版本。<br>更新内容见官网<a href="https://butterfly.js.org/posts/4-13-release-notes/">Butterfly 4.13 更新日志</a></p></blockquote><p><strong>更新Waline服务端</strong></p><blockquote><p>将Waline评论服务端更新到<code>v3.1.3</code>，更新方法见<a href="https://waline.js.org/advanced/faq.html#docker">Frequently Asked Questions（常见问题解答）</a>，Docker版服务端宝塔更新方式如下：</p><p><strong>拉取最新镜像</strong></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/website/log/2024-03-10/image-20240310144322494.png" alt="image-20240310144322494"></p><p><strong>升级容器</strong></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/website/log/2024-03-10/image-20240310144552113.png" alt="image-20240310144552113"></p><p>重新访问<a href="https://waline-server.insectmk.cn/">评论预览页面</a>或<a href="https://waline-server.insectmk.cn/ui/">评论管理页面</a>查看是否更新成功</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-02-25]-Hexo博客取消视频自动播放</summary><div class="toggle-content"><p><strong>取消bilibili内嵌视频自动播放</strong></p><blockquote><p>打开有视频的网页，每个视频都在放，看着很杂乱，就想着关掉自动播放。<br>只需要在视频链接的后面加上<code>&amp;autoplay=0</code>参数即可，例：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;position: relative; width: 100%; height: 0; padding-bottom: 75%;&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">&quot;//player.bilibili.com/player.html?aid=1450759246&amp;bvid=BV1sv421k7uA&amp;cid=1446082017&amp;p=1&amp;autoplay=0&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">scrolling</span>=<span class="string">&quot;no&quot;</span> <span class="attr">border</span>=<span class="string">&quot;0&quot;</span> <span class="attr">frameborder</span>=<span class="string">&quot;no&quot;</span> <span class="attr">framespacing</span>=<span class="string">&quot;0&quot;</span> <span class="attr">allowfullscreen</span>=<span class="string">&quot;true&quot;</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">style</span>=<span class="string">&quot;position: absolute; width: 100%; height: 100%; left: 0; top: 0;&quot;</span>&gt;</span> </span><br><span class="line"> <span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></blockquote></div></details><details class="toggle" style="border: 1px solid #90EE90"><summary class="toggle-button" style="background-color: #90EE90;">[2024-02-21]-Hexo博客首次引入视频</summary><div class="toggle-content"><p><strong>引入bilibili内嵌视频</strong></p><blockquote><p>以后就把B站当作视频存储桶了，今天第一次在博客引入视频内容。<br><a href="/posts/1b31e328/" title="CS2欢乐时刻">CS2欢乐时刻</a><br>但是直接使用bilibili提供的内嵌代码，视频框会特别小，需要做一些修改。<br>首先需要在外层嵌套一个带<code>position: relative; width: 100%; height: 0; padding-bottom: 75%;</code>样式的<code>div</code>，并为<code>iframe</code>加上样式<code>position: absolute; width: 100%; height: 100%; left: 0; top: 0;</code>，案例如下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;position: relative; width: 100%; height: 0; padding-bottom: 75%;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">&quot;//player.bilibili.com/player.html?aid=1450759246&amp;bvid=BV1sv421k7uA&amp;cid=1446082017&amp;p=1&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">scrolling</span>=<span class="string">&quot;no&quot;</span> <span class="attr">border</span>=<span class="string">&quot;0&quot;</span> <span class="attr">frameborder</span>=<span class="string">&quot;no&quot;</span> <span class="attr">framespacing</span>=<span class="string">&quot;0&quot;</span> <span class="attr">allowfullscreen</span>=<span class="string">&quot;true&quot;</span> </span></span><br><span class="line"><span class="tag">         <span class="attr">style</span>=<span class="string">&quot;position: absolute; width: 100%; height: 100%; left: 0; top: 0;&quot;</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>参考文章：<a href="https://www.tamsiree.com/TechnicalResearch/Hexo/Hexo%E6%8F%92%E5%85%A5Bilibili%E8%A7%86%E9%A2%91%E8%87%AA%E9%80%82%E5%BA%94/">Hexo 插入 Bilibili 视频自适应</a></p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-02-20]-增加文章加密插件</summary><div class="toggle-content"><p><strong>增加文章加密插件</strong></p><blockquote><p>最近想写日记了，为了以后能有所回忆，但是又不想让别人看见，在网上找到了<a href="https://github.com/D0n9X1n/hexo-blog-encrypt">hexo-blog-encrypt</a>这个加密插件。<br><a href="/posts/ca85c64c/" title="为Hexo文章设置加密">hexo-blog-encrypt配置文章</a></p></blockquote><p><strong>更改置顶文章</strong></p><blockquote><p>将求生之路服务器与我的世界老九门服务器相关文章指定，方便查看<br>只需要在文章信息头中添加<code>sticky: &lt;number&gt;</code>即可，例：<code>sticky: 200</code>，数字越大文章越靠前，<code>sticky:</code>留空则不进行排序。</p></blockquote></div></details><details class="toggle" style="border: 1px solid #90EE90"><summary class="toggle-button" style="background-color: #90EE90;">[2024-02-19]-Hexo博客更新邮件提醒</summary><div class="toggle-content"><p><strong>修复搜索框样式错误</strong></p><blockquote><p>是由于CDN配置的问题，更新主题后，新的主题配置文件默认CDN的<code>version</code>配置参数为<code>true</code>，但博主使用旧配置参数为<code>false</code>，导致无法加载搜索框样式。参考<a href="https://github.com/jerryc127/hexo-theme-butterfly/releases/tag/4.12">Butterfly4.12更新</a>、<a href="https://butterfly.js.org/posts/ceeb73f/?highlight=local+search#CDN">Butterfly-CDN</a></p></blockquote><p><strong>增加评论邮件提醒</strong></p><blockquote><p>为了能及时回复消息，增加了邮件提醒功能，功能扩展步骤参考<a href="/posts/a2685843/" title="Docker部署下配置Waline的QQ邮箱提醒">Docker部署下配置Waline的QQ邮箱提醒</a></p><p>为了让伙伴们能够及时收到回复消息，记得在评论的时候填写邮箱地址哦~</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-01-31]-求生之路插件更新</summary><div class="toggle-content"><p><strong>增加移速插件</strong></p><blockquote><p><a href="https://forums.alliedmods.net/showthread.php?p=2757313">持武器不同移速</a><br>感谢室友<a href="https://starisora.cn/">Starisora</a>推荐的插件</p></blockquote></div></details><details class="toggle" style="border: 1px solid #BFEFFF"><summary class="toggle-button" style="background-color: #BFEFFF;">[2024-01-27]-转移评论存储地区</summary><div class="toggle-content"><p><strong>转移Waline评论存储地区</strong></p><blockquote><p>从<a href="https://console.leancloud.cn/apps">LeanCloud</a>华东地区转到华北地区。<br>还好最近在管理博客，偶然间发现了<a href="https://console.leancloud.cn/apps">LeanCloud</a>的华东地区要被关闭了！！！<br><a href="https://leancloudblog.com/remove_e1/">原文在这儿</a>，说是<code>2024年1月31日</code>就要停止华东节点的服务，正好我就是华东的，可恶！<br>还有更离谱的是下午16:00过后不能导出！！！提示<code>You can&#39;t export data after 16:00.</code>，昨天发现的只能今天转移。</p></blockquote><p><strong>更新博客鼠标点击效果</strong></p><blockquote><p>更新主题版本到4.12.0之后，点击产生文字的效果就没了。<br>现换为点击产生烟花的效果。<br>之前的背景效果也没了，现也重新加上（跟随鼠标的线条）。</p></blockquote><p><strong>优化图库显示逻辑</strong></p><blockquote><p>从按日期升序排列更改为按日期降序排列<br>图库封面由高清晰度图片转为低清晰度图片。<br>图库由一次加载所有图片转为只加载10张图片，点击<code>加载更多</code>再次加载。</p></blockquote></div></details><details class="toggle" style="border: 1px solid #90EE90"><summary class="toggle-button" style="background-color: #90EE90;">[2024-01-26]-Hexo博客更新</summary><div class="toggle-content"><p><strong>更新Hexo</strong></p><blockquote><p>升级Node版本为<code>20.11.0</code><br>升级Hexo版本为<code>7.0.0</code></p></blockquote><p><strong>更新Butterfly主题</strong></p><blockquote><p>从以前的<code>git clone</code>方式更改为<code>npm install</code>方式。<br>版本从<code>3.9.0</code>升级到<code>4.12.0</code>。<br>首页侧边栏增加最新评论模块（QQ提醒的平替功能）。<br>升级之后因为配置文件的问题，generate的时候一直报错，奋战到凌晨2点才解决。<br>结果只是一个需要数组参数的变量我就只给了一个值，没有加<code>-</code>，烦死了(|^|)！</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-01-24]-更换Waline服务端</summary><div class="toggle-content"><p><strong>取消评论的QQ提醒功能</strong></p><blockquote><p>因为QMsg酱维护起来太麻烦了，以后就不折腾了。<br>评论没有QQ提醒了，留言就看不到啦，有问题可以用博客主页的联系方式联系博主哦~<br>因为评论服务端使用本机部署了，现在评论加载很快哦。</p></blockquote><p><strong>卸载QMsg酱私有云</strong></p><blockquote><p>不用QMsg了，这个也用不上了，没必要开着占服务器资源。</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-01-23]-我的世界混合服</summary><div class="toggle-content"><p><strong>搭建MohistMC混合服</strong></p><blockquote><p>最近朋友又游戏荒了，在推荐游戏的时候有人推荐了我的世界，正好之前有过搭MC服务器的经验。<br>但是朋友需要Mod和插件，博主只搭建过纯净服，又是扣了一下午的头才弄好。<br>并且记录了搭建步骤，可以参考<a href="/posts/8399162a/" title="搭建我的世界混合服务器">搭建我的世界混合服务器</a>。<br>目前装了插件：白名单、传送、皮肤；模组：机械动力，盗版可进。</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2024-01-19]-求生之路2多人</summary><div class="toggle-content"><p><strong>引入豆瓣酱插件平台</strong></p><blockquote><p>之前是为了求生之路2服务器简洁好维护，就没装平台。<br>最近要玩儿的朋友多了，又加上单独的多人插件不好装（装了我一下午，还是失败了，而且不好测试【没朋友】）。<br>就想着装个插件平台得了，然后一用平台就能多人了，豆瓣酱牛掰。<br>特别感谢室友<a href="https://starisora.cn/">Starisora</a>的技术支持和服务器借用。</p></blockquote></div></details><details class="toggle" style="border: 1px solid #90EE90"><summary class="toggle-button" style="background-color: #90EE90;">[2023-10-11]-Waline服务端本机部署</summary><div class="toggle-content"><p><strong>Docker部署Waline服务端</strong></p><blockquote><p>最近在访问自己博客的时候发现评论有时候访问不了，所以想将服务端部署在自己的服务器上。<br>但是部署是部署上了，但是目前还不知道如何才能使用Waline的钩子函数。<br>所以博客还是使用的<a href="https://vercel.com/">vercel</a>部署的服务端，但是自己自己部署的服务端还是存在的。<br><a href="https://waline-server.insectmk.top/">vercel部署的服务端</a>，<a href="https://waline-server.insectmk.cn/">本机部署的服务端</a>。<br>等知道本机部署如何使用Waline钩子函数的时候再换到本机部署的服务端。</p></blockquote><p><strong>博文上QMsg星标啦</strong></p><blockquote><p>昨天凌晨1点收到网站评论的QQ提醒，非常开心~<br><a href="https://qmsg.zendee.cn/">Qmsg官网</a></p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2023-09-28]-Hexo博客QMsg私有云部署</summary><div class="toggle-content"><p><strong>重新部署QMsg私有云</strong></p><blockquote><p>最近QMsg私有云内测令牌过期了，今天才想起来。<br>但是很久没碰博客了，又加上QMsg作者更新，然后重新授权花了一小点儿时间。<br>好在官方文档详细，并且自己有部署记录，还是顺利解决了，又可以休息一个月啦。</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2023-08-18]-Hexo博客QMsg私有云部署</summary><div class="toggle-content"><p><strong>搭建QMsg私有云部署</strong></p><blockquote><p>网站QQ评论提醒一直用的是<a href="https://qmsg.zendee.cn/">Qmsg酱</a>的服务。<br>近两天QMsg出了新的功能，就是能够搭建自己的消息发送接口，并且用的还是Docker部署，非常的人性化。<br>虽然官方的接口很稳定，但是既然能很方便地搭建属于自己的接口，为什么不呢？<br>还能减轻以下官方接口的压力。<br>目前私有化部署的后台消息记录的时间有点儿问题，官方还在解决中，等待后续更新……</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2023-08-08]-Hexo博客新增助记页面</summary><div class="toggle-content"><p><strong>添加备忘页面</strong></p><blockquote><p>平时有些文本需要经常使用，为了方便粘贴，在扩展模块增加了备忘页面。</p></blockquote></div></details><details class="toggle" style="border: 1px solid #EEF7FA"><summary class="toggle-button" style="background-color: #EEF7FA;">[2023-07-21]-Hexo博客评论QQ提醒更新</summary><div class="toggle-content"><p><strong>修复QQ提醒失效</strong></p><blockquote><p>最近两天突然发现评论的QQ提醒功能失效了，不知道是什么原因。<br>昨天在服务器搭建好了QMsg的消息提醒机器人，如果有空会写创建机器人的步骤（其实官方文档也很详细）。<br>昨天没成功还以为是自己搭建的机器人出问题了，今天又折腾了一下午才解决。<br>今天将解决的过程记录了下来，文档在这儿 &gt; <a href="/posts/3a414f7f/" title="Waline配置QQ提醒">Waline配置QQ提醒</a>。</p></blockquote></div></details><details class="toggle" style="border: 1px solid #BFEFFF"><summary class="toggle-button" style="background-color: #BFEFFF;">[2023-07-20]-Hexo博客更新</summary><div class="toggle-content"><p><strong>网站目录更新</strong></p><blockquote><p>由于网站模块越来越多，导致网站菜单杂乱，就重新对菜单进行了分类。<br>并根据菜单分类调整了网站的目录结构，方便后期的维护。<br>网站目录结构的变更，可能会导致部分页面的评论丢失或者混乱，如出现上述情况，优先将评论更改到正确的URL，如失败则会删除评论。<br>根据网站目录结构的变更，更新图床中图片的路径。</p></blockquote><p><strong>新增日志页面</strong></p><blockquote><p>为记录网站的成长过程，新增了本页面，为方便后期的维护。<br>此前有一些简陋的日志记录，可以查看<a href="/posts/9b7de2ae/" title="Hexo建站感言">建站感言</a>文章，日志记录在文章的末尾。</p></blockquote><p><strong>新增页面滚动进度</strong></p><blockquote><p>跟随Butterfly主题的更新，开启了页面滚动进度显示的功能</p></blockquote><p><strong>重新部署Waline评论系统</strong></p><blockquote><p>由于之前部署Waline评论系统的时候迷迷糊糊的，导致命名不规范。<br>改名又麻烦，现重新部署，并保留了之前的数据。</p></blockquote></div></details><!-- flag of hidden posts -->]]></content>
      
      
      <categories>
          
          <category> 日志 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 服务器 </tag>
            
            <tag> 网站 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SourceMOD环境搭建</title>
      <link href="/posts/2ebff63b/"/>
      <url>/posts/2ebff63b/</url>
      
        <content type="html"><![CDATA[<h1 id="SourceMOD环境搭建"><a href="#SourceMOD环境搭建" class="headerlink" title="SourceMOD环境搭建"></a>SourceMOD环境搭建</h1><p>参考博文<a href="https://blog.csdn.net/ZBzibing/article/details/124179268">VSCode配置SourceMod编译方法</a></p><p>本博文只支持Windows环境的搭建</p><h2 id="下载软件"><a href="#下载软件" class="headerlink" title="下载软件"></a>下载软件</h2><h3 id="sourcemod"><a href="#sourcemod" class="headerlink" title="sourcemod"></a>sourcemod</h3><p>插件的编译环境，<a href="https://www.sourcemod.net/downloads.php?branch=stable">下载地址</a></p><p>下载Windows版本</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/sourcemod-environment/image-20230711165425457.png" alt="下载Windows的版本"></p><p>保留下载好的压缩包</p><h3 id="VScode"><a href="#VScode" class="headerlink" title="VScode"></a>VScode</h3><p>源码编辑器，<a href="https://code.visualstudio.com/Download">下载地址</a></p><p>下载Windows版本</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/sourcemod-environment/image-20230711165722511.png" alt="下载Windows版本"></p><p>下载好后，执行下载的安装文件，选择对应的安装目录即可。</p><h2 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h2><h3 id="VScode插件"><a href="#VScode插件" class="headerlink" title="VScode插件"></a>VScode插件</h3><p>安装<strong>Chinese</strong>简体中文插件，装好后进行重启</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/sourcemod-environment/image-20230711170058382.png" alt="安装中文插件"></p><p>因为SourceMod采用的语言是<strong>SourcePawn</strong>语言，类似于C语言，安装<strong>SourcePawn</strong>语言的支持</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/sourcemod-environment/image-20230711170418074.png" alt="安装SourcePawn插件"></p><p>安装<code>All Autocomplete</code>运行插件</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/sourcemod-environment/image-20230711170501395.png" alt="安装All Autocomplete插件"></p><h3 id="编译环境"><a href="#编译环境" class="headerlink" title="编译环境"></a>编译环境</h3><p>将在<a href="https://www.sourcemod.net/downloads.php?branch=stable">sourcemod官网</a>下载的压缩包解压，进入到<code>addons\sourcemod\scripting</code>目录，出现如下文件夹即文件，提取<code>include</code>文件夹与<code>spcomp.exe</code>、<code>compile.exe</code>可执行文件到一个新的文件夹，下文称<code>mysourcemod</code>目录。</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/sourcemod-environment/image-20230711171106859.png" alt="需要复制的文件"></p><p>在<code>mysourcemod</code>目录中放入上面复制的三个东西并创建<code>compile</code>文件夹用于存放编译后的文件，如下图所示：（.vscode文件夹与test.sp不用管）</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/sourcemod-environment/image-20230711171603398.png" alt="文件结构"></p><p>设置VScode的<code>SourcePawn</code>插件，配置<code>SourcePawn</code>编译设置</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/sourcemod-environment/image-20230711171854289.png" alt="找到SourcePawn设置"></p><p>设置编译后的插件文件存放的位置，也就是<code>mysourcemod</code>目录中的<code>compiled</code>目录的路径</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/sourcemod-environment/image-20230711172037295.png" alt="设置编译后的插件存放路径"></p><p>设置编译器的路径，即<code>mysourcemod</code>目录中的<code>spcomp.exe</code>可执行文件的路径</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/sourcemod-environment/image-20230711172423737.png" alt="设置编译器路径"></p><p>到这里，编译插件的前置工作就完成了。</p><h2 id="编译插件"><a href="#编译插件" class="headerlink" title="编译插件"></a>编译插件</h2><p>在<code>mysourcemod</code>目录下创建你的<code>.sp</code>源码文件，编写你的插件，如果不知道语法，可以使用以下示例代码进行测试：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;sourcemod&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 插件的基础信息</span></span><br><span class="line">public Plugin myinfo =</span><br><span class="line">&#123;</span><br><span class="line">name = <span class="string">&quot;My First Plugin&quot;</span>,</span><br><span class="line">author = <span class="string">&quot;Me&quot;</span>,</span><br><span class="line">description = <span class="string">&quot;My first plugin ever&quot;</span>,</span><br><span class="line">version = <span class="string">&quot;1.0&quot;</span>,</span><br><span class="line">url = <span class="string">&quot;http://www.sourcemod.net/&quot;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 服务器启动时会回调此函数</span></span><br><span class="line">public <span class="type">void</span> <span class="title function_">OnPluginStart</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 在服务器控制台打印Hello world</span></span><br><span class="line">    PrintToServer(<span class="string">&quot;Hello world!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在你的<code>.sp</code>源码文件中使用<strong>鼠标右键</strong>，选择<code>select current file as main</code>选项将当前文件设置为需要编译的文件，然后再<strong>鼠标右键</strong>，选择<code>compile file</code>选项编译此插件源码，产出的<code>.smx</code>插件文件就会放在<code>mysourcemod</code>文件夹下的<code>compiled</code>文件夹中。</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/sourcemod-environment/image-20230711173202020.png" alt="选择select current file as main选项"></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/sourcemod-environment/image-20230711173302301.png" alt="选择compile file选项"></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/tutorial/sourcemod-environment/image-20230711173344352.png" alt="编译产出的插件文件"></p><p>到此为止，插件的编译环境就搭建好了，将自己编写的插件放到服务器上试试吧~</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 游戏 </tag>
            
            <tag> 插件 </tag>
            
            <tag> 求生之路 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>动/静态语言、强/弱类型语言、编译型/解释形语言的区别</title>
      <link href="/posts/b51f2d85/"/>
      <url>/posts/b51f2d85/</url>
      
        <content type="html"><![CDATA[<h2 id="动-静态语言、强-弱类型语言、编译型-解释形语言的区别"><a href="#动-静态语言、强-弱类型语言、编译型-解释形语言的区别" class="headerlink" title="动&#x2F;静态语言、强&#x2F;弱类型语言、编译型&#x2F;解释形语言的区别"></a>动&#x2F;静态语言、强&#x2F;弱类型语言、编译型&#x2F;解释形语言的区别</h2><h3 id="动态类型语言和静态类型语言的区别"><a href="#动态类型语言和静态类型语言的区别" class="headerlink" title="动态类型语言和静态类型语言的区别"></a>动态类型语言和静态类型语言的区别</h3><ol><li><p>动态语言&#x2F;动态类型语言</p><p>理解：在编程时不会给变量定义类型，运行期间才会做数据类型的检查，语言会在该变量第一次赋值时判断该值的类型，并将数据类型记录下来。python就是典型的动态类型语言。</p></li><li><p>静态语言&#x2F;静态类型语言</p><p>理解：与动态类型语言恰好相反，在编程中定义变量时就要声明该变量的数据类型，在编译期间检查。C、C++、Java就是典型的静态类型语言。</p></li></ol><h3 id="强类型语言和弱类型语言的区别"><a href="#强类型语言和弱类型语言的区别" class="headerlink" title="强类型语言和弱类型语言的区别"></a>强类型语言和弱类型语言的区别</h3><ol><li><p>强类型语言&#x2F;强制数据类型定义语言</p><p>理解：变量定义了数据类型后，如果不经过强转，数据就不能转换为别的数据类型，此语言是数据</p><p>安全的语言。C、C++、Java就是强类型语言</p></li><li><p>弱类型语言</p><p>理解：变量可赋不同类型的语言，也就是说此语言常常会隐式转换数据，JavaScript就是弱类型语言</p></li><li><p>注意：</p><ul><li>强弱类型语言并没有非常明确的定义</li><li>因为强类型语言需要对每个变量类型做判断，所以强类型语言在速度上要比弱类型略逊一筹，换言之强类型语言带来的严谨性能够避免在变量类型及赋值上的许多错误。</li></ul></li></ol><h3 id="编译型语言和解释型语言的区别"><a href="#编译型语言和解释型语言的区别" class="headerlink" title="编译型语言和解释型语言的区别"></a>编译型语言和解释型语言的区别</h3><ol><li><p>前言：计算机不能直接识别高级语言，所有的高级语言都必须翻译成机器语言（二进制机器指令）</p></li><li><p>编译型语言</p><p>理解：把语言翻译成机器指令，这个过程只执行一次，所以编译型语言执行效率高，但是不同的平台（系统）的机器指令是不同的，所以编译型语言跨平台性能较差。C、C++就是编译型语言。</p></li><li><p>解释型语言</p><p>理解：该语言运行时才逐行翻译成机器指令，而且每运行一次就要翻译一次，所以效率较低。JavaScript就是解释形语言。</p></li><li><p>扩展</p><p>​Java比较特殊，大致归类为解释型语言，该语言不属于传统的解释型语言也不属于传统的编译型语言，该语言将源代码通过编译器成编译成字节码文件（中间文件&#x2F;class文件），字节码文件不能被系统直接执行，但是可以被安装在该平台上的Java虚拟机（VM）进行解释执行。换言之，Java源码被编译成字节码文件，该字节码文件被各大平台上的Java虚拟机解释执行，实现了跨平台特性，但是跨平台的前提是平台上必须安装相匹配的Java虚拟机。</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> 教育 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 千锋教育 </tag>
            
            <tag> 培训 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>千锋JavaDay01</title>
      <link href="/posts/836f8ca6/"/>
      <url>/posts/836f8ca6/</url>
      
        <content type="html"><![CDATA[<h1 id="Day01"><a href="#Day01" class="headerlink" title="Day01"></a>Day01</h1><h2 id="学习方法"><a href="#学习方法" class="headerlink" title="学习方法"></a>学习方法</h2><blockquote><ol><li>每天知识点的梳理，形成每天的知识点文档</li><li>每天老师代码编写至少3遍，每一遍都要写注意事项</li><li>作业（锻炼思维能力，第二天老师会去评讲）</li><li>复习（每天复习前一天的内容，每周天复习本周的内容）</li><li>预习（培养自学能力）</li><li>与老师交流，看哪些方面能深入</li></ol></blockquote><h2 id="一、软件开发基础"><a href="#一、软件开发基础" class="headerlink" title="一、软件开发基础"></a>一、软件开发基础</h2><h3 id="1-什么是JavaEE"><a href="#1-什么是JavaEE" class="headerlink" title="1.什么是JavaEE"></a>1.什么是JavaEE</h3><blockquote><p>接收到客户端的请求，并通过响应返回给客户端数据的技术</p></blockquote><h3 id="2-常有的开发语言"><a href="#2-常有的开发语言" class="headerlink" title="2.常有的开发语言"></a>2.常有的开发语言</h3><blockquote><p>C&#x2F;C++：嵌入式</p><p>HTML、CSS、JavaScript、JQuery、VUE、BootStrap：网页</p><p>Java：移动端、服务器、数据库</p><p>Python：数据分析</p></blockquote><h2 id="二、Java开发环境搭建"><a href="#二、Java开发环境搭建" class="headerlink" title="二、Java开发环境搭建"></a>二、Java开发环境搭建</h2><h3 id="1-什么是JDK和JRE"><a href="#1-什么是JDK和JRE" class="headerlink" title="1.什么是JDK和JRE"></a>1.什么是JDK和JRE</h3><blockquote><p>目的：做菜</p><p>锅碗瓢盆、菜刀、菜板：工具</p><p>小煎鸡脚：食材</p><p>厨房：环境</p></blockquote><blockquote><p>目的：写代码</p><p>JDK：Java开发工具包</p><p>Java：代码</p><p>JRE：Java运行时环境</p></blockquote><h3 id="2-安装JDK"><a href="#2-安装JDK" class="headerlink" title="2.安装JDK"></a>2.安装JDK</h3><blockquote><p>注意：</p><ol><li><p>如果你仅仅运行java程序，只用安装JRE即可，但是你要编写Java程序，就必须安装JDK和JRE，所以JDK安装中包含了JRE</p><ol start="2"><li>安装路径建议用默认路径</li></ol></li><li><p>如果使用自定义路径，路径中不要使用中文</p></li><li><p>安装后不会像QQ有开启软件的图标</p></li><li><p>如果你安装了JDK和JRE，建议卸载后重新安装（控制面板-&gt;程序-&gt;删除程序）</p></li></ol></blockquote><h3 id="3-配置环境变量"><a href="#3-配置环境变量" class="headerlink" title="3.配置环境变量"></a>3.配置环境变量</h3><blockquote><p>目的：让当前系统能够识别到Java的运用程序</p><p>位置：计算机&#x2F;此电脑 右键 -&gt; 属性 -&gt; 高级系统设置 -&gt; 高级卡页 -&gt; 环境变量</p></blockquote><blockquote><p>当前用户变量 和 系统变量 的区别：</p><p>在当前用户变量配置的信息，只能在当前用户上使用</p><p>在系统变量配置的信息，切换用户后也可以使用</p></blockquote><blockquote><p>配置信息：JAVA_HOME、Path</p><p>注意：</p><ol><li>JAVA_HOME一般是没有的，需要新建，Path是有的不需要新建</li><li>Path中可能会存在多个路径，多个路径之间使用英文的;作为分隔符</li></ol><table><thead><tr><th>变量名</th><th>变量值</th></tr></thead><tbody><tr><td>JAVA_HOME</td><td>C:\Program Files\Java\jdk1.9.0_144</td></tr><tr><td>Path</td><td>%JAVA_HOME%\bin</td></tr></tbody></table></blockquote><h3 id="4-环境变量配置是否成功"><a href="#4-环境变量配置是否成功" class="headerlink" title="4.环境变量配置是否成功"></a>4.环境变量配置是否成功</h3><blockquote><p>打开的系统的控制台&#x2F;cmd&#x2F;黑窗口&#x2F;命令行：搜索cmd（按键盘win+r,弹出运行界面，输入“cmd” ）</p><p>输入：</p><p>​java -version</p><p>​javac -version</p><p>注意：</p><ol><li>如果出现“不是内部或外部命令”，证明配置失败，原因是Java_HOME或Path的路径配置错误</li><li>出现配置失败，修改了路径后，重新启动cmd</li></ol></blockquote><h2 id="三、编写第一个Java程序"><a href="#三、编写第一个Java程序" class="headerlink" title="三、编写第一个Java程序"></a>三、编写第一个Java程序</h2><h3 id="1-常用cmd命令"><a href="#1-常用cmd命令" class="headerlink" title="1.常用cmd命令"></a>1.常用cmd命令</h3><blockquote><table><thead><tr><th>命令</th><th>描述</th></tr></thead><tbody><tr><td>cd&#x2F;</td><td>退回到根目录</td></tr><tr><td>d:</td><td>跳转到指定D盘符</td></tr><tr><td>cd 文件夹名</td><td>进入到指定文件夹</td></tr><tr><td>cls</td><td>清空cmd命令</td></tr><tr><td>dir</td><td>遍历该文件夹下所有的文件</td></tr></tbody></table></blockquote><h3 id="2-在记事本编写Java源程序"><a href="#2-在记事本编写Java源程序" class="headerlink" title="2.在记事本编写Java源程序"></a>2.在记事本编写Java源程序</h3><blockquote><p>工作空间：编写代码的文件夹（fy2023workspace）</p><p>注意：</p><ol><li>老师的项目Day01，学生的项目MyDay01</li><li>java源文件的扩展名是Hello.java</li></ol></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Hello</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;HelloWorld...1&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;HelloWorld...2&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;HelloWorld...3&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-在cmd命令窗口编译、执行"><a href="#3-在cmd命令窗口编译、执行" class="headerlink" title="3.在cmd命令窗口编译、执行"></a>3.在cmd命令窗口编译、执行</h3><blockquote><p>javac Hello.java – 编译：将.java文件编译成.class文件</p><p>java Hello – 运行：运行.class文件</p><p>总结：先编译，再运行</p></blockquote><h3 id="4-程序编译执行过程"><a href="#4-程序编译执行过程" class="headerlink" title="4.程序编译执行过程"></a>4.程序编译执行过程</h3><blockquote><p>见java编译运行图.png</p></blockquote><h2 id="四、老师对你们的几点期望"><a href="#四、老师对你们的几点期望" class="headerlink" title="四、老师对你们的几点期望"></a>四、老师对你们的几点期望</h2><blockquote><p>1.按时出勤，不要在人间仙界来回穿梭，更不要四海八荒到处溜达；</p><p>2.上课要带元神来，不能只来仙体；</p><p>3.老师会把几十年的修为毫无保留滴渡给你，帮你渡劫；</p><p>4.自己要努力，争取顺利飞升上神，最起码也要上仙，千万不要应劫；</p><p>5.学好这门课，受益三生三世，收获十里桃林；</p></blockquote><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><blockquote><ol><li>软件基础，让同学们有一定的认知</li><li>搭建环境（JDK、JRE、环境变量）</li><li>编写Java代码（工作空间的概念，写代码，编译运行的过程）</li></ol></blockquote><h2 id="预习"><a href="#预习" class="headerlink" title="预习"></a>预习</h2><blockquote><p>什么是JVM？</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 教育 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 千锋教育 </tag>
            
            <tag> 培训 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>主方法的构造</title>
      <link href="/posts/f9fe4650/"/>
      <url>/posts/f9fe4650/</url>
      
        <content type="html"><![CDATA[<h1 id="主方法的构造"><a href="#主方法的构造" class="headerlink" title="主方法的构造"></a>主方法的构造</h1><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p> main方法是Java程序的入口</p><p>在java核心编程中，JVM会查找类中的public static void main(String[] args)，如果找不到该方法就抛出错误NoSuchMethodError:main 程序终止</p><p>Main方法必须严格遵循它的语法规则，方法签名必须是public static void，参数是字符串数组类型，如果是Java1.5及以后的版本还可以使用可变参数 </p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String... args)</span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="灵魂三问"><a href="#灵魂三问" class="headerlink" title="灵魂三问"></a>灵魂三问</h2><blockquote><p> 为什么main方法是公有的（public）？？？</p><p> Java指定了一些访问修饰符如：private、默认、protected、public</p><p>任何方法或变量都可以声明为public，Java可以从该类之外的地方访问。因为main方法是公共的，</p><p>JVM就可以轻松的访问执行它。 </p></blockquote><blockquote><p>为什么main方法是静态的（static）</p><ol><li>正因为main方法是静态的，JVM调用这个方法就不需要创建一个该类的实例</li><li>如果main方法不声明为静态的，JVM就必须创建main类的实例，因为构造方法可以被重载，JVM就没法确定调用哪个main方法。</li><li>静态方法和静态数据加载到内存就可以直接调用而不需要像实例方法一样创建实例后才能调用，如果main方法是静态的，那么它就会被加载到JVM上下文中成为可执行的方法。</li></ol></blockquote><blockquote><p>为什么main方法是无返回值的（void）</p><p> 因为main返回任何值对程序都没任何意义，所以设计成void，意味着main不会有任何值返回 </p></blockquote><h2 id="注意点"><a href="#注意点" class="headerlink" title="注意点"></a>注意点</h2><blockquote><ol><li>除了static、void、和public，你可以使用final，synchronized、和strictfp修饰符在main方法的签名中 </li><li>main方法在Java可以像其他方法一样被重载，但是JVM只会调用上面这种签名规范的main方法</li><li>你可以在main中使用throws，可以抛出任何受检性和非受检性异常</li><li>静态初始化块在JVM调用main方法前被执行，它们在类被JVM加载到内存的时候就被执行了（涉及到类的加载过程）</li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> 教育 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 千锋教育 </tag>
            
            <tag> 培训 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>千锋JavaDay02</title>
      <link href="/posts/1a66dd1c/"/>
      <url>/posts/1a66dd1c/</url>
      
        <content type="html"><![CDATA[<h1 id="Day02"><a href="#Day02" class="headerlink" title="Day02"></a>Day02</h1><h2 id="一、Hello的扩展"><a href="#一、Hello的扩展" class="headerlink" title="一、Hello的扩展"></a>一、Hello的扩展</h2><h3 id="1-详解代码"><a href="#1-详解代码" class="headerlink" title="1.详解代码"></a>1.详解代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">编写人：千锋彭于晏</span></span><br><span class="line"><span class="comment">时间：2022/12/29</span></span><br><span class="line"><span class="comment">版本：1.0</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">//公有的类叫做Hello</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Hello</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//公有的静态的无返回值的方法叫做main</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//系统输出打印语句(&quot;打印内容&quot;);</span></span><br><span class="line">System.out.println(<span class="string">&quot;HelloWorld...1&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;HelloWorld...2&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;HelloWorld...3&quot;</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">public - 公有的</span></span><br><span class="line"><span class="comment">class - 类</span></span><br><span class="line"><span class="comment">Hello - 类名</span></span><br><span class="line"><span class="comment">static - 静态的</span></span><br><span class="line"><span class="comment">void - 无返回值的</span></span><br><span class="line"><span class="comment">main - 方法名</span></span><br><span class="line"><span class="comment">String - 字符串类型(ps:&quot;千锋彭于晏&quot;)</span></span><br><span class="line"><span class="comment">String[] - 字符串类型的数组(ps:[&quot;椎名空&quot;,&quot;麻生希&quot;,&quot;水菜丽&quot;])</span></span><br><span class="line"><span class="comment">args - 字符串数组名</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h3 id="2-代码细节"><a href="#2-代码细节" class="headerlink" title="2.代码细节"></a>2.代码细节</h3><blockquote><ol><li>public修饰的类名必须和文件名一致</li><li>Java是一门大小写敏感的语言</li><li>括号都是成双成对的</li><li>方法里的代码都是从上往下执行-顺序执行</li><li>方法中的代码又叫做执行语句，执行语句用分号结束</li></ol></blockquote><h2 id="二、编码规范"><a href="#二、编码规范" class="headerlink" title="二、编码规范"></a>二、编码规范</h2><h3 id="1-书写格式"><a href="#1-书写格式" class="headerlink" title="1.书写格式"></a>1.书写格式</h3><blockquote><p>使用tab键让代码具有层次感</p><p>目的：提高代码的可读性</p></blockquote><h3 id="2-代码注释"><a href="#2-代码注释" class="headerlink" title="2.代码注释"></a>2.代码注释</h3><blockquote><p>含义：描述代码</p><table><thead><tr><th>注释</th><th>描述</th></tr></thead><tbody><tr><td>&#x2F;&#x2F;注释内容</td><td>单行注释</td></tr><tr><td>&#x2F;&#42;注释内容&#42;&#x2F;</td><td>多行注释</td></tr><tr><td>&#x2F;&#42;&#42;注释内容&#42;&#x2F;</td><td>文档注释</td></tr></tbody></table></blockquote><blockquote><p>编译的过程：xxx.java –&gt; xxx.class</p><p>反编译的过程：xxx.class –&gt; xxx.java</p><p>注意：注释不被编译到.class文件</p></blockquote><h2 id="三、path的作用"><a href="#三、path的作用" class="headerlink" title="三、path的作用"></a>三、path的作用</h2><blockquote><p>作用：在其他路径中找到path路径里的文件</p></blockquote><h2 id="四、Java的跨平台特性"><a href="#四、Java的跨平台特性" class="headerlink" title="四、Java的跨平台特性"></a>四、Java的跨平台特性</h2><blockquote><p>见Java的跨平台特性.png</p></blockquote><h2 id="五、Java体系的划分"><a href="#五、Java体系的划分" class="headerlink" title="五、Java体系的划分"></a>五、Java体系的划分</h2><blockquote><p>JavaSE - J2SE - 核心版本</p><p>JavaEE - J2EE - 企业版本（做服务器）</p><p>JavaME - J2ME - 微型版本（做移动端）</p></blockquote><h2 id="六、Java的发展历史"><a href="#六、Java的发展历史" class="headerlink" title="六、Java的发展历史"></a>六、Java的发展历史</h2><blockquote><p>雇主：SUM（Stanford University Network）—2009年74亿美金卖给Oracle公司</p><p> Java之父：詹姆斯·高斯林 (James Gosling)</p><p>版本变更</p><p>1995年5月23日，Java语言诞生；</p><p>1996年1月，第一个JDK-JDK1.0诞生；</p><p>1996年4月，10个最主要的操作系统供应商申明将在其产品中嵌入JAVA技术；</p><p>1996年9月，约8.3万个网页应用了JAVA技术来制作；</p><p>1997年2月18日，JDK1.1发布；</p><p>1997年4月2日，JavaOne会议召开，参与者逾一万人，创当时全球同类会议规模之纪录；</p><p>1997年9月，JavaDeveloperConnection社区成员超过十万；</p><p>1998年2月，JDK1.1被下载超过2,000,000次；</p><p>1998年12月8日，JAVA2企业平台J2EE发布；</p><p>1999年6月，SUN公司发布Java的三个版本：标准版、企业版和微型版；</p><p>2000年5月8日，JDK1.3发布；</p><p>2000年5月29日，JDK1.4发布；</p><p>2001年6月5日，NOKIA宣布，到2003年将出售1亿部支持Java的手机；</p><p>2001年9月24日，J2EE1.3发布；</p><p>2002年2月26日，J2SE1.4发布，自此Java的计算能力有了大幅提升；</p><p>2004年9月30日18:00PM，J2SE1.5发布，成为Java语言发展史上的又一里程碑。为了表示该版本的重要性，J2SE1.5更名为Java SE 5.0；</p><p>2005年6月，JavaOne大会召开，SUN公司公开Java SE 6。此时，Java的各种版本已经更名，以取消其中的数字“2”：J2EE更名为Java EE，J2SE更名为Java SE，J2ME更名为Java ME；</p><p>2006年12月，SUN公司发布JRE6.0；</p><p>2009年4月7日Google App Engine(Android安卓)开始支持Java；</p><p>2009年04月20日，甲骨文74亿美元收购Sun。取得Java的版权；</p><p>2010年11月，由于甲骨文对于Java社区的不友善，因此Apache扬言将退出JCP;</p><p>2011年7月28日，甲骨文发布Java 7.0的正式版；</p><p>2014年3月19日，甲骨文公司发布Java 8.0的正式版</p></blockquote><h2 id="七、什么是IDE"><a href="#七、什么是IDE" class="headerlink" title="七、什么是IDE"></a>七、什么是IDE</h2><blockquote><p>含义：IDE又叫做开发环境，就是编写代码的工具</p><p>记事本 –&gt; Notepad++ –&gt; eclipse –&gt; IDEA</p></blockquote><h2 id="八、编码问题"><a href="#八、编码问题" class="headerlink" title="八、编码问题"></a>八、编码问题</h2><blockquote><p>出现原因：编码和解码的格式不统一</p></blockquote><blockquote><p>NotePad++默认编码格式UTF-8</p><p>控制台默认编码格式GBK</p><p>编码格式不统一，会造成乱码</p></blockquote><blockquote><p>解决方案1：将控制台编码格式设置为UTF-8</p><p>javac -encoding&#x3D;UTF-8 Test01.java</p><p>理解：以UTF-8的编码格式来编译Test01.java</p><p>不推荐</p></blockquote><blockquote><p>解决方案2：将NotePad++编码格式设置为GBK</p><p>NodePad++中 设置–&gt;首选项–&gt;新建–&gt;ANSI</p><p>注意：设置好了以后，把之前的Test01.java删掉再新建</p></blockquote><h2 id="预习"><a href="#预习" class="headerlink" title="预习"></a>预习</h2><blockquote><ol><li>变量</li><li>基本数据类型</li><li>基本数据类型的转型</li><li>运算符</li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> 教育 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 千锋教育 </tag>
            
            <tag> 培训 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>深入乱码</title>
      <link href="/posts/18c98bc7/"/>
      <url>/posts/18c98bc7/</url>
      
        <content type="html"><![CDATA[<h2 id="什么是字符集和字符编码？"><a href="#什么是字符集和字符编码？" class="headerlink" title="什么是字符集和字符编码？"></a>什么是字符集和字符编码？</h2><blockquote><p><strong>字符：</strong>在计算机和电信技术中，一个字符是一个单位的字形、类字形单位或符号的基本信息。即一个字符可以是一个中文汉字、一个英文字母、一个阿拉伯数字、一个标点符号等。</p><p><strong>字符集：</strong>多个字符的集合。例如GB2312是中国国家标准的简体中文字符集，GB2312收录简化汉字（6763个）及一般符号、序号、数字、拉丁字母、日文假名、希腊字母、俄文字母、汉语拼音符号、汉语注音字母，共 7445 个图形字符。</p><p><strong>字符编码：</strong>把字符集中的字符编码为（映射）指定集合中的某一对象（例如：比特模式、自然数序列、电脉冲），以便文本在计算机中存储和通过通信网络的传递。</p><p>**字符集和字符编码的关系 **<br>字符集是书写系统字母与符号的集合，而字符编码则是将字符映射为一特定的字节或字节序列，是一种规则。通常特定的字符集采用特定的编码方式（即一种字符集对应一种字符编码（例如：ASCII、ISO-8859-1、GB2312、GBK都是即表示了字符集又表示了对应的字符编码，但Unicode不是，它采用现代的模型）），因此基本上可以将两者视为同义词。 </p></blockquote><h2 id="为什么乱码是问号不是其他符号呢"><a href="#为什么乱码是问号不是其他符号呢" class="headerlink" title="为什么乱码是问号不是其他符号呢?"></a>为什么乱码是问号不是其他符号呢?</h2><blockquote><p>说道这里就跟编码的发展史是很有关系的了</p><p>最开始出现的是 ASCII码、是美国人发明的，他将因为字母和特殊符号全部编码进去、采用了一个字节256种情况去编码这些字符</p><p>后来欧洲人看美国人整了个编码 于是自己整了个ISO-8859-1，他是为了将欧洲所有国家的语言文字全部编码进去，采用了 2个字节 65536种情况去对ASCII进行拓展，拓展完成之后，发现在码表中出现了大量的空白。也就是说有码值但是没有对应的字符</p><p>后来中国人发明了GB2312，也采用了2个字节， 收录 6763 个汉字，</p><p>再后来GB2312 扩展成了GBK， 21886 个汉字和图形符号</p><p>但也出现了大量空白的情况、当我们在解码一个字符的时候，如果编码和解码不一致的话很有可能造成读取的码值在码表中没有对应的字符，所以就用？代替</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 教育 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 千锋教育 </tag>
            
            <tag> 培训 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>字节码文件解析</title>
      <link href="/posts/d88f5f05/"/>
      <url>/posts/d88f5f05/</url>
      
        <content type="html"><![CDATA[<h1 id="字节码文件解析"><a href="#字节码文件解析" class="headerlink" title="字节码文件解析"></a>字节码文件解析</h1><h2 id="1、在C盘根目录定义一个带包java类-jdk8"><a href="#1、在C盘根目录定义一个带包java类-jdk8" class="headerlink" title="1、在C盘根目录定义一个带包java类(jdk8)"></a>1、在C盘根目录定义一个带包java类(jdk8)</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloWorld</span>&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;Hello world&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2、编译文件"><a href="#2、编译文件" class="headerlink" title="2、编译文件"></a>2、编译文件</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javac HelloWorld.java</span><br></pre></td></tr></table></figure><p>得到字节码文件</p><h2 id="3、使用sublime打开class文件"><a href="#3、使用sublime打开class文件" class="headerlink" title="3、使用sublime打开class文件"></a>3、使用sublime打开class文件</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">cafe babe <span class="number">0000</span> <span class="number">0034</span> 001c 0a00 <span class="number">0600</span> 0f09</span><br><span class="line"><span class="number">0010</span> <span class="number">0011</span> 0800 120a <span class="number">0013</span> <span class="number">0014</span> <span class="number">0700</span> <span class="number">1207</span></span><br><span class="line"><span class="number">0015</span> <span class="number">0100</span> 063c 696e <span class="number">6974</span> <span class="number">3e01</span> <span class="number">0003</span> <span class="number">2829</span></span><br><span class="line"><span class="number">5601</span> <span class="number">0004</span> <span class="number">436f</span> <span class="number">6465</span> <span class="number">0100</span> 0f4c 696e 654e</span><br><span class="line"><span class="number">756d</span> <span class="number">6265</span> <span class="number">7254</span> <span class="number">6162</span> 6c65 <span class="number">0100</span> <span class="number">046d</span> <span class="number">6169</span></span><br><span class="line"><span class="number">6e01</span> <span class="number">0016</span> 285b 4c6a <span class="number">6176</span> <span class="number">612f</span> 6c61 <span class="number">6e67</span></span><br><span class="line">2f53 <span class="number">7472</span> 696e 673b <span class="number">2956</span> <span class="number">0100</span> 0a53 6f75</span><br><span class="line"><span class="number">7263</span> <span class="number">6546</span> 696c <span class="number">6501</span> <span class="number">000f</span> <span class="number">4865</span> 6c6c 6f57</span><br><span class="line">6f72 6c64 2e6a <span class="number">6176</span> 610c <span class="number">0007</span> 0008 <span class="number">0700</span></span><br><span class="line">160c <span class="number">0017</span> 0018 <span class="number">0100</span> 0a48 656c 6c6f <span class="number">576f</span></span><br><span class="line">726c <span class="number">6407</span> 0019 0c00 1a00 1b01 <span class="number">0010</span> 6a61</span><br><span class="line"><span class="number">7661</span> 2f6c 616e <span class="number">672f</span> 4f62 6a65 <span class="number">6374</span> <span class="number">0100</span></span><br><span class="line">106a <span class="number">6176</span> <span class="number">612f</span> 6c61 <span class="number">6e67</span> 2f53 <span class="number">7973</span> <span class="number">7465</span></span><br><span class="line">6d01 <span class="number">0003</span> 6f75 <span class="number">7401</span> <span class="number">0015</span> 4c6a <span class="number">6176</span> <span class="number">612f</span></span><br><span class="line"><span class="number">696f</span> 2f50 <span class="number">7269</span> <span class="number">6e74</span> <span class="number">5374</span> <span class="number">7265</span> <span class="number">616d</span> 3b01</span><br><span class="line"><span class="number">0013</span> 6a61 <span class="number">7661</span> 2f69 6f2f <span class="number">5072</span> 696e <span class="number">7453</span></span><br><span class="line"><span class="number">7472</span> <span class="number">6561</span> 6d01 <span class="number">0007</span> <span class="number">7072</span> 696e 746c <span class="number">6e01</span></span><br><span class="line"><span class="number">0015</span> 284c 6a61 <span class="number">7661</span> 2f6c 616e <span class="number">672f</span> <span class="number">5374</span></span><br><span class="line"><span class="number">7269</span> <span class="number">6e67</span> 3b29 <span class="number">5600</span> <span class="number">2100</span> <span class="number">0500</span> <span class="number">0600</span> <span class="number">0000</span></span><br><span class="line"><span class="number">0000</span> <span class="number">0200</span> <span class="number">0100</span> <span class="number">0700</span> 0800 <span class="number">0100</span> 0900 <span class="number">0000</span></span><br><span class="line">1d00 <span class="number">0100</span> <span class="number">0100</span> <span class="number">0000</span> 052a b700 01b1 <span class="number">0000</span></span><br><span class="line"><span class="number">0001</span> 000a <span class="number">0000</span> <span class="number">0006</span> <span class="number">0001</span> <span class="number">0000</span> <span class="number">0002</span> 0009</span><br><span class="line">000b 000c <span class="number">0001</span> 0009 <span class="number">0000</span> <span class="number">0025</span> <span class="number">0002</span> <span class="number">0001</span></span><br><span class="line"><span class="number">0000</span> 0009 b200 <span class="number">0212</span> 03b6 <span class="number">0004</span> b100 <span class="number">0000</span></span><br><span class="line"><span class="number">0100</span> 0a00 <span class="number">0000</span> 0a00 <span class="number">0200</span> <span class="number">0000</span> <span class="number">0400</span> 0800</span><br><span class="line"><span class="number">0500</span> <span class="number">0100</span> 0d00 <span class="number">0000</span> <span class="number">0200</span> 0e</span><br></pre></td></tr></table></figure><h2 id="4、解析"><a href="#4、解析" class="headerlink" title="4、解析"></a>4、解析</h2><blockquote><p>设想假如某个程序因为不同的硬件平台原因需要编写多套代码，这会令人十分崩溃。</p><p> Java的使命就是一次编写、到处执行！！！在不同的操作系统和不同的硬件平台上，可以不用修改</p><p>代码即可顺畅地执行，如何实现跨平台?</p><p>有一个声音在天空中回响:计算机工程领域的任何问题都可以通过增加一个中间层来解决。</p><p>因此，中间码应运而生 - class文件，Java所有的指令有200个左右，一个字节(8位)可以存储256种不</p><p>同的指令信息，一个这样的字节称为字节码(Bytecode)。所以Java的class文件又叫做字节码文件</p></blockquote><blockquote><p>在代码的执行过程中，JVM将字节码进行解释执行，屏蔽对底层操作系统的依赖;JVM也可以将字节</p><p>码编译执行，如果是热点代码，会通过JIT动态地编译为机器码，提高执行效率。</p></blockquote><blockquote><p>字节码文件为十六进制的数列表示，十六进制表示的二进制流通常是一个操作指令。起始的4个字节</p><p>非常特殊 –  cafe babe(十六进制)是Gosling定义的一个魔法数，意思是Coffee Baby，其十进制值为</p><p>3405691582。它的作用是:标志该文件是一个Java类文件，如果没有识别到该标志，说明该文件不</p><p>是Java类文件或者文件已受损，无法进行加载。随后的四个字节代表当前版本号（0000 0034），</p><p>其中0000是副版本号，0034是主版本号 转为十进制为52.0对应jdk8 </p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">cafe babe <span class="number">0000</span> <span class="number">0034</span></span><br><span class="line"><span class="comment">//cafe babe:魔数,java字节码文件的标记</span></span><br><span class="line"><span class="comment">//0000  0034:版本号，其中0000是副版本号，0034是主版本号 转为十进制为52.0对应jdk8</span></span><br><span class="line"> 001c</span><br><span class="line"><span class="comment">//001c:常量数量 这个值从1开始到constant_pool_count-1结束，共27个常量</span></span><br><span class="line">0a <span class="number">0006</span> <span class="number">000f</span></span><br><span class="line"><span class="comment">//0a 0006 000f:第一个常量 指向一个方法定义 方法定义后面会跟两个字节来存储这个方法指向的类常量，另外两个字节执行方法名字和类型常量,0006指向#6号常量Object类  000f指向初始化方法</span></span><br><span class="line">09 <span class="number">0010</span> <span class="number">0011</span> </span><br><span class="line"><span class="comment">//09 0010  0011:第二个常量out属性</span></span><br><span class="line">08 <span class="number">0012</span></span><br><span class="line"><span class="comment">//08 0012:String HelloWorld</span></span><br><span class="line">0a <span class="number">0013</span> <span class="number">0014</span></span><br><span class="line"><span class="comment">//0a 0013 0014:println()方法</span></span><br><span class="line"> <span class="number">07</span> <span class="number">0012</span></span><br><span class="line"><span class="comment">//07 0012:HelloWorld这个类</span></span><br><span class="line"><span class="number">07</span> <span class="number">0015</span></span><br><span class="line"><span class="comment">//07 0015:Object类</span></span><br><span class="line"><span class="number">01</span> <span class="number">00</span> <span class="number">06</span> 3c 696e <span class="number">6974</span> 3e</span><br><span class="line"><span class="comment">//01 0006 3c 69 6e 69 74 3e:字符串&quot;&lt;init&gt;&quot;</span></span><br><span class="line"><span class="number">01</span> <span class="number">0003</span> <span class="number">2829</span> <span class="number">56</span></span><br><span class="line"><span class="comment">//01 0003 28 29 56:字符串&quot;()V&quot;</span></span><br><span class="line"><span class="number">01</span> <span class="number">0004</span> <span class="number">436f</span> <span class="number">6465</span> </span><br><span class="line"><span class="comment">//01 0004 436f 6465:</span></span><br><span class="line"><span class="number">0100</span> 0f4c 696e 654e <span class="number">756d</span> <span class="number">6265</span> <span class="number">7254</span> <span class="number">6162</span> 6c65 </span><br><span class="line"><span class="comment">//0100 0f4c 696e 654e 756d 6265 7254 6162 6c65</span></span><br><span class="line"><span class="number">0100</span> <span class="number">046d</span> <span class="number">6169</span> 6e</span><br><span class="line"><span class="comment">//0100 046d 6169 6e:字符串常量</span></span><br><span class="line"><span class="number">01</span> <span class="number">0016</span> 285b 4c6a <span class="number">6176</span> <span class="number">612f</span> 6c61 <span class="number">6e67</span> 2f53 <span class="number">7472</span> 696e 673b <span class="number">2956</span></span><br><span class="line"><span class="comment">//01 0016 285b 4c6a 6176 612f 6c61 6e67 2f53 7472 696e 673b 2956:字符串常量    </span></span><br><span class="line"><span class="number">0100</span> 0a53 6f75 <span class="number">7263</span> <span class="number">6546</span> 696c <span class="number">65</span></span><br><span class="line"><span class="comment">//01 000a 53 6f75 7263 6546 696c 65:字符串常量</span></span><br><span class="line"><span class="number">01</span> <span class="number">000f</span> <span class="number">4865</span> 6c6c 6f57 6f72 6c64 2e6a <span class="number">6176</span> <span class="number">61</span> </span><br><span class="line"><span class="comment">//01 000f 4865 6c6c 6f57 6f72 6c64 2e6a 6176 61:字符串常量</span></span><br><span class="line">0c <span class="number">0007</span> 0008  </span><br><span class="line"><span class="comment">//0c 0007 0008:NameAndType类型 &lt;init&gt;()V</span></span><br><span class="line"><span class="number">0700</span> <span class="number">16</span></span><br><span class="line"><span class="comment">//07 0016:System类</span></span><br><span class="line">0c <span class="number">0017</span> 0018</span><br><span class="line"><span class="comment">//0c 0017 0018:NameAndType类型 PrintStream()</span></span><br><span class="line"><span class="number">0100</span> 0a48 656c 6c6f <span class="number">576f</span> 726c <span class="number">64</span></span><br><span class="line"><span class="comment">//01 000a 48 656c 6c6f 576f 726c 64:字符串常量</span></span><br><span class="line"><span class="number">07</span> 0019 </span><br><span class="line"><span class="comment">//07 0019:PrintStream类</span></span><br><span class="line">0c00 1a00 1b</span><br><span class="line"><span class="comment">//0c 001a 001b:println()</span></span><br><span class="line"><span class="number">01</span> <span class="number">0010</span> 6a61 <span class="number">7661</span> 2f6c 616e <span class="number">672f</span> 4f62 6a65 <span class="number">6374</span></span><br><span class="line"><span class="comment">//01 0010 6a61 7661 2f6c 616e 672f 4f62 6a65 6374:字符串常量</span></span><br><span class="line"><span class="number">01</span> 00106a <span class="number">6176</span> <span class="number">612f</span> 6c61 <span class="number">6e67</span> 2f53 <span class="number">7973</span> <span class="number">7465</span> <span class="number">6d</span> </span><br><span class="line"><span class="comment">//01 0010 6a 6176 612f 6c61 6e67 2f53 7973 7465 6d:字符串常量</span></span><br><span class="line"><span class="number">01</span> <span class="number">0003</span> 6f75 <span class="number">74</span></span><br><span class="line"><span class="comment">//01 0003 6f75 74:字符串常量</span></span><br><span class="line"><span class="number">01</span> <span class="number">0015</span> 4c6a <span class="number">6176</span> <span class="number">612f</span> <span class="number">696f</span> 2f50 <span class="number">7269</span> <span class="number">6e74</span> <span class="number">5374</span> <span class="number">7265</span> <span class="number">616d</span> 3b</span><br><span class="line"><span class="comment">//01 0015 4c6a 6176 612f 696f 2f50 7269 6e74 5374 7265 616d 3b:字符串常量   </span></span><br><span class="line"><span class="number">01</span> <span class="number">0013</span> 6a61 <span class="number">7661</span> 2f69 6f2f <span class="number">5072</span> 696e <span class="number">7453</span> <span class="number">7472</span> <span class="number">6561</span> <span class="number">6d</span></span><br><span class="line"><span class="comment">//01 0013 6a61 7661 2f69 6f2f 5072 696e 7453 7472 6561 6d:字符串常量  </span></span><br><span class="line"><span class="number">01</span> <span class="number">0007</span> <span class="number">7072</span> 696e 746c 6e</span><br><span class="line"><span class="number">01</span> <span class="number">0015</span> 284c 6a61 <span class="number">7661</span> 2f6c 616e <span class="number">672f</span> <span class="number">5374</span> <span class="number">7269</span> <span class="number">6e67</span> 3b29 <span class="number">56</span></span><br><span class="line"><span class="comment">//上面两行也是存储的字符串常量</span></span><br><span class="line"><span class="number">0021</span></span><br><span class="line"><span class="comment">//0021:access_flags = 0020+0001:public + super</span></span><br><span class="line"><span class="number">0005</span></span><br><span class="line"><span class="comment">//0005:this_class:当前类HelloWorld</span></span><br><span class="line"><span class="number">0006</span></span><br><span class="line"><span class="comment">//0006:super_class:Object</span></span><br><span class="line"><span class="number">0000</span></span><br><span class="line"><span class="comment">//0000:接口数量为0</span></span><br><span class="line"><span class="number">0000</span></span><br><span class="line"><span class="comment">//0000:字段数量为0</span></span><br><span class="line"><span class="number">0002</span> </span><br><span class="line"><span class="comment">//0002:方法个数，默认加了初始化方法</span></span><br><span class="line"><span class="number">0001</span> <span class="number">00</span> <span class="number">0700</span> 08 <span class="number">00</span> <span class="number">0100</span> 0900 <span class="number">0000</span> <span class="number">1d</span></span><br><span class="line"><span class="number">00</span> <span class="number">0100</span> <span class="number">0100</span> <span class="number">0000</span> 052a b700 01b1 <span class="number">0000</span> <span class="number">0001</span> 000a <span class="number">0000</span> <span class="number">0006</span> <span class="number">0001</span> <span class="number">0000</span> <span class="number">0002</span></span><br><span class="line"><span class="comment">//0001：public 方法的访问修饰符</span></span><br><span class="line"><span class="comment">//0007:init </span></span><br><span class="line"><span class="comment">//0008:()V</span></span><br><span class="line"><span class="comment">//0001:属性个数--1个</span></span><br><span class="line"><span class="comment">//0009:Code  虚拟机对方法说明</span></span><br><span class="line"><span class="comment">//00 0000 1d:Code内容长度29 后面的就是Code存储的内容</span></span><br><span class="line">0009 000b 000c <span class="number">0001</span> 0009 <span class="number">0000</span> <span class="number">0025</span> <span class="number">0002</span> <span class="number">0001</span></span><br><span class="line"><span class="number">0000</span> 0009 b200 <span class="number">0212</span> 03b6 <span class="number">0004</span> b100 <span class="number">0000</span></span><br><span class="line"><span class="number">0100</span> 0a00 <span class="number">0000</span> 0a00 <span class="number">0200</span> <span class="number">0000</span> <span class="number">0400</span> 0800 <span class="number">05</span></span><br><span class="line"><span class="comment">//0009:public+static</span></span><br><span class="line"><span class="comment">//000b:main()</span></span><br><span class="line"><span class="comment">//000c:String[] args</span></span><br><span class="line"><span class="comment">//0001:属性个数--1个</span></span><br><span class="line"><span class="comment">//0009:Code  虚拟机对方法说明</span></span><br><span class="line"><span class="comment">//0000 0025:37个字节长度</span></span><br><span class="line"><span class="comment">//至此，方法结束</span></span><br><span class="line"><span class="number">0001</span> <span class="number">00</span> 0d00 <span class="number">0000</span> <span class="number">0200</span> 0e</span><br><span class="line"><span class="comment">//0001:attributes_count:1</span></span><br><span class="line"><span class="comment">//000d:sourceFile</span></span><br><span class="line"><span class="comment">//0000 0002:信息长度</span></span><br><span class="line"><span class="comment">//000e:指向常量HelloWorld.java</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 教育 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 千锋教育 </tag>
            
            <tag> 培训 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>方法</title>
      <link href="/posts/ad01bc3e/"/>
      <url>/posts/ad01bc3e/</url>
      
        <content type="html"><![CDATA[<h3 id="一．方法"><a href="#一．方法" class="headerlink" title="一．方法"></a>一．方法</h3><h3 id="二．普通的方法"><a href="#二．普通的方法" class="headerlink" title="二．普通的方法"></a>二．普通的方法</h3><p>语法结构：</p><p>案例：声明一个方法，打印5行三角形</p><h3 id="三．带有参数的方法"><a href="#三．带有参数的方法" class="headerlink" title="三．带有参数的方法"></a>三．带有参数的方法</h3><p>语法结构：</p><p>案例1：声明一个方法，打印指定行的三角形</p><p>案例2：声明一个方法，打印指定行和符号的三角形</p><h3 id="四．带有返回值的方法"><a href="#四．带有返回值的方法" class="headerlink" title="四．带有返回值的方法"></a>四．带有返回值的方法</h3><p>语法结构：</p><p>案例1：声明一个方法，传入两个int类型的数字，返回之和</p><p>案例2：声明一个方法，传入三个int类型的数字，返回最大值</p><p>案例3：声明一个方法，传入三个int类型的数字，返回最小值</p><h3 id="五．方法的重载"><a href="#五．方法的重载" class="headerlink" title="五．方法的重载"></a>五．方法的重载</h3><p>应用场景：</p><p>条件：</p>]]></content>
      
      
      <categories>
          
          <category> 教育 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 千锋教育 </tag>
            
            <tag> 培训 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>命名规范资料</title>
      <link href="/posts/7f35cbf1/"/>
      <url>/posts/7f35cbf1/</url>
      
        <content type="html"><![CDATA[<h1 id="命名规范分类"><a href="#命名规范分类" class="headerlink" title="命名规范分类"></a>命名规范分类</h1><blockquote><ol><li><p>匈牙利命名法</p><p>基本原则是：变量名&#x3D;属性+类型+对象描述 </p><p>ps：int g_int_age &#x3D; 18;（g_ 全局变量&#x2F;c_ 常量&#x2F;m_ 局部变量&#x2F;s_ 静态变量）</p></li></ol></blockquote><blockquote><ol start="2"><li><p>下划线命名法</p><p>基本原则是：单词与单词之间用下划线隔开，UNIX&#x2F;LIUNX环境下普遍使用 </p><p>ps： String file_name &#x3D; “波多野结衣.avi”;</p></li></ol></blockquote><blockquote><ol start="3"><li>驼峰命名法（小驼峰命名法）</li></ol><p>基本原则是： 第一个单词以小写字母开始，后续单词首字母都采用大写字母</p><p>作用：方法、变量</p><p>ps：String fileName &#x3D; “波多野结衣.avi”;</p></blockquote><blockquote><ol start="4"><li>帕斯卡命名法（大驼峰命名法）</li></ol><p>基本原则是： 每个单词首字母都采用大写字母</p><p>作用：类、接口</p><p>ps：public class UserController</p></blockquote><blockquote><p>总结：不管使用什么命名法，命名最好有意义，起到见名知意的作用</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 教育 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 千锋教育 </tag>
            
            <tag> 培训 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数组的查找</title>
      <link href="/posts/8eef9745/"/>
      <url>/posts/8eef9745/</url>
      
        <content type="html"><![CDATA[<h1 id="数组的查找"><a href="#数组的查找" class="headerlink" title="数组的查找"></a>数组的查找</h1><h2 id="线性查找"><a href="#线性查找" class="headerlink" title="线性查找"></a>线性查找</h2><h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h3><blockquote><p>线性查找也叫顺序查找，这是最基本的一种查找方法，从给定的值中进行搜索，从一端开始逐一检查每个元素，直到找到所需元素的过程。</p><p>元素序列的排列可以有序，也可以无序。</p></blockquote><h3 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test01</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//线性查找</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span>[] arr = &#123;<span class="number">45</span>, <span class="number">62</span>, <span class="number">15</span>,<span class="number">62</span>, <span class="number">78</span>, <span class="number">30</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> sequentialSearch01(arr, <span class="number">62</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;指定元素首次出现的下标位置：&quot;</span> + index);</span><br><span class="line"></span><br><span class="line">List&lt;Integer&gt; indexList = sequentialSearch02(arr, <span class="number">62</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;指定元素出现的下标位置的集合：&quot;</span> + Arrays.toString(indexList.toArray()));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 顺序查找</span></span><br><span class="line"><span class="comment"> * 返回指定元素首次出现的下标位置</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">sequentialSearch01</span><span class="params">(<span class="type">int</span>[] arr,<span class="type">int</span> value)</span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line"><span class="keyword">if</span>(arr[i] == value)&#123;</span><br><span class="line"><span class="keyword">return</span> i;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 顺序查找</span></span><br><span class="line"><span class="comment"> * 返回指定元素出现的下标位置的集合</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;Integer&gt; <span class="title function_">sequentialSearch02</span><span class="params">(<span class="type">int</span>[] arr,<span class="type">int</span> value)</span>&#123;</span><br><span class="line">List&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line"><span class="keyword">if</span>(arr[i] == value)&#123;</span><br><span class="line">list.adds(i);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="二分法查找"><a href="#二分法查找" class="headerlink" title="二分法查找"></a>二分法查找</h2><h3 id="概念-1"><a href="#概念-1" class="headerlink" title="概念"></a>概念</h3><blockquote><p>二分查找(Binary Search)算法，也叫折半查找算法。</p><p>当要从一个序列中查找一个元素的时候，二分查找是一种非常快速的查找算法。</p><p>二分查找是针对有序数据集合的查找算法，如果是无序数据集合就遍历查找。</p><p>二分查找之所以快速，是因为它在匹配不成功的时候，每次都能排除剩余元素中一半的元素。因此可能包含目标元素的有效范围就收缩得很快，而不像顺序查找那样，每次仅能排除一个元素。</p></blockquote><h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><blockquote><p>比如有一个有序表数组[1,3,5,7,9,11,13,15,17,19,21]，它是按照从小到大的顺序来进行排列的，现在需要在该有序表中查找元素19，步骤如下：</p><ol><li><p>首先设置两个指针low和high，分别指向数据集合的第一个数据元素1(位序为0)和最后一个数据元素21(位序为10)。</p><p>然后把整个数据集合长度分成两半，并用一个指针指向它们的临界点，所以定义指针mid指向了中间元素11(位序5)，也就是说mid&#x3D;(high+low)&#x2F;2，其中high和low都代表所指向的元素的位序，如下图：</p></li></ol></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-2/image-20220808214656128.png" alt="image-20220808214656128" style="zoom:67%;" /><blockquote><ol start="2"><li><p>接着，将mid所指向的元素(11)与待查找元素(19)进行比较。</p><p>因为19大于11，说明待查找的元素(19)一定位于mid和high之间。所以继续折半，则low &#x3D; mid+1，而mid &#x3D; (low+high)&#x2F;2，结果如下图：</p></li></ol></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-2/image-20220808214725572.png" alt="image-20220808214725572" style="zoom:67%;" /><blockquote><ol start="3"><li>接着，又将mid所指向的元素(17)与待查找元素(19)进行比较，由于19大于17，所以继续折半，则low &#x3D; mid+1，而mid &#x3D; (low+high)&#x2F;2，结果如下图：</li></ol></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-2/image-20220808214745964.png" alt="image-20220808214745964" style="zoom:67%;" /><blockquote><ol start="4"><li><p>最后，又将mid所指向的元素(19)与待查找元素(19)进行比较，结果相等，则查找成功，返回mid指针指向的元素的位序。</p><p>如果查找的元素值不是19，而是20，那么在最后一步之前还得继续折半查找，最后出现的情况如下图：</p></li></ol></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-2/image-20220808214813238.png" alt="image-20220808214813238" style="zoom:67%;" /><h3 id="代码实现-1"><a href="#代码实现-1" class="headerlink" title="代码实现"></a>代码实现</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test01</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//二分法查找</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span>[] arr = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">11</span>,<span class="number">11</span>,<span class="number">11</span>,<span class="number">11</span>,<span class="number">11</span>,<span class="number">11</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> binarySearch01(arr, <span class="number">11</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;指定元素出现的下标位置：&quot;</span> + index);</span><br><span class="line"></span><br><span class="line">List&lt;Integer&gt; indexList = binarySearch02(arr, <span class="number">11</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;指定元素出现的下标位置的集合：&quot;</span> + Arrays.toString(indexList.toArray()));</span><br><span class="line"></span><br><span class="line">index = recursionbinarySearch01(arr, <span class="number">0</span>, arr.length-<span class="number">1</span>, <span class="number">11</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;递归方式 - 指定元素出现的下标位置：&quot;</span> + index);</span><br><span class="line"></span><br><span class="line">indexList = recursionbinarySearch02(arr, <span class="number">0</span>, arr.length-<span class="number">1</span>, <span class="number">11</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;递归方式 - 指定元素出现的下标位置的集合：&quot;</span> + Arrays.toString(indexList.toArray()));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 有序的数组中查找某个元素出现的下标位置</span></span><br><span class="line"><span class="comment"> * 不使用递归的二分查找</span></span><br><span class="line"><span class="comment"> * 返回出现的下标位置</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">binarySearch01</span><span class="params">(<span class="type">int</span>[] arr,<span class="type">int</span> val)</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">low</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">high</span> <span class="operator">=</span> arr.length-<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(low &lt;= high)&#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> (low + high)/<span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(val &gt; arr[mid])&#123;</span><br><span class="line"><span class="comment">//目标在右侧</span></span><br><span class="line">low = mid+<span class="number">1</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(val &lt; arr[mid])&#123;</span><br><span class="line"><span class="comment">//目标在左侧</span></span><br><span class="line">high = mid-<span class="number">1</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">return</span> mid;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 有序的数组中查找某个元素首次出现的下标位置</span></span><br><span class="line"><span class="comment"> * 不使用递归的二分查找</span></span><br><span class="line"><span class="comment"> * 返回下标集合</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;Integer&gt; <span class="title function_">binarySearch02</span><span class="params">(<span class="type">int</span>[] arr,<span class="type">int</span> val)</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">low</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">high</span> <span class="operator">=</span> arr.length-<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(low &lt;= high)&#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> (low + high)/<span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(val &gt; arr[mid])&#123;</span><br><span class="line"><span class="comment">//目标在右侧</span></span><br><span class="line">low = mid+<span class="number">1</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(val &lt; arr[mid])&#123;</span><br><span class="line"><span class="comment">//目标在左侧</span></span><br><span class="line">high = mid-<span class="number">1</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="comment">// 定义放置索引下标的集合</span></span><br><span class="line">List&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"><span class="comment">// 将首次查找的位置放入集合</span></span><br><span class="line">list.add(mid);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断是否还有重复值</span></span><br><span class="line"><span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> mid + <span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(index &lt; arr.length)&#123;</span><br><span class="line"><span class="keyword">if</span>(arr[index] == val)&#123;</span><br><span class="line">list.add(index);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">index++;</span><br><span class="line">&#125;</span><br><span class="line">index = mid-<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(index &gt;= <span class="number">0</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(arr[index] == val)&#123;</span><br><span class="line">list.add(index);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">index--;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 有序的数组中查找某个元素出现的下标位置</span></span><br><span class="line"><span class="comment"> * 使用递归的二分查找</span></span><br><span class="line"><span class="comment"> * 返回出现的下标位置</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">recursionbinarySearch01</span><span class="params">(<span class="type">int</span>[] arr,<span class="type">int</span> low,<span class="type">int</span> high,<span class="type">int</span> val)</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(val &lt; arr[low] || val &gt; arr[high] || low &gt; high)&#123;</span><br><span class="line"><span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> (low + high)/<span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(val &gt; arr[mid])&#123;</span><br><span class="line"><span class="comment">//目标在右侧</span></span><br><span class="line"><span class="keyword">return</span> recursionbinarySearch01(arr, mid+<span class="number">1</span>, high, val);</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(val &lt; arr[mid])&#123;</span><br><span class="line"><span class="comment">//目标在左侧</span></span><br><span class="line"><span class="keyword">return</span> recursionbinarySearch01(arr, low, mid-<span class="number">1</span>, val);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">return</span> mid;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 有序的数组中查找某个元素首次出现的下标位置</span></span><br><span class="line"><span class="comment"> * 使用递归的二分查找</span></span><br><span class="line"><span class="comment"> * 返回下标集合</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;Integer&gt; <span class="title function_">recursionbinarySearch02</span><span class="params">(<span class="type">int</span>[] arr,<span class="type">int</span> low,<span class="type">int</span> high,<span class="type">int</span> val)</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(val &lt; arr[low] || val &gt; arr[high] || low &gt; high)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> (low + high)/<span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(val &gt; arr[mid])&#123;</span><br><span class="line"><span class="comment">//目标在右侧</span></span><br><span class="line"><span class="keyword">return</span> recursionbinarySearch02(arr, mid+<span class="number">1</span>, high, val);</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(val &lt; arr[mid])&#123;</span><br><span class="line"><span class="comment">//目标在左侧</span></span><br><span class="line"><span class="keyword">return</span> recursionbinarySearch02(arr, low, mid-<span class="number">1</span>, val);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="comment">// 定义放置索引下标的集合</span></span><br><span class="line">List&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"><span class="comment">// 将首次查找的位置放入集合</span></span><br><span class="line">list.add(mid);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断是否还有重复值</span></span><br><span class="line"><span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> mid + <span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(index &lt; arr.length)&#123;</span><br><span class="line"><span class="keyword">if</span>(arr[index] == val)&#123;</span><br><span class="line">list.add(index);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">index++;</span><br><span class="line">&#125;</span><br><span class="line">            </span><br><span class="line">index = mid-<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(index &gt;= <span class="number">0</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(arr[index] == val)&#123;</span><br><span class="line">list.add(index);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">index--;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="优缺点"><a href="#优缺点" class="headerlink" title="优缺点"></a>优缺点</h3><blockquote><p>优点:速度快，不占空间，不开辟新空间 </p><p>缺点:必须是有序的数组，数据量太小没有意义</p></blockquote><h2 id="插值查找"><a href="#插值查找" class="headerlink" title="插值查找"></a>插值查找</h2><h3 id="概念-2"><a href="#概念-2" class="headerlink" title="概念"></a>概念</h3><blockquote><p>从折半查找中可以看出，折半查找的查找效率还是不错的。可是为什么要折半呢？为什么不是四分之一、八分之一呢？</p><p>打个比方，在牛津词典里要查找“apple”这个单词，会首先翻开字典的中间部分，然后继续折半吗？肯定不会，对于查找单词“apple”，我们肯定是下意识的往字典的最前部分翻去，而查找单词“zero”则相反，我们会下意识的往字典的最后部分翻去。</p><p>所以在折半查找法的基础上进行改造就出现了插值查找法，也叫做<strong>按比例查找</strong>。所以插值查找与折半查找唯一不同的是在于mid的计算方式上，它的计算方式为：</p><p>int mid &#x3D; low + (high - low) * (val- arr[low]) &#x2F; (arr[high] - arr[low])</p><p>这样就能快速定位目标数值所在的索引，比二分查找可以更快速实现查找。</p><p>自适应获取mid，也就是自适应查找点。</p></blockquote><h3 id="代码实现-2"><a href="#代码实现-2" class="headerlink" title="代码实现"></a>代码实现</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test01</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//插值查找</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span>[] arr = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">11</span>,<span class="number">11</span>,<span class="number">11</span>,<span class="number">11</span>,<span class="number">11</span>,<span class="number">11</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> insertSearch01(arr, <span class="number">11</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;指定元素出现的下标位置：&quot;</span> + index);</span><br><span class="line"></span><br><span class="line">List&lt;Integer&gt; indexList = insertSearch02(arr, <span class="number">11</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;指定元素出现的下标位置的集合：&quot;</span> + Arrays.toString(indexList.toArray()));</span><br><span class="line"></span><br><span class="line">index = recursionInsertSearch01(arr, <span class="number">0</span>, arr.length-<span class="number">1</span>, <span class="number">11</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;递归方式 - 指定元素出现的下标位置：&quot;</span> + index);</span><br><span class="line"></span><br><span class="line">indexList = recursionInsertSearch02(arr, <span class="number">0</span>, arr.length-<span class="number">1</span>, <span class="number">11</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;递归方式 - 指定元素出现的下标位置的集合：&quot;</span> + Arrays.toString(indexList.toArray()));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 有序的数组中查找某个元素出现的下标位置</span></span><br><span class="line"><span class="comment"> * 不使用递归的二分查找</span></span><br><span class="line"><span class="comment"> * 返回出现的下标位置</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">insertSearch01</span><span class="params">(<span class="type">int</span>[] arr,<span class="type">int</span> val)</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">low</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">high</span> <span class="operator">=</span> arr.length-<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(low &lt;= high)&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> low + (high - low) * (val - arr[low])/(arr[high] - arr[low]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(val &gt; arr[mid])&#123;</span><br><span class="line"><span class="comment">//目标在右侧</span></span><br><span class="line">low = mid+<span class="number">1</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(val &lt; arr[mid])&#123;</span><br><span class="line"><span class="comment">//目标在左侧</span></span><br><span class="line">high = mid-<span class="number">1</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">return</span> mid;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 有序的数组中查找某个元素首次出现的下标位置</span></span><br><span class="line"><span class="comment"> * 不使用递归的二分查找</span></span><br><span class="line"><span class="comment"> * 返回下标集合</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;Integer&gt; <span class="title function_">insertSearch02</span><span class="params">(<span class="type">int</span>[] arr,<span class="type">int</span> val)</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">low</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">high</span> <span class="operator">=</span> arr.length-<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(low &lt;= high)&#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> low + (high - low) * (val - arr[low])/(arr[high] - arr[low]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(val &gt; arr[mid])&#123;</span><br><span class="line"><span class="comment">//目标在右侧</span></span><br><span class="line">low = mid+<span class="number">1</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(val &lt; arr[mid])&#123;</span><br><span class="line"><span class="comment">//目标在左侧</span></span><br><span class="line">high = mid-<span class="number">1</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="comment">// 定义放置索引下标的集合</span></span><br><span class="line">List&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"><span class="comment">// 将首次查找的位置放入集合</span></span><br><span class="line">list.add(mid);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断是否还有重复值</span></span><br><span class="line"><span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> mid + <span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(index &lt; arr.length)&#123;</span><br><span class="line"><span class="keyword">if</span>(arr[index] == val)&#123;</span><br><span class="line">list.add(index);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">index++;</span><br><span class="line">&#125;</span><br><span class="line">index = mid-<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(index &gt;= <span class="number">0</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(arr[index] == val)&#123;</span><br><span class="line">list.add(index);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">index--;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 有序的数组中查找某个元素出现的下标位置</span></span><br><span class="line"><span class="comment"> * 使用递归的二分查找</span></span><br><span class="line"><span class="comment"> * 返回出现的下标位置</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">recursionInsertSearch01</span><span class="params">(<span class="type">int</span>[] arr,<span class="type">int</span> low,<span class="type">int</span> high,<span class="type">int</span> val)</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(val &lt; arr[low] || val &gt; arr[high] || low &gt; high)&#123;</span><br><span class="line"><span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> low + (high - low) * (val - arr[low])/(arr[high] - arr[low]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(val &gt; arr[mid])&#123;</span><br><span class="line"><span class="comment">//目标在右侧</span></span><br><span class="line"><span class="keyword">return</span> recursionInsertSearch01(arr, mid+<span class="number">1</span>, high, val);</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(val &lt; arr[mid])&#123;</span><br><span class="line"><span class="comment">//目标在左侧</span></span><br><span class="line"><span class="keyword">return</span> recursionInsertSearch01(arr, low, mid-<span class="number">1</span>, val);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">return</span> mid;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 有序的数组中查找某个元素首次出现的下标位置</span></span><br><span class="line"><span class="comment"> * 使用递归的二分查找</span></span><br><span class="line"><span class="comment"> * 返回下标集合</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;Integer&gt; <span class="title function_">recursionInsertSearch02</span><span class="params">(<span class="type">int</span>[] arr,<span class="type">int</span> low,<span class="type">int</span> high,<span class="type">int</span> val)</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(val &lt; arr[low] || val &gt; arr[high] || low &gt; high)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> low + (high - low) * (val - arr[low])/(arr[high] - arr[low]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(val &gt; arr[mid])&#123;</span><br><span class="line"><span class="comment">//目标在右侧</span></span><br><span class="line"><span class="keyword">return</span> recursionInsertSearch02(arr, mid+<span class="number">1</span>, high, val);</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(val &lt; arr[mid])&#123;</span><br><span class="line"><span class="comment">//目标在左侧</span></span><br><span class="line"><span class="keyword">return</span> recursionInsertSearch02(arr, low, mid-<span class="number">1</span>, val);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="comment">// 定义放置索引下标的集合</span></span><br><span class="line">List&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"><span class="comment">// 将首次查找的位置放入集合</span></span><br><span class="line">list.add(mid);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断是否还有重复值</span></span><br><span class="line"><span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> mid + <span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(index &lt; arr.length)&#123;</span><br><span class="line"><span class="keyword">if</span>(arr[index] == val)&#123;</span><br><span class="line">list.add(index);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">index++;</span><br><span class="line">&#125;</span><br><span class="line">index = mid-<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(index &gt;= <span class="number">0</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(arr[index] == val)&#123;</span><br><span class="line">list.add(index);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">index--;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="斐波那契查找"><a href="#斐波那契查找" class="headerlink" title="斐波那契查找"></a>斐波那契查找</h2><h3 id="概念-3"><a href="#概念-3" class="headerlink" title="概念"></a>概念</h3><blockquote><p>斐波那契查找也叫做黄金分割法查找。</p><p>斐波那契查找也是二分查找的一种提升算法，通过运用黄金比例的概念在数列中选择查找点进行查找，提高查找效率。同样地，斐波那契查找也属于一种有序查找算法。</p></blockquote><h3 id="原理-1"><a href="#原理-1" class="headerlink" title="原理"></a>原理</h3><blockquote><p>对于斐波那契数列：1、1、2、3、5、8、13、21、34、55、89……（也可以从0开始），前后两个数字的比值随着数列的增加，越来越接近黄金比值0.618。</p><p>比如元素个数为89的有序列表。89在斐波那契数列中是34和55相加所得。</p><p>把元素个数为89的有序列表分成：前55个数据元素组成的前半段和34个数据元素组成的后半段。那么前半段元素个数和整个有序表长度的比值接近黄金比值0.618，而前后两段长度的比值也接近黄金比值0.618。</p><p>假如要查找的元素在前半段，那么继续按照斐波那契数列来看，55 &#x3D; 34 + 21，所以继续把前半段分成前34个数据元素的前半段和后21个元素的后半段，继续查找，如此反复，直到查找成功或失败。这样斐波那契数列就被应用到查找算法中了。</p><p>总长度&#x3D;f[k]，</p><p>前半段长度&#x3D;f[k-1]，后半段长度&#x3D;f[k-2]</p></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-2/image-20220809223851707.png" alt="image-20220809223851707" style="zoom:80%;" /><blockquote><p>有序列表的元素个数不是斐波那契数列中的数字时该如何处理呢？</p><p>当有序表的元素个数不是斐波那契数列中的某个数字时，需要把有序列表的长度补齐，让它成为斐波那契数列中的一个数值。</p><p>如果不是补齐，而是将多余的截掉是否可行？把原有序列表截断肯定是不可行的，因为可能把要查找的目标值截掉。</p><p>每次取斐波那契数列中的某个值时(f[k])，都会进行-1操作，这是因为数组下标从0开始。</p></blockquote><h3 id="代码实现-3"><a href="#代码实现-3" class="headerlink" title="代码实现"></a>代码实现</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test01</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span>[] arr = &#123;<span class="number">1</span>,<span class="number">13</span>,<span class="number">25</span>,<span class="number">37</span>,<span class="number">49</span>,<span class="number">51</span>,<span class="number">62</span>,<span class="number">68</span>,<span class="number">70</span>,<span class="number">80</span>,<span class="number">80</span>&#125;;</span><br><span class="line"></span><br><span class="line">List&lt;Integer&gt; fiboSearchList = fiboSearchList(arr, <span class="number">80</span>);</span><br><span class="line">System.out.println(Arrays.toString(fiboSearchList.toArray()));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;Integer&gt; <span class="title function_">fiboSearchList</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> val)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">low</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">high</span> <span class="operator">=</span> arr.length-<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 斐波那契的索引下标。数组长度的数值在斐波那契数列中对应的索引下标</span></span><br><span class="line"><span class="type">int</span>[] fiboArray = getFiboArray(<span class="number">10</span>);<span class="comment">//[1, 1, 2, 3, 5, 8, 13, 21, 34, 55]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 斐波那契的索引下标。数组长度的数值在斐波那契数列中对应的索引下标</span></span><br><span class="line"><span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="comment">// 斐波那契的索引下标。数组长度的数值在斐波那契数列中对应的索引下标</span></span><br><span class="line"><span class="keyword">while</span>(arr.length &gt; fiboArray[k])&#123;</span><br><span class="line">k++;</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;k = &quot;</span> + k);<span class="comment">//6</span></span><br><span class="line">System.out.println(<span class="string">&quot;fiboArray = &quot;</span> + Arrays.toString(fiboArray));<span class="comment">//[1, 1, 2, 3, 5, 8, 13, 21, 34, 55]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 利用Java工具类Arrays 构造新数组并指向 数组 arr[]</span></span><br><span class="line"><span class="type">int</span>[] temp = Arrays.copyOf(arr, fiboArray[k]);</span><br><span class="line">System.out.println(<span class="string">&quot;temp=&quot;</span> + Arrays.toString(temp));</span><br><span class="line">        <span class="comment">//[1, 13, 25, 37, 49, 51, 62, 68, 70, 80, 80, 0, 0]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//对新构造的数组进行元素补充，补充为最高位的数值</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> high+<span class="number">1</span>; i &lt; temp.length; i++) &#123;</span><br><span class="line">temp[i] = arr[high];</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;补充数值的temp=&quot;</span> + Arrays.toString(temp));</span><br><span class="line">        <span class="comment">//[1, 13, 25, 37, 49, 51, 62, 68, 70, 80, 80, 80, 80]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(low &lt;= high)&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//数列左侧有f[k-1]个元素</span></span><br><span class="line"><span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> low + fiboArray[k-<span class="number">1</span>] - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(val &lt; temp[mid])&#123;</span><br><span class="line"><span class="comment">// 目标值小于mid所在元素，在左侧查找</span></span><br><span class="line">high = mid-<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*全部元素=前部元素+后部元素</span></span><br><span class="line"><span class="comment">                 * f[k]=f[k-1]+f[k-2]</span></span><br><span class="line"><span class="comment">                 * 因为左侧有f[k-1]个元素，所以可以继续拆分f[k-1]=f[k-2]+f[k-3]</span></span><br><span class="line"><span class="comment">                 * 即在f[k-1]的前部继续查找 所以k-=1</span></span><br><span class="line"><span class="comment">                 * 即下次循环 mid=f[k-1-1]-1</span></span><br><span class="line"><span class="comment">                 */</span></span><br><span class="line">k-=<span class="number">1</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(val &gt; temp[mid])&#123;</span><br><span class="line"><span class="comment">// 目标值大于mid所在元素，在右侧查找</span></span><br><span class="line">low = mid+<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*全部元素=前部元素+后部元素</span></span><br><span class="line"><span class="comment">                 * f[k]=f[k-1]+f[k-2]</span></span><br><span class="line"><span class="comment">                 * 因为右侧有f[k-2]个元素，所以可以继续拆分f[k-2]=f[k-3]+f[k-4]</span></span><br><span class="line"><span class="comment">                 * 即在f[k-2]的前部继续查找 所以k-=2</span></span><br><span class="line"><span class="comment">                 * 即下次循环 mid=f[k-1-2]-1</span></span><br><span class="line"><span class="comment">                */</span></span><br><span class="line">k -= <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义放置索引下标的集合</span></span><br><span class="line">ArrayList&lt;Integer&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">list.add(mid);</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> mid+<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(index &lt; arr.length)&#123;</span><br><span class="line"><span class="keyword">if</span>(arr[index] == val)&#123;</span><br><span class="line">list.add(index);</span><br><span class="line">index++;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">index = mid-<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span>(index &gt; <span class="number">0</span>)&#123;</span><br><span class="line"><span class="keyword">if</span>(arr[index] == val)&#123;</span><br><span class="line">list.add(index);</span><br><span class="line">index--;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> list;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] getFiboArray(<span class="type">int</span> maxSize)&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span>[] fiboArray = <span class="keyword">new</span> <span class="title class_">int</span>[maxSize];</span><br><span class="line"></span><br><span class="line">fiboArray[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">fiboArray[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2</span>; i &lt; fiboArray.length; i++) &#123;</span><br><span class="line">fiboArray[i] = fiboArray[i-<span class="number">1</span>] + fiboArray[i-<span class="number">2</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> fiboArray;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 教育 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 千锋教育 </tag>
            
            <tag> 培训 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数组</title>
      <link href="/posts/340249a9/"/>
      <url>/posts/340249a9/</url>
      
        <content type="html"><![CDATA[<h1 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h1><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><h3 id="数据结构分类"><a href="#数据结构分类" class="headerlink" title="数据结构分类"></a>数据结构分类</h3><blockquote><p>数据结构中数据按逻辑结构分为：线性结构、非线性结构</p><ul><li>常用的线性结构有：线性表（顺序存储、链式存储）、栈、队列、双端队列、串(一维数组)；</li><li>常见的非线性结构有：二维数组、多维数组、矩阵、散列表、树、堆、图。</li></ul></blockquote><h3 id="线性结构的特征"><a href="#线性结构的特征" class="headerlink" title="线性结构的特征"></a>线性结构的特征</h3><blockquote><ul><li><ul><li>集合中必存在唯一的一个”第一个元素”；</li><li>集合中必存在唯一的一个”最后的元素”；</li><li>除最后元素之外，其它数据元素均有唯一的”后继”；</li><li>除第一元素之外，其它数据元素均有唯一的”前驱”。</li></ul></li></ul><p>线性结构作为最常用的数据结构，其特点是数据元素之间存在一对一的线性关系。</p><p>如（a0,a1,a2,…..,an），a0为第一个元素，an为最后一个元素，此集合为一个线性结构的集合。</p><p>非线性结构，其逻辑特征是一个节点元素可能有多个直接前驱和多个直接后继。</p></blockquote><h3 id="线性数据结构存储方式"><a href="#线性数据结构存储方式" class="headerlink" title="线性数据结构存储方式"></a>线性数据结构存储方式</h3><blockquote><ul><li><ul><li>顺序存储结构：顺序表</li><li>链式存储结构：链表</li></ul></li></ul></blockquote><h3 id="常用线性数据结构"><a href="#常用线性数据结构" class="headerlink" title="常用线性数据结构"></a>常用线性数据结构</h3><blockquote><p>常用的线性结构有：线性表（顺序存储、链式存储）、栈、队列、双端队列、串(一维数组)。</p><p>线性表(Linear List)就是数据排成像一条线一样的结构，数据只有前后两个方向。</p><p>线性表分为顺序存储和链式存储。</p><p>按照人们的生活习惯，存放东西时，一般是找一块空间，然后将需要存放的东西依次摆放，这就是顺序存储。</p><p>计算机中的顺序存储是指在内存中用一块连续的地址空间依次存放数据元素，用这种方式存储的线性表叫顺序表。其特点是表中相邻的数据元素在内存中存储位置也相邻，如下图：</p></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-1/shujujiegou.png" style="zoom:80%;" /><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-1/xianxingbiao.png" style="zoom:30%;" /><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><blockquote><ul><li>一维数组是最简单、最常用的线性数据结构。它用一组连续的内存空间，来存储一组具有相同类型的数据。</li><li>数组(Array)是有限个相同类型的变量所组成的有序集合，数组中的每一个变量被称为元素。</li><li>每个元素都有下标，下标从0开始</li><li>一维数组是顺序存储的线性表。二维数组和多维数组的逻辑结构属于非线性结构。</li><li>连续的内存空间和相同类型的数据是随机访问的前提。</li></ul></blockquote><h2 id="数组的优缺点"><a href="#数组的优缺点" class="headerlink" title="数组的优缺点"></a>数组的优缺点</h2><blockquote><ul><li>优点：具有随机访问的特性。</li><li>缺点：删除、插入数据效率低。</li></ul></blockquote><h2 id="操作数组-增删改查"><a href="#操作数组-增删改查" class="headerlink" title="操作数组 - 增删改查"></a>操作数组 - 增删改查</h2><blockquote><p>需求：自定义数组工具类，实现增删改查等功能</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyArray</span>&lt;E&gt; &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组最大容量</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">MAX_CAPACITY</span> <span class="operator">=</span> Integer.MAX_VALUE-<span class="number">8</span>;</span><br><span class="line"><span class="comment">// 数组默认容量</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">DEFAULT_CAPACITY</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"><span class="comment">// 数组</span></span><br><span class="line"><span class="keyword">private</span> Object[] elementData;</span><br><span class="line"><span class="comment">// 数组中当前的数据量</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> size;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 构造方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">MyArray</span><span class="params">()</span> &#123;</span><br><span class="line">elementData = <span class="keyword">new</span> <span class="title class_">Object</span>[DEFAULT_CAPACITY];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 构造方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">MyArray</span><span class="params">(<span class="type">int</span> initialCapacity)</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(initialCapacity &gt; MAX_CAPACITY)</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;initialCapacity过大&quot;</span>);</span><br><span class="line"><span class="keyword">if</span>(initialCapacity &lt;= <span class="number">0</span>)</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;initialCapacity必须大于0&quot;</span>);</span><br><span class="line">elementData = <span class="keyword">new</span> <span class="title class_">Object</span>[initialCapacity];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在数组尾部添加元素</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(E e)</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(size &gt;= elementData.length)&#123;</span><br><span class="line">grow();</span><br><span class="line">&#125;</span><br><span class="line">elementData[size] = e;</span><br><span class="line">size++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组的扩容</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">grow</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">oldCapacity</span> <span class="operator">=</span> elementData.length;</span><br><span class="line"><span class="type">int</span> <span class="variable">newCapacity</span> <span class="operator">=</span> oldCapacity*<span class="number">2</span>;</span><br><span class="line">elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在数组的下标位置添加元素</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(<span class="type">int</span> index,E e)</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(size &gt;= elementData.length)&#123;</span><br><span class="line">grow();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(isElementIndex(index))&#123;</span><br><span class="line"><span class="comment">// 数组index之后的元素全部往后移位</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> index; i &lt; size-<span class="number">1</span>; i++) &#123;</span><br><span class="line">elementData[i] = elementData[i+<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 给数组第index个元素赋值</span></span><br><span class="line">elementData[index] = e;</span><br><span class="line">size++;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;下标越界&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断下标是否越界</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isElementIndex</span><span class="params">(<span class="type">int</span> index)</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(index &gt;= <span class="number">0</span> &amp;&amp; index &lt; elementData.length)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 根据下标位置删除元素</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">remove</span><span class="params">(<span class="type">int</span> index)</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(isElementIndex(index))&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">Object</span> <span class="variable">oldValue</span> <span class="operator">=</span> elementData[index];</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">numMoved</span> <span class="operator">=</span> size - index - <span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span> (numMoved &gt; <span class="number">0</span>)</span><br><span class="line">System.arraycopy(elementData, index+<span class="number">1</span>, elementData, index,numMoved);</span><br><span class="line">elementData[--size] = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> oldValue;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;下标越界&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//根据下标设置元素</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">set</span><span class="params">(<span class="type">int</span> index, E e)</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(isElementIndex(index))&#123;</span><br><span class="line"><span class="type">Object</span> <span class="variable">oldValue</span> <span class="operator">=</span> elementData[index];</span><br><span class="line">elementData[index] = e;</span><br><span class="line"><span class="keyword">return</span> oldValue;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;下标越界&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//根据下标查找元素</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">get</span><span class="params">(<span class="type">int</span> index)</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(isElementIndex(index))&#123;</span><br><span class="line"><span class="keyword">return</span> elementData[index];</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;下标越界&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取元素个数</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="keyword">return</span> size;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组的字符串表示</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">StringBuilder</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>(<span class="string">&quot;[&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; size; i++) &#123;</span><br><span class="line"><span class="keyword">if</span>(sb.length() != <span class="number">1</span>)&#123;</span><br><span class="line">sb.append(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">sb.append(elementData[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sb.append(<span class="string">&quot;]&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> sb.toString();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">MyArray&lt;String&gt; myArray = <span class="keyword">new</span> <span class="title class_">MyArray</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;数组添加元素：&quot;</span>);</span><br><span class="line">myArray.add(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">myArray.add(<span class="string">&quot;李四&quot;</span>);</span><br><span class="line">myArray.add(<span class="string">&quot;王五&quot;</span>);</span><br><span class="line">myArray.add(<span class="string">&quot;赵六&quot;</span>);</span><br><span class="line">myArray.add(<span class="string">&quot;吴七&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;获取数组中元素的个数为：&quot;</span> + myArray.size());</span><br><span class="line">System.out.println(<span class="string">&quot;数组中数据为：&quot;</span> + myArray);</span><br><span class="line">System.out.println(<span class="string">&quot;--------------------------------&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//数组修改</span></span><br><span class="line">System.out.println(<span class="string">&quot;修改指定下标上的元素：&quot;</span>);</span><br><span class="line">myArray.set(<span class="number">1</span>,<span class="string">&quot;abc&quot;</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;获取数组中元素的个数为：&quot;</span> + myArray.size());</span><br><span class="line">System.out.println(<span class="string">&quot;数组中数据为：&quot;</span> + myArray);</span><br><span class="line">System.out.println(<span class="string">&quot;--------------------------------&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//数组删除元素</span></span><br><span class="line">System.out.println(<span class="string">&quot;删除指定下标上的元素：&quot;</span> + myArray.remove(<span class="number">0</span>));</span><br><span class="line">System.out.println(<span class="string">&quot;获取数组中元素的个数为：&quot;</span> + myArray.size());</span><br><span class="line">System.out.println(<span class="string">&quot;数组中数据为：&quot;</span> + myArray);</span><br><span class="line">System.out.println(<span class="string">&quot;--------------------------------&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//数组查询元素</span></span><br><span class="line">System.out.println(<span class="string">&quot;查询指定下标上的元素：&quot;</span> + myArray.get(<span class="number">0</span>));</span><br><span class="line">System.out.println(<span class="string">&quot;获取数组中元素的个数为：&quot;</span> + myArray.size());</span><br><span class="line">System.out.println(<span class="string">&quot;数组中数据为：&quot;</span> + myArray);</span><br><span class="line">System.out.println(<span class="string">&quot;--------------------------------&quot;</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 教育 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 千锋教育 </tag>
            
            <tag> 培训 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据的排序</title>
      <link href="/posts/1a656c15/"/>
      <url>/posts/1a656c15/</url>
      
        <content type="html"><![CDATA[<h1 id="数组的排序"><a href="#数组的排序" class="headerlink" title="数组的排序"></a>数组的排序</h1><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><h3 id="排序概念"><a href="#排序概念" class="headerlink" title="排序概念"></a>排序概念</h3><blockquote><p>排序是将一组数据，依据指定的顺序进行排列的过程。</p><p>排序是算法中的一部分，也叫排序算法。算法处理数据，而数据的处理最好是要找到他们的规律，这个规律中有很大一部分就是要进行排序，所以需要有排序算法。</p></blockquote><h3 id="常见的排序算法分类"><a href="#常见的排序算法分类" class="headerlink" title="常见的排序算法分类"></a>常见的排序算法分类</h3><blockquote><p>排序分为：内部排序和外部排序。</p><ul><li>内部排序：是将需要处理的所有数据加载到内存中进行排序；</li><li>外部排序：当数据量过大，无法全部加载到内存中，需要借助外部存储（文件、磁盘等）进行排序。</li></ul></blockquote><blockquote><ul><li>交换排序（冒泡排序、快速排序）</li><li>选择排序（选择排序、堆排序）</li><li>插入排序（插入排序、希尔排序）</li><li>归并排序 </li><li>桶排序、 计数排序、基数排序</li></ul></blockquote><h3 id="算法稳定性"><a href="#算法稳定性" class="headerlink" title="算法稳定性"></a>算法稳定性</h3><blockquote><p> 假设在数列中存在a[i]&#x3D;a[j]，若在排序之前，a[i]在a[j]前面；并且排序之后，a[i]仍然在a[j]前面，则这个排序算法是稳定的。</p></blockquote><h3 id="如何分析算法"><a href="#如何分析算法" class="headerlink" title="如何分析算法"></a>如何分析算法</h3><h4 id="分析算法的执行效率"><a href="#分析算法的执行效率" class="headerlink" title="分析算法的执行效率"></a>分析算法的执行效率</h4><blockquote><ol><li>最好、最坏、平均情况时间复杂度。</li><li>时间复杂度的系数、常数和低阶。</li><li>比较次数，交换（或移动）次数。</li></ol></blockquote><h4 id="分析排序算法的稳定性"><a href="#分析排序算法的稳定性" class="headerlink" title="分析排序算法的稳定性"></a>分析排序算法的稳定性</h4><blockquote><p>概念：如果待排序的序列中存在值相等的元素，经过排序之后，相等元素之间原有的先后顺序不变。</p><p>稳定性重要性：可针对对象的多种属性进行有优先级的排序。</p><p>举例：给电商交易系统中的“订单”排序，按照金额大小对订单数据排序，对于相同金额的订单以下单时间早晚排序。用稳定排序算法可简洁地解决。先按照下单时间给订单排序，排序完成后用稳定排序算法按照订单金额重新排序。</p></blockquote><h4 id="分析排序算法的内存损耗"><a href="#分析排序算法的内存损耗" class="headerlink" title="分析排序算法的内存损耗"></a>分析排序算法的内存损耗</h4><blockquote><p>原地排序算法：特指空间复杂度是O(1)的排序算法。</p></blockquote><h2 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h2><h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h3><blockquote><p>冒泡排序是最基础的排序算法。属于交换排序算法。</p><p>冒泡排序重复地遍历要排序的数组元素，一次比较两个元素，如果他们的顺序错误就把他们交换过来。重复地进行直到没有再需要交换，也就是说该数组已经排序完成。</p><p>这个算法的名字由来是因为越大的元素会经过交换慢慢“浮”到数列的顶端，故名“冒泡排序”。 </p><p>按照冒泡排序的思想，把相邻的元素两两比较，当一个元素大于右侧相邻元素时，交换它们的位置；当一个元素小于或等于右侧相邻元素时，位置不变。 </p><p>冒泡排序只会操作相邻的两个数据。每次冒泡操作都会对相邻的两个元素进行比较，看是否满足大小关系要求，如果不满足就让它俩互换。</p></blockquote><h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><blockquote><ol><li>比较相邻的元素。如果第一个比第二个大，就交换他们两个。</li><li>对每一对相邻元素做同样的工作，从开始第一对到结尾的最后一对。在这一点，最后的元素应该会是最大的数。</li><li>针对所有的元素重复以上的步骤，除了最后一个。</li><li>持续每次对越来越少的元素重复上面的步骤，直到没有任何一对数字需要比较。</li></ol></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/冒泡排序1.png" style="zoom:33%;" /><blockquote><p>经过第一轮后: 元素9作为数列中最大的元素，就像是汽水里的小气泡一样，“漂”到了最右侧。</p></blockquote><blockquote><p>每一轮结束都会有一个元素被移到最右侧。</p></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/冒泡排序3.png" style="zoom:33%;" /><h3 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test01</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span>[] arr = &#123;<span class="number">5</span>, <span class="number">8</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">9</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">7</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length-<span class="number">1</span>; i++) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; arr.length-<span class="number">1</span>-i; j++) &#123;</span><br><span class="line"><span class="keyword">if</span>(arr[j] &gt; arr[j+<span class="number">1</span>])&#123;</span><br><span class="line">                    <span class="comment">//通过第三方变量实现两个变量的交换</span></span><br><span class="line">                    <span class="comment">//缺点：需要声明变量</span></span><br><span class="line"><span class="comment">//int temp = arr[j];</span></span><br><span class="line"><span class="comment">//arr[j] = arr[j+1];</span></span><br><span class="line"><span class="comment">//arr[j+1] = temp;</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="comment">//通过两个变量加减实现两个变量的交换</span></span><br><span class="line">                    <span class="comment">//缺点：当两个变量相加超出int取值范围，会损失精度</span></span><br><span class="line"><span class="comment">//arr[j] = arr[j] + arr[j+1] - (arr[j+1] = arr[j]);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//通过位运算^异或实现两个变量的交换</span></span><br><span class="line">arr[j] = arr[j]^arr[j+<span class="number">1</span>];</span><br><span class="line">arr[j+<span class="number">1</span>] = arr[j]^arr[j+<span class="number">1</span>];</span><br><span class="line">arr[j] = arr[j]^arr[j+<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">System.out.println(Arrays.toString(arr));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="口诀"><a href="#口诀" class="headerlink" title="口诀"></a>口诀</h3><blockquote><p>N个数字来排队</p><p>两两相比小靠前</p><p>外层循环N-1</p><p>内层循环N-1-i</p></blockquote><h3 id="优化代码"><a href="#优化代码" class="headerlink" title="优化代码"></a>优化代码</h3><blockquote><p><strong>为什么需要优化？</strong></p><p>针对不同的数列，需要循环的轮数是有不同的。</p><p>例如：54321需要4轮循环之后才能排好序。而12345，当执行第一轮循环后，所有相邻的两个数值都无需换位，那说明排序正常，无需排序。不用执行后续的循环。</p></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/优化冒泡排序1.png" style="zoom:33%;" /><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/优化冒泡排序2.png" style="zoom:30.5%;" /><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test02</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span>[] arr = &#123;<span class="number">5</span>, <span class="number">8</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">9</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">7</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length-<span class="number">1</span>; i++) &#123;</span><br><span class="line"><span class="comment">//默认排好了</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">isSort</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; arr.length-<span class="number">1</span>-i; j++) &#123;</span><br><span class="line"><span class="keyword">if</span>(arr[j] &gt; arr[j+<span class="number">1</span>])&#123;</span><br><span class="line"></span><br><span class="line">isSort = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">arr[j] = arr[j]^arr[j+<span class="number">1</span>];</span><br><span class="line">arr[j+<span class="number">1</span>] = arr[j]^arr[j+<span class="number">1</span>];</span><br><span class="line">arr[j] = arr[j]^arr[j+<span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//排好了跳出循环</span></span><br><span class="line"><span class="keyword">if</span>(isSort)&#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">System.out.println(Arrays.toString(arr));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="选择排序"><a href="#选择排序" class="headerlink" title="选择排序"></a>选择排序</h2><h3 id="概念-1"><a href="#概念-1" class="headerlink" title="概念"></a>概念</h3><blockquote><p>选择排序将数组分成已排序区间和未排序区间。初始已排序区间为空。每次从未排序区间中选出最小的元素放到已排序区间的末尾，直到未排序区间为空。</p></blockquote><h3 id="原理-1"><a href="#原理-1" class="headerlink" title="原理"></a>原理</h3><blockquote><p>选择排序是一种最简单的排序算法。其排序的逻辑如下:</p><ol><li>有一个待排序的数组A</li><li>从A中找出最小的元素。 </li><li>将找到的最小元素跟数组A中第一个元素交换位置(如果最小元素就是第一个元素，则自己跟自己交换位置)。如下图:</li></ol></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/选择排序1.png" style="zoom:13%;" /><blockquote><p>(如上图，长方形高低代表数字的大小，找到最小的数字，跟第一个位置的数据进行交换) </p><p>交换之后，结果如下图所示:</p></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/选择排序2.png" style="zoom:13%;" /><blockquote><ol start="4"><li>然后，在剩下的4个数字中再找到最小的那个数字，跟第2个位置的数字交换。如下图:</li></ol></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/选择排序3.png" style="zoom:20%;" /><blockquote><p>交换之后的结果如下如:</p></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/选择排序4.png" style="zoom:20%;" /><blockquote><ol start="5"><li>再在剩下的三个数字中，找到最小的那个数字跟第3个位置的数字交换位置。上图中剩下的三个数字中最小的就是第3个位置的数字，所以，它自己跟自己交换位置，就是不变。同理第 四个数字也是不变，第5个数字也是不变。(上图中例子第3、4、5个元素正好就是对应的排 序，所以不变。如果不是对应的最小数字，同理交换位置就行。) 以上就是选择排序的算法逻辑。</li></ol></blockquote><h3 id="代码实现-1"><a href="#代码实现-1" class="headerlink" title="代码实现"></a>代码实现</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test01</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span>[] arr = &#123;<span class="number">5</span>, <span class="number">8</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">9</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">7</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//最小值下标。初始默认假设第一个数字就是最小数字</span></span><br><span class="line"><span class="type">int</span> <span class="variable">minIndex</span> <span class="operator">=</span> i;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i+<span class="number">1</span>; j &lt; arr.length; j++) &#123;</span><br><span class="line"><span class="comment">//如果找到更小的数字</span></span><br><span class="line"><span class="keyword">if</span>(arr[minIndex] &gt; arr[j])&#123;</span><br><span class="line"><span class="comment">//将minIndex变量的值修改为新的最小数字的下标</span></span><br><span class="line">minIndex = j;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(minIndex != i)&#123;</span><br><span class="line">arr[minIndex] = arr[minIndex] ^ arr[i];</span><br><span class="line">arr[i] = arr[minIndex] ^ arr[i];</span><br><span class="line">arr[minIndex] = arr[minIndex] ^ arr[i];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">System.out.println(Arrays.toString(arr));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="选择排序小结"><a href="#选择排序小结" class="headerlink" title="选择排序小结"></a>选择排序小结</h3><blockquote><p>选择排序是一种简单的排序算法，适用于数据量较小的情况，因为根据时间复杂度分析，数据量越大，选择排序所花费的时间按照平方倍数增长，会非常慢。 </p><p>但是选择排序也有它的优势，选择排序的优势就是思维逻辑简单。</p><p>选择排序还有个特点，就是不论数组的顺序是排好序或者是乱序的，选择排序都需要花费一样的时间来计算。比如，利用选择排序对数组{1,2,3,4,5}和数组{3,1,4,2,5}排序所花费的时间是一样的。</p></blockquote><h2 id="插入排序"><a href="#插入排序" class="headerlink" title="插入排序"></a>插入排序</h2><h3 id="概念-2"><a href="#概念-2" class="headerlink" title="概念"></a>概念</h3><blockquote><p>插入排序将数组数据分成已排序区间和未排序区间（有序区间和无序区间）。</p><p>初始已排序区间只有一个元素，即数组第一个元素。从未排序区间取出一个元素插入到已排序区间，新插入的元素要与已排序区间的数据一一比较大小，直到该元素找到合适的位置。陆续从未排序区间取出数据插入到已排序区间，直到未排序区间为空。</p><p>实际操作过程中，未排序区间的第一个元素与已排序区间的最后一个元素比较大小，如果大于最后一个数据则不换位置，直接加到已排序区间的末尾。如果数据小于已排序区间的最后一个数据，则需要换位，并且该数据要与已排序区间前面的数据一一比较大小，直到找到合适的位置。</p></blockquote><h3 id="原理-2"><a href="#原理-2" class="headerlink" title="原理"></a>原理</h3><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/插入排序1.png" alt="image-20220731205457305" style="zoom:70%;" /><blockquote><p>有一个待排序的数组：5、2、4、6、1、3。插入排序步骤如下：</p><ol><li><p>初始时，有序区间中只有5，无序区间中有2、4、6、1、3。</p><p>将无序区间的2插入到有序区间，先比较2和5的大小。2比5小则交换位置。</p><p>比较后，有序区间中是2、5，无序区间中有4、6、1、3。</p></li><li><p>再将4加入到有序区间，比较4和5的大小。4比5小，则交换位置。此时有序区间是2、4、5，顺序正确。</p><p>如果顺序不正确，4还要与2比较，必须保证有序区间一定是排好序的。此时无序区间中有6、1、3。</p></li><li><p>再将6加入到有序区间，比较6和5的大小。6比5大，则无需交换位置，直接将6放在有序区间的末尾。此时有序区间是2、4、5、6，此时无序区间中有1、3。</p></li><li><p>再将1加入到有序区间，比较1和6的大小。1比6小，则交换位置。1与6交换位置后，有序区间的顺序还是不正确，需要继续调整，1再与之前的数据一一比较，直到找到合适的位置。此时有序区间是1、2、4、5、6，此时无序区间中有3。</p></li><li><p>再将3加入到有序区间，比较3和6的大小。3比6小，则交换位置。3与6交换位置后，有序区间的顺序还是不正确，需要继续调整，3再与之前的数据一一比较，直到找到合适的位置。此时有序区间是1、2、3、4、5、6，此时无序区间有空。</p></li><li><p>当无序区间为空，也就意味着排序结束。最终排序结果为：1、2、3、4、5、6。</p></li></ol></blockquote><h3 id="代码实现-2"><a href="#代码实现-2" class="headerlink" title="代码实现"></a>代码实现</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test01</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span>[] arr = &#123;<span class="number">5</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">1</span>, <span class="number">3</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i; j &gt; <span class="number">0</span>; j--) &#123;</span><br><span class="line"><span class="keyword">if</span>(arr[j-<span class="number">1</span>] &gt; arr[j])&#123;</span><br><span class="line">arr[j-<span class="number">1</span>] = arr[j-<span class="number">1</span>] ^ arr[j];</span><br><span class="line">arr[j] = arr[j-<span class="number">1</span>] ^ arr[j];</span><br><span class="line">arr[j-<span class="number">1</span>] = arr[j-<span class="number">1</span>] ^ arr[j];</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">System.out.println(Arrays.toString(arr));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>以上插入排序的java代码实现，代码中的第二个for循环是重点，第二个for循环是只比较当前数据左边的值，如果比左边的值小则交换位置，否则位置不变。 </p></blockquote><h3 id="插入排序小结"><a href="#插入排序小结" class="headerlink" title="插入排序小结"></a>插入排序小结</h3><blockquote><p>插入排序适合如下类型的数组: </p><ol><li>数组中的每一个元素距离其最终的位置都不远。比如{1,0,2,3,4,5}，这个数组中0最终位置 应该是第一个位置，0此时的位置距离第一个位置不远。 </li><li>一个有序的大数组中融入一个小数组。比如有序大数组{1,2,3,4,5,6}，融入一个小数组 {0,1}。</li><li>数组中只有几个元素的位置不正确。 上述这三种情况的数组适合使用插入排序算法。打过麻将的同学可以想想，打麻将过程中不停地摸牌、打牌、整理牌的过程是不是就是一次插入排序呢! 排序是算法的基础，排序的用途很多。</li></ol></blockquote><h2 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h2><h3 id="概念-3"><a href="#概念-3" class="headerlink" title="概念"></a>概念</h3><blockquote><p>快速排序（Quick Sort）是对冒泡排序的一种改进。由霍尔（C. A. R. Hoare）在1962年提出。</p><p>同冒泡排序一样，快速排序也属于交换排序算法，通过元素之间的比较和交换位置来达到排序的目的。</p></blockquote><h3 id="原理-3"><a href="#原理-3" class="headerlink" title="原理"></a>原理</h3><blockquote><p>通过一趟排序将要排序的数据分割成独立的两部分，其中一部分的所有数据都比另外一部分的所有数据都要小，然后再按此方法对这两部分数据分别进行快速排序，整个排序过程可以递归进行，以此达到整个数据变成有序序列。</p><p>快速排序与冒泡排序不同的是，冒泡排序在每一轮中只把1个元素冒泡到数列的一端。而快速排序每次排序的时候设置一个基准点，将小于等于基准点的数全部放到基准点的左边，将大于等于基准点的数全部放到基准点的右边。这样每次交换的时候就不会像冒泡排序一样只能在相邻的数之间进行交换，交换的距离就得到提升。</p><p>快速排序之所比较快，因为相比冒泡排序，每次交换是跳跃式的。这样总的比较和交换次数就少了，速度自然就提高了。</p><p>快速排序在最坏的情况下，仍可能是相邻的两个数进行了交换。因此快速排序的最差时间复杂度和冒泡排序是一样的都是O(n²)，它的平均时间复杂度为O(nlogn)。</p><p>快速排序这种思路就就是分治法。</p></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/快速排序1.png" alt="image-20220731223128903" style="zoom:70%;" /><h3 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h3><blockquote><p>快速排序一般基于递归实现。其步骤是这样的：</p><ol><li><p>选定一个合适的值（理想情况中值最好，但实现中一般使用数组第一个值），称为“基准元素”(pivot)。</p></li><li><p>基于基准元素，将数组分为两部分，较小的分在左边，较大的分在右边。</p></li><li><p>第一轮下来，这个基准元素的位置一定在最终位置上。</p></li><li><p>对两个子数组分别重复上述过程，直到每个数组只有一个元素。</p></li><li><p>排序完成。</p></li></ol><p>总结：快速排序，其实就是给基准元素找其正确索引位置的过程。</p><p>注意：快速排序算法有双边循环法和单边循环法</p></blockquote><h4 id="A-双边循环法"><a href="#A-双边循环法" class="headerlink" title="A.双边循环法"></a>A.双边循环法</h4><blockquote><ol><li>首先，选定基准元素pivot，并且设置两个指针left和right，指向数列的最左和最右两个元素。</li></ol></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/image-20220731224403891.png" alt="image-20220731224403891" style="zoom:80%;" /><blockquote><p>从right指针开始，让指针所指向的元素和基准元素做比较。</p><p>right指向的数据如果小于pivot，则right指针停止移动，切换到left指针。否则right指针向左移动。</p><p>轮到left指针行动，让指针所指向的元素和基准元素做比较。</p><p>left指向的数据如果大于pivot，则left指针停止移动。否则left指针继续向右移动。</p><p>左右指针指向的元素交换位置。</p><p>right指针当前指向的数据1小于pivot，right指针停止，轮到left指针移动。</p><p>由于left开始指向的是基准元素，所以left右移1位。</p></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/image-20220731224525073.png" alt="image-20220731224525073" style="zoom:80%;" /><blockquote><p>left右移一位是7，由于7&gt;4，所以left指针停下。这时left和right指针所指向的元素进行交换。</p></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/image-20220731224607806.png" alt="image-20220731224607806" style="zoom:80%;" /><blockquote><ol start="2"><li>接下来重新切换到right指针，向左移动。right指针先移动到8，8&gt;4，继续左移，指向到2。由于2&lt;4，停止在2的位置。</li></ol></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/image-20220731224653449.png" alt="image-20220731224653449" style="zoom:70%;" /><blockquote><p>第一轮下来数组为：3、1、2、4、5、6、8、7。本轮下来，本轮的基准元素4的位置就是最终排序完成应该放置的位置。</p><p>接下来，采用递归的方式分别对4之前的前半部分排序，再对4后面的后半部分排序。</p></blockquote><h4 id="代码实现-3"><a href="#代码实现-3" class="headerlink" title="代码实现"></a>代码实现</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test01</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span>[] arr = <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">4</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">8</span>, <span class="number">1</span>&#125;;</span><br><span class="line"></span><br><span class="line">quickSort(arr, <span class="number">0</span>, arr.length-<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">System.out.println(Arrays.toString(arr));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">quickSort</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> startIndex, <span class="type">int</span> endIndex)</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(startIndex &gt;= endIndex)&#123;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">pivotIndex</span> <span class="operator">=</span> partition(arr, startIndex, endIndex);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 根据基准元素，分成两部分进行递归排序</span></span><br><span class="line">quickSort(arr, startIndex, pivotIndex-<span class="number">1</span>);</span><br><span class="line">quickSort(arr, pivotIndex+<span class="number">1</span>, endIndex);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">partition</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> startIndex, <span class="type">int</span> endIndex)</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 取第1个位置(也可以选择随机位置)的元素作为基准元素</span></span><br><span class="line"><span class="type">int</span> <span class="variable">pivot</span> <span class="operator">=</span> arr[startIndex];</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> startIndex;</span><br><span class="line"><span class="type">int</span> <span class="variable">right</span> <span class="operator">=</span> endIndex;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(left != right)&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//控制right指针比较并左移</span></span><br><span class="line"><span class="keyword">while</span>(left &lt; right &amp;&amp; arr[right] &gt; pivot)&#123;</span><br><span class="line">right--;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//控制left指针比较并右移</span></span><br><span class="line"><span class="keyword">while</span> (left &lt; right &amp;&amp; arr[left] &lt;= pivot) &#123;</span><br><span class="line">left++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//交换left和right指针所指向的元素</span></span><br><span class="line"><span class="keyword">if</span>(left &lt; right)&#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> arr[left];</span><br><span class="line">arr[left] = arr[right];</span><br><span class="line">arr[right] = temp;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//交换left和right指针所指向的元素</span></span><br><span class="line">arr[startIndex] = arr[left];</span><br><span class="line">arr[left] = pivot;</span><br><span class="line"><span class="keyword">return</span> left;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="B-单边循环法"><a href="#B-单边循环法" class="headerlink" title="B.单边循环法"></a>B.单边循环法</h4><blockquote><p>单边循环法只从数组的一边对元素进行遍历和交换。</p><ol><li>开始和双边循环法相似，首先选定基准元素pivot。同时，设置一个mark指针指向数列起始位置， 这个mark指针代表小于基准元素的区域边界。</li></ol></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/image-20220731232248321.png" alt="image-20220731232248321" style="zoom:80%;" /><blockquote><p>接下来，从基准元素的下一个位置开始遍历数组。 </p><p>如果遍历到的元素大于基准元素，就继续往后遍历 </p><p>如果遍历到的元素小于基准元素，则需要做两件事: </p><p>第一，把mark指针右移1位，因为小于pivot的区域边界增大了1;</p><p>第二，让最新遍历到的元素和mark指针所在位置的元素交换位置，因为最新遍历的元素归属于小 于pivot的区域</p><p>首先遍历到元素7，7&gt;4，所以继续遍历。</p></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/image-20220731232335033.png" alt="image-20220731232335033" style="zoom:80%;" /><blockquote><p>接下来遍历到的元素是3，3&lt;4，所以mark指针右移1位。</p></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/image-20220731232356401.png" alt="image-20220731232356401" style="zoom:80%;" /><blockquote><p>随后，让元素3和mark指针所在位置的元素交换，因为元素3归属于小于pivot的区域。</p></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/image-20220731232414066.png" alt="image-20220731232414066" style="zoom:80%;" /><blockquote><p> 按照这个思路，继续遍历，后续步骤如图所示：</p></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/image-20220731232440930.png" alt="image-20220731232440930" style="zoom:80%;" /><h4 id="代码实现-4"><a href="#代码实现-4" class="headerlink" title="代码实现"></a>代码实现</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test01</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//快速排序之单边循环法</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span>[] arr = <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">4</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">2</span>, <span class="number">8</span>, <span class="number">1</span>&#125;;</span><br><span class="line"></span><br><span class="line">quickSort(arr, <span class="number">0</span>, arr.length-<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">System.out.println(Arrays.toString(arr));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">quickSort</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> startIndex, <span class="type">int</span> endIndex)</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(startIndex &gt;= endIndex)&#123;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">pivotIndex</span> <span class="operator">=</span> partition(arr, startIndex, endIndex);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 根据基准元素，分成两部分进行递归排序</span></span><br><span class="line">quickSort(arr, startIndex, pivotIndex-<span class="number">1</span>);</span><br><span class="line">quickSort(arr, pivotIndex+<span class="number">1</span>, endIndex);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">partition</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> startIndex, <span class="type">int</span> endIndex)</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 取第1个位置(也可以选择随机位置)的元素作为基准元素</span></span><br><span class="line"><span class="type">int</span> <span class="variable">pivot</span> <span class="operator">=</span> arr[startIndex];</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">mark</span> <span class="operator">=</span> startIndex;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> startIndex+<span class="number">1</span>; i &lt;= endIndex; i++) &#123;</span><br><span class="line"><span class="keyword">if</span>(pivot &gt; arr[i])&#123;</span><br><span class="line">mark++;</span><br><span class="line"><span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> arr[mark];</span><br><span class="line">arr[mark] = arr[i];</span><br><span class="line">arr[i] = temp;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> arr[startIndex];</span><br><span class="line">arr[startIndex] = arr[mark];</span><br><span class="line">arr[mark] = temp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> mark;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="希尔排序"><a href="#希尔排序" class="headerlink" title="希尔排序"></a>希尔排序</h2><h3 id="概念-4"><a href="#概念-4" class="headerlink" title="概念"></a>概念</h3><blockquote><p> 希尔排序(Shell’s Sort)是插入排序的一种，又称“缩小增量排序”（Diminishing Increment Sort），是直接插入排序算法的一种更高效的改进版本。希尔排序是非稳定排序算法。该方法因 D.L.Shell 于 1959 年提出而得名。</p><p>希尔排序是基于插入排序的以下两点性质而提出改进方法的：</p><p>插入排序本身还不够高效，插入排序每次只能将数据移动一位。当有大量数据需要排序时，会需要大量的移位操作。</p><p>但是插入排序在对几乎已经排好序的数据操作时，效率很高，几乎可以达到线性排序的效率。</p><p>所以，如果能对数据进行初步排列后，再用插入排序，那么就会大大提高效率。</p><p>希尔排序是把记录按下标的一定增量分组，对每组使用直接插入排序算法排序；当增量减至 1 时，整个文件恰被分成一组，算法便终止。</p><p>由于多次插入排序，我们知道一次插入排序是稳定的，不会改变相同元素的相对顺序，但在不同的插入排序过程中，相同的元素可能在各自的插入排序中移动，最后其稳定性就会被打乱，所以shell排序是不稳定的。</p></blockquote><h3 id="原理-4"><a href="#原理-4" class="headerlink" title="原理"></a>原理</h3><blockquote><p> 把元素按步长gap分组，对每组元素采用直接插入排序方法进行排序；</p><p> 随着步长逐渐减小，所分成的组包含的元素越来越多；</p><p> 当步长值减小到1时，整个数据合成一组，构成一组有序记录，完成排序；</p></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/image-20220801010017817.png" alt="image-20220801010017817" style="zoom:70%;" /><h3 id="代码实现-5"><a href="#代码实现-5" class="headerlink" title="代码实现"></a>代码实现</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test01</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span>[] arr = <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">9</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">8</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">5</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">gap</span> <span class="operator">=</span> arr.length/<span class="number">2</span>; gap &gt; <span class="number">0</span>; gap/=<span class="number">2</span>) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> gap; i &lt; arr.length; i++) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> i-gap; j &gt;= <span class="number">0</span>; j-= gap) &#123;</span><br><span class="line">System.out.println(j + <span class="string">&quot; -- &quot;</span> + (j+gap));</span><br><span class="line"><span class="keyword">if</span>(arr[j] &gt; arr[j+gap])&#123;</span><br><span class="line">arr[j] = arr[j]^arr[j+gap];</span><br><span class="line">arr[j+gap] = arr[j]^arr[j+gap];</span><br><span class="line">arr[j] = arr[j]^arr[j+gap];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;xxxxx&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;yyyy&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">System.out.println(Arrays.toString(arr));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="希尔排序优劣"><a href="#希尔排序优劣" class="headerlink" title="希尔排序优劣"></a>希尔排序优劣</h3><blockquote><p>优点：算法较简单，代码短，需要的空间小，速度还可以，适合中小规模的排序。<br>缺点：速度偏慢，不够智能，不适合情况简单的排序，不适合大规模排序。 </p></blockquote><h3 id="希尔排序稳定性"><a href="#希尔排序稳定性" class="headerlink" title="希尔排序稳定性"></a>希尔排序稳定性</h3><blockquote><p>希尔排序是不稳定的算法，它满足稳定算法的定义。对于相同的两个数，可能由于分在不同的组中而导致它们的顺序发生变化。</p><p> 算法稳定性 – 假设在数列中存在a[i]&#x3D;a[j]，若在排序之前，a[i]在a[j]前面；并且排序之后，a[i]仍然在a[j]前面。则这个排序算法是稳定的！</p></blockquote><h2 id="归并排序"><a href="#归并排序" class="headerlink" title="归并排序"></a>归并排序</h2><h3 id="概念-5"><a href="#概念-5" class="headerlink" title="概念"></a>概念</h3><blockquote><p>归并排序是一类与插入排序、交换排序、选择排序不同的另一种排序方法。</p><p>归并排序是采用分治法的一个非常典型的应用。归并排序的思想就是先递归分解数组，再合并数组。</p><p>将数组分解最小之后，然后合并两个有序数组，基本思路是比较两个数组的最前面的数，谁小就先取谁，取了后相应的指针就往后移一位。然后再比较，直至一个数组为空，最后把另一个数组的剩余部分复制过来即可。</p><p>归并排序有多路归并排序、两路归并排序 , 可用于内排序，也可以用于外排序。</p></blockquote><h3 id="原理-5"><a href="#原理-5" class="headerlink" title="原理"></a>原理</h3><blockquote><p>分而治之(divide - conquer)。</p><p>每个递归过程涉及三个步骤：</p><p>第一, 分解: 把待排序的 n 个元素的序列分解成两个子序列, 每个子序列包括 n&#x2F;2 个元素；</p><p>第二, 治理: 对每个子序列分别调用归并排序MergeSort，进行递归操作；</p><p>第三, 合并: 合并两个排好序的子序列，生成排序结果。</p></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/image-20220801015153838.png" alt="image-20220801015153838" style="zoom:70%;" /><blockquote><p>归并排序图片演示</p><p><a href="https://img-blog.csdn.net/20180607002713740">https://img-blog.csdn.net/20180607002713740</a></p></blockquote><h3 id="代码实现-6"><a href="#代码实现-6" class="headerlink" title="代码实现"></a>代码实现</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test01</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span>[] arr = <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">4</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">2</span>, <span class="number">8</span>, <span class="number">1</span>&#125;;</span><br><span class="line"></span><br><span class="line">mergeSort(arr, <span class="number">0</span>, arr.length-<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">System.out.println(Arrays.toString(arr));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">mergeSort</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> low, <span class="type">int</span> high)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(low &lt; high)&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> (low+high)/<span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">mergeSort(arr, low, mid);</span><br><span class="line">mergeSort(arr, mid+<span class="number">1</span>, high);</span><br><span class="line"><span class="comment">// 左右归并</span></span><br><span class="line">merge(arr, low, mid, high);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span>[] arr, <span class="type">int</span> low, <span class="type">int</span> mid, <span class="type">int</span> high)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span>[] temp = <span class="keyword">new</span> <span class="title class_">int</span>[high-low+<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> low;</span><br><span class="line"><span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> mid+<span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 把较小的数先移到新数组中</span></span><br><span class="line"><span class="keyword">while</span>(i&lt;=mid &amp;&amp; j&lt;=high)&#123;</span><br><span class="line"><span class="keyword">if</span>(arr[i]&lt;arr[j])&#123;</span><br><span class="line">temp[k++] = arr[i++];</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">temp[k++] = arr[j++];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 把左边剩余的数移入数组</span></span><br><span class="line"><span class="keyword">while</span>(i &lt;= mid)&#123;</span><br><span class="line">temp[k++] = arr[i++];</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 把右边边剩余的数移入数组</span></span><br><span class="line"><span class="keyword">while</span>(j &lt;= high)&#123;</span><br><span class="line">temp[k++] = arr[j++];</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 把新数组中的元素覆盖arr数组</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">0</span>; x &lt; temp.length; x++) &#123;</span><br><span class="line">arr[x+low] = temp[x];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="桶排序"><a href="#桶排序" class="headerlink" title="桶排序"></a>桶排序</h2><h3 id="概念-6"><a href="#概念-6" class="headerlink" title="概念"></a>概念</h3><blockquote><p> 桶排序，顾名思义会用到“桶” 。核心思想是将要排序的数据分到几个有序的桶里，每个桶里的数据单独进行排序。桶内排完序之后，再把每个桶里的数据按照顺序依次取出，组成的序列就是有序的了。</p><p>  桶排序同样是一种线性时间的排序算法。桶排序需要创建若干个桶来协助排序，每一个桶(bucket)代表一个区间范围，里面可以承载一个或多个元素。</p><p>  除了对一个桶内的元素做链表存储，也有可能对每个桶中的元素继续使用其他排序算法进行排序，所以更多时候，桶排序会结合其他排序算法一起使用。</p><p>  桶排序对排序的数据要求苛刻：</p><ol><li>要排序的数据需要很容易就能划分成m个桶，并且桶与桶之间有着天然的大小顺序；</li><li>数据在各个桶之间的分布是比较均匀的；</li><li>桶排序比较适合用在外部排序中。</li></ol><p>  所谓的外部排序就是数据存储在外部磁盘中，数据量比较大，内存有限，无法将数据全部加载到内存中。</p></blockquote><h3 id="原理-6"><a href="#原理-6" class="headerlink" title="原理"></a>原理</h3><blockquote><ol><li>桶排序的第1步，就是创建这些桶，并确定每一个桶的区间范围具体需要建立多少个桶，如何确定桶的区间范围，有很多种不同的方式。我们这里创建的桶数量等于原始数列的元素数量，除最后一个桶只包含数列最大值外， 前面各个桶的区间按照比例来确定。</li></ol><p>  区间跨度 &#x3D; (最大值-最小值)&#x2F; (桶的数量 - 1) </p><p>  假设有一个非整数数列如下：<strong>4.5、0.84、3.25、2.18、0.5</strong></p><p>  桶的个数为5，计算出区间跨度为1。</p><p> 序列：4.5、0.84、3.25、2.18、0.5</p><p> 区间跨度 &#x3D; (最大值-最小值)&#x2F;(桶的数量-1)</p><p> 区间跨度 &#x3D; 1.0</p><p> 0.5-1.5 （0号桶中：0.84, 0.5）</p><p> 1.5-2.5 （1号桶中：2.18）</p><p> 2.5-3.5 （2号桶中：3.25）</p><p> 3.5-4.5 （3号桶中：空）</p><p> 4.5-5.5 （4号桶中：4.5）</p><p> 如何计算当前数据属于某个区间，或者说在哪个桶里？</p><p> 桶编号 &#x3D; (int) ((元素数值 - 最小值) &#x2F; 区间跨度);</p></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/image-20220802201909454.png" alt="image-20220802201909454" style="zoom:67%;" /><blockquote><ol start="2"><li>遍历原始数列，把元素对号入座放入各个桶中。</li></ol></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/image-20220802201939921.png" alt="image-20220802201939921" style="zoom:67%;" /><blockquote><ol start="3"><li>对每个桶内部的元素分别进行排序(显然，只有第1个桶需要排序)</li></ol></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/image-20220802201959409.png" alt="image-20220802201959409" style="zoom:67%;" /><blockquote><ol start="4"><li>遍历所有的桶，输出所有元素 ：0.5、0.84、2.18、3.25、4.5</li></ol></blockquote><h3 id="代码实现-7"><a href="#代码实现-7" class="headerlink" title="代码实现"></a>代码实现</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test01</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//桶排序</span></span><br><span class="line"></span><br><span class="line"><span class="type">double</span>[] arr = <span class="keyword">new</span> <span class="title class_">double</span>[]&#123;<span class="number">4.5</span>, <span class="number">0.84</span>, <span class="number">3.25</span>, <span class="number">2.18</span>, <span class="number">0.5</span>&#125;;</span><br><span class="line"></span><br><span class="line">bucketSort(arr);</span><br><span class="line"></span><br><span class="line">System.out.println(Arrays.toString(arr));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">bucketSort</span><span class="params">(<span class="type">double</span>[] arr)</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取最大值和最小值</span></span><br><span class="line"><span class="type">double</span> <span class="variable">max</span> <span class="operator">=</span> arr[<span class="number">0</span>];</span><br><span class="line"><span class="type">double</span> <span class="variable">min</span> <span class="operator">=</span> arr[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line"><span class="keyword">if</span>(max &lt; arr[i])&#123;</span><br><span class="line">max = arr[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(min &gt; arr[i])&#123;</span><br><span class="line">min = arr[i];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取桶个数</span></span><br><span class="line"><span class="type">int</span> <span class="variable">bucketCount</span> <span class="operator">=</span> arr.length;</span><br><span class="line"><span class="comment">// 计算区间跨度 = (最大值-最小值)/(桶的数量-1)</span></span><br><span class="line"><span class="type">double</span> <span class="variable">span</span> <span class="operator">=</span> (max-min)/(bucketCount-<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 桶的初始化</span></span><br><span class="line">ArrayList&lt;LinkedList&lt;Double&gt;&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(bucketCount);</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; bucketCount; i++) &#123;</span><br><span class="line">list.add(<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 循环获取元素应该放在哪个区间内，也就是获取桶的编号</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取当前数据应该放在哪个区间内，也就是获取桶的编号</span></span><br><span class="line"><span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> (<span class="type">int</span>) ((arr[i]-min)/span);</span><br><span class="line">list.get(num).add(arr[i]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对每个桶内部进行排序</span></span><br><span class="line"><span class="keyword">for</span> (LinkedList&lt;Double&gt; linkedList : list) &#123;</span><br><span class="line">Collections.sort(linkedList);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将数据回填到原数组中</span></span><br><span class="line"><span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (LinkedList&lt;Double&gt; linkedList : list) &#123;</span><br><span class="line"><span class="keyword">for</span> (Double element : linkedList) &#123;</span><br><span class="line">arr[index++] = element;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="基数排序"><a href="#基数排序" class="headerlink" title="基数排序"></a>基数排序</h2><h3 id="概念-7"><a href="#概念-7" class="headerlink" title="概念"></a>概念</h3><blockquote><p>基数排序是桶排序的扩展。是1887年赫尔曼.何乐礼发明的。基数排序的基本实现原理是：将整数按位切割成不同的数字，然后按位数进行比较。</p><p> 基数排序是经典的空间换时间的算法。占用内存很大，当对海量数据排序时，容易造成OutOfMemoryError。</p></blockquote><h3 id="原理-7"><a href="#原理-7" class="headerlink" title="原理"></a>原理</h3><blockquote><ol><li><p>有一串数值如下所示：64, 32, 90,76, 11,93, 85, 44, 18, 21, 65, 89, 57,11</p><p>首先根据个位数的数值，将它们分配至编号0到9的桶子中：</p></li></ol></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/image-20220808104847943.png" alt="image-20220808104847943" style="zoom:87%;" /><blockquote><ol start="2"><li><p>将这些桶子中的数值重新串接起来，成为的数列为：90, 11, 21, 11, 32, 93, 64, 44, 85, 65, 76, 57, 18, 89</p><p>接着再进行一次分配，这次是根据十位数来分配：</p></li></ol></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/image-20220808104926030.png" alt="image-20220808104926030" style="zoom:80%;" /><blockquote><ol start="3"><li><p>将这些桶子中的数值重新串接起来，成为的数列为：11, 11, 18, 21, 32, 44, 57, 64, 65, 76, 85, 89, 90, 93</p><p>这时候整个数列已经排序完毕。</p><p>如果排序的对象有三位数以上，则持续进行以上的动作直至最高位数为止。</p></li></ol></blockquote><h3 id="代码实现-8"><a href="#代码实现-8" class="headerlink" title="代码实现"></a>代码实现</h3><blockquote><p>基数排序的实现，有两种方式。</p><p>低位优先法，适用于位数较小的数排序，简称LSD。</p><p>高位优先法，适用于位数较多的情况，简称MSD。</p><p>LSD的基数排序适用于位数小的数列，如果位数多的话，使用MSD的效率会比较好。</p><p>MSD的方式与LSD相反，是由高位数为基底开始进行分配，但在分配之后并不马上合并回一个数组中，而是在每个“桶子”中建立“子桶”，将每个桶子中的数值按照下一数位的值分配到“子桶”中。在进行完最低位数的分配后再合并回单一的数组中。</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test01</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//基数排序</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span>[] arr = &#123;<span class="number">64</span>, <span class="number">32</span>, <span class="number">90</span>,<span class="number">76</span>, <span class="number">11</span>,<span class="number">93</span>, <span class="number">85</span>, <span class="number">44</span>, <span class="number">18</span>, <span class="number">21</span>, <span class="number">65</span>, <span class="number">89</span>, <span class="number">57</span>, <span class="number">11</span>&#125;;</span><br><span class="line"></span><br><span class="line">radixSort(arr);</span><br><span class="line"></span><br><span class="line">System.out.println(Arrays.toString(arr));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">radixSort</span><span class="params">(<span class="type">int</span>[] arr)</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取最大值</span></span><br><span class="line"><span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> arr[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line"><span class="keyword">if</span>(max &lt; arr[i])&#123;</span><br><span class="line">max = arr[i];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取最大值的位数(目的：用来判断需要进行几轮基数排序)</span></span><br><span class="line"><span class="type">int</span> <span class="variable">maxLen</span> <span class="operator">=</span> String.valueOf(max).length();</span><br><span class="line"></span><br><span class="line"><span class="comment">//定义10个桶容器。</span></span><br><span class="line"><span class="comment">// 数组的第一维表示0-9，二维下标按照最大可能arr.length来计算。</span></span><br><span class="line"><span class="type">int</span>[][] bucket = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">10</span>][arr.length];</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建桶计数器</span></span><br><span class="line"><span class="comment">// 记录每个桶中放置数据的个数。数组元素共10个，表示10个桶。</span></span><br><span class="line"><span class="comment">// 数组索引表示桶的编号，索引对应的数值是该桶中的数据个数</span></span><br><span class="line"><span class="type">int</span>[] elementCount = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">10</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//times是记录重复操作轮数的计数器。重复次数取决了最大数值的位数</span></span><br><span class="line"><span class="comment">//循环中定义变量n，用来表示位数。1表示个位，10表示十位，100表示百位。目的是获取数字每个位上的值。</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> times= <span class="number">1</span>, n = <span class="number">1</span>; times&lt;= maxLen; times++,n*=<span class="number">10</span>) &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 遍历数值，放到桶中</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取元素个位、十位、百位上的数字。就是桶编号</span></span><br><span class="line"><span class="type">int</span> <span class="variable">lsd</span> <span class="operator">=</span> arr[i]/n%<span class="number">10</span>;</span><br><span class="line"><span class="comment">//将数值放入桶中</span></span><br><span class="line">bucket[lsd][elementCount[lsd]] = arr[i];</span><br><span class="line"><span class="comment">//桶计数器增加</span></span><br><span class="line">elementCount[lsd]++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//数组索引下标。每轮结束都要形成新的数列，数组下标重新记录。</span></span><br><span class="line"><span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 从10个桶中取出数据，形成新的数列</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; bucket.length; i++) &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//判断桶中是否有数据</span></span><br><span class="line"><span class="keyword">if</span>(elementCount[i] &gt; <span class="number">0</span>)&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; elementCount[i]; j++) &#123;</span><br><span class="line">arr[index++] = bucket[i][j]; </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//遍历完数据，将计数器清空，下次重新计数</span></span><br><span class="line">elementCount[i] = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="计数排序"><a href="#计数排序" class="headerlink" title="计数排序"></a>计数排序</h2><h3 id="概念-8"><a href="#概念-8" class="headerlink" title="概念"></a>概念</h3><blockquote><p>计数排序，这种排序算法是利用数组下标来确定元素的正确位置的。</p><p>计数排序是基本的桶排序。</p><p>定义n个桶，每个桶一个编号，数据放到相应编号的桶中。定义一个数组，数组索引表示桶的编号，索引值就是存放的数值。如果该值为1说明只出现一次，如果大于1，说明重复多次出现。</p><p>计数排序是典型的空间换时间的算法。</p></blockquote><h3 id="原理-8"><a href="#原理-8" class="headerlink" title="原理"></a>原理</h3><blockquote><ol><li>假设数组中有10个整数，取值范围为0~10，要求用最快的速度把这10个整数从小到大进行排序。 可以根据这有限的范围，建立一个长度为10的数组。数组下标从0到9，元素初始值全为0。</li></ol></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/image-20220803204530655.png" alt="image-20220803204530655" style="zoom:80%;" /><blockquote><p>假设数组数据为：7 3 2 1 9 6 5 4 3 8</p><p>下面就开始遍历这个无序的随机数列，每一个整数按照其值对号入座，同时，对应数组下标的元素进行加1操作。</p><p>最终，当数列遍历完毕时，数组的状态如下：</p></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/image-20220803204556612.png" alt="image-20220803204556612" style="zoom:80%;" /><blockquote><p>该数组中每一个下标位置所对应的值，其实就是数列中对应整数出现的次数。</p><p>直接遍历数组，输出数组元素的下标值，元素的值就是输出的次数。0不输出。</p><p>输出： 1  2 3  3  4  5  6  7  8  9 </p></blockquote><blockquote><ol start="2"><li>如果起始数不是从0开始，比如以下数列：</li></ol><p>  95，94，91，98，99，90，99，93，91，92，数组起始数为90。就采用偏移量的方式来排序。</p></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/image-20220803204707963.png" alt="image-20220803204707963" style="zoom:80%;" /><blockquote><p>数组遍历完毕，数组的状态如下：</p></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/image-20220803204725252.png" alt="image-20220803204725252" style="zoom:80%;" /><blockquote><p>原本输出：0  1  1  2  3  4  5  8  9  9</p><p>增加上偏移量90后，实际应该顺序输出为：90  91  91  92  93  94  95  98  99  99</p></blockquote><h3 id="代码实现-9"><a href="#代码实现-9" class="headerlink" title="代码实现"></a>代码实现</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test01</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//计数排序</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span>[] arr = makeRandomArr(<span class="number">50</span>, <span class="number">60</span>, <span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">System.out.println(Arrays.toString(arr));</span><br><span class="line"></span><br><span class="line">countSort(arr);</span><br><span class="line"></span><br><span class="line">System.out.println(Arrays.toString(arr));</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">countSort</span><span class="params">(<span class="type">int</span>[] arr)</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取最大值和最小值</span></span><br><span class="line"><span class="type">int</span> <span class="variable">max</span> <span class="operator">=</span> arr[<span class="number">0</span>];</span><br><span class="line"><span class="type">int</span> <span class="variable">min</span> <span class="operator">=</span> arr[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line"><span class="keyword">if</span>(max &lt; arr[i])&#123;</span><br><span class="line">max = arr[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(min &gt; arr[i])&#123;</span><br><span class="line">min = arr[i];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 计算桶的数量</span></span><br><span class="line"><span class="type">int</span> <span class="variable">bucketNum</span> <span class="operator">=</span> max-min+<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建桶数组</span></span><br><span class="line"><span class="type">int</span>[] buckets = <span class="keyword">new</span> <span class="title class_">int</span>[bucketNum];</span><br><span class="line"></span><br><span class="line"><span class="comment">//遍历原数组</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line"><span class="comment">//计算元素在桶中的编号</span></span><br><span class="line"><span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> arr[i]-min;</span><br><span class="line"><span class="comment">//桶上计数累加</span></span><br><span class="line">++buckets[n];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将数据回填到原数组中</span></span><br><span class="line"><span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; buckets.length; i++) &#123;</span><br><span class="line"><span class="keyword">if</span>(buckets[i] &gt; <span class="number">0</span>)&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; buckets[i]; j++) &#123;</span><br><span class="line"><span class="comment">// 实际数值 = 桶编号 + 最小数值</span></span><br><span class="line">arr[index++] = i + min;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 全班50个人，最低成绩60分，最高成绩100分。将这些成绩进行排序。</span></span><br><span class="line"><span class="comment">     * 随机生成50个成绩。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span>[] makeRandomArr(<span class="type">int</span> count,<span class="type">int</span> min,<span class="type">int</span> max)&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span>[] arr = <span class="keyword">new</span> <span class="title class_">int</span>[count];</span><br><span class="line"></span><br><span class="line"><span class="type">Random</span> <span class="variable">ran</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">element</span> <span class="operator">=</span> ran.nextInt(max-min)+min;</span><br><span class="line">arr[i] = element;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="堆排序"><a href="#堆排序" class="headerlink" title="堆排序"></a>堆排序</h2><h3 id="概念-9"><a href="#概念-9" class="headerlink" title="概念"></a>概念</h3><blockquote><p>堆是具有以下性质的完全二叉树</p><p>大顶堆：每个节点的值都大于或等于其左右孩子节点的值<strong>。</strong></p></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/image-20220808162453505.png" alt="image-20220808162453505" style="zoom:87%;" /><blockquote><p>小顶堆：每个结点的值都小于或等于其左右孩子结点的值。</p></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/image-20220808162513989.png" alt="image-20220808162513989" style="zoom:80%;" /><blockquote><p>对堆中的结点按层进行编号，将这种逻辑结构映射到数组中：</p></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/image-20220808162534054.png" alt="image-20220808162534054" style="zoom:80%;" /><blockquote><p>该数组从逻辑上讲就是一个堆结构，用简单的公式来描述一下堆的定义就是: </p><p>大顶堆:arr[i] &gt;&#x3D; arr[2i+1] &amp;&amp; arr[i] &gt;&#x3D; arr[2i+2]</p><p>小顶堆:arr[i] &lt;&#x3D; arr[2i+1] &amp;&amp; arr[i] &lt;&#x3D; arr[2i+2]</p></blockquote><h3 id="原理-9"><a href="#原理-9" class="headerlink" title="原理"></a>原理</h3><blockquote><p>将待排序序列构造成一个大顶堆，此时，整个序列的最大值就是堆顶的根节点。 将其与末尾元素进行交换，此时末尾就为最大值。然后将剩余n-1个元素重新构造成一个堆，这样会得 到n个元素的次小值。如此反复执行，便能得到一个有序序列了。</p></blockquote><blockquote><ol><li><p>构造初始堆 </p><p>将给定无序序列构造成一个大顶堆(一般升序采用大顶堆，降序采用小顶堆)。</p></li></ol></blockquote><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/wps1.jpg" alt="img"> </p><blockquote><ol start="2"><li>此时从最后一个非叶子节点开始(叶子节点自然不用调整，第一个非叶子节点 arr.length&#x2F;2- 1&#x3D;5&#x2F;2-1&#x3D;1，也就是下面的6结点)，从左至右，从下至上进行调整。</li></ol></blockquote><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/wps2.jpg" alt="img"> </p><blockquote><ol start="3"><li>找到第二个非叶节点4，由于[4,9,8]中9元素最大，4和9交换</li></ol></blockquote><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/wps3.jpg" alt="img"> </p><blockquote><ol start="4"><li>这时，交换导致了子根[4,5,6]结构混乱，继续调整，[4,5,6]中6最大，交换4和6。</li></ol></blockquote><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/wps4.jpg" alt="img"> </p><blockquote><p>此时，我们就将一个无序序列构造成了一个大顶堆。 </p></blockquote><blockquote><ol start="5"><li>将堆顶元素与末尾元素进行交换，使末尾元素最大。然后继续调整堆，再将堆顶元素与末尾元素交换，得到第二大元素。如此反复进行交换、重建、交换。将堆顶元素9和末尾元素4进行交换</li></ol></blockquote><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/wps5.jpg" alt="img"> </p><blockquote><p>重新调整结构，使其继续满足大顶堆 </p></blockquote><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/wps6.jpg" alt="img"> </p><blockquote><p>再将堆顶元素8与末尾元素5进行交换，得到第二大元素8</p></blockquote><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/wps7.jpg" alt="img"> </p><blockquote><p>继续进行调整成大顶堆，顶部的6与右子树的4交换，最终使得整个序列有序。</p></blockquote><h3 id="代码实现-10"><a href="#代码实现-10" class="headerlink" title="代码实现"></a>代码实现</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test01</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="comment">//堆排序</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span>[] arr = &#123;<span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">5</span>, <span class="number">9</span>&#125;;</span><br><span class="line"></span><br><span class="line">heapSort(arr);</span><br><span class="line"></span><br><span class="line">System.out.println(Arrays.toString(arr));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">heapSort</span><span class="params">(<span class="type">int</span>[] arr)</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//构建堆</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> arr.length/<span class="number">2</span>-<span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">adjustHeap(arr, i, arr.length);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> arr.length-<span class="number">1</span>; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line"><span class="comment">//堆顶与末尾元素调换</span></span><br><span class="line">arr[<span class="number">0</span>] = arr[<span class="number">0</span>]^arr[i];</span><br><span class="line">arr[i] = arr[<span class="number">0</span>]^arr[i];</span><br><span class="line">arr[<span class="number">0</span>] = arr[<span class="number">0</span>]^arr[i];</span><br><span class="line"></span><br><span class="line"><span class="comment">//将堆顶元素下沉（目的：是将最大元素上浮到堆顶）</span></span><br><span class="line">adjustHeap(arr, <span class="number">0</span>, i);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">adjustHeap</span><span class="params">(<span class="type">int</span>[] arr,<span class="type">int</span> index,<span class="type">int</span> length)</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">leftChild</span> <span class="operator">=</span> index+<span class="number">1</span>;<span class="comment">//左边节点下标</span></span><br><span class="line"><span class="type">int</span> <span class="variable">rightChild</span> <span class="operator">=</span> index+<span class="number">2</span>;<span class="comment">//右边节点下标</span></span><br><span class="line"><span class="type">int</span> <span class="variable">parentIndex</span> <span class="operator">=</span> index;<span class="comment">//父节点下标</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//下沉左边</span></span><br><span class="line"><span class="keyword">if</span>(leftChild &lt; length &amp;&amp; arr[parentIndex] &lt; arr[leftChild])&#123;</span><br><span class="line">parentIndex = leftChild;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//下沉右边</span></span><br><span class="line"><span class="keyword">if</span>(rightChild &lt; length &amp;&amp; arr[parentIndex] &lt; arr[rightChild])&#123;</span><br><span class="line">parentIndex = rightChild;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(index != parentIndex)&#123;</span><br><span class="line"></span><br><span class="line">arr[index] = arr[index] ^ arr[parentIndex];</span><br><span class="line">arr[parentIndex] = arr[index] ^ arr[parentIndex];</span><br><span class="line">arr[index] = arr[index] ^ arr[parentIndex];</span><br><span class="line"></span><br><span class="line"><span class="comment">//继续下沉</span></span><br><span class="line">adjustHeap(arr, parentIndex, length);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Arrays-sort"><a href="#Arrays-sort" class="headerlink" title="Arrays.sort()"></a>Arrays.sort()</h2><h3 id="概念-10"><a href="#概念-10" class="headerlink" title="概念"></a>概念</h3><blockquote><p>Arrays.sort排序算法是双基准元素快速排序DualPivotQuicksort。</p><p>由弗拉基米尔·雅罗斯拉夫斯基Vladimir Yaroslavskiy，乔恩·本特利Jon Bentley和约书亚·布洛克Josh Bloch提供该算法。</p><p>在许多数据集上表现出O(nlogn)的时间复杂度，比传统的(单基准元素)快速排序算法性能更快。</p></blockquote><h3 id="原理-10"><a href="#原理-10" class="headerlink" title="原理"></a>原理</h3><blockquote><ol><li><p>在微小数组上使用插入排序（Use insertion sort on tiny arrays）</p><p>int INSERTION_SORT_THRESHOLD &#x3D; 47;</p><p>如果要排序的数组长度小于INSERTION_SORT_THRESHOLD这个常量，则插入排序优先于快速排序。</p></li></ol></blockquote><blockquote><ol start="2"><li><p>对小数组使用快速排序（Use Quicksort on small arrays）</p><p>int QUICKSORT_THRESHOLD &#x3D; 286;</p><p>如果要排序的数组长度小于QUICKSORT_THRESHOLD这个常量，则快速排序优先于归并排序。</p></li></ol></blockquote><blockquote><ol start="3"><li><p>数组接近排序，使用归并排序（Check if the array is nearly sorted）</p><p>int MAX_RUN_COUNT &#x3D; 67; &#x2F;&#x2F;归并排序的最大运行次数。</p><p>int MAX_RUN_LENGTH &#x3D; 33; &#x2F;&#x2F;归并排序运行的最大长度。</p><p>数组不是高度结构化的，使用快速排序代替归并排序。</p></li></ol></blockquote><blockquote><ol start="4"><li><p>对大数组使用计数排序（Use counting sort on large arrays）</p><p>int COUNTING_SORT_THRESHOLD_FOR_BYTE &#x3D; 29;</p><p>如果要排序的字节数组的长度大于COUNTING_SORT_THRESHOLD_FOR_BYTE该常量，则优先使用计数排序而不是插入排序。</p></li></ol></blockquote><blockquote><ol start="5"><li><p>对大数组使用计数排序（Use counting sort on large arrays）</p><p>int COUNTING_SORT_THRESHOLD_FOR_SHORT_OR_CHAR &#x3D; 3200;</p><p>如果要排序的短数组或char数组的长度大于COUNTING_SORT_THRESHOLD_FOR_SHORT_OR_CHAR该常量，则优先使用计数排序而不是快速排序。</p></li></ol></blockquote><h3 id="源码截图"><a href="#源码截图" class="headerlink" title="源码截图"></a>源码截图</h3><blockquote><ol><li>在微小数组上使用插入排序（Use insertion sort on tiny arrays）</li></ol></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/wps8.jpg" alt="img" style="zoom:80%;" /> <blockquote><ol start="2"><li>对小数组使用快速排序（Use Quicksort on small arrays）</li></ol></blockquote><img src="/wps9.jpg" alt="img" style="zoom:80%;" /> <blockquote><ol start="3"><li>数组接近排序，使用归并排序（Check if the array is nearly sorted）</li></ol></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/wps10.jpg" alt="img" style="zoom:80%;" /> <blockquote><ol start="4"><li>对大数组使用计数排序（Use counting sort on large arrays）</li></ol></blockquote><img src="/wps11.jpg" alt="img" style="zoom:80%;" /> <blockquote><ol start="5"><li>对大数组使用计数排序（Use counting sort on large arrays）</li></ol></blockquote><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/education/qianfeng/day09-3/wps12.jpg" alt="img" style="zoom:80%;" /> <h2 id="排序算法与复杂度归类"><a href="#排序算法与复杂度归类" class="headerlink" title="排序算法与复杂度归类"></a>排序算法与复杂度归类</h2><blockquote><p>注：学习完<strong>时间复杂度和空间复杂度</strong>的内容再做一下学习</p><ol><li><p>根据时间复杂度的不同，主流的排序算法可以分为3大类：</p><p>时间复杂度为O(n²)的排序算法：冒泡排序、选择排序、插入排序（冒选插）</p><p>时间复杂度为O(nlogn)的排序算法： 快速排序 、堆排序、希尔排序、归并排序 （快堆希归）</p><p>时间复杂度为线性O(n)的排序算法：桶排序、 计数排序、基数排序（桶计基）</p></li></ol><p>  各个排序算法比对表:</p></blockquote><table><thead><tr><th><strong>排序算法</strong></th><th><strong>时间复杂度</strong></th><th><strong>空间复杂度</strong></th><th><strong>是否稳定</strong></th><th>比较次数</th></tr></thead><tbody><tr><td>冒泡排序</td><td>平均、最差：O(n²)</td><td>O(1)</td><td>稳定</td><td>未优化无序&#x2F;有序：(n-1)² 优化有序：n-1 优化最差：n(n-1)&#x2F;2</td></tr><tr><td>选择排序</td><td>平均、最差：O(n²)</td><td>O(1)</td><td>不稳定</td><td>无序&#x2F;有序固定：n(n-1)&#x2F;2</td></tr><tr><td>插入排序</td><td>平均、最差：O(n²)</td><td>O(1)</td><td>稳定</td><td>有序：n-1 无序最差：n(n-1)&#x2F;2</td></tr><tr><td>快速排序</td><td>平均、最差：O(nlogn)</td><td>O(nlogn)</td><td>不稳定</td><td>属于交换排序</td></tr><tr><td>堆排序</td><td>平均、最差：O(nlogn)</td><td>O(1)</td><td>不稳定</td><td>属于选择排序</td></tr><tr><td>希尔排序</td><td>平均：O(n^1.5) 最好：O(nlogn)</td><td>O(1)</td><td>不稳定</td><td>(n-1)^1.5 nlogn</td></tr><tr><td>归并排序</td><td>平均、最差：O(nlogn)</td><td>O(n)</td><td>稳定</td><td></td></tr><tr><td>桶排序</td><td>O(n)</td><td>O(n)</td><td>稳定</td><td>适用于浮点数，适用于外部排序</td></tr><tr><td>计数排序</td><td>O(m+n)</td><td>O(m) 0-10 m&#x3D;10？</td><td>稳定</td><td>适合于连续的取值范围不大的数组</td></tr><tr><td>基数排序</td><td>平均、最差：O(d*n) d为位数</td><td>O(n)</td><td>稳定</td><td>处理海量数据排序时容易OutOfMemoryError</td></tr></tbody></table><blockquote><ol start="2"><li><p>各种排序算法性能对比</p><p>执行1万个随机数的排序，同一台机器相同条件下的测试结果：</p><p> 冒泡145ms、选择95ms、插入46ms</p><p> 快速2ms、堆2ms、希尔5ms、归并3ms</p><p> 计数1ms、基数2ms、桶17ms</p><p> Arrays.sort:4ms</p><p> Collections.sort:10ms</p><p> 执行5万个随机数的排序，同一台机器相同条件下的测试结果：</p><p> 冒泡4267ms、选择2282ms、插入1036ms</p><p> 快速9ms、堆9ms、希尔12ms、归并14ms</p><p> 计数3ms、基数7ms、桶38ms</p><p> Arrays.sort:11ms</p><p> Collections.sort:24ms</p><p> 执行10万个随机数的排序，同一台机器相同条件下的测试结果：</p><p> 冒泡16406ms、选择8633ms、插入4067ms</p><p> 快速16ms、堆16ms、希尔19ms、归并21ms</p><p> 计数6ms、基数11ms、桶49ms</p><p> Arrays.sort:19ms</p><p> Collections.sort:47ms</p><p> 排序效率排名：计数、基数 、快速、堆、希尔、归并、桶、插入、选择、冒泡</p></li></ol></blockquote><blockquote><ol start="3"><li><p>根据其稳定性，可以分为稳定排序和不稳定排序 </p><p>稳定排序：值相同的元素在排序后仍然保持着排序前的顺序</p><p>不稳定排序：值相同的元素在排序后打乱了排序前的顺序。（选择、快速、堆、希尔）</p></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> 教育 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 千锋教育 </tag>
            
            <tag> 培训 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>回顾</title>
      <link href="/posts/31f45308/"/>
      <url>/posts/31f45308/</url>
      
        <content type="html"><![CDATA[<h3 id="标识符"><a href="#标识符" class="headerlink" title="标识符"></a>标识符</h3><blockquote><p>含义：给类、变量、方法、接口取名字的时候使用到的字符序列</p><p>组成：大小写字母 、数字、$、_、中文</p><p>注意事项：</p><ol><li>不能以数字开头</li><li>区分大小写字母</li><li>不能使用除了$和_以外的特殊符号</li><li>不能使用Java的关键字</li><li>考虑到编码问题不要使用中文</li></ol></blockquote><h3 id="关键字"><a href="#关键字" class="headerlink" title="关键字"></a>关键字</h3><blockquote><p>含义：Java给我们提供的具有特殊意义的单词</p><p>经验：不用记，后续会逐一学习每个关键字到底是怎么使用的</p><p>ps：public（公有的）、static（静态的）、void（无返回值）</p></blockquote><h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><blockquote><p>含义：在程序执行过程中，可以发生改变的量</p></blockquote><h3 id="基本数据类型"><a href="#基本数据类型" class="headerlink" title="基本数据类型"></a>基本数据类型</h3><blockquote><p>byte（字节型）：1字节</p><p>short（短整型）：2字节</p><p>int（整型）：4字节</p><p>long（长整型）：8字节</p><p>float（单精度浮点型）：4字节</p><p>double（双精度浮点型）：8字节</p><p>char（字符型）：2字节</p><p>boolean（布尔型）：4字节</p></blockquote><blockquote><p>注意：</p><ol><li><p>boolean单独使用时是4个字节，boolean数组中元素是占用1字节</p></li><li><p>char的数据是使用单引号括起来</p></li><li><p>取值范围</p><p>byte：-128~127</p><p>int：-21亿~21亿</p><p>char：0~65535</p></li></ol></blockquote><h3 id="基本数据类型的转换"><a href="#基本数据类型的转换" class="headerlink" title="基本数据类型的转换"></a>基本数据类型的转换</h3><blockquote><ol><li>自动转型：取值范围小 转 取值范围大</li><li>强制转型：取值范围大 转 取值范围小</li><li>特殊点</li></ol></blockquote><h3 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h3><blockquote><p>含义：在程序执行过程中，不可发生的量</p><p>分类：</p><ol><li><p>数字字面量：程序中出现的数字</p><p>整数数字默认：int</p><p>小数数组默认：double</p></li><li><p>字面值常量：使用双引号括起来的内容</p><p>ps：“用良心做教育”</p></li><li><p>使用final(最终的)修饰的变量</p></li></ol><p>注意：字面值常量和final修饰的变量存储在内存-常量池中，并且项目结束才会回收常量池中的数据</p></blockquote><h3 id="转移字符"><a href="#转移字符" class="headerlink" title="转移字符"></a>转移字符</h3><blockquote><p>含义：具有特殊意义的字符</p><p>\n 表示换行</p><p>\t 表示水平制表</p><p>\“ 表示一个双引号字符</p><p>\‘ 表示一个单引号字符</p><p>\\ 表示一个斜杠</p></blockquote><h3 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h3><blockquote><p>算术运算符：+、-、*、&#x2F;、%、++、–</p><p>赋值运算符：&#x3D;、+&#x3D;、-&#x3D;、*&#x3D;、=、%&#x3D;</p><p>关系运算符：&#x3D;&#x3D;、!&#x3D;、&gt;、&gt;&#x3D;、&lt;、&lt;&#x3D;</p><p>逻辑运算符：&amp;、&amp;&amp;、|、||、^、!</p><p>三目运算符：(表达式)?值1:值2</p><p>位运算符：&amp;、|、^、&lt;&lt;、&gt;&gt;、&gt;&gt;&gt;</p><p>经验：运算符的优先级别不用记，灵活使用小括号</p><p>注意：使用、底层、面试题</p></blockquote><h3 id="Java的流程语句"><a href="#Java的流程语句" class="headerlink" title="Java的流程语句"></a>Java的流程语句</h3><blockquote><ol><li><p>顺序语句：方法中的代码从上往下执行</p></li><li><p>分支语句：if、switch</p></li><li><p>循环语句：for、while、do-while</p></li><li><p>特殊的流程控制语句：</p><p>break：作用在循环中，表示结束当前循环</p><p>continue：作用在循环中，表示跳过循环体剩余的部分，进入到下一次循环</p><p>return：作用在方法中，单独使用表示结束当前方法</p><p>lable：给循环做标记</p></li></ol></blockquote><h3 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h3><blockquote><p>含义：特定功能的代码块</p><p>优点：提高程序的可读性、减少了代码的冗余</p><p>分类：无参数无返回值的方法、带参数的方法、带返回值的方法</p></blockquote><h3 id="方法的重载"><a href="#方法的重载" class="headerlink" title="方法的重载"></a>方法的重载</h3><blockquote><p>含义：方法之间的关系</p><p>条件：</p><ol><li>在同一个类中</li><li>方法名相同</li><li>参数列表的个数或者类型不一致</li><li>与返回值无关</li></ol><p>好处：系统会根据实参类型自动匹配调用方法</p></blockquote><h3 id="引用数据类型"><a href="#引用数据类型" class="headerlink" title="引用数据类型"></a>引用数据类型</h3><blockquote><p>数组、类、接口、枚举</p></blockquote><h3 id="一维数组"><a href="#一维数组" class="headerlink" title="一维数组"></a>一维数组</h3><blockquote><p>含义：一组数据的容器</p></blockquote><blockquote><p>概念：</p><ol><li>元素：数组中的数据</li><li>下标&#x2F;索引：数组中元素的编号，编号从0开始</li></ol></blockquote><blockquote><p>操作：</p><pre><code>1. 通过下标设置元素2. 通过下标获取元素3. 获取元素的个数4. 遍历（for、foreach）</code></pre></blockquote><blockquote><p>扩展：</p><pre><code>1. 数组的复制（注重内存图）2. 数组的扩容（注重内存图）3. 数组的删除（注重内存图）4. 数组的排序和查找</code></pre></blockquote><h3 id="二维数组"><a href="#二维数组" class="headerlink" title="二维数组"></a>二维数组</h3><blockquote><p>含义：二维数组中包含了多个一维数组</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 教育 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 千锋教育 </tag>
            
            <tag> 培训 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>面向对象</title>
      <link href="/posts/28239a8d/"/>
      <url>/posts/28239a8d/</url>
      
        <content type="html"><![CDATA[<h1 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h1><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><blockquote><p>现实生活：</p><p>​类：抽象的概念，把具有相同特征和操作的事物归为一类</p><p>​先有实体，再有类的概念</p><p>代码世界：</p><p>​类：抽象的概念，把具有相同属性和方法的对象归为一类</p><p>​编写顺序：先有类，再创建对象</p><p>​类的作用：类相当于一个模板，刻画出具有相同属性和方法的对象</p></blockquote><h2 id="类"><a href="#类" class="headerlink" title="类"></a>类</h2><blockquote><ol><li>类中只有属性和方法</li><li>属性也叫做全局变量，属性分为成员变量和静态变量</li><li>方法分为成员方法和静态方法</li></ol></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> class 类名&#123;</span><br><span class="line">    <span class="comment">//属性也叫做全局变量，分为成员变量和静态变量</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//成员变量</span></span><br><span class="line">    数据类型 变量名;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//静态变量</span></span><br><span class="line">    <span class="keyword">static</span> 数据类型 变量名;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//方法分为成员方法和静态方法</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//成员方法</span></span><br><span class="line">    访问修饰符 返回值类型 方法名([参数])&#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//静态方法</span></span><br><span class="line">    访问修饰符 <span class="keyword">static</span> 返回值类型 方法名([参数])&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h2><blockquote><p>创建对象的语法：类名 对象名 &#x3D; new 类名();</p><p>​new 构造方法; 属于对象，就在堆内存中开辟空间</p><p>​类名 对象名 ：对象名属于引用，存的是对象在堆内存中的地址</p><p>操作对象：</p><ol><li><p>设置成员属性</p><ol start="2"><li>获取成员属性</li><li>调用成员方法</li></ol></li></ol></blockquote><h2 id="成员属性-成员变量"><a href="#成员属性-成员变量" class="headerlink" title="成员属性&#x2F;成员变量"></a>成员属性&#x2F;成员变量</h2><blockquote><p>语法结构：数据类型 变量名;</p><p>编写的位置：类里，方法的外面</p></blockquote><blockquote><p>成员变量 vs 局部变量</p><p>成员变量：类里，方法的外面的变量，并且系统会赋默认值，作用在整个类中</p><p>局部变量：方法内的变量，系统不会赋默认值，作用在方法中</p></blockquote><h2 id="成员方法"><a href="#成员方法" class="headerlink" title="成员方法"></a>成员方法</h2><blockquote><p>语法结构：访问修饰符 返回值类型 方法名([参数]){}</p><p>编写的位置：类里</p></blockquote><blockquote><p>成员方法 vs 静态方法</p><p>成员方法：属于对象的方法，必须使用对象调用</p><p>静态方法：属于类的方法，使用类名调用</p></blockquote><h2 id="构造方法"><a href="#构造方法" class="headerlink" title="构造方法"></a>构造方法</h2><blockquote><p>含义：和new一起是创建对象的功能</p><p>特点：</p><ol><li><p>与类名相同的方法</p><ol start="2"><li>没有返回项</li></ol></li></ol><p>注意：</p><pre><code>1. 当类中没有写构造方法时，系统会默认添加无参构造（无参数的构造方法）2. 构造方法可以重载的</code></pre><p>有参构造好处：创建对象时，把数据赋值给该对象</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    <span class="comment">//注意：这种不是构造方法，是成员方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">Person</span><span class="params">()</span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="private-私有化"><a href="#private-私有化" class="headerlink" title="private - 私有化"></a>private - 私有化</h2><blockquote><p>含义：私有化</p><p>作用：</p><p>​1. 修饰属性：私有化属性，不能让外界使用</p><pre><code> 2. 修饰方法：私有化方法，不能让外界使用</code></pre><p>应用场景：不让让外界访问的属性和方法就用private修饰</p></blockquote><h2 id="封装"><a href="#封装" class="headerlink" title="封装"></a>封装</h2><blockquote><p>步骤：</p><ol><li><p>私有化属性</p><ol start="2"><li>添加get（获取）&#x2F;set（设置）方法</li></ol></li></ol><p>好处：外界不可以直接操作属性，必须通过get、set方法操作，可以在get、set方法中做额外的功能</p></blockquote><h2 id="this-本对象"><a href="#this-本对象" class="headerlink" title="this - 本对象"></a>this - 本对象</h2><blockquote><p>含义：代表本对象，this出现方法里，表示调用该方法的对象</p><p>作用：</p><ol><li><p>this.属性：调用本对象的成员变量</p><ol start="2"><li>this.方法：调用本对象的成员方法</li><li>this()：调用本对象的构造方法（在一个构造方法中的第一句调用另外一个构造方法）</li></ol></li></ol></blockquote><h2 id="分包"><a href="#分包" class="headerlink" title="分包"></a>分包</h2><blockquote><p>基本作用：防止了类的重名问题</p><p>项目作用：项目中有众多的类，把相同功能的类放在同一个包中，方便管理</p><p>工具类：com.dream.util&#x2F;tool</p><p>实体类：com.dream.vo&#x2F;bean&#x2F;entity&#x2F;bto&#x2F;pojo</p><p>数据库类：com.dream.dao&#x2F;mapper</p></blockquote><h2 id="static-静态的"><a href="#static-静态的" class="headerlink" title="static - 静态的"></a>static - 静态的</h2><blockquote><p>作用：</p><ol><li>修饰属性</li></ol><p> ​类加载到方法区时，JVM会扫描该类的所有属性<br> ​并把静态属性加载到静态区中，静态属性属于类属性，<br> ​该类所有的对象都共享该属性<br> ​静态属性直到项目结束时才会被回收</p><p> ​注意：静态属性使用类名调用</p><ol start="2"><li><p>修饰方法</p><p>属于类方法，直接用类名调用</p><p>应用场景：工具类</p></li><li><p>静态代码块</p><p>静态代码块是类加载到方法区时才会被调用，该代码块只能初始化静态变量</p><p>代码块是创建对象时优先于构造方法调用，该代码块可以初始化成员变量和静态变量</p><p>构造方法是创建对象时调用，该方法可以初始化成员变量和静态变量</p></li></ol></blockquote><blockquote><p>成员变量 vs 静态变量</p><p>成员变量：属于对象的变量，每个对象独享一份</p><p>静态变量：属于类的变量，每个对象都共享一份</p></blockquote><h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2><blockquote><p>使用场景：多个类似的类，有相同的属性和方法，就可以把相同属性和方法抽取到父类</p><p>好处：减少了代码的冗余</p></blockquote><blockquote><p>深入继承：</p><p>创建子类对象，会不会调用父类构造方法？<br>        会<br> 创建子类对象，会不会创建父类对象？<br>        不会<br>创建子类对象，为什么会调用父类构造方法？<br>        目的是将父类的属性存放在子类对象中</p><p>创建子类对象，先调用父类构造方法还是子类构造方法？<br>        先调用子类构造方法</p><p>创建子类对象，先完成父类构造方法还是子类构造方法？<br>        先完成父类构造方法</p><p>子类可以继承父类私有化的属性和方法吗？</p><p>​可以，但是只能间接调用</p></blockquote><h2 id="super-父类"><a href="#super-父类" class="headerlink" title="super - 父类"></a>super - 父类</h2><blockquote><p>含义：代表父类</p><p>作用 在子类中：</p><ol><li><p>super.属性：调用父类非私有化的成员变量</p><pre><code>2. super.方法：调用父类非私有化的成员方法3. super()：调用父类非私有化的构造方法</code></pre></li></ol></blockquote><h2 id="重写"><a href="#重写" class="headerlink" title="重写"></a>重写</h2><blockquote><p>含义：重写也叫做复写，将父类中方法在子类中重新编写一遍</p><p>应用场景：父类方法不满足子类需求时，子类就可以重复父类的方法</p><p>条件：</p><ol><li>在子类中重写父类的方法</li><li>返回值、方法名和参数列表必须和父类重写的方法一致</li><li>访问修饰符不能比父类重写的方法更严格</li></ol></blockquote><h2 id="访问修饰符"><a href="#访问修饰符" class="headerlink" title="访问修饰符"></a>访问修饰符</h2><blockquote><p>含义：修饰类、方法、属性，定义使用的范围</p><p>学习：做实验</p><table><thead><tr><th>访问修饰符</th><th>本类</th><th>本包</th><th>其他包子类</th><th>其他包</th></tr></thead><tbody><tr><td>private</td><td>OK</td><td></td><td></td><td></td></tr><tr><td>默认的</td><td>OK</td><td>OK</td><td></td><td></td></tr><tr><td>protected</td><td>OK</td><td>OK</td><td>OK</td><td></td></tr><tr><td>public</td><td>Ok</td><td>OK</td><td>OK</td><td>Ok</td></tr></tbody></table></blockquote><h2 id="Object"><a href="#Object" class="headerlink" title="Object"></a>Object</h2><blockquote><p>含义：基类也叫做超类，Object是所有类的祖先类</p><p>注意：如果一个类没有明确继承的父类，默认继承Object</p><p>equals：比较两个对象内存地址是否相同</p><p>hashCode：获取对象的hash值</p><p>getClass：获取类的字节码文件对象</p><p>toString：获取对象的字符串表示</p></blockquote><blockquote><p>标杆作用：Object作为所有类的父类，定义了几个方法，方便子类去重写</p><p>equals的标杆作用：比较两个对象是否相同，不同的对象比较规则不一样，所以子类重写即可</p><p>toString的标杆作用：每个子类都有不同的属性，重写toString直接打印该对象中所有的属性，方便观察数据</p></blockquote><h2 id="final"><a href="#final" class="headerlink" title="final"></a>final</h2><blockquote><p>含义：最终</p><p>作用：</p><ol><li><p>修饰类：该类不能被继承</p></li><li><p>修饰方法：该方法不能被重写</p></li><li><p>修饰变量：变成常量，不能重新赋值</p><p>​常量的命名规则：全大写，单词之间用下划线隔开</p><p>​常量的生命周期：存在常量池中，直到项目结束才会被销毁</p></li></ol></blockquote><h2 id="抽象类及抽象方法"><a href="#抽象类及抽象方法" class="headerlink" title="抽象类及抽象方法"></a>抽象类及抽象方法</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//抽象类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> class 类名&#123;</span><br><span class="line">    <span class="comment">//抽象方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>抽象方法交给非抽象的子类去实现(重写)</p><p>应用场景：当一个方法必须在父类中出现，但是这个方法又不好实现，就把该方法变成抽象方法，交给非抽象的子类去实现</p></blockquote><blockquote><p>面试题：<br>1.抽象类不能有构造方法？</p><p>抽象类可以有构造方法</p><p>2.抽象类中只能有抽象方法？</p><p>抽象类中有非抽象方法（成员方法和静态方法）</p><p>3.抽象类中不可以没有抽象方法？</p><p>抽象类中可以没有抽象方法，但是毫无意义</p><p>4.如果父类是抽象类，则子类必须实现父类的抽象方法？</p><p>不一定，子类如果是抽象类，可以不实现父类的抽象方法</p><p>5.可以使用new关键字来创建抽象类对象？</p><p>不可以，创建的是匿名内部类的对象</p></blockquote><h2 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h2><blockquote><p>含义：特殊的抽象类</p><p>注意：</p><ol><li>JDK1.7时，接口中只能有静态常量和抽象方法</li><li>JDK1.8开始，接口中添加了静态方法和默认方法</li></ol><p>应用场景：接口更像一个规范</p></blockquote><blockquote><p>抽象类 vs 接口</p><p>抽象类：成员变量、静态变量、静态常量、成员方法、静态方法</p><p>接口：静态常量、静态方法(JDK1.8)、默认方法(JDK1.8)</p></blockquote><blockquote><p>面试题：</p><p>1.一个类可以实现多个接口？可以</p><p>2.一个接口可以实现多个接口？不可以，接口与接口的关系是多继承</p><p>3.接口里面的方法不一定都是抽象的？JDK1.7时接口里只能有抽象方法，JDK1.8时接口可以有抽象方法和默认方法</p><p>4.接口解决了类的单继承问题？是的，因为类与类是单继承，类与接口是多实现</p><p>5.一个类是否可以继承一个类并同时实现多个接口？可以</p><p>6.接口可以new对象？接口是特殊的抽象类，但是本质还是抽象类，抽象类是不可以new对象的，接口也是不能new对象，new出来的匿名类内部类的对象</p></blockquote><blockquote><p>类 - 接口的关系：<br>        类 - 类：单继承<br>        类 - 接口：多实现<br>        接口 - 接口：多继承</p></blockquote><h2 id="多态"><a href="#多态" class="headerlink" title="多态"></a>多态</h2><h2 id="对象转型"><a href="#对象转型" class="headerlink" title="对象转型"></a>对象转型</h2><h2 id="内部类"><a href="#内部类" class="headerlink" title="内部类"></a>内部类</h2>]]></content>
      
      
      <categories>
          
          <category> 教育 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 千锋教育 </tag>
            
            <tag> 培训 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>深入类加载机制</title>
      <link href="/posts/e7f8ce62/"/>
      <url>/posts/e7f8ce62/</url>
      
        <content type="html"><![CDATA[<h1 id="深入类加载机制"><a href="#深入类加载机制" class="headerlink" title="深入类加载机制"></a>深入类加载机制</h1><h3 id="初识类加载过程"><a href="#初识类加载过程" class="headerlink" title="初识类加载过程"></a>初识类加载过程</h3><p>使用某个类时，如果该类的class文件没有加载到内存时，则系统会通过以下三个步骤来对该类进行初始化</p><p>1.类的加载（Load）→2.类的连接（Link）→3.类的初始化（Initialize）</p><ul><li>类的加载（Load）：将类的class文件读入内存，并为之创建一个java.lang.Class的对象，此过程由类加载器（ClassLoader ）完成</li><li>类的连接（Link）：将类中的数据加载到各个内存区域中</li><li>类的初始化（Initialize）：JVM负责对类进行初始化</li></ul><h3 id="深入类加载过程"><a href="#深入类加载过程" class="headerlink" title="深入类加载过程"></a>深入类加载过程</h3><p>类的完整生命周期 ：加载、连接（验证、准备、解析）、初始化、使用、卸载</p><ol><li><p>加载</p><ol><li><p>通过一个类的全限定名来获取其定义的二进制字节流 </p></li><li><p>将这个字节流所代表的的静态存储结构转化为方法区的运行时数据结构 </p></li><li><p>在堆中生成一个代表这个类的Class对象，作为方法区中这些数据的访问入口</p></li><li><p>注意： 相对于类加载过程的其他阶段而言，加载阶段是可控性最强的阶段，因为程序员可以使用系统的类加载器加载，还可以使用自己的类加载器加载，在这里我们只需要知道类加载器的作用就是上面虚拟机需要完成的三件事</p></li></ol></li><li><p>连接</p><ol><li><p>验证 </p><ol><li><p>文件格式的验证：验证.class文件字节流是否符合class文件的格式的规范，并且能够被当前版本的虚拟机处理</p></li><li><p>元数据验证：主要是对字节码描述的信息进行语义分析，以保证其描述的信息符合java语言规范的要求，比如说验证这个类是不是有父类，类中的字段方法是不是和父类冲突等等。 </p></li><li><p>字节码验证：这是整个验证过程最复杂的阶段，主要是通过数据流和控制流分析，确定程序语义是合法的、符合逻辑的。在元数据验证阶段对数据类型做出验证后，这个阶段主要对类的方法做出分析，保证类的方法在运行时不会做出威胁虚拟机安全的事。 </p></li><li><p>符号引用验证：它是验证的最后一个阶段，发生在虚拟机将符号引用转化为直接引用的时候。主要是对类自身以外 （常量池中的各种符号引用） 的信息进行校验。目的是确保解析动作能够完成。 </p></li><li><p>注意： 对整个类加载机制而言，验证阶段是一个很重要但是非必需的阶段，如果我们的代码能够确保没有问题，那么我们就没有必要去验证，毕竟验证需要花费一定的的时间。当然我们可以使用</p><p>-Xverfty:none来关闭大部分的验证。</p></li></ol></li><li><p>准备 - 重要</p><p>准备阶段主要为类变量（static）分配内存并设置初始值。这些内存都在方法区分配。在这个阶段我们只需要注意两点就好了，类变量和初始值两个关键词： </p><ol><li><p>类变量（static）：会分配内存，但不会对应的分配值，其次实例变量不会分配空间，因为实例变量主要随着对象的实例化一块分配到java堆内存中</p></li><li><p>初始值：这里的初始值指的是数据类型默认值，而不是代码中被显示赋予的值</p></li></ol><blockquote><p>比如1：public static int value &#x3D; 1; </p><p>在这里准备阶段过后的value值为0，而不是1赋值为1的动作在初始化阶段</p><p>比如2：public static final int value &#x3D; 1; </p><p>同时被final和static修饰准备阶段之后就是1了，因为static final在编译器就将结果放入调用它的类的常量池中 </p></blockquote></li><li><p>解析</p><p>解析阶段主要是虚拟机将常量池中的符号引用转化为直接引用的过程 </p><ol><li>符号引用：以一组符号来描述所引用的目标，可以是任何形式的字面量，只要是能无歧义的定位到目标就好，就好比在班级中，老师可以用张三来代表你，也可以用你的学号来代表你，但无论任何方式这些都只是一个代号（符号），这个代号指向你（符号引用） </li><li>直接引用：直接引用是可以指向目标的指针、相对偏移量或者是一个能直接或间接定位到目标的句柄。和虚拟机实现的内存有关，不同的虚拟机直接引用一般不同 </li><li>补充： 解析动作主要针对类或接口、字段、类方法、接口方法、方法类型、方法句柄和调用点限定符7类符号引用进行</li></ol></li><li><p>初始化</p><p>这是类加载机制的最后一步，在这个阶段，java程序代码才开始真正执行。在准备阶段已经为类变量赋过一次值。在初始化阶端，程序员可以根据自己的需求来赋值了。一句话描述这个阶段就是执行类构造器clinit()方法的过程。</p><p>在初始化阶段，主要为类的静态（stitic）变量赋予正确的初始值，JVM负责对类进行初始化，主要对类变量（stitic）进行初始化。在Java中对类变量进行初始值设定有两种方式：</p><ol><li>声明类变量是指定初始值</li><li>使用静态代码块为类变量指定初始值</li></ol><blockquote><p>补充：clinit() 方法具有以下特点：</p><ol><li><p>由编译器自动收集类中所有类变量（static）的赋值动作和静态语句块（static{} 块）中的语句合并产生的，编译器收集的顺序由语句在源文件中出现的顺序决定。特别注意的是，静态语句块只能访问到定义在它之前的类变量，定义在它之后的类变量只能赋值，不能访问。例如以下代码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line">i = <span class="number">0</span>;                <span class="comment">// 给变量赋值可以正常编译通过</span></span><br><span class="line">System.out.print(i);  <span class="comment">// 这句编译器会报错，提示“非法向前引用”</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">static</span> <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>与类的构造函数（或者说实例构造器 init()）不同，不需要显式的调用父类的构造器。虚拟机会自动保证在子类的 clinit() 方法运行之前，父类的 clinit() 方法已经执行结束。因此虚拟机中第一个执行 clinit() 方法的类肯定为 java.lang.Object。由于父类的 clinit() 方法先执行，也就意味着父类中定义的静态语句块要优于子类的变量赋值操作。例如以下代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">     System.out.println(Son.B);<span class="comment">//输出结果是父类中的静态变量A的值，也就是2</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Father</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">A</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">        A = <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">son</span> <span class="keyword">extends</span> <span class="title class_">Father</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">B</span> <span class="operator">=</span> A;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>clinit() 方法对于类或接口不是必须的，如果一个类中不包含静态语句块，也没有对类变量的赋值操作，编译器可以不为该类生成 clinit() 方法。 </p></li><li><p>接口中不可以使用静态语句块，但仍然有类变量初始化的赋值操作，因此接口与类一样都会生成 clinit() 方法。但接口与类不同的是，执行接口的 <clinit>() 方法不需要先执行父接口的 clinit() 方法。只有当父接口中定义的变量使用时，父接口才会初始化。另外，接口的实现类在初始化时也一样不会执行接口的 clinit() 方法。</p></li><li><p>虚拟机会保证一个类的 clinit() 方法在多线程环境下被正确的加锁和同步，如果多个线程同时初始化一个类，只会有一个线程执行这个类的 clinit() 方法，其它线程都会阻塞等待，直到活动线程执行 clinit() 方法完毕。如果在一个类的 clinit() 方法中有耗时的操作，就可能造成多个线程阻塞，在实际过程中此种阻塞很隐蔽。</p></li><li><p>JVM初始化步骤：</p><pre><code>1. 假如这个类还没有被加载和连接，则程序先加载并连接该类2. 假如该类的直接父类还没有被初始化，则先初始化其直接父类3. 假如类中有初始化语句，则系统依次执行这些初始化语句</code></pre></li><li><p>类初始化时机：</p><p>只有当对类的主动使用的时候才会导致类的初始化，类的主动使用包括以下六种：</p><ol><li><p>创建类的实例，也就是new的方式</p></li><li><p>访问某个类或接口的静态变量，或者对该静态变量赋值</p></li><li><p>调用类的静态方法</p></li><li><p>反射</p></li><li><p>初始化某个类的子类，则其父类也会被初始化</p></li><li><p>Java虚拟机启动时被标明为启动类的类，直接使用 java.exe命令来运行某个主类</p><p>比如：测试类Test</p></li></ol></li></ol></blockquote></li></ol></li><li><p>使用： 当 JVM 完成初始化阶段之后，JVM 便开始从入口方法开始执行用户的程序代码</p></li><li><p>卸载： 当用户程序代码执行完毕后，JVM 便开始销毁创建的 Class 对象，最后负责运行的 JVM 也退出内存</p></li></ol><h3 id="利用类加载过程理解面试题"><a href="#利用类加载过程理解面试题" class="headerlink" title="利用类加载过程理解面试题"></a>利用类加载过程理解面试题</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">A</span> <span class="variable">a</span> <span class="operator">=</span> A.getInstance();</span><br><span class="line">        System.out.println(<span class="string">&quot;A value1:&quot;</span> + a.value1);<span class="comment">//1</span></span><br><span class="line">        System.out.println(<span class="string">&quot;A value2:&quot;</span> + a.value2);<span class="comment">//0</span></span><br><span class="line"></span><br><span class="line">        <span class="type">B</span> <span class="variable">b</span> <span class="operator">=</span> B.getInstance();</span><br><span class="line">        System.out.println(<span class="string">&quot;B value1:&quot;</span> + b.value1);<span class="comment">//1</span></span><br><span class="line">        System.out.println(<span class="string">&quot;B value2:&quot;</span> + b.value2);<span class="comment">//1</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">A</span> <span class="variable">a</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">A</span>();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> value1;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">value2</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">A</span><span class="params">()</span>&#123;</span><br><span class="line">        value1++;</span><br><span class="line">        value2++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> A <span class="title function_">getInstance</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> value1;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">value2</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">B</span> <span class="variable">b</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">B</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">B</span><span class="params">()</span>&#123;</span><br><span class="line">        value1++;</span><br><span class="line">        value2++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> B <span class="title function_">getInstance</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="类加载器"><a href="#类加载器" class="headerlink" title="类加载器"></a>类加载器</h3><p>类加载器实现的功能是即为加载阶段获取二进制字节流的时候,在 Java 虚拟机外部实现，以便让应用程序自己决定如何去获取所需要的类。</p><h3 id="类加载器分类"><a href="#类加载器分类" class="headerlink" title="类加载器分类"></a>类加载器分类</h3><p>从 Java 虚拟机的角度来讲，只存在以下两种不同的类加载器：</p><ol><li>启动类加载器（Bootstrap ClassLoader）：这个类加载器用 C++ 实现，是虚拟机自身的一部分</li><li>所有其他类的加载器，这些类由 Java 实现，独立于虚拟机外部，并且全都继承自抽象类 java.lang.ClassLoader</li></ol><p>从 Java 开发人员的角度看，类加载器可以划分得更细致一些：</p><ol><li>启动类加载器（Bootstrap ClassLoader）： 最顶层的类加载器，负责加载 JAVA_HOME\lib 目录中的，或通过-Xbootclasspath参数指定路径中的，且被虚拟机认可（按文件名识别，如rt.jar）的类。</li><li>扩展类加载器（Extension ClassLoader）这个类加载器是由 ExtClassLoader（sun.misc.Launcher$ExtClassLoader）实现的。 负责加载 JAVA_HOME\lib\ext 目录中的，或通过java.ext.dirs系统变量指定路径中的类库</li><li>应用程序类加载器（Application ClassLoader）这个类加载器是由 AppClassLoader（sun.misc.Launcher$AppClassLoader）实现的。 也叫做系统类加载器，可以通过getSystemClassLoader()获取，负责加载用户路径（classpath）上的类库。如果没有自定义类加载器，一般这个就是默认的类加载器。</li></ol><h3 id="类加载器之间的层次关系"><a href="#类加载器之间的层次关系" class="headerlink" title="类加载器之间的层次关系"></a>类加载器之间的层次关系</h3><p> 启动类加载器&gt;扩展类加载器&gt;应用程序类加载器&gt;自定义类加载器</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClassLoaderTest</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">Thread</span> <span class="variable">thread</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>();</span><br><span class="line"></span><br><span class="line"><span class="type">ClassLoader</span> <span class="variable">appClassLoader</span> <span class="operator">=</span> thread.getContextClassLoader();</span><br><span class="line"><span class="type">ClassLoader</span> <span class="variable">extClassLoader</span> <span class="operator">=</span> appClassLoader.getParent();</span><br><span class="line"><span class="type">ClassLoader</span> <span class="variable">booClassLoader</span> <span class="operator">=</span> extClassLoader.getParent();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//sun.misc.Launcher$AppClassLoader@73d16e93</span></span><br><span class="line">System.out.println(<span class="string">&quot;应用程序类加载器：&quot;</span> + appClassLoader);</span><br><span class="line">        <span class="comment">//sun.misc.Launcher$ExtClassLoader@15db9742</span></span><br><span class="line">System.out.println(<span class="string">&quot;扩展类加载：&quot;</span> + extClassLoader);</span><br><span class="line">        <span class="comment">//null</span></span><br><span class="line">System.out.println(<span class="string">&quot;启动类加载器：&quot;</span> + booClassLoader);</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">没有获取到ExtClassLoader的父Loader，原因是Bootstrap Loader（引导类加载器）是用C语   言实现的，找不到一个确定的返回父Loader的方式，于是就返回null。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="双亲委派模型-概念"><a href="#双亲委派模型-概念" class="headerlink" title="双亲委派模型 - 概念"></a>双亲委派模型 - 概念</h3><p>类加载器之间的这种层次关系叫做双亲委派模型。<br>双亲委派模型要求除了顶层的启动类加载器（Bootstrap ClassLoader）外，其余的类加载器都应当有自己的父类加载器。这里的类加载器之间的父子关系一般不是以继承关系实现的，而是用组合实现的。 </p><h3 id="双亲委派模型-工作过程"><a href="#双亲委派模型-工作过程" class="headerlink" title="双亲委派模型 - 工作过程"></a>双亲委派模型 - 工作过程</h3><p>一个类加载器接受到类加载请求，他自己不会去加载这个请求，而是将这个类加载请求委派给父类加载器，这样一层一层传送，直到到达启动类加载器（Bootstrap ClassLoader）。<br>只有当父类加载器无法加载这个请求时，子加载器才会尝试自己去加载。 </p><h3 id="双亲委派模型-好处"><a href="#双亲委派模型-好处" class="headerlink" title="双亲委派模型 - 好处"></a>双亲委派模型 - 好处</h3><p>使得 Java 类随着它的类加载器一起具有一种带有优先级的层次关系，从而使得基础类得到统一。</p><p> 双亲委派模型很好的解决了各个类加载器加载基础类的统一性问题。即越基础的类由越上层的加载器进行加载</p><blockquote><p>比如： java.lang.Object 存放在 rt.jar 中，如果编写另外一个 java.lang.Object 的类并放到 ClassPath 中，程序可以编译通过。因为双亲委派模型的存在，所以在 rt.jar 中的 Object 比在 ClassPath 中的 Object 优先级更高，因为 rt.jar 中的 Object 使用的是启动类加载器，而 ClassPath 中的 Object 使用的是应用程序类加载器。正因为 rt.jar 中的 Object 优先级更高，因为程序中所有的 Object 都是这个 Object。</p></blockquote><h3 id="双亲委派原则"><a href="#双亲委派原则" class="headerlink" title="双亲委派原则"></a>双亲委派原则</h3><ol><li>可以避免重复加载，父类已经加载了，子类就不需要再次加载</li><li>更加安全，很好的解决了各个类加载器的基础类的统一问题，如果不使用该种方式，那么用户可以随意定义类加载器来加载核心api，会带来相关隐患。</li></ol><h3 id="双亲委派模型的代码实现"><a href="#双亲委派模型的代码实现" class="headerlink" title="双亲委派模型的代码实现"></a>双亲委派模型的代码实现</h3><p>双亲委派模型的代码实现集中在java.lang.ClassLoader的loadClass()方法当中</p><pre><code>1. 检查类是否被加载，没有则调用父类加载器的loadClass()方法；2. 若父类加载器为空，则默认使用启动类加载器作为父加载器；3. 若父类加载失败，抛出ClassNotFoundException 异常后，再调用自己的findClass() 方法。 </code></pre><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//loadClass()源代码</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">synchronized</span> Class&lt;?&gt; loadClass(String name, <span class="type">boolean</span> resolve) <span class="keyword">throws</span> ClassNotFoundException &#123;</span><br><span class="line">    <span class="comment">//首先检查类是否被加载</span></span><br><span class="line">    <span class="type">Class</span> <span class="variable">c</span> <span class="operator">=</span> findLoadedClass(name);</span><br><span class="line">    <span class="keyword">if</span> (c == <span class="literal">null</span>) &#123;<span class="comment">//如果没有被加载</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (parent != <span class="literal">null</span>) &#123;<span class="comment">//存在父类</span></span><br><span class="line">             <span class="comment">//则调用父类加载器的loadClass()方法；</span></span><br><span class="line">                c = parent.loadClass(name, <span class="literal">false</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;<span class="comment">//不存在你父类</span></span><br><span class="line">            <span class="comment">//则默认使用启动类加载器作为父加载器；</span></span><br><span class="line">                c = findBootstrapClass0(name);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">           <span class="comment">//若父类加载失败，抛出ClassNotFoundException异常后</span></span><br><span class="line">           <span class="comment">//调用自身的加载功能，一般自定义类重写此方法</span></span><br><span class="line">           c = findClass(name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (resolve) &#123;<span class="comment">//是否初始化</span></span><br><span class="line">        <span class="comment">//再调用自己的findClass() 方法。</span></span><br><span class="line">        resolveClass(c);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> c;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="自定义类加载器"><a href="#自定义类加载器" class="headerlink" title="自定义类加载器"></a>自定义类加载器</h3><p>首先，我们定义一个待加载的普通Java类:Test.java。放在com.dream.test包下:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.dream.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Person</span><span class="params">()</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(String name)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;Person [name=&quot;</span> + name + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>注意：</p><p>如果你是直接在当前项目里面创建，待Test.java编译后，请把Test.class文件拷贝走，再将Test.java&#96;删除。因为如果Test.class存放在当前项目中，根据双亲委派模型可知，会通过sun.misc.Launcher$AppClassLoader类加载器加载。为了让我们自定义的类加载器加载，我们把Test.class文件放入到其他目录。</p><p> 在本例中，我们Person.class文件存放的目录如下： C:\code\com\dream\test\Person.class</p></blockquote><p> 接下来就是自定义我们的类加载器 ：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.dream.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.BufferedInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.ByteArrayOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClassLoadTest</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建自定义类加载器对象</span></span><br><span class="line"><span class="type">MyClassLoader</span> <span class="variable">classLoader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyClassLoader</span>(<span class="string">&quot;C:/code&quot;</span>);</span><br><span class="line"><span class="comment">//通过类的全路径获取该类的字节码文件对象</span></span><br><span class="line">Class&lt;?&gt; c = classLoader.loadClass(<span class="string">&quot;com.dream.test.Person&quot;</span>);</span><br><span class="line"><span class="comment">//创建对象</span></span><br><span class="line"><span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> c.newInstance();</span><br><span class="line"></span><br><span class="line">System.out.println(obj);</span><br><span class="line">System.out.println(obj.getClass().getClassLoader());<span class="comment">//com.dream.test.MyClassLoader@6d06d69c</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClassLoader</span> <span class="keyword">extends</span> <span class="title class_">ClassLoader</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> String classPath;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">MyClassLoader</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">MyClassLoader</span><span class="params">(String classPath)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.classPath = classPath;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//将&quot;com.dream.test.Person&quot;转换为 Class对象 </span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> Class&lt;?&gt; findClass(String name) <span class="keyword">throws</span> ClassNotFoundException &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">replaceAll</span> <span class="operator">=</span> name.replaceAll(<span class="string">&quot;\\.&quot;</span>, <span class="string">&quot;/&quot;</span>);<span class="comment">//com\dream\test\Person</span></span><br><span class="line"><span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(classPath,replaceAll + <span class="string">&quot;.class&quot;</span>);<span class="comment">//C:\code\com\dream\test\Person.class</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="comment">//将文件转换为字节数组</span></span><br><span class="line"><span class="type">byte</span>[] bytes = getClassBytes(file);</span><br><span class="line"></span><br><span class="line"><span class="comment">//将字节数组转换为Class对象</span></span><br><span class="line">Class&lt;?&gt; c = <span class="built_in">this</span>.defineClass(name,bytes, <span class="number">0</span>, bytes.length);</span><br><span class="line"><span class="keyword">return</span> c;</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="built_in">super</span>.findClass(name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//读取xxx.class文件，把该文件的内容以字节数组返回</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">byte</span>[] getClassBytes(File file) <span class="keyword">throws</span> Exception&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">BufferedInputStream</span> <span class="variable">bis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(file));</span><br><span class="line"><span class="type">ByteArrayOutputStream</span> <span class="variable">baos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ByteArrayOutputStream</span>();</span><br><span class="line"><span class="type">byte</span>[] buf = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span>];</span><br><span class="line"><span class="type">int</span> len;</span><br><span class="line"><span class="keyword">while</span>((len=bis.read(buf)) != -<span class="number">1</span>)&#123;</span><br><span class="line">baos.write(buf, <span class="number">0</span>, len);</span><br><span class="line">&#125;</span><br><span class="line">bis.close();</span><br><span class="line"><span class="keyword">return</span> baos.toByteArray();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="自定义类加载器的应用场景"><a href="#自定义类加载器的应用场景" class="headerlink" title="自定义类加载器的应用场景"></a>自定义类加载器的应用场景</h3><p>引入：Tomcat容器，每个WebApp有自己的ClassLoader,加载每个WebApp的ClassPath路径上的类，一旦遇到Tomcat自带的Jar包就委托给CommonClassLoader加载</p><ol><li>加密：Java代码可以轻易的被反编译，如果你需要把自己的代码进行加密以防止反编译，可以先将编译后的代码用某种加密算法加密，类加密后就不能再用Java的ClassLoader去加载类了，这时就需要自定义ClassLoader在加载类的时候先解密类，然后再加载。</li><li>从非标准的来源加载代码：如果你的字节码是放在数据库、甚至是在云端，就可以自定义类加载器，从指定的来源加载类。</li></ol><blockquote><p>以上两种情况在实际中的综合运用：比如你的应用需要通过网络来传输 Java 类的字节码，为了安全性，这些字节码经过了加密处理。这个时候你就需要自定义类加载器来从某个网络地址上读取加密后的字节代码，接着进行解密和验证，最后定义出在Java虚拟机中运行的类。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 教育 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 千锋教育 </tag>
            
            <tag> 培训 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>集合</title>
      <link href="/posts/d366874c/"/>
      <url>/posts/d366874c/</url>
      
        <content type="html"><![CDATA[<h1 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h1><h2 id="含义"><a href="#含义" class="headerlink" title="含义"></a>含义</h2><blockquote><ol><li>集合是Java API所提供的一系列类，可以用于动态存放多个对象 (集合只能存对象)</li><li>集合与数组的不同在于，集合是大小可变的序列，而且元素类型可以不受限定，只要是引用类型。(集合中不能放基本数据类型，但可以放基本数据类型的包装类)</li><li>集合类全部支持泛型，是一种数据安全的用法。</li></ol></blockquote><h2 id="集合与数组的不同"><a href="#集合与数组的不同" class="headerlink" title="集合与数组的不同"></a>集合与数组的不同</h2><blockquote><p>数组：一旦初始化后长度不可变，元素类型受限定（String类型的数组只能装String的数据），数组可以存储基本数据类型</p><p>集合：长度可变的序列，元素类型不受限定（一个集合可以存储多个数据类型的元素），集合只能存储引用数据类型</p></blockquote><h2 id="Collection家族"><a href="#Collection家族" class="headerlink" title="Collection家族"></a>Collection家族</h2><h3 id="List接口"><a href="#List接口" class="headerlink" title="List接口"></a>List接口</h3><blockquote><p>特点：有序且可重复（因为List接口中添加了许多针对下标操作的方法）</p><p>实现类：</p><ol><li>ArrayList</li><li>LinkedList</li><li>Vector</li><li>Stack</li></ol></blockquote><h3 id="Set接口"><a href="#Set接口" class="headerlink" title="Set接口"></a>Set接口</h3><blockquote><p>特点：无序且不可重复</p><p>实现类：</p><ol><li>HashSet</li><li>LinkedHashSet</li><li>TreeSet</li></ol></blockquote><h2 id="Map家族"><a href="#Map家族" class="headerlink" title="Map家族"></a>Map家族</h2><blockquote><p>实现类：</p><ol><li>HashMap</li><li>LinkedHashMap</li><li>Hashtable</li><li>ConcurrentHashMap</li><li>TreeMap</li><li>Properties</li></ol></blockquote><h2 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h2><blockquote><p>含义：数据安全的做法</p></blockquote><blockquote><p>泛型限定：</p><p>?表示什么类型都可以</p><p>? extends A 表示元素必须是A类或A的子类</p><p>? super A 表示元素必须是A类或A的父类</p></blockquote><h2 id="迭代器"><a href="#迭代器" class="headerlink" title="迭代器"></a>迭代器</h2><blockquote><p>含义：遍历集合中的数据</p><p>分类：Iterator 和 ListIterator</p></blockquote><blockquote><p>Iterator 和 ListIterator 区别</p><p>Iterator ：Collection接口下所有的实现类都可以获取的迭代器，可以在遍历时删除元素</p><p>ListIterator ：List接口下所有的实现类可以获取的迭代器，可以在遍历时删除、替换、添加元素，也可以指定下标开始遍历，还可以倒叙遍历</p></blockquote><h2 id="比较器接口"><a href="#比较器接口" class="headerlink" title="比较器接口"></a>比较器接口</h2><blockquote><p>作用：排序时使用</p><p>分类：</p><p>​内置比较器：Comparable - compareTo()</p><p>​外置比较器：Comparator - compare()</p><p>使用场景：</p><p>​内置比较器：对象要想存入TreeSet、TreeMap中，对象所属的类必须要实现内置比较器</p><p>​外置比较器：当内置比较的规则不满足现在的需求，但又不能改动内置比较器规则时</p><p>优先级别：外置比较器 &gt; 内置比较器</p><p>​</p></blockquote><h2 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h2><blockquote><ol><li>Collection 与 Map的区别</li></ol><p>Collection 存单个值，可以获取迭代器进行遍历</p><p>Map存两个值(Key-Value)，不可以获取迭代器，不能遍历（Map可以间接遍历）</p><ol start="2"><li>理解Set为什么是无序</li></ol><p>无序：存入顺序和取出顺序不一致，无序不等于随机</p><ol start="3"><li>ArrayList 与 LinkedList的区别</li></ol><p>使用上的区别：</p><p>​LinkedList添加了</p><p>​队列模式-先进先出（removeFirst（））</p><p>​栈模式-先进后出（removeLast（））</p><p>效率上的区别：</p><p>ArrayList底层数据结构是一维数组</p><p>LinkedList底层数据结构是双向链表</p><p>​添加 - 不扩容的情况：ArrayList快</p><p>​添加 - 扩容的情况：LinkedList快</p><p>​删除：LinkedList快</p><p>​查询：ArrayList快</p><p>​修改：ArrayList快</p><p>​注意：工作中常用ArrayList，因为很多需求都需要使用查询功能，ArrayList查询更快</p><ol start="4"><li>各种集合的应用场景</li></ol><p>ArrayList：存数据，线程不安全</p><p>LinkedList：队列模式、栈模式，线程不安全</p><p>Vector：弃用，线程安全</p><p>Stack：弃用，线程安全</p><p>HashSet：去重+无序，线程不安全</p><p>LinkedHashSet：去重+有序，线程不安全</p><p>TreeSet：排序，线程不安全</p><p>HashMap：存key+value，key去重，无序，线程不安全</p><p>LinkedHashMap：存key+value，key去重，有序，线程不安全</p><p>Hashtable：弃用，存key+value，key去重，无序，线程安全，方法加锁-效率低</p><p>ConcurrentHashMap：存key+value，key去重，无序，线程安全，局部加锁、CAS-效率高</p><p>TreeMap：存key+value，针对于Key排序</p><p>Properties：配置文件</p><ol start="5"><li>。。。</li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> 教育 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 千锋教育 </tag>
            
            <tag> 培训 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Iterator底层源码</title>
      <link href="/posts/7bbde491/"/>
      <url>/posts/7bbde491/</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">AbstractList</span>&lt;E&gt;&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//外部操作数</span></span><br><span class="line">    <span class="comment">//添加元素、删除元素时会++，因为添加、删除会导致集合中的元素个数发生改变</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">transient</span> <span class="type">int</span> <span class="variable">modCount</span> <span class="operator">=</span> <span class="number">0</span>;<span class="comment">//4</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayList</span>&lt;E&gt; <span class="keyword">extends</span> <span class="title class_">AbstractList</span>&lt;E&gt; <span class="keyword">implements</span> <span class="title class_">List</span>&lt;E&gt;&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//数据容器</span></span><br><span class="line">    <span class="keyword">transient</span> Object[] elementData;<span class="comment">//[&quot;小红&quot;,&quot;小绿&quot;,&quot;小黄&quot;,&quot;小黑&quot;]</span></span><br><span class="line">    <span class="comment">//元素个数(指针)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size;<span class="comment">//4</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">add</span><span class="params">(E e)</span> &#123;</span><br><span class="line">        ensureCapacityInternal(size + <span class="number">1</span>);  <span class="comment">// 更新modCount</span></span><br><span class="line">        elementData[size++] = e;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">ensureCapacityInternal</span><span class="params">(<span class="type">int</span> minCapacity)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123;</span><br><span class="line">            minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ensureExplicitCapacity(minCapacity);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">ensureExplicitCapacity</span><span class="params">(<span class="type">int</span> minCapacity)</span> &#123;</span><br><span class="line">        modCount++;<span class="comment">//更新操作数</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (minCapacity - elementData.length &gt; <span class="number">0</span>)</span><br><span class="line">            grow(minCapacity);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">remove</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        rangeCheck(index);</span><br><span class="line"></span><br><span class="line">        modCount++;<span class="comment">//更新操作数</span></span><br><span class="line">        <span class="type">E</span> <span class="variable">oldValue</span> <span class="operator">=</span> elementData(index);</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">numMoved</span> <span class="operator">=</span> size - index - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (numMoved &gt; <span class="number">0</span>)</span><br><span class="line">            System.arraycopy(elementData, index+<span class="number">1</span>, elementData, index,</span><br><span class="line">                             numMoved);</span><br><span class="line">        elementData[--size] = <span class="literal">null</span>; <span class="comment">// clear to let GC do its work</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> oldValue;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> Iterator&lt;E&gt; <span class="title function_">iterator</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Itr</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">Itr</span> <span class="keyword">implements</span> <span class="title class_">Iterator</span>&lt;E&gt; &#123;</span><br><span class="line">        <span class="comment">//游标</span></span><br><span class="line">        <span class="type">int</span> cursor;       <span class="comment">//4</span></span><br><span class="line">        <span class="comment">//记录遍历数据的当前下标</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">lastRet</span> <span class="operator">=</span> -<span class="number">1</span>; <span class="comment">//3</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//内部操作数（记录遍历之初的外部操作数）</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">expectedModCount</span> <span class="operator">=</span> modCount;<span class="comment">//4</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//size - 4</span></span><br><span class="line">        <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">hasNext</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> cursor != size;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">        <span class="keyword">public</span> E <span class="title function_">next</span><span class="params">()</span> &#123;</span><br><span class="line">            checkForComodification();<span class="comment">//判断内部操作数和外部操作数是否一致</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> cursor;<span class="comment">//i - 3</span></span><br><span class="line">            <span class="keyword">if</span> (i &gt;= size)</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NoSuchElementException</span>();</span><br><span class="line">            </span><br><span class="line">            <span class="comment">//获取外部类的对象中的elementData（数据容器）</span></span><br><span class="line">            <span class="comment">//[&quot;小红&quot;,&quot;小绿&quot;,&quot;小黄&quot;,&quot;小黑&quot;]</span></span><br><span class="line">            Object[] elementData = ArrayList.<span class="built_in">this</span>.elementData;</span><br><span class="line">            <span class="keyword">if</span> (i &gt;= elementData.length)</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ConcurrentModificationException</span>();</span><br><span class="line">            cursor = i + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">return</span> (E) elementData[lastRet = i];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (lastRet &lt; <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalStateException</span>();</span><br><span class="line">            checkForComodification();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                ArrayList.<span class="built_in">this</span>.remove(lastRet);</span><br><span class="line">                cursor = lastRet;</span><br><span class="line">                lastRet = -<span class="number">1</span>;</span><br><span class="line">                expectedModCount = modCount;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IndexOutOfBoundsException ex) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ConcurrentModificationException</span>();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">void</span> <span class="title function_">checkForComodification</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="comment">//判断外置操作数是否不等于内部操作数</span></span><br><span class="line">            <span class="keyword">if</span> (modCount != expectedModCount)</span><br><span class="line">                <span class="comment">//如果不等于，就说明在遍历时进行了数据的添加或删除，会导致遍历数据不准确的情况</span></span><br><span class="line">                <span class="comment">//所以就报错 -- 并发修改异常</span></span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ConcurrentModificationException</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test02</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">ArrayList&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">list.add(<span class="string">&quot;小红&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;小绿&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;小黄&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;小黑&quot;</span>);</span><br><span class="line"></span><br><span class="line">Iterator&lt;String&gt; it = list.iterator();</span><br><span class="line"><span class="keyword">while</span>(it.hasNext())&#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">next</span> <span class="operator">=</span> it.next();</span><br><span class="line">System.out.println(next);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>看底层源码的技巧：设立场景</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 教育 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 千锋教育 </tag>
            
            <tag> 培训 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ArrayList底层源码</title>
      <link href="/posts/ff5a7a5a/"/>
      <url>/posts/ff5a7a5a/</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">AbstractList</span>&lt;E&gt; <span class="keyword">extends</span> <span class="title class_">AbstractCollection</span>&lt;E&gt;<span class="keyword">implements</span> <span class="title class_">List</span>&lt;E&gt;&#123;</span><br><span class="line">    <span class="comment">//外部操作数：记录了数据量变化的次数</span></span><br><span class="line">    <span class="comment">//对于数据的更新（添加、删除、清空），modCount就会++</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">transient</span> <span class="type">int</span> <span class="variable">modCount</span> <span class="operator">=</span> <span class="number">0</span>;<span class="comment">// 2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayList</span>&lt;E&gt; <span class="keyword">extends</span> <span class="title class_">AbstractList</span>&lt;E&gt; <span class="keyword">implements</span> <span class="title class_">List</span>&lt;E&gt;&#123;</span><br><span class="line">    <span class="comment">//默认容量</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">DEFAULT_CAPACITY</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">    <span class="comment">//数据容器的最大容量</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">MAX_ARRAY_SIZE</span> <span class="operator">=</span> Integer.MAX_VALUE - <span class="number">8</span>;</span><br><span class="line">    <span class="comment">//空内容的数组（长度为0）</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object[] EMPTY_ELEMENTDATA = &#123;&#125;;</span><br><span class="line">   <span class="comment">//默认容量的空内容的数组（长度为0）</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = &#123;&#125;;</span><br><span class="line">    <span class="comment">//数据容器</span></span><br><span class="line">    <span class="keyword">transient</span> Object[] elementData;<span class="comment">//new Object[10]&#123;&quot;麻生希&quot;,&quot;椎名空&quot;,....&#125;</span></span><br><span class="line">    <span class="comment">//元素个数(指针)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> size;<span class="comment">// 2</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ArrayList</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.elementData = DEFAULTCAPACITY_EMPTY_ELEMENTDATA;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">ArrayList</span><span class="params">(<span class="type">int</span> initialCapacity)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (initialCapacity &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="built_in">this</span>.elementData = <span class="keyword">new</span> <span class="title class_">Object</span>[initialCapacity];<span class="comment">//new Object[10000];</span></span><br><span class="line">        </span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (initialCapacity == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="built_in">this</span>.elementData = EMPTY_ELEMENTDATA;<span class="comment">//&#123;&#125;</span></span><br><span class="line">            </span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;<span class="comment">//容量为负数，就报错</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;Illegal Capacity: &quot;</span>+</span><br><span class="line">                                               initialCapacity);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//e - 椎名空</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">add</span><span class="params">(E e)</span> &#123;</span><br><span class="line">        ensureCapacityInternal(size + <span class="number">1</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//添加元素</span></span><br><span class="line">        elementData[size++] = e;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//minCapacity - 11</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">ensureCapacityInternal</span><span class="params">(<span class="type">int</span> minCapacity)</span> &#123;</span><br><span class="line">        <span class="comment">//使用无参构造创建对象，第一次添加元素时进入</span></span><br><span class="line">        <span class="keyword">if</span> (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123;</span><br><span class="line">            <span class="comment">//minCapacity - 10</span></span><br><span class="line">            minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ensureExplicitCapacity(minCapacity);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//minCapacity - 11</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">ensureExplicitCapacity</span><span class="params">(<span class="type">int</span> minCapacity)</span> &#123;</span><br><span class="line">        modCount++;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (minCapacity - elementData.length &gt; <span class="number">0</span>)</span><br><span class="line">            grow(minCapacity);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//minCapacity - 11</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">grow</span><span class="params">(<span class="type">int</span> minCapacity)</span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// oldCapacity - 10</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">oldCapacity</span> <span class="operator">=</span> elementData.length;</span><br><span class="line">        <span class="comment">// newCapacity - 15</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">newCapacity</span> <span class="operator">=</span> oldCapacity + (oldCapacity &gt;&gt; <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (newCapacity - minCapacity &lt; <span class="number">0</span>)</span><br><span class="line">            </span><br><span class="line">            newCapacity = minCapacity;</span><br><span class="line">        <span class="keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="number">0</span>)</span><br><span class="line">            newCapacity = hugeCapacity(minCapacity);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 数组扩容</span></span><br><span class="line">        elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">hugeCapacity</span><span class="params">(<span class="type">int</span> minCapacity)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (minCapacity &lt; <span class="number">0</span>) <span class="comment">// overflow</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">OutOfMemoryError</span>();</span><br><span class="line">        <span class="keyword">return</span> (minCapacity &gt; MAX_ARRAY_SIZE) ?</span><br><span class="line">            Integer.MAX_VALUE :</span><br><span class="line">            MAX_ARRAY_SIZE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test01</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">ArrayList&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"><span class="comment">//ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;(10000);</span></span><br><span class="line">        </span><br><span class="line">list.add(<span class="string">&quot;麻生希&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;椎名空&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;水菜丽&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;朝桐光&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><ol><li><p>ArrayList的数据结构是什么？</p><p>Object类型的一维数组</p></li><li><p>ArrayList默认容量是多少？</p><p>10</p></li><li><p>ArrayList最大容量是多少？</p><p>Integer.MAX_VALUE-8</p></li><li><p>ArrayList最大容量为什么是Integer.MAX_VALUE-8？</p><p>-8是为了预留空间去存储数组的头部信息</p></li><li><p>如果大量数据需要存入集合，你会怎么办？</p><p>创建集合时，自定义集合长度，减少扩容次数，提高效率</p></li><li><p>ArrayList的扩容机制是什么？</p><p>是原来数组长度的1.5倍</p></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> 教育 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 千锋教育 </tag>
            
            <tag> 培训 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LinkList底层源码</title>
      <link href="/posts/b5d5578e/"/>
      <url>/posts/b5d5578e/</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">AbstractList</span>&lt;E&gt; extendsAbstractCollection&lt;E&gt;<span class="keyword">implements</span> <span class="title class_">List</span>&lt;E&gt; &#123;</span><br><span class="line"><span class="comment">//外部操作数</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">transient</span> <span class="type">int</span> <span class="variable">modCount</span> <span class="operator">=</span> <span class="number">0</span>;<span class="comment">//0</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">AbstractSequentialList</span>&lt;E&gt; <span class="keyword">extends</span> <span class="title class_">AbstractList</span>&lt;E&gt; &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LinkedList</span>&lt;E&gt; <span class="keyword">extends</span> <span class="title class_">AbstractSequentialList</span>&lt;E&gt; <span class="keyword">implements</span> <span class="title class_">List</span>&lt;E&gt;&#123;</span><br><span class="line">    <span class="comment">//元素个数</span></span><br><span class="line">    <span class="keyword">transient</span> <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> <span class="number">0</span>;<span class="comment">//0</span></span><br><span class="line">    <span class="comment">//第一个节点</span></span><br><span class="line">    <span class="keyword">transient</span> Node&lt;E&gt; first;<span class="comment">//null</span></span><br><span class="line">    <span class="comment">//最后一个节点</span></span><br><span class="line">    <span class="keyword">transient</span> Node&lt;E&gt; last;<span class="comment">//null</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LinkedList</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//e - 李享</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">add</span><span class="params">(E e)</span> &#123;</span><br><span class="line">        linkLast(e);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//e - 李享</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">linkLast</span><span class="params">(E e)</span> &#123;</span><br><span class="line">        <span class="keyword">final</span> Node&lt;E&gt; l = last;</span><br><span class="line">        <span class="keyword">final</span> Node&lt;E&gt; newNode = <span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(l, e, <span class="literal">null</span>);</span><br><span class="line">        last = newNode;</span><br><span class="line">        <span class="keyword">if</span> (l == <span class="literal">null</span>)</span><br><span class="line">            first = newNode;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            l.next = newNode;</span><br><span class="line">        size++;</span><br><span class="line">        modCount++;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//节点类</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span>&lt;E&gt; &#123;</span><br><span class="line">        E item; -------- 元素</span><br><span class="line">        Node&lt;E&gt; next; -- 下一个节点地址</span><br><span class="line">        Node&lt;E&gt; prev; -- 上一个节点地址</span><br><span class="line"></span><br><span class="line">        Node(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next) &#123;</span><br><span class="line">            <span class="built_in">this</span>.item = element;</span><br><span class="line">            <span class="built_in">this</span>.next = next;</span><br><span class="line">            <span class="built_in">this</span>.prev = prev;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test01</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">LinkedList&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">list.add(<span class="string">&quot;麻生希&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;椎名空&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;水菜丽&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><ol><li><p>LinkedList的数据结构是什么？</p><p>   双向链表</p></li><li><p>ArrayList和LinkedList的效率问题？</p><p>   ArrayList的数据结构：一维数组</p><p>LinkedList的数据结构：双向链表</p><p>   添加数据，不扩容的情况 – ArrayList快</p><p>添加数据，扩容的情况 – LinkedList快</p><p>   删除数据 – LinkedList快</p><p>修改数据 – ArrayList快</p><p>   查询数据 – ArrayList快</p><p>经验：在处理业务时，更多的是查询功能，ArrayList查询快，所以我们使用ArrayList的频率更高</p></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> 教育 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 千锋教育 </tag>
            
            <tag> 培训 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Stack底层源码</title>
      <link href="/posts/b9adc0ca/"/>
      <url>/posts/b9adc0ca/</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Vector</span>&lt;E&gt; <span class="keyword">extends</span> <span class="title class_">AbstractList</span>&lt;E&gt; <span class="keyword">implements</span> <span class="title class_">List</span>&lt;E&gt;&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">protected</span> Object[] elementData;<span class="comment">//new Object[10]&#123;&quot;杨勇1&quot;,&quot;杨勇2&quot;,&quot;杨勇3&quot;.....&#125;</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> elementCount;<span class="comment">//3</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">addElement</span><span class="params">(E obj)</span> &#123;</span><br><span class="line">        modCount++;</span><br><span class="line">        ensureCapacityHelper(elementCount + <span class="number">1</span>);</span><br><span class="line">        elementData[elementCount++] = obj;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> elementCount;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//index - 2</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> E <span class="title function_">elementAt</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (index &gt;= elementCount) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ArrayIndexOutOfBoundsException</span>(index + <span class="string">&quot; &gt;= &quot;</span> + elementCount);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> elementData(index);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//index - 2</span></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">    E <span class="title function_">elementData</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (E) elementData[index];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//index - 2</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title function_">removeElementAt</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">        modCount++;</span><br><span class="line">        <span class="keyword">if</span> (index &gt;= elementCount) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ArrayIndexOutOfBoundsException</span>(index + <span class="string">&quot; &gt;= &quot;</span> +</span><br><span class="line">                                                     elementCount);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (index &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">ArrayIndexOutOfBoundsException</span>(index);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> elementCount - index - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (j &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            System.arraycopy(elementData, index + <span class="number">1</span>, elementData, index, j);</span><br><span class="line">        &#125;</span><br><span class="line">        elementCount--;</span><br><span class="line">        elementData[elementCount] = <span class="literal">null</span>; <span class="comment">/* to let gc do its work */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Stack</span>&lt;E&gt; <span class="keyword">extends</span> <span class="title class_">Vector</span>&lt;E&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Stack</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//item - 杨勇3</span></span><br><span class="line">    <span class="keyword">public</span> E <span class="title function_">push</span><span class="params">(E item)</span> &#123;</span><br><span class="line">        addElement(item);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> item;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">empty</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size() == <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> E <span class="title function_">pop</span><span class="params">()</span> &#123;</span><br><span class="line">        E obj;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> size();<span class="comment">//len - 3</span></span><br><span class="line"></span><br><span class="line">        obj = peek();<span class="comment">//obj - &quot;杨勇3&quot;</span></span><br><span class="line">        removeElementAt(len - <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> obj;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> E <span class="title function_">peek</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> size();<span class="comment">//len - 3</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (len == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">EmptyStackException</span>();</span><br><span class="line">        <span class="keyword">return</span> elementAt(len - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test01</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">Stack&lt;String&gt; stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">stack.push(<span class="string">&quot;杨勇1&quot;</span>);</span><br><span class="line">stack.push(<span class="string">&quot;杨勇2&quot;</span>);</span><br><span class="line">stack.push(<span class="string">&quot;杨勇3&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(!stack.empty())&#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">pop</span> <span class="operator">=</span> stack.pop();</span><br><span class="line">System.out.println(pop);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 教育 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 千锋教育 </tag>
            
            <tag> 培训 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TreeMap底层源码</title>
      <link href="/posts/78cd243d/"/>
      <url>/posts/78cd243d/</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TreeMap</span>&lt;K,V&gt; <span class="keyword">extends</span> <span class="title class_">AbstractMap</span>&lt;K,V&gt; <span class="keyword">implements</span> <span class="title class_">NavigableMap</span>&lt;K,V&gt;&#123;</span><br><span class="line">    <span class="comment">//外置比较器</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Comparator&lt;? <span class="built_in">super</span> K&gt; comparator;</span><br><span class="line">    <span class="comment">//根节点</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> Entry&lt;K,V&gt; root;<span class="comment">//null</span></span><br><span class="line">    <span class="comment">//元素个数</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="comment">//外部操作数</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> <span class="type">int</span> <span class="variable">modCount</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TreeMap</span><span class="params">()</span> &#123;</span><br><span class="line">        comparator = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TreeMap</span><span class="params">(Comparator&lt;? <span class="built_in">super</span> K&gt; comparator)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.comparator = comparator;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//key - new Student(&quot;水菜丽&quot;, &#x27;女&#x27;, 27, &quot;2301&quot;, &quot;003&quot;)</span></span><br><span class="line">    <span class="comment">//value - &quot;吃马赛克</span></span><br><span class="line">    <span class="keyword">public</span> V <span class="title function_">put</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">        Entry&lt;K,V&gt; t = root;<span class="comment">//t - 0x001</span></span><br><span class="line">        <span class="comment">//第一次添加元素时进入的判断</span></span><br><span class="line">        <span class="keyword">if</span> (t == <span class="literal">null</span>) &#123;</span><br><span class="line">            compare(key, key); <span class="comment">// key自己判断自己的目的：检查key是否为null</span></span><br><span class="line"></span><br><span class="line">            root = <span class="keyword">new</span> <span class="title class_">Entry</span>&lt;&gt;(key, value, <span class="literal">null</span>);</span><br><span class="line">            size = <span class="number">1</span>;</span><br><span class="line">            modCount++;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//比较结果</span></span><br><span class="line">        <span class="type">int</span> cmp;</span><br><span class="line">        <span class="comment">//父节点</span></span><br><span class="line">        Entry&lt;K,V&gt; parent;</span><br><span class="line">       </span><br><span class="line">        Comparator&lt;? <span class="built_in">super</span> K&gt; cpr = comparator;</span><br><span class="line">        <span class="keyword">if</span> (cpr != <span class="literal">null</span>) &#123;<span class="comment">//执行的是外置比较器的逻辑</span></span><br><span class="line">            <span class="keyword">do</span> &#123;</span><br><span class="line">                parent = t;</span><br><span class="line">                cmp = cpr.compare(key, t.key);</span><br><span class="line">                <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>)</span><br><span class="line">                    t = t.left;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>)</span><br><span class="line">                    t = t.right;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    <span class="keyword">return</span> t.setValue(value);</span><br><span class="line">            &#125; <span class="keyword">while</span> (t != <span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;<span class="comment">//执行的是内置比较器的逻辑</span></span><br><span class="line">            <span class="keyword">if</span> (key == <span class="literal">null</span>)</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">NullPointerException</span>();</span><br><span class="line">            <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">                Comparable&lt;? <span class="built_in">super</span> K&gt; k = (Comparable&lt;? <span class="built_in">super</span> K&gt;) key;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">//t - null</span></span><br><span class="line">            <span class="keyword">do</span> &#123;</span><br><span class="line">                <span class="comment">//parent - 0x001</span></span><br><span class="line">                parent = t;</span><br><span class="line">                <span class="comment">//cmp - 2</span></span><br><span class="line">                cmp = k.compareTo(t.key);</span><br><span class="line">                <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>)</span><br><span class="line">                    t = t.left;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>)</span><br><span class="line">                    t = t.right;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    <span class="keyword">return</span> t.setValue(value);</span><br><span class="line">            &#125; <span class="keyword">while</span> (t != <span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//e - 0x003</span></span><br><span class="line">        Entry&lt;K,V&gt; e = <span class="keyword">new</span> <span class="title class_">Entry</span>&lt;&gt;(key, value, parent);</span><br><span class="line">        <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>)</span><br><span class="line">            parent.left = e;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            parent.right = e;</span><br><span class="line">        <span class="comment">//二叉树的制衡</span></span><br><span class="line">        fixAfterInsertion(e);</span><br><span class="line">        size++;</span><br><span class="line">        modCount++;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//k1 - new Student(&quot;麻生希&quot;, &#x27;女&#x27;, 25, &quot;2301&quot;, &quot;001&quot;)</span></span><br><span class="line">    <span class="comment">//k2 - new Student(&quot;麻生希&quot;, &#x27;女&#x27;, 25, &quot;2301&quot;, &quot;001&quot;)</span></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">    <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Object k1, Object k2)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> comparator==<span class="literal">null</span> ? ((Comparable&lt;? <span class="built_in">super</span> K&gt;)k1).compareTo((K)k2)</span><br><span class="line">            : comparator.compare((K)k1, (K)k2);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//节点类</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">Entry</span>&lt;K,V&gt; <span class="keyword">implements</span> <span class="title class_">Map</span>.Entry&lt;K,V&gt; &#123;</span><br><span class="line">        K key;----------------- 键</span><br><span class="line">        V value; ---------------- 值</span><br><span class="line">        Entry&lt;K,V&gt; left; -------- 左边节点</span><br><span class="line">        Entry&lt;K,V&gt; right; ------- 右边节点</span><br><span class="line">        Entry&lt;K,V&gt; parent; ------ 父节点</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">color</span> <span class="operator">=</span> BLACK; -- 红黑树</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * Make a new cell with given key, value, and parent, and with</span></span><br><span class="line"><span class="comment">         * &#123;<span class="doctag">@code</span> null&#125; child links, and BLACK color.</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        Entry(K key, V value, Entry&lt;K,V&gt; parent) &#123;</span><br><span class="line">            <span class="built_in">this</span>.key = key;</span><br><span class="line">            <span class="built_in">this</span>.value = value;</span><br><span class="line">            <span class="built_in">this</span>.parent = parent;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">场景一：</span><br><span class="line">    TreeMap&lt;Student,String&gt; map = <span class="keyword">new</span> <span class="title class_">TreeMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    map.put(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;麻生希&quot;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="number">25</span>, <span class="string">&quot;2301&quot;</span>, <span class="string">&quot;001&quot;</span>),<span class="string">&quot;写代码&quot;</span>);   </span><br><span class="line">    map.put(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;椎名空&quot;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="number">20</span>, <span class="string">&quot;2301&quot;</span>, <span class="string">&quot;002&quot;</span>),<span class="string">&quot;打游戏&quot;</span>);   </span><br><span class="line">    map.put(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;水菜丽&quot;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="number">27</span>, <span class="string">&quot;2301&quot;</span>, <span class="string">&quot;003&quot;</span>),<span class="string">&quot;吃马赛克&quot;</span>);   </span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">场景二：</span><br><span class="line">    TreeMap&lt;Student,String&gt; map = <span class="keyword">new</span> <span class="title class_">TreeMap</span>&lt;&gt;(<span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;Student&gt;() &#123;</span><br><span class="line"><span class="comment">//排序规则 - 按照名字排序，名字长度一致按照年龄排序</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Student o1, Student o2)</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(o1.equals(o2))&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">nameLen1</span> <span class="operator">=</span> o1.getName().length();</span><br><span class="line"><span class="type">int</span> <span class="variable">nameLen2</span> <span class="operator">=</span> o2.getName().length();</span><br><span class="line"><span class="keyword">if</span>(nameLen1 != nameLen2)&#123;</span><br><span class="line"><span class="keyword">return</span> nameLen1 - nameLen2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">age1</span> <span class="operator">=</span> o1.getAge();</span><br><span class="line"><span class="type">int</span> <span class="variable">age2</span> <span class="operator">=</span> o2.getAge();</span><br><span class="line"><span class="keyword">if</span>(age1 != age2)&#123;</span><br><span class="line"><span class="keyword">return</span> age1 - age2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">map.put(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;麻生希&quot;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="number">25</span>, <span class="string">&quot;2301&quot;</span>, <span class="string">&quot;001&quot;</span>),<span class="string">&quot;写代码&quot;</span>);   </span><br><span class="line">map.put(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;椎名空&quot;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="number">20</span>, <span class="string">&quot;2301&quot;</span>, <span class="string">&quot;002&quot;</span>),<span class="string">&quot;打游戏&quot;</span>);   </span><br><span class="line">map.put(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;水菜丽&quot;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="number">27</span>, <span class="string">&quot;2301&quot;</span>, <span class="string">&quot;003&quot;</span>),<span class="string">&quot;吃马赛克&quot;</span>); </span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>TreeMap底层数据结构是：红黑树</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 教育 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 千锋教育 </tag>
            
            <tag> 培训 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>TreeSet底层源码</title>
      <link href="/posts/8c9468a/"/>
      <url>/posts/8c9468a/</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TreeMap</span>&lt;K,V&gt; <span class="keyword">extends</span> <span class="title class_">AbstractMap</span>&lt;K,V&gt; <span class="keyword">implements</span> <span class="title class_">NavigableMap</span>&lt;K,V&gt;&#123;</span><br><span class="line">    <span class="comment">//外置比较器</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Comparator&lt;? <span class="built_in">super</span> K&gt; comparator;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TreeMap</span><span class="params">()</span> &#123;</span><br><span class="line">        comparator = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TreeMap</span><span class="params">(Comparator&lt;? <span class="built_in">super</span> K&gt; comparator)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.comparator = comparator;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//key - new Student(&quot;麻生希&quot;, &#x27;女&#x27;, 25, &quot;2301&quot;, &quot;001&quot;)</span></span><br><span class="line">    <span class="comment">//value - PRESENT(TreeSet中的占位对象)</span></span><br><span class="line">    <span class="keyword">public</span> V <span class="title function_">put</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">        <span class="comment">//获取外置比较器</span></span><br><span class="line">        Comparator&lt;? <span class="built_in">super</span> K&gt; cpr = comparator;</span><br><span class="line">        <span class="keyword">if</span>(cpr != <span class="literal">null</span>)&#123;<span class="comment">//说明有外置比较器</span></span><br><span class="line">            ...执行外置比较器中的排序规则...</span><br><span class="line">            cpr.compare();</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;<span class="comment">//说明没有外置比较器</span></span><br><span class="line">            ...执行内置比较器中的排序规则...</span><br><span class="line">            key.comparTo()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TreeSet</span>&lt;E&gt; <span class="keyword">extends</span> <span class="title class_">AbstractSet</span>&lt;E&gt; <span class="keyword">implements</span> <span class="title class_">NavigableSet</span>&lt;E&gt;&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> NavigableMap&lt;E,Object&gt; m;</span><br><span class="line">    <span class="comment">//占位对象</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Object</span> <span class="variable">PRESENT</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TreeSet</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>(<span class="keyword">new</span> <span class="title class_">TreeMap</span>&lt;E,Object&gt;());<span class="comment">//注意：使用TreeMap的无参构造创建TreeMap对象</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TreeSet</span><span class="params">(Comparator&lt;? <span class="built_in">super</span> E&gt; comparator)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>(<span class="keyword">new</span> <span class="title class_">TreeMap</span>&lt;&gt;(comparator));<span class="comment">//注意：使用TreeMap的有参构造创建TreeMap对象</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    TreeSet(NavigableMap&lt;E,Object&gt; m) &#123;</span><br><span class="line">        <span class="built_in">this</span>.m = m;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//e - new Student(&quot;麻生希&quot;, &#x27;女&#x27;, 25, &quot;2301&quot;, &quot;001&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">add</span><span class="params">(E e)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> m.put(e, PRESENT)==<span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">场景一：</span><br><span class="line">    TreeSet&lt;Student&gt; set = <span class="keyword">new</span> <span class="title class_">TreeSet</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    set.add(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;麻生希&quot;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="number">25</span>, <span class="string">&quot;2301&quot;</span>, <span class="string">&quot;001&quot;</span>));   </span><br><span class="line">    set.add(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;椎名空&quot;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="number">20</span>, <span class="string">&quot;2301&quot;</span>, <span class="string">&quot;002&quot;</span>));   </span><br><span class="line">    set.add(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;水菜丽&quot;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="number">27</span>, <span class="string">&quot;2301&quot;</span>, <span class="string">&quot;003&quot;</span>));  </span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">场景二：</span><br><span class="line">    TreeSet&lt;Student&gt; set = <span class="keyword">new</span> <span class="title class_">TreeSet</span>&lt;&gt;(<span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;Student&gt;() &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//排序规则 - 按照名字排序，名字长度一致按照年龄排序</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Student o1, Student o2)</span> &#123;</span><br><span class="line"><span class="keyword">if</span>(o1.equals(o2))&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">nameLen1</span> <span class="operator">=</span> o1.getName().length();</span><br><span class="line"><span class="type">int</span> <span class="variable">nameLen2</span> <span class="operator">=</span> o2.getName().length();</span><br><span class="line"><span class="keyword">if</span>(nameLen1 != nameLen2)&#123;</span><br><span class="line"><span class="keyword">return</span> nameLen1 - nameLen2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="variable">age1</span> <span class="operator">=</span> o1.getAge();</span><br><span class="line"><span class="type">int</span> <span class="variable">age2</span> <span class="operator">=</span> o2.getAge();</span><br><span class="line"><span class="keyword">if</span>(age1 != age2)&#123;</span><br><span class="line"><span class="keyword">return</span> age1 - age2;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">set.add(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;麻生希&quot;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="number">25</span>, <span class="string">&quot;2301&quot;</span>, <span class="string">&quot;001&quot;</span>));   </span><br><span class="line">set.add(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;椎名空&quot;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="number">20</span>, <span class="string">&quot;2301&quot;</span>, <span class="string">&quot;002&quot;</span>));   </span><br><span class="line">set.add(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;水菜丽&quot;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="number">27</span>, <span class="string">&quot;2301&quot;</span>, <span class="string">&quot;003&quot;</span>)); </span><br></pre></td></tr></table></figure><blockquote><ol><li><p>TreeSet底层是将元素存入TreeMapkey的位置</p></li><li><p>TreeMap中先判断是否有外置比较器，再判断内置比较器</p><p>（说明外置比较器的优先级别高于内置比较器）</p></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> 教育 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 千锋教育 </tag>
            
            <tag> 培训 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vector底层源码</title>
      <link href="/posts/6691a878/"/>
      <url>/posts/6691a878/</url>
      
        <content type="html"><![CDATA[<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">AbstractList</span>&lt;E&gt; <span class="keyword">extends</span> <span class="title class_">AbstractCollection</span>&lt;E&gt;implementsList&lt;E&gt; &#123;</span><br><span class="line"><span class="comment">//外部操作数</span></span><br><span class="line">    <span class="comment">//涉及到元素个数变化（添加、删除、清空）时，外部操作数就会++</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">transient</span> <span class="type">int</span> <span class="variable">modCount</span> <span class="operator">=</span> <span class="number">0</span>;<span class="comment">//3</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Vector</span>&lt;E&gt; <span class="keyword">extends</span> <span class="title class_">AbstractList</span>&lt;E&gt; <span class="keyword">implements</span> <span class="title class_">List</span>&lt;E&gt;&#123;</span><br><span class="line">    <span class="comment">//数据容器</span></span><br><span class="line">    <span class="keyword">protected</span> Object[] elementData;<span class="comment">//new Object[10]&#123;&quot;麻生希&quot;,&quot;椎名空&quot;,&quot;水菜丽&quot;.....&#125;</span></span><br><span class="line">    <span class="comment">//元素个数（类似于ArrayList中的size属性）</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> elementCount;<span class="comment">//3</span></span><br><span class="line">    <span class="comment">//容量增量</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">int</span> capacityIncrement;<span class="comment">//0</span></span><br><span class="line">    <span class="comment">//数组的最大容量</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">MAX_ARRAY_SIZE</span> <span class="operator">=</span> Integer.MAX_VALUE - <span class="number">8</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Vector</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>(<span class="number">10</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//initialCapacity - 10</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Vector</span><span class="params">(<span class="type">int</span> initialCapacity)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>(initialCapacity, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//initialCapacity - 10</span></span><br><span class="line">    <span class="comment">//capacityIncrement - 0</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Vector</span><span class="params">(<span class="type">int</span> initialCapacity, <span class="type">int</span> capacityIncrement)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">        <span class="keyword">if</span> (initialCapacity &lt; <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;Illegal Capacity: &quot;</span>+</span><br><span class="line">                                               initialCapacity);</span><br><span class="line">        <span class="built_in">this</span>.elementData = <span class="keyword">new</span> <span class="title class_">Object</span>[initialCapacity];</span><br><span class="line">        <span class="built_in">this</span>.capacityIncrement = capacityIncrement;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//e - 水菜丽</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="type">boolean</span> <span class="title function_">add</span><span class="params">(E e)</span> &#123;</span><br><span class="line">        modCount++;</span><br><span class="line">        ensureCapacityHelper(elementCount + <span class="number">1</span>);</span><br><span class="line">        elementData[elementCount++] = e;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//minCapacity - 11</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">ensureCapacityHelper</span><span class="params">(<span class="type">int</span> minCapacity)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (minCapacity - elementData.length &gt; <span class="number">0</span>)</span><br><span class="line">            grow(minCapacity);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//minCapacity - 11</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">grow</span><span class="params">(<span class="type">int</span> minCapacity)</span> &#123;</span><br><span class="line">        <span class="comment">// oldCapacity - 10</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">oldCapacity</span> <span class="operator">=</span> elementData.length;</span><br><span class="line">        <span class="comment">// newCapacity - 20</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">newCapacity</span> <span class="operator">=</span> oldCapacity + ((capacityIncrement &gt; <span class="number">0</span>) ?</span><br><span class="line">                                         capacityIncrement : oldCapacity);</span><br><span class="line">        <span class="keyword">if</span> (newCapacity - minCapacity &lt; <span class="number">0</span>)</span><br><span class="line">            newCapacity = minCapacity;</span><br><span class="line">        <span class="keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="number">0</span>)</span><br><span class="line">            newCapacity = hugeCapacity(minCapacity);</span><br><span class="line">        elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test01</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Vector&lt;String&gt; v = new Vector&lt;&gt;();</span></span><br><span class="line">        Vector&lt;String&gt; v = <span class="keyword">new</span> <span class="title class_">Vector</span>&lt;&gt;(<span class="number">100</span>,<span class="number">20</span>);</span><br><span class="line"></span><br><span class="line">v.add(<span class="string">&quot;麻生希&quot;</span>);</span><br><span class="line">v.add(<span class="string">&quot;椎名空&quot;</span>);</span><br><span class="line">v.add(<span class="string">&quot;水菜丽&quot;</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><ol><li><p>Vector的数据结构是什么？</p><p>Object类型的一维数组</p></li><li><p>Vector的默认容量是多少？</p><p>10</p></li><li><p>Vector的最大容量是多少？</p><p>Integer.MAX_VALUE-8</p></li><li><p>Vector的最大容量为什么是Integer.MAX_VALUE-8？</p><p>-8的位置是为了存放数组的头部信息</p></li><li><p>Vector的扩容机制？</p><p>容量增量小于等于0时，扩容机制是原来长度的2倍</p><p>容量增量大于0时，扩容机制是原来长度+容量增量</p></li><li><p>ArrayList和Vector的区别是什么？</p><p>扩容机制有区别（见第5题）</p><p>ArrayList是线程不安全的</p><p>Vector是线程安全的</p></li></ol></blockquote>]]></content>
      
      
      <categories>
          
          <category> 教育 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 千锋教育 </tag>
            
            <tag> 培训 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>枚举</title>
      <link href="/posts/633a03ca/"/>
      <url>/posts/633a03ca/</url>
      
        <content type="html"><![CDATA[<h1 id="枚举"><a href="#枚举" class="headerlink" title="枚举"></a>枚举</h1><h3 id="引入"><a href="#引入" class="headerlink" title="引入"></a>引入</h3><blockquote><p>编写季节类（Season），该类只有四个对象（spring，summer，autumn，winter）</p></blockquote><h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h3><blockquote><p>枚举（enum）全称为 enumeration， 是 JDK 1.5 中引入的新特性。 </p></blockquote><h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">Color</span>&#123;</span><br><span class="line">    <span class="comment">//默认添加 public static final</span></span><br><span class="line">    RED,GREEN,BLUE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="本质"><a href="#本质" class="headerlink" title="本质"></a>本质</h3><blockquote><p>尽管枚举看起来像是一种新的数据类型，实际上，枚举就是一种受限制的类，并且具有自己的方法。创建自己的enum类时，这个类继承自 java.lang.Enum。</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Enum</span>&lt;E <span class="keyword">extends</span> <span class="title class_">Enum</span>&lt;E&gt;&gt; <span class="keyword">implements</span> <span class="title class_">Comparable</span>&lt;E&gt;, Serializable&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><blockquote><ul><li>枚举就是一个受限制的类，默认继承Enum</li><li>枚举的第一行必须定义该枚举类型的对象</li><li>枚举类型对象默认添加： public static final 类型</li><li>枚举没有继承明确类（自定义枚举类默认继承Enum，Enum默认继承Object）</li><li>枚举类不能被继承</li><li>枚举里可以有构造方法、成员方法、静态方法、抽象方法</li><li>枚举可以实现接口</li><li>枚举里没有定义方法，可以在最后一个对象后面加逗号、分号或什么都不加</li></ul></blockquote><h3 id="优势"><a href="#优势" class="headerlink" title="优势"></a>优势</h3><blockquote><ul><li><p>增强代码可读性 </p></li><li><p>枚举型可直接与数据库交互</p></li><li><p>switch语句优势</p></li><li><p>编译优势</p><p>（枚举类编译时，没有把常量值编译到代码中，即使常量值发生改变，也不会影响引用常量的类 ） </p></li><li><p>将常量组织起来，统一管理</p></li><li><p>去除equals两者判断 由于常量值地址唯一，使用枚举可以直接通过“&#x3D;&#x3D;”进行两个值之间的对比，性能会有所提高</p></li></ul></blockquote><h3 id="枚举的方法"><a href="#枚举的方法" class="headerlink" title="枚举的方法"></a>枚举的方法</h3><table><thead><tr><th align="left">方法名</th><th>解释</th></tr></thead><tbody><tr><td align="left">Enum.valueOf(Class<E> enumType, String name)</td><td>根据字符串找到该枚举类中的对象</td></tr><tr><td align="left">public static void values()</td><td>获取该枚举类对象数组</td></tr><tr><td align="left">public static void valueOf(String args0)</td><td>根据字符串获取该枚举类中的对象</td></tr><tr><td align="left">public final String name()</td><td>获取该枚举对象名字</td></tr><tr><td align="left">public final Class<E> getDeclaringClass()</td><td>获取枚举对象的枚举类型相对应的Class对象</td></tr><tr><td align="left">public final int hashCode()</td><td>获取该枚举对象的hash值</td></tr><tr><td align="left">public final int compareTo(E o)</td><td>两个枚举对象进行比较</td></tr><tr><td align="left">public final boolean equals(Object other)</td><td>比较两个枚举对象是否相同</td></tr></tbody></table><h3 id="枚举案例-状态机"><a href="#枚举案例-状态机" class="headerlink" title="枚举案例 - 状态机"></a>枚举案例 - 状态机</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Signal</span>&#123;RED, YELLOW, GREEN&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EnumTest</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"><span class="type">Scanner</span> <span class="variable">scan</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;请输入信号灯：RED,YELLOW,GREEN&quot;</span>);</span><br><span class="line"><span class="type">Signal</span> <span class="variable">signal</span> <span class="operator">=</span> Signal.valueOf(scan.next());</span><br><span class="line"><span class="type">String</span> <span class="variable">instruct</span> <span class="operator">=</span> getTrafficInstruct(signal);</span><br><span class="line">System.out.println(instruct);</span><br><span class="line"></span><br><span class="line">scan.close();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getTrafficInstruct</span><span class="params">(Signal signal)</span> &#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">instruct</span> <span class="operator">=</span> <span class="string">&quot;信号灯故障&quot;</span>;</span><br><span class="line"><span class="keyword">switch</span> (signal) &#123;</span><br><span class="line"><span class="keyword">case</span> RED:</span><br><span class="line">instruct = <span class="string">&quot;红灯停&quot;</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> YELLOW:</span><br><span class="line">instruct = <span class="string">&quot;黄灯请注意&quot;</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> GREEN:</span><br><span class="line">instruct = <span class="string">&quot;绿灯行&quot;</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> instruct;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="枚举案例-错误码"><a href="#枚举案例-错误码" class="headerlink" title="枚举案例 - 错误码"></a>枚举案例 - 错误码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">ErrorCodeEn</span> &#123;</span><br><span class="line"></span><br><span class="line">Ok(<span class="number">1</span>,<span class="string">&quot;成功&quot;</span>),ERROR_A(<span class="number">2</span>,<span class="string">&quot;错误A&quot;</span>),ERROR_B(<span class="number">3</span>,<span class="string">&quot;错误B&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> code;<span class="comment">//状态码</span></span><br><span class="line"><span class="keyword">private</span> String description;<span class="comment">//状态信息</span></span><br><span class="line"></span><br><span class="line">ErrorCodeEn()&#123;&#125;</span><br><span class="line"></span><br><span class="line">ErrorCodeEn(<span class="type">int</span> code,String description)&#123;</span><br><span class="line"><span class="built_in">this</span>.code = code;</span><br><span class="line"><span class="built_in">this</span>.description = description;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCode</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> code;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getDescription</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> description;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="枚举案例-组织枚举"><a href="#枚举案例-组织枚举" class="headerlink" title="枚举案例 - 组织枚举"></a>枚举案例 - 组织枚举</h3><blockquote><p>含义：可以将类型相近的枚举通过接口或类组织起来（但是一般用接口方式进行组织）</p><p>原因是：</p><p>​Java接口在编译时会自动为enum类型加上public static修饰符；</p><p>​Java类在编译时会自动为 enum 类型加上static修饰符；</p><p>​就是说，在类中组织 enum，如果你不给它修饰为 public，那么只能在本包中进行访问。 </p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IErrorCode</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">LoginErrorCodeEn</span> <span class="keyword">implements</span> <span class="title class_">INumberEnum</span>&#123;</span><br><span class="line"></span><br><span class="line">OK(<span class="number">1</span>,<span class="string">&quot;登录成功&quot;</span>),ERROR_A(-<span class="number">1</span>,<span class="string">&quot;验证码错误&quot;</span>),ERROR_B(-<span class="number">2</span>,<span class="string">&quot;密码错误&quot;</span>),ERROR_C(-<span class="number">3</span>,<span class="string">&quot;用户已登录&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> code;</span><br><span class="line"><span class="keyword">private</span> String description;</span><br><span class="line"></span><br><span class="line">LoginErrorCodeEn(<span class="type">int</span> code,String description)&#123;</span><br><span class="line"><span class="built_in">this</span>.code = code;</span><br><span class="line"><span class="built_in">this</span>.description = description;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCode</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> code;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getDescription</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> description;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">RigsterErrorCodeEn</span> <span class="keyword">implements</span> <span class="title class_">INumberEnum</span>&#123;</span><br><span class="line"></span><br><span class="line">OK(<span class="number">1</span>,<span class="string">&quot;注册成功&quot;</span>),ERROR_A(-<span class="number">1</span>,<span class="string">&quot;账号已存在&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> code;</span><br><span class="line"><span class="keyword">private</span> String description;</span><br><span class="line"></span><br><span class="line">RigsterErrorCodeEn(<span class="type">int</span> code,String description)&#123;</span><br><span class="line"><span class="built_in">this</span>.code = code;</span><br><span class="line"><span class="built_in">this</span>.description = description;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCode</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> code;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getDescription</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> description;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">INumberEnum</span> &#123;</span><br><span class="line"><span class="type">int</span> <span class="title function_">getCode</span><span class="params">()</span>;</span><br><span class="line">String <span class="title function_">getDescription</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="枚举案例-策略枚举"><a href="#枚举案例-策略枚举" class="headerlink" title="枚举案例 - 策略枚举"></a>枚举案例 - 策略枚举</h3><blockquote><p>优点：这种枚举通过枚举嵌套枚举的方式，将枚举常量分类处理。</p><p>这种做法虽然没有switch语句简洁，但是更加安全、灵活。</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">Salary</span> &#123;</span><br><span class="line">JAVA(SalaryType.TEACHER),</span><br><span class="line">    HTML(SalaryType.TEACHER),</span><br><span class="line">    PYTHON(SalaryType.TEACHER),</span><br><span class="line">PRINCIPAL(SalaryType.ADMINISTRATION);<span class="comment">//校长</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> SalaryType salaryType;</span><br><span class="line"></span><br><span class="line">Salary(SalaryType salaryType)&#123;</span><br><span class="line"><span class="built_in">this</span>.salaryType = salaryType;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//baseSalary-底薪 classHour-课时 teachingHourSubsidy-课时费 achievements-绩效</span></span><br><span class="line"><span class="type">double</span> <span class="title function_">getSalary</span><span class="params">(<span class="type">double</span> baseSalary,<span class="type">int</span> classHour,<span class="type">double</span> teachingHourSubsidy,<span class="type">double</span> achievements)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> salaryType.getSalary(baseSalary, classHour, teachingHourSubsidy, achievements);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//策略枚举</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">enum</span> <span class="title class_">SalaryType</span> &#123;</span><br><span class="line"></span><br><span class="line">TEACHER &#123;<span class="comment">//老师</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="type">double</span> <span class="title function_">getSalary</span><span class="params">(<span class="type">double</span> baseSalary, <span class="type">int</span> classHour, <span class="type">double</span> teachingHourSubsidy,</span></span><br><span class="line"><span class="params"><span class="type">double</span> achievements)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> baseSalary + classHour*teachingHourSubsidy + achievements;</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">ADMINISTRATION &#123;<span class="comment">//行政人员</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="type">double</span> <span class="title function_">getSalary</span><span class="params">(<span class="type">double</span> baseSalary, <span class="type">int</span> classHour, <span class="type">double</span> teachingHourSubsidy,</span></span><br><span class="line"><span class="params"><span class="type">double</span> achievements)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> baseSalary + achievements;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="type">double</span> <span class="title function_">getSalary</span><span class="params">(<span class="type">double</span> baseSalary,<span class="type">int</span> classHour,<span class="type">double</span> teachingHourSubsidy,<span class="type">double</span> achievements)</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="枚举工具类-EnumSet-和-EnumMap"><a href="#枚举工具类-EnumSet-和-EnumMap" class="headerlink" title="枚举工具类 - EnumSet 和 EnumMap"></a>枚举工具类 - EnumSet 和 EnumMap</h3><blockquote><p>Java 中提供了两个方便操作enum的工具类——EnumSet 和 EnumMap。</p><p>EnumSet ：枚举类型的高性能 Set实现。它要求放入它的枚举常量必须属于同一枚举类型。<br>EnumMap ：专门为枚举类型量身定做的 Map 实现。虽然使用其它的 Map 实现（如HashMap）也能完成枚举类型实例到值得映射，但是使用 EnumMap 会更加高效，因为它只能接收同一枚举类型的实例作为键值，并且由于枚举类型实例的数量相对固定并且有限，所以 EnumMap 使用数组来存放与枚举类型对应的值。这使得 EnumMap 的效率非常高。</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EnumTest</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//EnumSet的使用</span></span><br><span class="line">        <span class="comment">//把Signal枚举中所有对象抽取到Set集合中</span></span><br><span class="line">EnumSet&lt;Signal&gt; signalSet = EnumSet.allOf(Signal.class);</span><br><span class="line"><span class="keyword">for</span> (Enum&lt;Signal&gt; en : signalSet) &#123;</span><br><span class="line">System.out.println(en);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//EnumMap的使用</span></span><br><span class="line">EnumMap&lt;Signal,Object&gt; enumMap = <span class="keyword">new</span> <span class="title class_">EnumMap</span>&lt;&gt;(Signal.class);</span><br><span class="line">enumMap.put(Signal.RED, <span class="string">&quot;红灯&quot;</span>);</span><br><span class="line">enumMap.put(Signal.YELLOW, <span class="string">&quot;黄灯&quot;</span>);</span><br><span class="line">enumMap.put(Signal.GREEN, <span class="string">&quot;绿灯&quot;</span>);</span><br><span class="line">        <span class="comment">//把所有的映射关系对象抽取到Set集合中</span></span><br><span class="line">Set&lt;Entry&lt;Signal, Object&gt;&gt; entrySet = enumMap.entrySet();</span><br><span class="line"><span class="keyword">for</span> (Entry&lt;Signal, Object&gt; entry : entrySet) &#123;</span><br><span class="line"><span class="type">Signal</span> <span class="variable">key</span> <span class="operator">=</span> entry.getKey();</span><br><span class="line"><span class="type">Object</span> <span class="variable">value</span> <span class="operator">=</span> entry.getValue();</span><br><span class="line">System.out.println(key + <span class="string">&quot; -- &quot;</span> + value);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Signal</span>&#123;RED, YELLOW, GREEN&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 教育 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 千锋教育 </tag>
            
            <tag> 培训 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>多线程</title>
      <link href="/posts/5729df21/"/>
      <url>/posts/5729df21/</url>
      
        <content type="html"><![CDATA[<h1 id="多线程"><a href="#多线程" class="headerlink" title="多线程"></a>多线程</h1><h3 id="一、什么是进程"><a href="#一、什么是进程" class="headerlink" title="一、什么是进程"></a>一、什么是进程</h3><blockquote><p>进程是系统进行资源分配和调用的独立单元，每一个进程都有它的独立内存空间和系统资源。</p></blockquote><h3 id="二、单进程操作系统和多进程操作系统的区别"><a href="#二、单进程操作系统和多进程操作系统的区别" class="headerlink" title="二、单进程操作系统和多进程操作系统的区别"></a>二、单进程操作系统和多进程操作系统的区别</h3><blockquote><p>单进程操作系统：dos（一瞬间只能执行一个任务）</p><p>多进程单用户操作系统：Windows（一瞬间只能执行多个任务）</p><p>多进程多用户操作系统：Linux（一瞬间只能执行多个任务）</p></blockquote><h3 id="三、现在的多核CPU是否可以让系统在同一个时刻可以执行多个任务吗？"><a href="#三、现在的多核CPU是否可以让系统在同一个时刻可以执行多个任务吗？" class="headerlink" title="三、现在的多核CPU是否可以让系统在同一个时刻可以执行多个任务吗？"></a>三、现在的多核CPU是否可以让系统在同一个时刻可以执行多个任务吗？</h3><blockquote><p>理论上是可以的</p></blockquote><h3 id="四、什么是线程，理解线程和进程的关系"><a href="#四、什么是线程，理解线程和进程的关系" class="headerlink" title="四、什么是线程，理解线程和进程的关系"></a>四、什么是线程，理解线程和进程的关系</h3><blockquote><p>什么是线程？</p><p>线程是进程里面的一条执行路径，每个线程同享进程里面的内存空间和系统资源</p><p>一个进程 可以有 多个线程：各个线程都有不同的分工</p></blockquote><blockquote><p>理解线程和进程的关系</p><p>进程 与 进程 之间的关系：进程之间的内存空间和系统资源是独立的</p><p>同一个进程里的多条线程 ：线程之间的内存空间和系统资源是共享的</p></blockquote><blockquote><p>进程里：可以有一条或一条以上的线程</p><p>进程里只有一条线程的情况下，这条线程就叫做主线程</p><p>进程里有多条线程的情况下，只有一条线程叫做主线程</p><p>Ps：线程是在进程里的，他们是包含关系</p></blockquote><h3 id="五、我们应用的软件有哪些是多线程的应用？"><a href="#五、我们应用的软件有哪些是多线程的应用？" class="headerlink" title="五、我们应用的软件有哪些是多线程的应用？"></a>五、我们应用的软件有哪些是多线程的应用？</h3><blockquote><p>都是</p></blockquote><h3 id="六、Java中，如何来编写多线程的应用程序？有哪些方法？"><a href="#六、Java中，如何来编写多线程的应用程序？有哪些方法？" class="headerlink" title="六、Java中，如何来编写多线程的应用程序？有哪些方法？"></a>六、Java中，如何来编写多线程的应用程序？有哪些方法？</h3><blockquote><p>1.线程类</p><p>创建MyThread类，继承Thread，重写run方法</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test01</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建线程的对象</span></span><br><span class="line"><span class="type">MyThread</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyThread</span>();</span><br><span class="line"><span class="comment">//启动线程</span></span><br><span class="line">t.start();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//线程类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//当前线程抢到cpu资源后，就会执行run方法</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;当前线程抢到资源了&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>2.任务类</p><p>创建Task类，实现Runnable接口中的run方法</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test01</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">Thread</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Task</span>());</span><br><span class="line">t.start();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//任务类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Task</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//当前线程抢到cpu资源后，就会执行run方法</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;抢到资源了&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>3.带返回值的任务类</p><p>4.线程池</p></blockquote><h3 id="七、感受多线程之间争抢资源的场景"><a href="#七、感受多线程之间争抢资源的场景" class="headerlink" title="七、感受多线程之间争抢资源的场景"></a>七、感受多线程之间争抢资源的场景</h3><blockquote><p>需求：编写一个多线程的应用程序，主线程打印1-100之间的数字，子线程打印200-300之间的数字，观察其输出的结果，体会多线程互相争抢资源的场景</p></blockquote><h3 id="八、小结"><a href="#八、小结" class="headerlink" title="八、小结"></a>八、小结</h3><blockquote><p>进程 与 进程 的关系：独享内存空间和系统资源</p><p>线程 与 进程 的关系：有一个进程中至少包含一个线程</p><p>线程 与 线程 的关系：在同一个进程里，多个线程共享内存空间和系统资源</p><p>一个进程中包含多个线程，只有一个主线程</p></blockquote><blockquote><p>经典面试题：请问当我们编写一个单纯的main方法时，此时该程序是否为单线程的？为什么？</p><p>垃圾回收器是一个后台线程</p></blockquote><h3 id="九、线程的优先级别"><a href="#九、线程的优先级别" class="headerlink" title="九、线程的优先级别"></a>九、线程的优先级别</h3><blockquote><p>需求：在主线程中创3个子线程，并且设置不同优先级，观察其优先级对线程执行结果的”影响”。</p><p>a.setPriority(Thread.MAX_PRIORITY);&#x2F;&#x2F;10<br>b.setPriority(Thread.NORM_PRIORITY);&#x2F;&#x2F;5<br>c.setPriority(Thread.MIN_PRIORITY);&#x2F;&#x2F;1</p></blockquote><h3 id="十、给线程自定义名称"><a href="#十、给线程自定义名称" class="headerlink" title="十、给线程自定义名称"></a>十、给线程自定义名称</h3><blockquote><ol><li>自己写getThreadName&#x2F;setThreadName</li><li>调用父类的一个参数的构造方法和getName</li><li>Thread.currentThread().getName()</li></ol></blockquote><h3 id="十一、让线程休眠"><a href="#十一、让线程休眠" class="headerlink" title="十一、让线程休眠"></a>十一、让线程休眠</h3><blockquote><p>需求：编写一个抽取学员回答问题的程序，要求倒数三秒后输出被抽中的学员姓名</p><p>Thread.sleep(1000);</p><p>此方法为静态方法，写在哪个线程中，哪个线程就休眠</p></blockquote><h3 id="十二、线程的礼让"><a href="#十二、线程的礼让" class="headerlink" title="十二、线程的礼让"></a>十二、线程的礼让</h3><blockquote><p>需求：创建两个线程A,B，分别各打印1-100的数字，其中B一个线程，每打印一次，就礼让一次，观察实验结果</p><p>Thread.yield();</p><p>此方法为静态方法，此方法写在哪个线程中，哪个线程就礼让</p><p>所谓的礼让是指当前线程退出CPU资源，并转到就绪状态，接着再抢</p></blockquote><h3 id="十三、线程的合并"><a href="#十三、线程的合并" class="headerlink" title="十三、线程的合并"></a>十三、线程的合并</h3><blockquote><p>需求：主线程和子线程各打印200次，从1开始每次增加1，当主线程打印到10之后，让子线程先打印完再打印主线程</p><p>t.join(); 合并方法</p></blockquote><h3 id="十四、线程的中断"><a href="#十四、线程的中断" class="headerlink" title="十四、线程的中断"></a>十四、线程的中断</h3><h3 id="十五、守护线程"><a href="#十五、守护线程" class="headerlink" title="十五、守护线程"></a>十五、守护线程</h3><blockquote><p>守护线程 默默守护着前台线程，当所有的前台线程都消亡后，守护线程会自动消亡</p><p>注意：垃圾回收器就是守护线程</p><p>t.setDaemon(true);</p></blockquote><h3 id="十六、线程局部变量（实现线程范围内的共享变量）"><a href="#十六、线程局部变量（实现线程范围内的共享变量）" class="headerlink" title="十六、线程局部变量（实现线程范围内的共享变量）"></a>十六、线程局部变量（实现线程范围内的共享变量）</h3><h3 id="十七、线程的生命周期"><a href="#十七、线程的生命周期" class="headerlink" title="十七、线程的生命周期"></a>十七、线程的生命周期</h3><blockquote><p>1、新建状态</p><p>i. 在程序中用构造方法创建了一个线程对象后，新的线程对象便处于新建状态，此时，它已经有了相应的内存空间和其它资源，但还处于不可运行状态。新建一个线程对象可采用线程构造方法来实现。</p><p>ii. 例如：Thread thread&#x3D;new Thread();  </p><p>2、 就绪状态</p><p>i. 新建线程对象后，调用该线程的start()方法就可以启动线程。当线程启动时，线程进入就绪状态。此时，线程将进入线程队列排队，等待CPU调用，这表明它已经具备了运行条件。</p><p>3、运行状态</p><p>i. 当就绪状态的线程被调用并获得处理器资源时，线程就进入了运行状态。此时，自动调用该线程对象的run()方法。run()方法定义了该线程的操作和功能。</p><p>4、 阻塞状态</p><p>i. 一个正在执行的线程在某些特殊情况下，如被人为挂起，将让出CPU并暂时中止自己的执行，进入阻塞状态。在可执行状态下，如果调用sleep(2000)、wait()等方法，线程都将进入阻塞状态。阻塞时，线程不能进入排队队列，只有当引起阻塞的原因被消除后，线程才可以转入就绪状态。</p><p>5、死亡状态</p><p>i. 线程调用stop()方法时或run()方法执行结束后，线程即处于死亡状态。处于死亡状态的线程不具有继续运行的能力。</p></blockquote><h3 id="作业"><a href="#作业" class="headerlink" title="作业"></a>作业</h3><blockquote><p>1.计算任务，一个包含了2万个整数的数组，分拆了多个线程来进行并行计算，最后汇总出计算的结果。</p><p>2.铁道部发布了一个售票任务，要求销售1000张票，要求有3个窗口来进行销售，请编写多线程程序来模拟这个效果（该题涉及到线程安全，<a href="https://www.jb51.net/article/221008.htm%EF%BC%89">https://www.jb51.net/article/221008.htm）</a></p><p>i. 窗口001正在销售第1张票</p><p>ii. 窗口001正在销售第2张票</p><p>iii. 窗口002正在销售第3张票</p><p>iv. 。。。</p><p>v. 窗口002正在销售第1000张票</p><p>涉及到线程安全，要加锁</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 教育 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 千锋教育 </tag>
            
            <tag> 培训 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>线程池</title>
      <link href="/posts/de7c53fe/"/>
      <url>/posts/de7c53fe/</url>
      
        <content type="html"><![CDATA[<h1 id="线程池"><a href="#线程池" class="headerlink" title="线程池"></a>线程池</h1><h3 id="引入"><a href="#引入" class="headerlink" title="引入"></a>引入</h3><p>一个线程完成一项任务所需时间为：</p><ol><li>创建线程时间 - Time1</li><li>线程中执行任务的时间 - Time2</li><li>销毁线程时间 - Time3</li></ol><h3 id="为什么需要线程池"><a href="#为什么需要线程池" class="headerlink" title="为什么需要线程池"></a>为什么需要线程池</h3><ol><li>线程池技术正是关注如何缩短或调整Time1和Time3的时间，从而提高程序的性能。项目中可以把Time1，T3分别安排在项目的启动和结束的时间段或者一些空闲的时间段</li><li>线程池不仅调整Time1，Time3产生的时间段，而且它还显著减少了创建线程的数目，提高线程的复用率</li><li>系统启动一个新线程的成本是比较高的，因为涉及与操作系统的交互，在这种情形下，使用线程池可以很好地提高性能，尤其是当程序中需要创建大量生存期很短暂的线程时，优先考虑使用线程池</li></ol><h3 id="Java提供的线程池"><a href="#Java提供的线程池" class="headerlink" title="Java提供的线程池"></a>Java提供的线程池</h3><blockquote><p>ExecutorService：线程池的接口</p><p>Executors：创建各种线程池的工具类</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建单个线程的线程池</span></span><br><span class="line"><span class="comment">//ExecutorService pool = Executors.newSingleThreadExecutor();</span></span><br><span class="line"><span class="comment">//创建指定线程的线程池</span></span><br><span class="line"><span class="comment">//ExecutorService pool = Executors.newFixedThreadPool(3);</span></span><br><span class="line"><span class="comment">//创建可缓存线程的线程池，自动回收60s闲置线程</span></span><br><span class="line"><span class="type">ExecutorService</span> <span class="variable">pool</span> <span class="operator">=</span> Executors.newCachedThreadPool();</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">100</span>; i++) &#123;</span><br><span class="line">pool.execute(<span class="keyword">new</span> <span class="title class_">Task</span>(i));<span class="comment">//提交任务，i为任务编号（方便理解）</span></span><br><span class="line">&#125;</span><br><span class="line">pool.shutdown();<span class="comment">//关闭线程池</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Task</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> i;</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Task</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.i = i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">System.out.println(Thread.currentThread().getName() + <span class="string">&quot;--&gt;&quot;</span> + i);</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="深入源码"><a href="#深入源码" class="headerlink" title="深入源码"></a>深入源码</h3><blockquote><p>ExecutorService pool &#x3D; Executors.newSingleThreadExecutor();</p><p>ExecutorService pool &#x3D; Executors.newFixedThreadPool(3);</p><p>ExecutorService pool &#x3D; Executors.newCachedThreadPool();</p><p>三种线程池底层都是ThreadPoolExecutor类的对象</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">-- 分析ThreadPoolExecutor类的构造方法源码--------------------------------</span><br><span class="line"><span class="keyword">public</span> <span class="title function_">ThreadPoolExecutor</span><span class="params">(</span></span><br><span class="line"><span class="params"><span class="type">int</span> corePoolSize,------------- 核心线程数量 </span></span><br><span class="line"><span class="params">    <span class="type">int</span> maximumPoolSize,------------- 最大线程数量 </span></span><br><span class="line"><span class="params"><span class="type">long</span> keepAliveTime,------------- 闲置时间，作用于核心线程数与最大线程数之间的线程</span></span><br><span class="line"><span class="params">TimeUnit unit,------------- keepAliveTime的时间单位(可以是毫秒、秒....)</span></span><br><span class="line">BlockingQueue&lt;Runnable&gt; workQueue, -- 任务队列</span><br><span class="line">ThreadFactory threadFactory, -------- 线程工厂</span><br><span class="line">RejectedExecutionHandler handler ---- 达到了线程界限和队列容量时的处理方案(拒绝策略)</span><br><span class="line">) &#123;&#125;</span><br><span class="line">执行步骤:</span><br><span class="line"><span class="number">1.</span>创建线程池后</span><br><span class="line">    <span class="number">2.</span>任务提交后，查看是否有核心线程：</span><br><span class="line">        <span class="number">3.1</span> 没有 -&gt; 就创建核心线程 -&gt; 执行任务 -&gt; 执行完毕后又回到线程池中</span><br><span class="line">        <span class="number">3.2</span> 有 -&gt; 查看是否有闲置核心线程：</span><br><span class="line">        <span class="number">4.1</span> 有 -&gt; 执行任务 -&gt; 执行完毕后又回到线程池</span><br><span class="line">        <span class="number">4.2</span> 没有 -&gt; 查看当前核心线程数是否核心线程数量：</span><br><span class="line">        <span class="number">5.1</span> 否 -&gt; 就创建核心线程 -&gt; 执行任务 -&gt; 执行完毕后又回到线程池中</span><br><span class="line">        <span class="number">5.2</span> 是 -&gt; 查看任务列表是否装载满：</span><br><span class="line">        <span class="number">6.1</span> 没有 -&gt; 就放入列表中，等待出现闲置线程</span><br><span class="line">        <span class="number">6.2</span> 装满 -&gt; 查看是否有普通线程(核心线程数到最大线程数量之间的线程)</span><br><span class="line">        <span class="number">7.1</span> 没有 -&gt; 就创建普通线程 -&gt; 执行任务 -&gt; 执行完毕后又回到线程池中</span><br><span class="line">        <span class="number">7.2</span> 有 -&gt; 查看是否有闲置普通线程</span><br><span class="line">        <span class="number">7.1</span><span class="number">.1</span> 有 -&gt; 执行任务 -&gt; 执行完毕后又回到线程池中</span><br><span class="line">        <span class="number">7.1</span><span class="number">.2</span> 没有 -&gt; 查看现在所有线程数量是否为最大线程数：</span><br><span class="line">        <span class="number">8.1</span> 是 -&gt; 执行处理方案（默认处理抛出异常）</span><br><span class="line">        <span class="number">8.2</span> 否 -&gt;就创建普通线程-&gt; 执行任务 -&gt; 执行完毕后又回到线程池中     </span><br><span class="line">注：</span><br><span class="line"><span class="number">1.</span>为了更好的理解，在这里区分核心线程和普通线程，实际上区分的这么清楚，都是线程</span><br><span class="line">    <span class="number">2.</span>默认的处理方案就是抛出RejectedExecutionException</span><br><span class="line">总结：核心线程满载 -&gt; 任务队列 -&gt; 普通线程</span><br><span class="line"></span><br><span class="line">-- 分析单个线程的线程池的源码 --------------------------------</span><br><span class="line"><span class="type">ExecutorService</span> <span class="variable">pool</span> <span class="operator">=</span> Executors.newSingleThreadExecutor();</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(</span><br><span class="line">    <span class="number">1</span>, -- 核心线程数量 </span><br><span class="line">    <span class="number">1</span>, -- 最大线程数量 </span><br><span class="line">    <span class="number">0L</span>, -- 闲置时间</span><br><span class="line">    TimeUnit.MILLISECONDS, -- 时间单位(毫秒)</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">LinkedBlockingQueue</span>&lt;Runnable&gt;() -- 无界任务队列，可以无限添加任务</span><br><span class="line">)  </span><br><span class="line">-- 分析指定线程的线程池的源码 --------------------------------</span><br><span class="line"><span class="type">ExecutorService</span> <span class="variable">pool</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">3</span>);</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(</span><br><span class="line">    nThreads, -- 核心线程数量 </span><br><span class="line">    nThreads, -- 最大线程数量 </span><br><span class="line">    <span class="number">0L</span>, -- 闲置时间</span><br><span class="line">    TimeUnit.MILLISECONDS, -- 时间单位(毫秒)</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">LinkedBlockingQueue</span>&lt;Runnable&gt;()-- 无界任务队列，可以无限添加任务</span><br><span class="line">)</span><br><span class="line">-- 创建可缓存线程的线程池 -----------------------------------</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(</span><br><span class="line">    <span class="number">0</span>, -- 核心线程数量 </span><br><span class="line">    Integer.MAX_VALUE,-- 最大线程数量 </span><br><span class="line">    <span class="number">60L</span>, -- 闲置时间</span><br><span class="line">    TimeUnit.SECONDS, -- 时间单位(秒)</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">SynchronousQueue</span>&lt;Runnable&gt;() -- 直接提交队列(同步队列)：没有容量队列</span><br></pre></td></tr></table></figure><h3 id="任务队列详解"><a href="#任务队列详解" class="headerlink" title="任务队列详解"></a>任务队列详解</h3><table><thead><tr><th>队列名称</th><th>详解</th></tr></thead><tbody><tr><td>LinkedBlockingQueue无界任务队列</td><td>使用无界任务队列，线程池的任务队列可以无限制的添加新的任务，而线程池创建的最大线程数量就是你corePoolSize设置的数量，也就是说在这种情况下maximumPoolSize这个参数是无效的，哪怕你的任务队列中缓存了很多未执行的任务，当线程池的线程数达到corePoolSize后，就不会再增加了；若后续有新的任务加入，则直接进入队列等待，当使用这种任务队列模式时，一定要注意你任务提交与处理之间的协调与控制，不然会出现队列中的任务由于无法及时处理导致一直增长，直到最后资源耗尽的问题</td></tr><tr><td>SynchronousQueue            同步任务队列              直接提交任务队列</td><td>使用直接提交任务队列，队列没有容量，每执行一个插入操作就会阻塞，需要再执行一个删除操作才会被唤醒，反之每一个删除操作也都要等待对应的插入操作。                                                    任务队列为SynchronousQueue，创建的线程数大于maximumPoolSize时，直接执行了拒绝策略抛出异常。                                                                                                  使用SynchronousQueue队列，提交的任务不会被保存，总是会马上提交执行。如果用于执行任务的线程数量小于maximumPoolSize，则尝试创建新的线程，如果达到maximumPoolSize设置的最大值，则根据你设置的handler执行拒绝策略。因此这种方式你提交的任务不会被缓存起来，而是会被马上执行，在这种情况下，你需要对你程序的并发量有个准确的评估，才能设置合适的maximumPoolSize数量，否则很容易就会执行拒绝策略；</td></tr><tr><td>ArrayBlockingQueue有界任务队列</td><td>使用有界任务队列，若有新的任务需要执行时，线程池会创建新的线程，直到创建的线程数量达到corePoolSize时，则会将新的任务加入到等待队列中。若等待队列已满，即超过ArrayBlockingQueue初始化的容量，则继续创建线程，直到线程数量达到maximumPoolSize设置的最大线程数量，若大于maximumPoolSize，则执行拒绝策略。在这种情况下，线程数量的上限与有界任务队列的状态有直接关系，如果有界队列初始容量较大或者没有达到超负荷的状态，线程数将一直维持在corePoolSize以下，反之当任务队列已满时，则会以maximumPoolSize为最大线程数上限。</td></tr><tr><td>PriorityBlockingQueue优先任务队列</td><td>使用优先任务队列，它其实是一个特殊的无界队列，它其中无论添加了多少个任务，线程池创建的线程数也不会超过corePoolSize的数量，只不过其他队列一般是按照先进先出的规则处理任务，而PriorityBlockingQueue队列可以自定义规则根据任务的优先级顺序先后执行。</td></tr></tbody></table><p>对优先队列的使用说明：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">ThreadPoolExecutor</span> <span class="variable">pool</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">1000</span>, TimeUnit.MILLISECONDS, <span class="keyword">new</span> <span class="title class_">PriorityBlockingQueue</span>&lt;&gt;(), Executors.defaultThreadFactory(), <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>.AbortPolicy());</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++) &#123;</span><br><span class="line">pool.execute(<span class="keyword">new</span> <span class="title class_">Task</span>(i));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pool.shutdown();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Task</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>,Comparable&lt;Task&gt;&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> priority;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">Task</span><span class="params">(<span class="type">int</span> priority)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.priority = priority;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">System.out.println(Thread.currentThread().getName() + <span class="string">&quot; priority：&quot;</span> + <span class="built_in">this</span>.priority);</span><br><span class="line">&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//当前对象和其他对象做比较，当前优先级大就返回-1，优先级小就返回1,值越小优先级越高</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compareTo</span><span class="params">(Task o)</span> &#123;</span><br><span class="line"><span class="keyword">return</span> (<span class="built_in">this</span>.priority&gt;o.priority)?-<span class="number">1</span>:<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">总结：除了第一个任务直接创建线程执行外，其他的任务都被放入了优先任务队列，按优先级进行了重新排列执行，且线程池的线程数一直为corePoolSize，也就是只有一个。</span><br></pre></td></tr></table></figure><h3 id="拒绝策略"><a href="#拒绝策略" class="headerlink" title="拒绝策略"></a>拒绝策略</h3><blockquote><p>ThreadPoolExecutor自带的拒绝策略有四种，都实现了RejectedExecutionHandler接口</p><p>比如：new ThreadPoolExecutor.AbortPolicy()</p></blockquote><table><thead><tr><th>拒绝策略</th><th>解释</th></tr></thead><tbody><tr><td>AbortPolicy</td><td>当有任务添加到线程池被拒绝时，会抛出RejectedExecutionException异常                线程池默认的拒绝策略。必须处理好抛出的异常，否则会打断当前的执行流程，影响后续的任务执行。</td></tr><tr><td>DiscardPolicy</td><td>当有任务添加到线程池被拒绝时，直接丢弃，其他啥都没有</td></tr><tr><td>CallerRunsPolicy</td><td>当有任务添加到线程池被拒绝时，线程池会将被拒绝的任务添加到线程池正在运行的线程中去运行。                                                                                                           一般并发比较小，性能要求不高，不允许失败。但是，由于调用者自己运行任务，如果任务提交速度过快，可能导致程序阻塞，性能效率上必然的损失较大</td></tr><tr><td>DiscardOledestPolicy</td><td>当有任务添加到线程池被拒绝时，线程池会丢弃阻塞队列中末尾的任务（最老的任务），然后将被拒绝的任务添加到末尾。                                                                     如果项目中有允许丢失任务的需求，可以使用</td></tr></tbody></table><h3 id="自定义拒绝策略"><a href="#自定义拒绝策略" class="headerlink" title="自定义拒绝策略"></a>自定义拒绝策略</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">ThreadPoolExecutor</span> <span class="variable">pool</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1000</span>, TimeUnit.MILLISECONDS, <span class="keyword">new</span> <span class="title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="number">1</span>), Executors.defaultThreadFactory(), <span class="keyword">new</span> <span class="title class_">RejectedExecutionHandler</span>() &#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">rejectedExecution</span><span class="params">(Runnable r, ThreadPoolExecutor executor)</span> &#123;</span><br><span class="line">System.out.println(r.toString()+<span class="string">&quot;执行了拒绝策略&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++) &#123;</span><br><span class="line">pool.execute(<span class="keyword">new</span> <span class="title class_">Task</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pool.shutdown();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Task</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">System.out.println(Thread.currentThread().getName());</span><br><span class="line">&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="自定义线程池原因"><a href="#自定义线程池原因" class="headerlink" title="自定义线程池原因"></a>自定义线程池原因</h3><blockquote><p>在《阿里巴巴java开发手册》中指出了线程资源必须通过线程池提供，不允许在应用中自行显示的创建线程，这样一方面使线程的创建更加规范，可以合理控制开辟线程的数量；另一方面线程的细节管理交给线程池处理，优化了资源的开销。而线程池不允许使用Executors去创建，而要通过ThreadPoolExecutor方式，这一方面是由于jdk中Executor框架虽然提供了如newFixedThreadPool()、newSingleThreadExecutor()、newCachedThreadPool()等创建线程池的方法，但都有其局限性，不够灵活，而且有资源耗尽的风险（OOM - Out Of Memory ）。</p><p> 一般我们创建线程池时，为防止资源被耗尽，任务队列都会选择创建有界任务队列，但这种模式下如果出现任务队列已满且线程池创建的线程数达到你设置的最大线程数时，这时就需要你指定ThreadPoolExecutor的RejectedExecutionHandler参数即合理的拒绝策略，来处理线程池”超载”的情况 </p></blockquote><h3 id="自定义线程池"><a href="#自定义线程池" class="headerlink" title="自定义线程池"></a>自定义线程池</h3><blockquote><p>前提学习线程池中如何创建线程：</p><p>线程池中线程就是通过ThreadPoolExecutor中的ThreadFactory，线程工厂创建的。那么通过自定义ThreadFactory，可以按需要对线程池中创建的线程进行一些特殊的设置，如命名、优先级等 </p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">ThreadPoolExecutor</span> <span class="variable">pool</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(</span><br><span class="line"><span class="number">10</span>, <span class="number">10</span>, <span class="number">1000</span>, TimeUnit.MILLISECONDS, <span class="keyword">new</span> <span class="title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="number">1</span>), </span><br><span class="line"><span class="keyword">new</span> <span class="title class_">ThreadFactory</span>() &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">threadNum</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Thread <span class="title function_">newThread</span><span class="params">(Runnable r)</span> &#123;</span><br><span class="line"><span class="type">Thread</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(r,<span class="string">&quot;线程&quot;</span>+threadNum++);</span><br><span class="line"><span class="keyword">return</span> t;</span><br><span class="line">&#125;</span><br><span class="line">&#125;, <span class="keyword">new</span> <span class="title class_">RejectedExecutionHandler</span>() &#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">rejectedExecution</span><span class="params">(Runnable r, ThreadPoolExecutor executor)</span> &#123;</span><br><span class="line">System.out.println(r.toString()+<span class="string">&quot;执行了拒绝策略&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++) &#123;</span><br><span class="line">pool.execute(<span class="keyword">new</span> <span class="title class_">Task</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pool.shutdown();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Task</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">System.out.println(Thread.currentThread().getName());</span><br><span class="line">&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ThreadPoolExecutor扩展"><a href="#ThreadPoolExecutor扩展" class="headerlink" title="ThreadPoolExecutor扩展"></a><strong>ThreadPoolExecutor扩展</strong></h3><blockquote><p>ThreadPoolExecutor扩展主要是围绕beforeExecute()、afterExecute()和terminated()三个方法的重写， 通过这三个方法我们可以监控每个任务的开始和结束时间，或者其他一些功能。下面我们可以通过代码实现一下 </p></blockquote><table><thead><tr><th>方法</th><th>解释</th></tr></thead><tbody><tr><td>beforeExecute</td><td>线程池中任务运行前执行</td></tr><tr><td>afterExecute</td><td>线程池中任务运行完毕后执行</td></tr><tr><td>terminated</td><td>线程池退出后执行</td></tr></tbody></table><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ThreadPoolExecutor</span> <span class="variable">pool</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(</span><br><span class="line"><span class="number">10</span>, <span class="number">10</span>, <span class="number">1000</span>, TimeUnit.MILLISECONDS, <span class="keyword">new</span> <span class="title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="number">10</span>), </span><br><span class="line"><span class="keyword">new</span> <span class="title class_">ThreadFactory</span>() &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">threadNum</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Thread <span class="title function_">newThread</span><span class="params">(Runnable r)</span> &#123;</span><br><span class="line"><span class="type">Thread</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(r,<span class="string">&quot;线程&quot;</span>+threadNum++);</span><br><span class="line"><span class="keyword">return</span> t;</span><br><span class="line">&#125;</span><br><span class="line">&#125;, <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>.AbortPolicy()</span><br><span class="line">)&#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">beforeExecute</span><span class="params">(Thread t,Runnable r)</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;准备执行：&quot;</span>+ Thread.currentThread().getName());</span><br><span class="line">            &#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">afterExecute</span><span class="params">(Runnable r,Throwable t)</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;执行完毕：&quot;</span>+ Thread.currentThread().getName());</span><br><span class="line">            &#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">terminated</span><span class="params">()</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;线程池退出&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++) &#123;</span><br><span class="line">pool.execute(<span class="keyword">new</span> <span class="title class_">Task</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pool.shutdown();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Task</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">System.out.println(<span class="string">&quot;执行中：&quot;</span> + Thread.currentThread().getName());</span><br><span class="line">&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="线程池线程数量"><a href="#线程池线程数量" class="headerlink" title="线程池线程数量"></a><strong>线程池线程数量</strong></h3><blockquote><p>实际工作中使用 sysbench多线程性能测试工具 </p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 教育 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 千锋教育 </tag>
            
            <tag> 培训 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IO流</title>
      <link href="/posts/fed4c017/"/>
      <url>/posts/fed4c017/</url>
      
        <content type="html"><![CDATA[<h1 id="IO流"><a href="#IO流" class="headerlink" title="IO流"></a>IO流</h1><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><blockquote><p>I–  in – 输入(读)</p><p>O  – out – 输出(写)</p><p>流 – 一点一点的想水流一样去传输数据</p></blockquote><blockquote><p>注意：站在程序的角度去看待输入还是输出</p></blockquote><h2 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h2><blockquote><p>按照方向分流：输入流、输出流</p><p>按照单位分流：字节流、字符流</p><p>按照功能分流：基础流&#x2F;节点流、处理流</p></blockquote><blockquote><p>注意：new 处理流(new 基础流) – 装饰者模型 – 处理流对象中往往包含了基础流的对象，在基础流的基础上拓展了额外的功能，使得流更为强大(效率)，工作中一般使用处理流</p></blockquote><h2 id="存储单位"><a href="#存储单位" class="headerlink" title="存储单位"></a>存储单位</h2><blockquote><p>1024KB &#x3D; 1MB</p><p>1024MB &#x3D; 1GB</p><p>1024GB &#x3D; 1TB</p><p>1024TB &#x3D; 1PB</p></blockquote><blockquote><p>注意：进制1024 </p></blockquote><h2 id="学习注意事项"><a href="#学习注意事项" class="headerlink" title="学习注意事项"></a>学习注意事项</h2><blockquote><ol><li>按照流的发展历史去学习</li><li>注意流与流之间的继承关系</li><li>举一反三</li></ol></blockquote><h2 id="字节流"><a href="#字节流" class="headerlink" title="字节流"></a>字节流</h2><blockquote><p>应用场景：操作二进制数据（音频、视频、图片）</p></blockquote><blockquote><p>abstract class InputStream – 字节输入流的基类（抽象类）</p><p>abstract class OutputStream  – 字节输出流的基类（抽象类）</p></blockquote><blockquote><p>class FileInputStream extends InputStream – 文件字节输入流</p><p>class FileOutputStream extends OutputStream  – 文件字节输出流</p></blockquote><blockquote><p>class FilterInputStream extends InputStream  – 过滤器字节输入流</p><p>class FilterOutputStream extends OutputStream   – 过滤器字节输出流</p></blockquote><blockquote><p>class BufferedInputStream extends FilterInputStream        – 带缓冲区的字节输入流</p><p>class BufferedOutputStream extends FilterOutputStream  – 带缓冲区的字节输出流</p><p>默认缓冲区大小：8192字节</p></blockquote><h2 id="字符流"><a href="#字符流" class="headerlink" title="字符流"></a>字符流</h2><blockquote><p>应用场景：操作纯文本数据</p></blockquote><blockquote><p>注意：字符流 &#x3D; 字节流+编译器</p><p>编译器：可以识别中文字符和非中文字符，非中文字符获取1个字节（一个字节&#x3D;一个字符），编译器会根据编码格式获取中文字符对应的字节数（GBK获取两个字节，UTF-8获取三个字节）</p></blockquote><blockquote><p>abstract class Reader – 字符输入流的基类（抽象类）</p><p>abstract class Writer – 字符输出流的基类（抽象类）</p></blockquote><blockquote><p>class InputStreamReader  extends Reader – 字符输入转换流</p><p>class OutputStreamWriter extends Writer  – 字符输出转换流</p><p>特点：将字节流转换为字符流，字符转换流是字节流和字符流的桥梁</p></blockquote><blockquote><p>class FileReader extends InputStreamReader  – 文件字符输入流</p><p>class FileWriter extends OutputStreamWriter  – 文件字符输出流</p></blockquote><h2 id="各种流"><a href="#各种流" class="headerlink" title="各种流"></a>各种流</h2><blockquote><p>对象流</p><p>内存流</p><p>打印流</p><p>随机访问流</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 教育 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 千锋教育 </tag>
            
            <tag> 培训 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDK1.8新特性</title>
      <link href="/posts/d111bf74/"/>
      <url>/posts/d111bf74/</url>
      
        <content type="html"><![CDATA[<h1 id="JDK1-8新特性"><a href="#JDK1-8新特性" class="headerlink" title="JDK1.8新特性"></a>JDK1.8新特性</h1><h3 id="JDK1-8新特性简介"><a href="#JDK1-8新特性简介" class="headerlink" title="JDK1.8新特性简介"></a>JDK1.8新特性简介</h3><ul><li>速度更快 - 优化底层源码，比如HashMap、ConcurrentHashMap</li><li>代码更少 - 添加新的语法Lambda表达式</li><li>强大的Stream API</li><li>便于并行</li><li>最大化减少空指针异常 - Optional</li></ul><h3 id="Lambda表达式"><a href="#Lambda表达式" class="headerlink" title="Lambda表达式"></a>Lambda表达式</h3><h4 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h4><blockquote><p>Lambda是一个匿名函数(方法)，  允许把函数作为一个方法的参数 。利用Lambda表达式可以写出更简洁、更灵活的代码。作为一种更紧凑的代码风格，使Java的语言表达能力得到了提升。</p><p>一般都是优化匿名内部类</p></blockquote><h4 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h4><p><strong>无参数、无返回值的抽象方法</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//I1 i1 = new I1() &#123;</span></span><br><span class="line"><span class="comment">//@Override</span></span><br><span class="line"><span class="comment">//public void method() &#123;</span></span><br><span class="line"><span class="comment">//System.out.println(&quot;传统使用匿名内部类的方式&quot;);</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"><span class="comment">//&#125;;</span></span><br><span class="line"><span class="comment">//i1.method();</span></span><br><span class="line"></span><br><span class="line"><span class="type">I1</span> <span class="variable">i1</span> <span class="operator">=</span> ()-&gt; System.out.println(<span class="string">&quot;采用Lambda表达式的方式&quot;</span>);</span><br><span class="line">i1.method();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">I1</span>&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span>;<span class="comment">//无参数、无返回值的抽象方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>一个参数、无返回值的抽象方法</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">I1</span> <span class="variable">i1</span> <span class="operator">=</span> (x)-&gt; System.out.println(<span class="string">&quot;采用Lambda表达式的方式 &quot;</span> + x);</span><br><span class="line">i1.method(<span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">I1</span>&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">(<span class="type">int</span> num1)</span>;<span class="comment">//一个参数、无返回值的抽象方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>多个参数、无返回值的抽象方法</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">I1</span> <span class="variable">i1</span> <span class="operator">=</span> (x,y,z)-&gt; </span><br><span class="line">        System.out.println(<span class="string">&quot;采用Lambda表达式的方式 &quot;</span> + x + y + z);</span><br><span class="line">        i1.method(<span class="number">1000</span>,<span class="number">2000</span>,<span class="number">3000</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">I1</span>&#123;</span><br><span class="line">    <span class="comment">//多个参数、无返回值的抽象方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">(<span class="type">int</span> num1,<span class="type">int</span> num2,<span class="type">int</span> num3)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>多个参数、有返回值的抽象方法</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">I1</span> <span class="variable">i1</span> <span class="operator">=</span> (x,y,z)-&gt; x+y+z;</span><br><span class="line"><span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> i1.method(<span class="number">1000</span>,<span class="number">2000</span>,<span class="number">3000</span>);</span><br><span class="line">System.out.println(result);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">I1</span>&#123;</span><br><span class="line"><span class="comment">//多个参数、有返回值的抽象方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">method</span><span class="params">(<span class="type">int</span> num1,<span class="type">int</span> num2,<span class="type">int</span> num3)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="注意点"><a href="#注意点" class="headerlink" title="注意点"></a>注意点</h4><ol><li>重写方法的形参只有一个时，可以不加小括号</li><li>Lambda表达式当中不允许声明一个与局部变量同名的参数或者局部变量</li><li>Lambda表达式中访问外层的局部变量，外层的局部变量自动变成隐式常量，默认添加final</li><li>重写方法的形参同时加类型或同时不加类型</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">int</span> x;</span><br><span class="line"><span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"><span class="type">I1</span> <span class="variable">i1</span> <span class="operator">=</span> x -&gt; System.out.println(x + (num++));</span><br><span class="line">        i1.method(<span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">I2</span> <span class="variable">i2</span> <span class="operator">=</span> (<span class="type">int</span> x,<span class="type">int</span> y) -&gt; &#123;</span><br><span class="line"><span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> x+y;</span><br><span class="line"><span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> i2.method(<span class="number">10</span>, <span class="number">20</span>);</span><br><span class="line">System.out.println(result);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">I1</span>&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">(<span class="type">int</span> num1)</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">I2</span>&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">method</span><span class="params">(<span class="type">int</span> num1,<span class="type">int</span> num2)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h4><p>1.调用Collections.sort()方法，通过定制排序比较两个Student对象（先按年龄比较，年龄相同按照薪资比较），使用Lambda表达式作为参数传递</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> &#123;</span><br><span class="line">List&lt;Student&gt; stuList = Arrays.asList(</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;张三&quot;</span>, <span class="number">28</span>, <span class="number">4800</span>,Course.JAVA),<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;李四&quot;</span>, <span class="number">36</span>, <span class="number">7200</span>,Course.JAVA),<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;王五&quot;</span>, <span class="number">19</span>, <span class="number">9600</span>,Course.HTML),<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;赵六&quot;</span>, <span class="number">42</span>, <span class="number">6100</span>,Course.HTML),<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;孙七&quot;</span>, <span class="number">23</span>, <span class="number">9600</span>,Course.PYTHON),<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;吴八&quot;</span>, <span class="number">31</span>, <span class="number">3000</span>,Course.PYTHON));</span><br><span class="line"></span><br><span class="line">Collections.sort(stuList, (a,b)-&gt; &#123;</span><br><span class="line"><span class="keyword">if</span>(a.getAge() == b.getAge())&#123;</span><br><span class="line"><span class="keyword">return</span> Double.compare(a.getSalary(),b.getSalary());</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> a.getAge()-b.getAge();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (Student stu : stuList) &#123;</span><br><span class="line">System.out.println(stu);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Course</span>&#123;<span class="comment">//课程枚举</span></span><br><span class="line">JAVA,HTML,PYTHON;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>&#123;<span class="comment">//学生类</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"><span class="keyword">private</span> <span class="type">double</span> salary;</span><br><span class="line"><span class="keyword">private</span> Course course;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2.创建I1接口，创建抽象方法：public String getValue(String str),在测试类中编写方法使用接口作为参数，将一个字符串转为大写，并作为方法的返回值</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">String</span> <span class="variable">strHandler</span> <span class="operator">=</span> strHandler(<span class="string">&quot;abc&quot;</span>, x-&gt; x.toUpperCase());</span><br><span class="line">System.out.println(strHandler);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">strHandler</span><span class="params">(String str,I1 i1)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> i1.getValue(str);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">I1</span>&#123;</span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getValue</span><span class="params">(String str)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3.创建I1&lt;T,R&gt;接口，泛型T为参数，R为返回值，创建抽象方法：public R add(T t1,T t2),在测试类中编写方法使用接口作为参数，计算两个long类型的和</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">Long</span> <span class="variable">addLong</span> <span class="operator">=</span> addLong(<span class="number">100L</span>, <span class="number">200L</span>, (x,y)-&gt; x+y);</span><br><span class="line">System.out.println(addLong);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Long <span class="title function_">addLong</span><span class="params">(Long l1,Long l2,I1&lt;Long,Long&gt; i1)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> i1.add(l1, l2);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">I1</span>&lt;T,R&gt;&#123;</span><br><span class="line"><span class="keyword">public</span> R <span class="title function_">add</span><span class="params">(T t1,T t2)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="函数式接口"><a href="#函数式接口" class="headerlink" title="函数式接口"></a>函数式接口</h3><h4 id="简介-1"><a href="#简介-1" class="headerlink" title="简介"></a>简介</h4><blockquote><p>函数式接口是指仅仅只包含一个抽象方法的接口，jdk1.8提供了一个@FunctionalInterface注解来定义函数式接口，如果我们定义的接口不符合函数式的规范便会报错。配合Lambda表达式一起使用</p></blockquote><h4 id="四大核心函数式接口"><a href="#四大核心函数式接口" class="headerlink" title="四大核心函数式接口"></a>四大核心函数式接口</h4><table><thead><tr><th>函数式接口</th><th>参数类型</th><th>返回类型</th><th>用途</th></tr></thead><tbody><tr><td>Consumer<T> 消费型接口</td><td>T</td><td>void</td><td>void accept(T t);</td></tr><tr><td>Supplier<T> 供给型接口</td><td>void</td><td>T</td><td>T get();</td></tr><tr><td>Function&lt;T, R&gt; 函数型接口</td><td>T</td><td>R</td><td>R apply(T t);</td></tr><tr><td>Predicate<T> 断言型接口</td><td>T</td><td>boolean</td><td>booelan test(T t);</td></tr><tr><td>BiConsumer&lt;T, U&gt;</td><td>T,U</td><td>void</td><td>对类型为T,U参数应用操作。包含方法为void accept(T t,U u);</td></tr><tr><td>BiFunction&lt;T, U, R&gt;</td><td>T,U</td><td>R</td><td>对类型为T,U参数应用操作，并返回R类型的结果。包含方法为R apply(T t,U u);</td></tr><tr><td>UnaryOperator<T> extends Function&lt;T, T&gt;</td><td>T</td><td>T</td><td>对类型为T的对象进行一元运算，并返回T类型的结果。包含方法为T apply(T t);</td></tr><tr><td>BinaryOperator<T> extends BiFunction&lt;T,T,T&gt;</td><td>T,T</td><td>T</td><td>对类型为T的对象进行二元运算，并返回T类型的结果。包含方法为T apply(T t1，T t2);</td></tr><tr><td>ToIntFunction<T>  ToLongFunction<T> ToDoubleFunction<T></td><td>T</td><td>int   long double</td><td>分别计算int、long、double值的函数</td></tr><tr><td>IntFunction<R> LongFunction<R> DoubleFunction<R></td><td>int   long double</td><td>R</td><td>参数为int、long、double类型的函数</td></tr></tbody></table><blockquote><p>应用场景：当项目中需要一个接口，并且该接口中只有一个抽象方法，就没必要去创建新的接口，直接选择Java提供的使用合适的函数式接口即可</p></blockquote><h3 id="方法、构造方法和数组引用"><a href="#方法、构造方法和数组引用" class="headerlink" title="方法、构造方法和数组引用"></a>方法、构造方法和数组引用</h3><blockquote><p> 方法、构造方法和数组引用就是Lambda的另一种表现形式</p></blockquote><h4 id="方法引用"><a href="#方法引用" class="headerlink" title="方法引用"></a>方法引用</h4><blockquote><p>若Lamdba表达式中的内容由方法已经实现了，可以使用方法引用这个技能</p><p>当你需要使用方法引用时，目标引用放在分隔符::前，方法的名称放在后面</p></blockquote><p><strong>对象::实例方法</strong></p><p>Lambda表达式中调用方法的参数类型和返回值必须和函数式接口中的抽象方法一致</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//I1 i1 = (x)-&gt;System.out.println(x);</span></span><br><span class="line"><span class="comment">//i1.method(&quot;abcd&quot;);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//println里的参数列表和返回值类型必须和method方法一致才行</span></span><br><span class="line"><span class="type">PrintStream</span> <span class="variable">ps</span> <span class="operator">=</span> System.out;</span><br><span class="line"><span class="type">I1</span> <span class="variable">i1</span> <span class="operator">=</span> ps::println;<span class="comment">//对象::实例方法</span></span><br><span class="line">i1.method(<span class="string">&quot;abcd&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">I1</span>&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">(String str)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>类名::静态方法</strong></p><p>Lambda表达式中调用方法的参数类型和返回值必须和函数式接口中的抽象方法一致</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//Comparator&lt;Integer&gt; com = (x,y)-&gt; Integer.compare(x, y);</span></span><br><span class="line"><span class="comment">//int compare = com.compare(10, 20);</span></span><br><span class="line"><span class="comment">//System.out.println(compare);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//类名::静态方法</span></span><br><span class="line">Comparator&lt;Integer&gt; com = Integer::compare;</span><br><span class="line"><span class="type">int</span> <span class="variable">compare</span> <span class="operator">=</span> com.compare(<span class="number">10</span>, <span class="number">20</span>);</span><br><span class="line">System.out.println(compare);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>类名::实例方法</strong></p><p>Lambda表达式参数列表中第一个参数必须是实例方法的调用者</p><p>Lambda表达式参数列表中第二个参数必须是实例方法的参数</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//I1&lt;String&gt; i1 = (x,y) -&gt; x.equals(y);</span></span><br><span class="line"><span class="comment">//boolean method = i1.method(&quot;abc&quot;, &quot;abc&quot;);</span></span><br><span class="line"><span class="comment">//System.out.println(method);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//类名::实例方法</span></span><br><span class="line"><span class="comment">//注意：Lambda表达式参数列表中第一个参数是equals方法的调用者，</span></span><br><span class="line">        <span class="comment">//   Lambda表达式参数列表中第二个参数是equals方法的参数</span></span><br><span class="line">I1&lt;String&gt; i1 = String::equals;</span><br><span class="line"><span class="type">boolean</span> <span class="variable">method</span> <span class="operator">=</span> i1.method(<span class="string">&quot;abc&quot;</span>, <span class="string">&quot;abc&quot;</span>);</span><br><span class="line">System.out.println(method);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">I1</span>&lt;T&gt;&#123;</span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">method</span><span class="params">(T t1,T t2)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="构造方法引用"><a href="#构造方法引用" class="headerlink" title="构造方法引用"></a>构造方法引用</h4><blockquote><p>类名::new</p><p>需要调用的构造方法的参数列表必须和函数式接口中抽象方法的参数列表一致</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//需求：创建学生对象</span></span><br><span class="line">I1&lt;Student&gt; i1 = Student::<span class="keyword">new</span>;</span><br><span class="line"><span class="comment">//System.out.println(i1.method());</span></span><br><span class="line"><span class="comment">//      System.out.println(i1.method(&quot;桥本有菜&quot;,24));</span></span><br><span class="line">        System.out.println(i1.method(<span class="string">&quot;桥本有菜&quot;</span>,<span class="number">24</span>,<span class="number">8888</span>,Course.JAVA));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">I1</span>&lt;T&gt;&#123;</span><br><span class="line"><span class="comment">//public T method();</span></span><br><span class="line"><span class="keyword">public</span> T <span class="title function_">method</span><span class="params">(String name,<span class="type">int</span> age,<span class="type">double</span> salary,Course course)</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Course</span>&#123;<span class="comment">//课程枚举</span></span><br><span class="line">JAVA,HTML,PYTHON;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>&#123;<span class="comment">//学生类</span></span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"><span class="keyword">private</span> <span class="type">double</span> salary;</span><br><span class="line"><span class="keyword">private</span> Course course;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="数组引用"><a href="#数组引用" class="headerlink" title="数组引用"></a>数组引用</h4><blockquote><p>语法格式：type[]::new</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//创建数组</span></span><br><span class="line">I1&lt;String[]&gt; i1 = String[]::<span class="keyword">new</span>;</span><br><span class="line">System.out.println(Arrays.toString(i1.method(<span class="number">10</span>)));</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">I1</span>&lt;T&gt;&#123;</span><br><span class="line"><span class="keyword">public</span> T <span class="title function_">method</span><span class="params">(<span class="type">int</span> capacity)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Stream"><a href="#Stream" class="headerlink" title="Stream"></a>Stream</h3><h4 id="简介-2"><a href="#简介-2" class="headerlink" title="简介"></a>简介</h4><blockquote><p>Stream（流）是数据渠道，用于操作数据源（集合、数组等），生成元素序列。换言之，集合是存储数据的容器，流使用操作这些数据的</p><p>Stream可以对集合进行非常复杂的查找、过滤、映射数据等操作，类似于SQL执行数据库查询。Stream提供了一种高效且易于使用的处理数据的方式</p><p>注意：</p><ul><li>Stream不会存储数据</li><li>Stream不会改变源数据，通过一系列操作数据源会返回一个持有结果的新Stream</li><li>Stream操作是延迟执行的，意味着流会等到需要结果的时候才执行</li></ul></blockquote><h4 id="执行步骤"><a href="#执行步骤" class="headerlink" title="执行步骤"></a>执行步骤</h4><ol><li>创建Stream：通过数据源（集合、数组等）获取一个Stream</li><li>中间操作：中间操作链，对源数据的数据进行处理</li><li>终止操作：执行中间操作，并产生结果</li></ol><h4 id="创建Stream"><a href="#创建Stream" class="headerlink" title="创建Stream"></a>创建Stream</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//方式一：通过Collection接口提供的stream()-串行流或parallelStream()-并行流 获取流对象</span></span><br><span class="line">List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">Stream&lt;String&gt; stream1 = list.stream();</span><br><span class="line"></span><br><span class="line"><span class="comment">//方式二：通过Arrays的静态方法stream()获取流对象</span></span><br><span class="line">String[] strs = <span class="keyword">new</span> <span class="title class_">String</span>[<span class="number">10</span>];</span><br><span class="line">Stream&lt;String&gt; stream2 = Arrays.stream(strs);</span><br><span class="line"></span><br><span class="line"><span class="comment">//方式三：通过Stream的静态方法of()获取流对象</span></span><br><span class="line">Stream&lt;String&gt; stream3 = Stream.of(<span class="string">&quot;aaa&quot;</span>,<span class="string">&quot;bbb&quot;</span>,<span class="string">&quot;ccc&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//方式四：创建无限流</span></span><br><span class="line"><span class="comment">//iterate()迭代</span></span><br><span class="line">Stream&lt;Integer&gt; stream4 = Stream.iterate(<span class="number">1</span>, (x)-&gt;x+=<span class="number">100</span>);</span><br><span class="line">stream4.limit(<span class="number">3</span>).forEach(System.out::println);</span><br><span class="line"><span class="comment">//生成</span></span><br><span class="line">Stream&lt;Double&gt; stream5 = Stream.generate(()-&gt;Math.random());</span><br><span class="line">stream5.limit(<span class="number">3</span>).forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>注意：多个中间操作可以连接成一个流水线，除非流水线触发终止操作，否则中间操作不会执行任何的处理，而在终止操作时一次性全部处理，称为惰性求值&#x2F;延迟加载</p></blockquote><h4 id="中间操作-筛选与切片"><a href="#中间操作-筛选与切片" class="headerlink" title="中间操作 - 筛选与切片"></a>中间操作 - 筛选与切片</h4><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>filter(Predicate p)</td><td>从流中排除元素</td></tr><tr><td>limit(long maxSize)</td><td>设置限制数据条数</td></tr><tr><td>skip(long n)</td><td>跳过元素，返回跳过n个元素的流，若流中不满足n个元素则返回空流。与limit()互补</td></tr><tr><td>distinct()</td><td>筛选，流通过元素对象的hashCode()和equals()方法去除重复元素</td></tr></tbody></table><blockquote><p>如果没有终止操作，中间操作就不会被调用，终止操作时一次性全部处理，这种称为惰性求值&#x2F;延迟加载</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line">List&lt;Student&gt; stuList = Arrays.asList(</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;张三&quot;</span>, <span class="number">28</span>, <span class="number">4800</span>,Course.JAVA),</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;李四&quot;</span>, <span class="number">36</span>, <span class="number">7200</span>,Course.JAVA),</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;王五&quot;</span>, <span class="number">19</span>, <span class="number">9600</span>,Course.HTML),</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;赵六&quot;</span>, <span class="number">42</span>, <span class="number">6100</span>,Course.HTML),</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;孙七&quot;</span>, <span class="number">23</span>, <span class="number">9600</span>,Course.PYTHON),</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;吴八&quot;</span>, <span class="number">31</span>, <span class="number">3000</span>,Course.PYTHON),</span><br><span class="line">   <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;李四&quot;</span>, <span class="number">36</span>, <span class="number">7200</span>,Course.JAVA));</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//需求1：过滤掉小于5000的学生对象</span></span><br><span class="line">Stream&lt;Student&gt; stream = stuList.stream().filter((x)-&gt; &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;中间操作&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> x.getSalary()&gt;<span class="number">5000</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//迭代输出流里的数据就等同于终止操作</span></span><br><span class="line"><span class="comment">//迭代功能在forEach()中完成，称为内部迭代（集合使用iterator()称为外部迭代）</span></span><br><span class="line">stream.forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test02</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//需求2：过滤掉小于5000的学生对象，并显示3条</span></span><br><span class="line"><span class="comment">//注意：因为限制了数据条数，所以满足数据条数后，后续的操作就不再运行了，效率就提高了</span></span><br><span class="line">Stream&lt;Student&gt; stream = stuList.stream().filter((x)-&gt; &#123;</span><br><span class="line">System.out.println(<span class="string">&quot;短路&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> x.getSalary()&gt;<span class="number">5000</span>;</span><br><span class="line">&#125;).limit(<span class="number">3</span>);</span><br><span class="line"><span class="comment">//迭代输出流里的数据就等同于终止操作</span></span><br><span class="line"><span class="comment">//迭代功能在forEach()中完成，称为内部迭代（集合使用iterator()称为外部迭代）</span></span><br><span class="line">stream.forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test03</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//需求3：过滤掉小于5000的学生对象，并跳过第1个学生对象</span></span><br><span class="line">Stream&lt;Student&gt; stream = stuList.stream().</span><br><span class="line">filter((x)-&gt; x.getSalary()&gt;<span class="number">5000</span>).</span><br><span class="line">skip(<span class="number">1</span>);</span><br><span class="line"><span class="comment">//迭代输出流里的数据就等同于终止操作</span></span><br><span class="line"><span class="comment">//迭代功能在forEach()中完成，称为内部迭代（集合使用iterator()称为外部迭代）</span></span><br><span class="line">stream.forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test04</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//需求4：过滤掉小于5000的学生对象，并筛选掉重复元素</span></span><br><span class="line">        <span class="comment">//Stream底层通过元素对象(Student对象)的hashCode()和equals()方法去除重复元素</span></span><br><span class="line">Stream&lt;Student&gt; stream = stuList.stream().</span><br><span class="line">filter((x)-&gt; x.getSalary()&gt;<span class="number">5000</span>).</span><br><span class="line">distinct();</span><br><span class="line"></span><br><span class="line"><span class="comment">//迭代输出流里的数据就等同于终止操作</span></span><br><span class="line"><span class="comment">//迭代功能在forEach()中完成，称为内部迭代（集合使用iterator()称为外部迭代）</span></span><br><span class="line">stream.forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Course</span>&#123;<span class="comment">//课程枚举</span></span><br><span class="line">JAVA,HTML,PYTHON;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>&#123;<span class="comment">//学生类</span></span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"><span class="keyword">private</span> <span class="type">double</span> salary;</span><br><span class="line"><span class="keyword">private</span> Course course;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="中间操作-映射"><a href="#中间操作-映射" class="headerlink" title="中间操作 - 映射"></a>中间操作 - 映射</h4><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>map(Function&lt;?, ? &gt; mapper)</td><td>将流中所有元素映射成一个新的元素或者提取信息</td></tr><tr><td>flatMap(Function&lt;?, ? extends Stream&lt;? &gt;&gt; mapper)</td><td>将流中的流整合（整合成平面&#x2F;平铺流）</td></tr></tbody></table><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line"></span><br><span class="line">List&lt;String&gt; nameList = Arrays.asList(<span class="string">&quot;张三&quot;</span>,<span class="string">&quot;李四&quot;</span>,<span class="string">&quot;王五&quot;</span>,<span class="string">&quot;赵六&quot;</span>,<span class="string">&quot;孙七&quot;</span>,<span class="string">&quot;吴八&quot;</span>);</span><br><span class="line">List&lt;Student&gt; stuList = Arrays.asList(</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;张三&quot;</span>, <span class="number">28</span>, <span class="number">4800</span>,Course.JAVA),</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;李四&quot;</span>, <span class="number">36</span>, <span class="number">7200</span>,Course.JAVA),</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;王五&quot;</span>, <span class="number">19</span>, <span class="number">9600</span>,Course.HTML),</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;赵六&quot;</span>, <span class="number">42</span>, <span class="number">6100</span>,Course.HTML),</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;孙七&quot;</span>, <span class="number">23</span>, <span class="number">9600</span>,Course.PYTHON),</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;吴八&quot;</span>, <span class="number">31</span>, <span class="number">3000</span>,Course.PYTHON),</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;李四&quot;</span>, <span class="number">36</span>, <span class="number">7200</span>,Course.JAVA));</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//map() - 将流中所有元素映射成一个新的元素 或者 提取信息</span></span><br><span class="line">        </span><br><span class="line"><span class="comment">//方式1：映射成一个新的元素</span></span><br><span class="line">        <span class="comment">//需求：//需求：nameList获取流对象，打印出所有学生的姓氏</span></span><br><span class="line">nameList.stream().map((str)-&gt; str.charAt(<span class="number">0</span>)).forEach(System.out::println);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//方式2：映射成提取信息</span></span><br><span class="line">        <span class="comment">//需求：把原来流中的学生对象替换成学生姓名</span></span><br><span class="line">stuList.stream().map((stu)-&gt; stu.getName()).forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test02</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//带着需求学flatMap()</span></span><br><span class="line"><span class="comment">//flatMap() - 将流中的流整合（整合成平面/平铺流）</span></span><br><span class="line"><span class="comment">//需求：将nameList里的字符串转换为字符输出</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//解决方案1：使用map()完成需求，可以看到流里包含另外的流，非常麻烦</span></span><br><span class="line">Stream&lt;Stream&lt;Character&gt;&gt; stream = nameList.stream().</span><br><span class="line">map(Test1::getCharacterStream);<span class="comment">//&#123;&#123;&#x27;张&#x27;,&#x27;三&#x27;&#125;,&#123;&#x27;李&#x27;,&#x27;四&#x27;&#125;,...&#125;</span></span><br><span class="line">stream.forEach((sm) -&gt; &#123;</span><br><span class="line">sm.forEach(System.out::println);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//解决方案2：使用flatMap()完成需求，将流中的流一并整合</span></span><br><span class="line">nameList.stream().flatMap((str)-&gt; getCharacterStream(str)).</span><br><span class="line">forEach(System.out::println);<span class="comment">//&#123;&#x27;张&#x27;,&#x27;三&#x27;&#125;,&#123;&#x27;李&#x27;,&#x27;四&#x27;&#125;,...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//将字符串拆分出字符转换为流的方法</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Stream&lt;Character&gt; <span class="title function_">getCharacterStream</span><span class="params">(String str)</span>&#123;</span><br><span class="line">ArrayList&lt;Character&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (Character c : str.toCharArray()) &#123;</span><br><span class="line">list.add(c);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> list.stream();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Course</span>&#123;<span class="comment">//课程枚举</span></span><br><span class="line">JAVA,HTML,PYTHON;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span>&#123;<span class="comment">//学生类</span></span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"><span class="keyword">private</span> <span class="type">double</span> salary;</span><br><span class="line"><span class="keyword">private</span> Course course;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="中间操作-排序"><a href="#中间操作-排序" class="headerlink" title="中间操作 - 排序"></a>中间操作 - 排序</h4><table><thead><tr><th>方法</th><th>解释</th></tr></thead><tbody><tr><td>sorted()</td><td>使用元素原有排序规则 - Comparable<T></td></tr><tr><td>sorted(Comparator&lt;? super T&gt; comparator)</td><td>使用自定义排序规则 - Comparator<T></td></tr></tbody></table><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line">List&lt;Student&gt; stuList = Arrays.asList(</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;张三&quot;</span>, <span class="number">28</span>, <span class="number">4800</span>,Course.JAVA),</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;李四&quot;</span>, <span class="number">36</span>, <span class="number">7200</span>,Course.JAVA),</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;王五&quot;</span>, <span class="number">19</span>, <span class="number">9600</span>,Course.HTML),</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;赵六&quot;</span>, <span class="number">42</span>, <span class="number">6100</span>,Course.HTML),</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;孙七&quot;</span>, <span class="number">23</span>, <span class="number">9600</span>,Course.PYTHON),</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;吴八&quot;</span>, <span class="number">31</span>, <span class="number">3000</span>,Course.PYTHON),</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;吴八&quot;</span>, <span class="number">31</span>, <span class="number">3000</span>,Course.PYTHON));</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">//使用元素原有排序规则（Comparable&lt;T&gt;）</span></span><br><span class="line">        <span class="comment">//需求：按照年龄排序</span></span><br><span class="line">stuList.stream().sorted().forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test02</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//使用自定义排序规则（Comparator&lt;T&gt;）</span></span><br><span class="line">        <span class="comment">//需求：按照工资排序</span></span><br><span class="line">stuList.stream().sorted((e1,e2)-&gt;&#123;</span><br><span class="line"><span class="keyword">if</span>(e1.getSalary() == e2.getSalary())&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> (<span class="type">int</span>)(e1.getSalary() - e2.getSalary());</span><br><span class="line">&#125;).forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Course</span>&#123;<span class="comment">//课程枚举</span></span><br><span class="line">JAVA,HTML,PYTHON;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">implements</span> <span class="title class_">Comparable</span>&lt;Student&gt;&#123;<span class="comment">//学生类</span></span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"><span class="keyword">private</span> <span class="type">double</span> salary;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="终止操作-匹配与查找"><a href="#终止操作-匹配与查找" class="headerlink" title="终止操作 - 匹配与查找"></a>终止操作 - 匹配与查找</h4><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>allMatch(Predicate&lt;? super T&gt; predicate)</td><td>检查是否匹配所有元素</td></tr><tr><td>anyMatch(Predicate&lt;? super T&gt; predicate)</td><td>检查是否匹配至少一个元素</td></tr><tr><td>noneMatch(Predicate&lt;? super T&gt; predicate)</td><td>检查是否没有匹配所有元素</td></tr><tr><td>findFirst()</td><td>返回第一个元素</td></tr><tr><td>findAny()</td><td>返回任意一个元素（但效果不好）</td></tr><tr><td>count()</td><td>返回流中元素的个数</td></tr><tr><td>max(Comparator&lt;? super T&gt; comparator)</td><td>返回流中最大值</td></tr><tr><td>min(Comparator&lt;? super T&gt; comparator)</td><td>返回流中最小值</td></tr></tbody></table><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line">List&lt;Student&gt; stuList = Arrays.asList(</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;张三&quot;</span>, <span class="number">28</span>, <span class="number">4800</span>,Course.JAVA),</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;李四&quot;</span>, <span class="number">36</span>, <span class="number">7200</span>,Course.JAVA),</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;王五&quot;</span>, <span class="number">19</span>, <span class="number">9600</span>,Course.HTML),</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;赵六&quot;</span>, <span class="number">42</span>, <span class="number">6100</span>,Course.HTML),</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;孙七&quot;</span>, <span class="number">23</span>, <span class="number">9600</span>,Course.PYTHON),</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;吴八&quot;</span>, <span class="number">31</span>, <span class="number">3000</span>,Course.PYTHON),</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;吴八&quot;</span>, <span class="number">31</span>, <span class="number">3000</span>,Course.PYTHON));</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//需求1：检查流中素所有元素是否匹配 工资&gt;5000</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">allMatch</span> <span class="operator">=</span> stuList.stream().allMatch((stu) -&gt; stu.getSalary()&gt;<span class="number">5000</span>);</span><br><span class="line">System.out.println(allMatch);</span><br><span class="line"></span><br><span class="line"><span class="comment">//需求2：检查流中素所有元素至少匹配一个 工资&gt;5000</span></span><br><span class="line"><span class="type">boolean</span>  <span class="variable">anyMatch</span> <span class="operator">=</span> stuList.stream().anyMatch((stu) -&gt; stu.getSalary()&gt;<span class="number">5000</span>);</span><br><span class="line">System.out.println(anyMatch);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//需求3：检查流中素所有元素是否没有匹配 工资&gt;5000</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">noneMatch</span> <span class="operator">=</span> stuList.stream().noneMatch((stu) -&gt; </span><br><span class="line">                stu.getSalary()&gt;<span class="number">5000</span>);</span><br><span class="line">System.out.println(noneMatch);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//需求3：返回工资最高的学生信息</span></span><br><span class="line">Optional&lt;Student&gt; findFirst = stuList.stream().</span><br><span class="line">sorted((stu1,stu2)-&gt;Double.compare(</span><br><span class="line">                    stu1.getSalary(),stu2.getSalary())).</span><br><span class="line">findFirst();</span><br><span class="line"><span class="type">Student</span> <span class="variable">stu</span> <span class="operator">=</span> findFirst.get();</span><br><span class="line"><span class="comment">//这种写法防止NullPointerException出现</span></span><br><span class="line"><span class="comment">//Student stu = findFirst.orElse(new Student());</span></span><br><span class="line">System.out.println(stu);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//需求4：返回随机学生信息（但效果不好）</span></span><br><span class="line">Optional&lt;Student&gt; findAny = stuList.stream().findAny();</span><br><span class="line"><span class="type">Student</span> <span class="variable">stu</span> <span class="operator">=</span> findAny.get();</span><br><span class="line">System.out.println(stu);</span><br><span class="line">        </span><br><span class="line">       <span class="comment">//需求5：获取学生个数</span></span><br><span class="line"><span class="type">long</span> <span class="variable">count</span> <span class="operator">=</span> stuList.stream().count();</span><br><span class="line">System.out.println(count);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//需求6：获取最高工资的学生信息</span></span><br><span class="line">Optional&lt;Student&gt; max = stuList.stream().</span><br><span class="line">max((stu1,stu2)-&gt;Double.compare(stu1.getSalary(),stu2.getSalary()));</span><br><span class="line">System.out.println(max.get());</span><br><span class="line">        </span><br><span class="line">       <span class="comment">//需求7：获取最工资的学生信息</span></span><br><span class="line">Optional&lt;Student&gt; min = stuList.stream().</span><br><span class="line">min((stu1,stu2)-&gt;Double.compare(stu1.getSalary(),stu2.getSalary()));</span><br><span class="line">System.out.println(min.get());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Course</span>&#123;<span class="comment">//课程枚举</span></span><br><span class="line">JAVA,HTML,PYTHON;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">implements</span> <span class="title class_">Comparable</span>&lt;Student&gt;&#123;<span class="comment">//学生类</span></span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"><span class="keyword">private</span> <span class="type">double</span> salary;</span><br><span class="line"><span class="keyword">private</span> Course course;</span><br><span class="line">   ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="终止操作-归约"><a href="#终止操作-归约" class="headerlink" title="终止操作 - 归约"></a>终止操作 - 归约</h4><blockquote><p>归约：将流中的元素反复结合起来，得到一个值 </p><p>map+reduce的连接通常称为map_reduce模式，因Google用它进行网络搜索而出名</p></blockquote><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>reduce( T identity , BinaryOperator<T> accumulator)</td><td>参数：(初始值，结合逻辑)</td></tr><tr><td>reduce(BinaryOperator<T> accumulator)</td><td>参数：(结合逻辑)</td></tr></tbody></table><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line"></span><br><span class="line">List&lt;Integer&gt; numList = Arrays.asList(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>);</span><br><span class="line">List&lt;Student&gt; stuList = Arrays.asList(</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;张三&quot;</span>, <span class="number">28</span>, <span class="number">4800</span>,Course.JAVA),</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;李四&quot;</span>, <span class="number">36</span>, <span class="number">7200</span>,Course.JAVA),</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;王五&quot;</span>, <span class="number">19</span>, <span class="number">9600</span>,Course.HTML),</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;赵六&quot;</span>, <span class="number">42</span>, <span class="number">6100</span>,Course.HTML),</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;孙七&quot;</span>, <span class="number">23</span>, <span class="number">9600</span>,Course.PYTHON),</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;吴八&quot;</span>, <span class="number">31</span>, <span class="number">3000</span>,Course.PYTHON),</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;李四&quot;</span>, <span class="number">36</span>, <span class="number">7200</span>,Course.JAVA));</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//需求：获取numList集合中元素的总和</span></span><br><span class="line"><span class="type">Integer</span> <span class="variable">reduce</span> <span class="operator">=</span> numList.stream().</span><br><span class="line">reduce(<span class="number">0</span>, (x,y)-&gt;x+y);</span><br><span class="line">System.out.println(reduce);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test02</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//需求：获取stuList集合中所有学生工资总和</span></span><br><span class="line">Optional&lt;Double&gt; reduce = stuList.stream().</span><br><span class="line">map(Student::getSalary).reduce(Double::sum);</span><br><span class="line"><span class="type">Double</span> <span class="variable">sumSalary</span> <span class="operator">=</span> reduce.get();</span><br><span class="line">System.out.println(sumSalary);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Course</span>&#123;<span class="comment">//课程枚举</span></span><br><span class="line">JAVA,HTML,PYTHON;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">implements</span> <span class="title class_">Comparable</span>&lt;Student&gt;&#123;<span class="comment">//学生类</span></span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"><span class="keyword">private</span> <span class="type">double</span> salary;</span><br><span class="line"><span class="keyword">private</span> Course course;</span><br></pre></td></tr></table></figure><h4 id="终止操作-收集"><a href="#终止操作-收集" class="headerlink" title="终止操作 - 收集"></a>终止操作 - 收集</h4><blockquote><p>收集：将流转换为其他形式。接收一个Collector接口的实现，用于给Stream中元素做汇总的方法</p></blockquote><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>collect(Collector&lt;? super T, A, R&gt; collector)</td><td>把元素放入Collector集合中</td></tr></tbody></table><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line"></span><br><span class="line">List&lt;Student&gt; stuList = Arrays.asList(</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;张三&quot;</span>, <span class="number">28</span>, <span class="number">4800</span>,Course.JAVA),</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;李四&quot;</span>, <span class="number">36</span>, <span class="number">7200</span>,Course.JAVA),</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;王五&quot;</span>, <span class="number">19</span>, <span class="number">9600</span>,Course.HTML),</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;赵六&quot;</span>, <span class="number">42</span>, <span class="number">6100</span>,Course.HTML),</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;孙七&quot;</span>, <span class="number">23</span>, <span class="number">9600</span>,Course.PYTHON),</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;吴八&quot;</span>, <span class="number">31</span>, <span class="number">3000</span>,Course.PYTHON),</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;李四&quot;</span>, <span class="number">36</span>, <span class="number">7200</span>,Course.JAVA));</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//把数据收集到集合中</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//需求1：把当前学生姓名提取出来，并把数据放入List集合中</span></span><br><span class="line">List&lt;String&gt; list = stuList.stream().</span><br><span class="line">map(Student::getName).</span><br><span class="line">collect(Collectors.toList());</span><br><span class="line">list.forEach(System.out::println);</span><br><span class="line"></span><br><span class="line"><span class="comment">//需求2：把当前学生姓名提取出来，并把数据放入Set集合中</span></span><br><span class="line">Set&lt;String&gt; set = stuList.stream().</span><br><span class="line">map(Student::getName).collect(Collectors.toSet());</span><br><span class="line">set.forEach(System.out::println);</span><br><span class="line"></span><br><span class="line"><span class="comment">//需求3：把当前学生姓名提取出来，并把数据放入指定集合中</span></span><br><span class="line">HashSet&lt;String&gt; hashSet = stuList.stream().</span><br><span class="line">map(Student::getName).collect(Collectors.toCollection(HashSet::<span class="keyword">new</span>));</span><br><span class="line">hashSet.forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test02</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//收集流中的各种数据</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//需求1：收集/获取学生个数</span></span><br><span class="line"><span class="type">Long</span> <span class="variable">count</span> <span class="operator">=</span> stuList.stream().</span><br><span class="line">map(Student::getName).collect(Collectors.counting());</span><br><span class="line">System.out.println(count);</span><br><span class="line"></span><br><span class="line"><span class="comment">//需求2：收集/获取学生平均工资</span></span><br><span class="line"><span class="type">Double</span> <span class="variable">avg</span> <span class="operator">=</span> stuList.stream().</span><br><span class="line">collect(Collectors.averagingDouble(Student::getSalary));</span><br><span class="line">System.out.println(avg);</span><br><span class="line"></span><br><span class="line"><span class="comment">//需求3：收集/获取学生总工资</span></span><br><span class="line"><span class="type">Double</span> <span class="variable">sum</span> <span class="operator">=</span> stuList.stream().</span><br><span class="line">collect(Collectors.summingDouble(Student::getSalary));</span><br><span class="line">System.out.println(sum);</span><br><span class="line"></span><br><span class="line"><span class="comment">//需求4：收集/获取学生工资最大值</span></span><br><span class="line">Optional&lt;Double&gt; max = stuList.stream().map(Student::getSalary).</span><br><span class="line">collect(Collectors.maxBy(Double::compareTo));</span><br><span class="line">System.out.println(max.get());</span><br><span class="line"></span><br><span class="line"><span class="comment">//需求5：收集/获取学生工资最小值</span></span><br><span class="line">Optional&lt;Double&gt; min = stuList.stream().map(Student::getSalary).</span><br><span class="line">collect(Collectors.minBy(Double::compareTo));</span><br><span class="line">System.out.println(min.get());</span><br><span class="line"></span><br><span class="line"><span class="comment">//需求6：收集/获取工资最多的学生信息</span></span><br><span class="line">Optional&lt;Student&gt; maxStu = stuList.stream().</span><br><span class="line">collect(Collectors.maxBy(</span><br><span class="line">(stu1,stu2)-&gt; (<span class="type">int</span>)(stu1.getSalary()-stu2.getSalary())));</span><br><span class="line">System.out.println(maxStu.get());</span><br><span class="line"></span><br><span class="line"><span class="comment">//需求7：收集/获取工资最多的学生信息</span></span><br><span class="line">Optional&lt;Student&gt; minStu = stuList.stream().</span><br><span class="line">collect(Collectors.maxBy(</span><br><span class="line">                    (stu1,stu2)-&gt; -(<span class="type">int</span>)(stu1.getSalary()-stu2.getSalary())));</span><br><span class="line">System.out.println(minStu.get());</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test03</span><span class="params">()</span> &#123;<span class="comment">//分组</span></span><br><span class="line"><span class="comment">//需求：按照学科分组</span></span><br><span class="line">Map&lt;Course, List&lt;Student&gt;&gt; map = stuList.stream().collect(</span><br><span class="line">            Collectors.groupingBy(Student::getCourse));</span><br><span class="line">System.out.println(map);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test04</span><span class="params">()</span> &#123;<span class="comment">//多级分组</span></span><br><span class="line"><span class="comment">//需求：按照学科分组，在按照年龄分组</span></span><br><span class="line">Map&lt;Course, Map&lt;String, List&lt;Student&gt;&gt;&gt; map = stuList.stream().</span><br><span class="line">collect(Collectors.groupingBy(</span><br><span class="line">Student::getCourse,Collectors.groupingBy((stu)-&gt;&#123;</span><br><span class="line"><span class="keyword">if</span>(((Student)stu).getAge() &lt; <span class="number">28</span>)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;青年&quot;</span>;</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(((Student)stu).getAge() &lt; <span class="number">40</span>)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;中年&quot;</span>;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;老年&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;)));</span><br><span class="line">System.out.println(map);</span><br><span class="line">&#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test05</span><span class="params">()</span> &#123;<span class="comment">//分区</span></span><br><span class="line">        <span class="comment">//需求：按照工资5000为标准分区</span></span><br><span class="line">Map&lt;Boolean, List&lt;Student&gt;&gt; map = stuList.stream().collect(</span><br><span class="line">Collectors.partitioningBy((stu) -&gt; stu.getSalary()&gt;<span class="number">5000</span>));</span><br><span class="line">System.out.println(map);</span><br><span class="line">&#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test06</span><span class="params">()</span> &#123;<span class="comment">//获取元素中字段的各种信息</span></span><br><span class="line"><span class="comment">//需求：获取学生工资信息，再获取总值、平均值、最大值、最小值</span></span><br><span class="line"><span class="type">DoubleSummaryStatistics</span> <span class="variable">collect</span> <span class="operator">=</span> stuList.stream().collect(</span><br><span class="line">Collectors.summarizingDouble(Student::getSalary));</span><br><span class="line">System.out.println(collect.getSum());</span><br><span class="line">System.out.println(collect.getAverage());</span><br><span class="line">System.out.println(collect.getMax());</span><br><span class="line">System.out.println(collect.getMin());</span><br><span class="line">&#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test07</span><span class="params">()</span> &#123;<span class="comment">//拼接信息</span></span><br><span class="line"><span class="comment">//需求：拼接学生姓名</span></span><br><span class="line"><span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span> stuList.stream().map(Student::getName).collect(</span><br><span class="line">Collectors.joining());</span><br><span class="line">System.out.println(str1);</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">str2</span> <span class="operator">=</span> stuList.stream().map(Student::getName).collect(</span><br><span class="line">Collectors.joining(<span class="string">&quot;,&quot;</span>));</span><br><span class="line">System.out.println(str2);</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">str3</span> <span class="operator">=</span> stuList.stream().map(Student::getName).collect(</span><br><span class="line">Collectors.joining(<span class="string">&quot;,&quot;</span>,<span class="string">&quot;--&quot;</span>,<span class="string">&quot;--&quot;</span>));</span><br><span class="line">System.out.println(str3);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Course</span>&#123;<span class="comment">//课程枚举</span></span><br><span class="line">JAVA,HTML,PYTHON;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">implements</span> <span class="title class_">Comparable</span>&lt;Student&gt;&#123;<span class="comment">//学生类</span></span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"><span class="keyword">private</span> <span class="type">double</span> salary;</span><br><span class="line"><span class="keyword">private</span> Course course;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="并行流与串行流"><a href="#并行流与串行流" class="headerlink" title="并行流与串行流"></a>并行流与串行流</h3><blockquote><p>并行流就是把一个内容拆分成多个数据块，并用不同的线程分别处理每个数据块的流。Java8中将并行进行了优化，我们可以很容易的对数据进行并行操作。Stream API可以声明性地通过 parallel() - 并行流 与sequential()-顺序流 之间进行切换。</p><p>注意</p><ol><li>默认为顺序流&#x2F;串行流</li><li>并行流一般在大数据搜索里使用到</li><li>JDK1.8之前也有并行流，叫做Fork&#x2F;Join并行计算框架</li></ol></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//需求：使用并行流计算1-10000000L之和</span></span><br><span class="line"><span class="type">OptionalLong</span> <span class="variable">reduce</span> <span class="operator">=</span> LongStream.</span><br><span class="line">            range(<span class="number">0</span>, <span class="number">10000001L</span>).<span class="comment">//生成1-10000000的数流</span></span><br><span class="line">            parallel().<span class="comment">//转换为并行流</span></span><br><span class="line">            reduce(Long::sum);<span class="comment">//求和</span></span><br><span class="line">System.out.println(reduce);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Optional"><a href="#Optional" class="headerlink" title="Optional"></a>Optional</h3><blockquote><p>Optional<T>类(java. util. Optional)是一个容器类，代表一个存在或不存在的值，原来用null表示一个值不</p><p>存在，现在Optional可以更好的表达这个概念。并且可以避免空指针异常</p><p>此类的设计就是更好的避免空指针异常</p></blockquote><table><thead><tr><th>方法</th><th>描述</th></tr></thead><tbody><tr><td>Optional.of(T t)</td><td>创建一个Optional实例</td></tr><tr><td>Optional.empty()</td><td>创建一 个空的 Optional实例</td></tr><tr><td>Optional.ofNullable(T t)</td><td>若t不为null,创建Optional实例,否则创建空实例</td></tr><tr><td>get()</td><td>获取Optional实例里的对象</td></tr><tr><td>isPresent()</td><td>判断是否包含值</td></tr><tr><td>orElse(T t)</td><td>如果调用对象包含值, 返回该值，否则返回t</td></tr><tr><td>orElseGet(Supplier s)</td><td>如果调用对象包含值，返回该值,否则返回s获取的值</td></tr><tr><td>map(Function f)</td><td>如果有值对其处理，并返回处理后的Optional,否则返回optional. empty()</td></tr><tr><td>flatMap(Function mapper)</td><td>与map 类似，要求返回值必须是Optional</td></tr></tbody></table><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//创建一个Optional实例，把对象封装到Optional容器里</span></span><br><span class="line"><span class="comment">//Optional&lt;Student&gt; op = Optional.of(</span></span><br><span class="line"><span class="comment">//          new Student(&quot;aaa&quot;, 26, 6666, Course.HTML));</span></span><br><span class="line"><span class="comment">//创建一个空的Optional容器</span></span><br><span class="line"><span class="comment">//Optional&lt;Student&gt; op = Optional.empty();</span></span><br><span class="line"><span class="comment">//创建一个Optional实例，若对象为null-&gt;创建空实例，若对象为不为null-&gt;创建Optional实例</span></span><br><span class="line">Optional&lt;Student&gt; op = Optional.ofNullable(</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;bbb&quot;</span>, <span class="number">26</span>, <span class="number">7777</span>, Course.PYTHON));</span><br><span class="line"></span><br><span class="line"><span class="comment">//判断容器里是否包含对象</span></span><br><span class="line"><span class="keyword">if</span>(op.isPresent())&#123;<span class="comment">//包含</span></span><br><span class="line">System.out.println(<span class="string">&quot;获取容器里的对象：&quot;</span> + op.get().getName());</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;<span class="comment">//不包含</span></span><br><span class="line">System.out.println(<span class="string">&quot;容器里的对象为null&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//如果容器里有对象就返回，否则就返回新对象</span></span><br><span class="line"><span class="type">Student</span> <span class="variable">stu</span> <span class="operator">=</span> op.orElse(<span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;ccc&quot;</span>, <span class="number">26</span>, <span class="number">8888</span>, Course.JAVA));</span><br><span class="line">System.out.println(stu.getName());</span><br><span class="line"></span><br><span class="line"><span class="comment">//不同情况下可以返回不同对象，orElseGet()比orElse()可变性更强</span></span><br><span class="line"><span class="type">boolean</span> <span class="variable">bool</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">stu = op.orElseGet(()-&gt;&#123;</span><br><span class="line"><span class="keyword">if</span>(bool)&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;吴彦祖&quot;</span>, <span class="number">26</span>, <span class="number">8888</span>, Course.JAVA);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;麻生希&quot;</span>, <span class="number">26</span>, <span class="number">8888</span>, Course.JAVA);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取原容器中的某个值并返回新容器中</span></span><br><span class="line"><span class="comment">//map(Function&lt;? super T, ? extends U&gt; mapper)</span></span><br><span class="line">Optional&lt;String&gt; map = op.map(Student::getName);</span><br><span class="line">System.out.println(map.get());</span><br><span class="line"></span><br><span class="line"><span class="comment">//与map 类似，要求返回值必须是Optional</span></span><br><span class="line"><span class="comment">//flatMap(Function&lt;? super T, Optional&lt;U&gt;&gt; mapper)</span></span><br><span class="line">Optional&lt;String&gt; flatMap = op.flatMap((e)-&gt;Optional.of(e.getName()));</span><br><span class="line">System.out.println(flatMap.get());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Course</span>&#123;<span class="comment">//课程枚举</span></span><br><span class="line">JAVA,HTML,PYTHON;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">implements</span> <span class="title class_">Comparable</span>&lt;Student&gt;&#123;<span class="comment">//学生类</span></span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"><span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"><span class="keyword">private</span> <span class="type">double</span> salary;</span><br><span class="line"><span class="keyword">private</span> Course course;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="接口的默认方法与静态方法"><a href="#接口的默认方法与静态方法" class="headerlink" title="接口的默认方法与静态方法"></a>接口的默认方法与静态方法</h3><blockquote><p>从JDK1.8开始，接口中可以有默认方法，既default修饰的方法，此方法可以让接口的实现类所调用，而接</p><p>口中的静态方法直接用接口名调用即可</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">MyClass</span> <span class="variable">myClass</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyClass</span>();</span><br><span class="line">myClass.defaultMethod();</span><br><span class="line"></span><br><span class="line">I1.staticMethod();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">I1</span>&#123;</span><br><span class="line"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">defaultMethod</span><span class="params">()</span>&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;接口中的默认方法&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">staticMethod</span><span class="params">()</span>&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;接口中的静态方法&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> <span class="keyword">implements</span> <span class="title class_">I1</span>&#123;&#125;</span><br></pre></td></tr></table></figure><blockquote><p>接口默认方法的”类优先”原则：</p><ul><li><p>如果一个接口中定义了一个默认方法，而接口实现类的父类定义了一个同名的方法时，选择父类中的方法</p></li><li><p>接口冲突：如果一个父接口提供一个默认方法，而另一个接口也提供了一个具有相同名称和参数列表的方法(不管方法是否是默认方法)，那么必须覆盖该方法来解决冲突</p></li></ul></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">MyClass</span> <span class="variable">myClass</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyClass</span>();</span><br><span class="line">MyClass.method();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">I1</span>&#123;</span><br><span class="line"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span>&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;I1接口中的默认方法&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Father</span> &#123;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span>&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;Father类中的默认方法&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> <span class="keyword">extends</span> <span class="title class_">Father</span> <span class="keyword">implements</span> <span class="title class_">I1</span> &#123;&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="type">MyClass</span> <span class="variable">myClass</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyClass</span>();</span><br><span class="line">myClass.method();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">I1</span>&#123;</span><br><span class="line"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span>&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;I1接口中的默认方法&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">I2</span>&#123;</span><br><span class="line"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span>&#123;</span><br><span class="line">System.out.println(<span class="string">&quot;I2接口中的默认方法&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> <span class="keyword">implements</span> <span class="title class_">I1</span>,I2 &#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//I1.super.method();</span></span><br><span class="line">I2.<span class="built_in">super</span>.method();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="日期组件"><a href="#日期组件" class="headerlink" title="日期组件"></a>日期组件</h3><blockquote><p>JDK1.8提供的新日期类都是不可变的，既不管怎么样的改变，都会产生一个新的实例，他们都是线程安全的</p><p>日期组件遵循与IOS-8601世界时间标准</p></blockquote><h4 id="组件简介"><a href="#组件简介" class="headerlink" title="组件简介"></a>组件简介</h4><table><thead><tr><th>包路径</th><th>类名</th><th>描述</th></tr></thead><tbody><tr><td>java.time</td><td></td><td>针对日期和时间操作的包</td></tr><tr><td></td><td>LocalDate</td><td>用于表示日期的类</td></tr><tr><td></td><td>LocalTime</td><td>用于表示时间的类</td></tr><tr><td></td><td>LocalDateTime</td><td>用于表示日期时间的类</td></tr><tr><td></td><td>Instant</td><td>时间戳类（1970.1.1 0:0:0 到线程的毫秒数）</td></tr><tr><td></td><td>Period</td><td>两个日期间隔类</td></tr><tr><td></td><td>Duration</td><td>两个时间间隔类</td></tr><tr><td>java.time.chrono</td><td></td><td>针对日期时间特殊格式操作的包</td></tr><tr><td></td><td>JapaneseChronology</td><td>日本帝国历法系统类</td></tr><tr><td></td><td>ThaiBuddhistChronology</td><td>泰国佛教日历系统类</td></tr><tr><td>java.time.format</td><td></td><td>针对时间日期时间格式化操作的包</td></tr><tr><td></td><td>DateTimeFormatter</td><td>格式化日期时间类</td></tr><tr><td>java.time.temporal</td><td></td><td>针对时间矫正操作的包</td></tr><tr><td>java.time.zone</td><td></td><td>针对时区操作的包</td></tr></tbody></table><h4 id="日期时间类、时间戳、间隔类"><a href="#日期时间类、时间戳、间隔类" class="headerlink" title="日期时间类、时间戳、间隔类"></a>日期时间类、时间戳、间隔类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//LocalDate LocalTime LocalDateTime</span></span><br><span class="line"><span class="comment">//这三个日期类的使用大致一样</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//获取当前日期时间对象</span></span><br><span class="line"><span class="type">LocalDateTime</span> <span class="variable">ldt1</span> <span class="operator">=</span> LocalDateTime.now();</span><br><span class="line">System.out.println(ldt1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取指定日期时间对象</span></span><br><span class="line"><span class="type">LocalDateTime</span> <span class="variable">ldt2</span> <span class="operator">=</span> LocalDateTime.of(<span class="number">2020</span>, <span class="number">1</span>, <span class="number">23</span>, <span class="number">8</span>, <span class="number">30</span>, <span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line">System.out.println(ldt2);</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取ldt1推后的时间日期对象</span></span><br><span class="line"><span class="type">LocalDateTime</span> <span class="variable">ldt3</span> <span class="operator">=</span> ldt1.plusYears(<span class="number">2</span>);</span><br><span class="line">System.out.println(ldt3);</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取ldt1提前的时间日期对象</span></span><br><span class="line"><span class="type">LocalDateTime</span> <span class="variable">ldt4</span> <span class="operator">=</span> ldt3.minusMonths(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">System.out.println(ldt4.getYear());</span><br><span class="line">System.out.println(ldt4.getMonthValue());</span><br><span class="line">System.out.println(ldt4.getDayOfMonth());</span><br><span class="line">System.out.println(ldt4.getHour());</span><br><span class="line">System.out.println(ldt4.getMinute());</span><br><span class="line">System.out.println(ldt4.getSecond());</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test02</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//使用时间戳（从1970年1月1日0:0:0到现在的毫秒值）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//默认创建UTC(世界标准时间)时区的时间戳对象</span></span><br><span class="line"><span class="type">Instant</span> <span class="variable">now1</span> <span class="operator">=</span> Instant.now();</span><br><span class="line">System.out.println(now1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取偏移8小时的偏移日期时间对象</span></span><br><span class="line"><span class="type">OffsetDateTime</span> <span class="variable">odt</span> <span class="operator">=</span> now1.atOffset(ZoneOffset.ofHours(<span class="number">8</span>));</span><br><span class="line">System.out.println(odt);</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取时间戳的毫秒值形式</span></span><br><span class="line">System.out.println(now1.toEpochMilli());</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取一个1970年1月1日0:0:0 往后退1秒的时间戳对象</span></span><br><span class="line"><span class="type">Instant</span> <span class="variable">now2</span> <span class="operator">=</span> Instant.ofEpochSecond(<span class="number">1</span>);</span><br><span class="line">System.out.println(now2);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test03</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line"><span class="comment">//Duration：时间间隔类</span></span><br><span class="line"></span><br><span class="line"><span class="type">Instant</span> <span class="variable">now1</span> <span class="operator">=</span> Instant.now();</span><br><span class="line">Thread.sleep(<span class="number">1000</span>);</span><br><span class="line"><span class="type">Instant</span> <span class="variable">now2</span> <span class="operator">=</span> Instant.now();</span><br><span class="line"><span class="comment">//获取时间间隔类对象</span></span><br><span class="line"><span class="type">Duration</span> <span class="variable">duration1</span> <span class="operator">=</span> Duration.between(now1, now2);</span><br><span class="line">System.out.println(duration1.toMillis());</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;-----------------------------&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">LocalTime</span> <span class="variable">lt1</span> <span class="operator">=</span> LocalTime.now();</span><br><span class="line">Thread.sleep(<span class="number">1000</span>);</span><br><span class="line"><span class="type">LocalTime</span> <span class="variable">lt2</span> <span class="operator">=</span> LocalTime.now();</span><br><span class="line"><span class="comment">//获取时间间隔类对象</span></span><br><span class="line"><span class="type">Duration</span> <span class="variable">duration2</span> <span class="operator">=</span> Duration.between(lt1, lt2);</span><br><span class="line">System.out.println(duration2.toMillis());</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test04</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line"><span class="comment">//Period：日期间隔类</span></span><br><span class="line">        </span><br><span class="line"><span class="type">LocalDate</span> <span class="variable">ld1</span> <span class="operator">=</span> LocalDate.now();</span><br><span class="line">Thread.sleep(<span class="number">1000</span>);</span><br><span class="line"><span class="type">LocalDate</span> <span class="variable">ld2</span> <span class="operator">=</span> LocalDate.of(<span class="number">2020</span>, <span class="number">12</span>, <span class="number">31</span>);</span><br><span class="line"></span><br><span class="line"><span class="type">Period</span> <span class="variable">period</span> <span class="operator">=</span> Period.between(ld1, ld2);</span><br><span class="line">System.out.println(period.getYears());</span><br><span class="line">System.out.println(period.getMonths());</span><br><span class="line">System.out.println(period.getDays());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="日期时间格式化类-DateTimeFormatter"><a href="#日期时间格式化类-DateTimeFormatter" class="headerlink" title="日期时间格式化类-DateTimeFormatter"></a>日期时间格式化类-DateTimeFormatter</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//格式化日期时间类</span></span><br><span class="line"></span><br><span class="line"><span class="type">LocalDateTime</span> <span class="variable">ldt1</span> <span class="operator">=</span> LocalDateTime.now();</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取本地标准的日期时间格式化对象</span></span><br><span class="line"><span class="type">DateTimeFormatter</span> <span class="variable">dtf1</span> <span class="operator">=</span> DateTimeFormatter.ISO_LOCAL_DATE_TIME;</span><br><span class="line"><span class="type">String</span> <span class="variable">strDateTime1</span> <span class="operator">=</span> ldt1.format(dtf1);<span class="comment">//格式化时间日期</span></span><br><span class="line">System.out.println(strDateTime1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//自定义日期时间格式化对象</span></span><br><span class="line"><span class="type">DateTimeFormatter</span> <span class="variable">dtf2</span> <span class="operator">=</span> DateTimeFormatter.</span><br><span class="line">            ofPattern(<span class="string">&quot;yyyy年MM月dd日 HH:mm:ss&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">strDateTime2</span> <span class="operator">=</span> ldt1.format(dtf2);<span class="comment">//格式化时间日期</span></span><br><span class="line">System.out.println(strDateTime2);</span><br><span class="line"></span><br><span class="line"><span class="comment">//将指定格式的字符串解析成LocalDateTime对象</span></span><br><span class="line"><span class="type">LocalDateTime</span> <span class="variable">parse</span> <span class="operator">=</span> LocalDateTime.parse(<span class="string">&quot;2020年03月12日 11:04:14&quot;</span>, dtf2);</span><br><span class="line">System.out.println(parse);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="时间矫正器类-TemporalAdjuster"><a href="#时间矫正器类-TemporalAdjuster" class="headerlink" title="时间矫正器类-TemporalAdjuster"></a>时间矫正器类-TemporalAdjuster</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//时间矫正器</span></span><br><span class="line"></span><br><span class="line"><span class="type">LocalDateTime</span> <span class="variable">ldt1</span> <span class="operator">=</span> LocalDateTime.now();</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置指定月份</span></span><br><span class="line"><span class="type">LocalDateTime</span> <span class="variable">ldt2</span> <span class="operator">=</span> ldt1.withMonth(<span class="number">10</span>);</span><br><span class="line">System.out.println(ldt2);</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置下一个周末</span></span><br><span class="line"><span class="type">LocalDateTime</span> <span class="variable">ldt3</span> <span class="operator">=</span> ldt1.with(TemporalAdjusters.next(DayOfWeek.SUNDAY));</span><br><span class="line">System.out.println(ldt3);</span><br><span class="line"></span><br><span class="line"><span class="comment">//自定义时间矫正器：设置下一个工作</span></span><br><span class="line"><span class="type">LocalDateTime</span> <span class="variable">ldt4</span> <span class="operator">=</span> ldt1.with((temporal)-&gt;&#123;</span><br><span class="line"><span class="type">LocalDateTime</span> <span class="variable">ldt</span> <span class="operator">=</span> (LocalDateTime) temporal;</span><br><span class="line"><span class="type">DayOfWeek</span> <span class="variable">week</span> <span class="operator">=</span> ldt.getDayOfWeek();</span><br><span class="line"><span class="keyword">if</span>(week.equals(DayOfWeek.FRIDAY))&#123;<span class="comment">//周五</span></span><br><span class="line"><span class="keyword">return</span> ldt.plusDays(<span class="number">3</span>);</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(week.equals(DayOfWeek.SATURDAY))&#123;<span class="comment">//周六</span></span><br><span class="line"><span class="keyword">return</span> ldt.plusDays(<span class="number">2</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">return</span> ldt.plusDays(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">System.out.println(ldt4);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="时区类"><a href="#时区类" class="headerlink" title="时区类"></a>时区类</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//时区类 </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//获取所有时区字符串</span></span><br><span class="line">Set&lt;String&gt; set = ZoneId.getAvailableZoneIds();</span><br><span class="line"><span class="keyword">for</span> (String str : set) &#123;</span><br><span class="line">System.out.println(str);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取指定时区的日期时间对象</span></span><br><span class="line"><span class="type">LocalDateTime</span> <span class="variable">ldt1</span> <span class="operator">=</span> LocalDateTime.now(ZoneId.of(<span class="string">&quot;Asia/Tokyo&quot;</span>));</span><br><span class="line">System.out.println(ldt1);</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取指定时区的日期时间对象 + 偏移量</span></span><br><span class="line"><span class="type">LocalDateTime</span> <span class="variable">ldt2</span> <span class="operator">=</span> LocalDateTime.now(ZoneId.of(<span class="string">&quot;Asia/Tokyo&quot;</span>));</span><br><span class="line"><span class="type">ZonedDateTime</span> <span class="variable">zonedDateTime</span> <span class="operator">=</span> ldt2.atZone(ZoneId.of(<span class="string">&quot;Asia/Tokyo&quot;</span>));</span><br><span class="line">System.out.println(zonedDateTime);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="重复注解及类型注解"><a href="#重复注解及类型注解" class="headerlink" title="重复注解及类型注解"></a>重复注解及类型注解</h3><blockquote><p>jdk1.8开始可以重复注解</p><p>ps：一个类可有多个同样的注解</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.annotation.ElementType.TYPE;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.annotation.ElementType.PARAMETER;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.annotation.ElementType.TYPE_PARAMETER;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Annotation;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Repeatable;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Retention;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.RetentionPolicy;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Target;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="comment">//重复注解</span></span><br><span class="line"><span class="meta">@Author(name=&quot;何老师&quot;)</span></span><br><span class="line"><span class="meta">@Author(name=&quot;苍老师&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//需求1：获取Test1的多个作者注解</span></span><br><span class="line">Class&lt;Test1&gt; ct = Test1.class;</span><br><span class="line">Author[] as = ct.getAnnotationsByType(Author.class);</span><br><span class="line"><span class="keyword">for</span> (Author a : as) &#123;</span><br><span class="line">System.out.println(a.name());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//需求2：获取method方法中参数里的注解</span></span><br><span class="line"><span class="type">Method</span> <span class="variable">m</span> <span class="operator">=</span> ct.getMethod(<span class="string">&quot;method&quot;</span>, String.class);</span><br><span class="line">Annotation[][] parameterAnnotations = m.getParameterAnnotations();</span><br><span class="line"><span class="comment">//获取参数中注解列表（有可能一个参数多个注解）</span></span><br><span class="line">        <span class="keyword">for</span> (Annotation[] annotations : parameterAnnotations) &#123;</span><br><span class="line"><span class="keyword">for</span> (Annotation an : annotations) &#123;<span class="comment">//获取具体注解</span></span><br><span class="line">System.out.println(an);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">method</span><span class="params">(<span class="meta">@Author(name=&quot;波老师&quot;)</span> String str)</span>&#123;&#125;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">//作者注解的容器</span></span><br><span class="line"><span class="meta">@Target(TYPE)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@interface</span> Authors&#123;</span><br><span class="line">Author[] value();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//作者注解</span></span><br><span class="line"><span class="meta">@Repeatable(Authors.class)</span></span><br><span class="line"><span class="meta">@Target(&#123;TYPE, PARAMETER,TYPE_PARAMETER&#125;)</span><span class="comment">//TYPE_PARAMETER-类型注解：作用在参数</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@interface</span> Author&#123;</span><br><span class="line">String <span class="title function_">name</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 教育 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 千锋教育 </tag>
            
            <tag> 培训 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Fork/Join并行计算框架</title>
      <link href="/posts/a3ed9ac5/"/>
      <url>/posts/a3ed9ac5/</url>
      
        <content type="html"><![CDATA[<h1 id="Fork-Join并行计算框架"><a href="#Fork-Join并行计算框架" class="headerlink" title="Fork&#x2F;Join并行计算框架"></a>Fork&#x2F;Join并行计算框架</h1><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><blockquote><p>Fork&#x2F;Join框架：在必要时将一个大任务进行拆分（fork）成若干个小任务（拆到不可再拆时），再将一个个</p><p>小任务的运行结果进行join合并，一般都是在大数据搜索中使用</p><p>Fork&#x2F;Join采用“工作窃取” 模式(work-stealing) ：</p><p>当执行新的任务时它可以将其拆分分成更小的任务执行，并将小任务加到线程队列中。在程序执行过程中如果有闲置线程，闲置线程会把其他线程的线程队列末尾的任务偷偷拿到自己的线程中执行，注意线程队列是双关，即队列里最前面的任务会被直接，最后的任务会被闲置线程拿走去执行。这种方式减少了线程的等待时间，提高了性能</p></blockquote><p><img src="data:image/jpg;base64,iVBORw0KGgoAAAANSUhEUgAAAmwAAAEfCAIAAABzqQ2AAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnMAABJzAYwiuQcAAKbNSURBVHhe7Z0FeFRX2sfZbrfd7natu939trvdbl22Xmip4VLcneLu7u7u7l4cAsQVEgIhEHcgQgxCDAtE+X53ThgmMyGZmcwkM8mZ5zwwuXPuuee+R/7n9WqP5UdSQFJAUkBSQFJAUsAoClQz6i55k6SApICkgKSApICkwGMJonISSApICkgKSApIChhJAQmiRhJO3iYpICkgKSApICkgQVTOAUkBSQFJAUkBSQEjKSBB1EjCydskBSQFJAUkBSQFJIjKOSApICkgKSApIClgJAUkiBpJOHmbpICkgKSApICkgARROQckBSQFJAUkBSQFjKSABFEjCSdvkxSQFJAUkBSQFJAgasY5UFBQYMbWZdOSApICkgKSAhVNgaoOohLnKnoGyudLCkgKSApYMQWqOoha8dDJrksKSApIClRGCkzddfnrkae/He1kCeW7Mfa1xp/Jycl/FqUliFbGOSjfSVJAUkBSwGop0HyGc/OZTsM3bBm8dkfFlqHrt3ZdfPz7MfYR8RkSRK12QsmOSwpICkgKVCUKtJzl3mHBicdKaPeKL/vcen49wuNqYqYEUdPMwezsbKlGNQ0pZSuSApICkgLFUQAQbTfvlCUgKH3Y4TighgRROVElBSQFJAUkBayFAhJErWWkZD8lBSQFJAUkBSyOAhJELW5IZIckBSQFJAUkBayFAhJErWWkZD8lBSQFJAUkBSyOAgaB6Gftx965/4KmAvVm2suXQ//l6vO25sXnPl9inJJV6kQtbn7IDlk+BVIys054x+50jtrpJIvBFNjhFLXf/dqVq7ctf6BlDy2TAvqDaFTs3/6v3gwg8zdfLan26bJqny397deL/tdm3A+9hnad3EWNmk2H9n2t/owaXUa+12Ii5YNWE2p2H/7iV4vOXn6zVGSVIGqZk0T2ynIpsPhw0I/jztSbZN9gMsVBFiMoUH+Sfe3xdu3nuSalPbDckZY9s1QK6A+izYf12W/3OUCY9fB5AYcv1lishYv9ZnboNL77m00mJ6b8Qf1T2zE96vYbVCqCSutcS50jsl+WSoElR4Jqj7dtOcuZ0mq2iyzGUUAQ8Kdpjk2nOz14lGOpoy37ZaEU0BNEU9J+V+2dtRl3X1Rj4aNHv4Yl1YTGbpO7CrDMy//Vaw2mr9z7g4vP26/8OGfB1nr6IKgEUQudIrJblkmB+JR7DSbZt5DwaaLTAzhaf7L98mPBljncslcWSwE9QfSHnkOf/3JJSvpLmnD4YvUinOjdB4Xq0qtxf529sWG1/6389edLfxrS71LIv7NzntMHR6U412LnieyYxVHAxjuu7kS78udB4dh4LtLjEh7NT42nOjab4aR/9zgNIJSuM8GO9o1jKMt+Fx3uttjD4kZadsiyKaAPiG44+G3Nn4fX6Ts4NfO3O07UWL6n1ur9PyzfXetP38/bfqLGyn0/LtlZxy/stUmrmtbuM/i3NRY1HtxvxOKWV+NeATgPOXzaelQv+NFq7635sdfgkqFUgqhlTxbZO0uiwC6nqyBZ2ZHDoBZAuEWHAy9Fppy8EPcsjAQ4W8x0Wnk8uOeyc42mOnALgMqXhlNQ2doLpKw13pYr6kc3n+nMr24BiVGJd2i/9gQ7ftUsNKI/Hhv0RpqVeaOuEkQtaZJbRV/0AdH9tp/n5v3qsw5j0jJfWvvL93M2NZi/rd7sTQ3+/MO81fu/n7el/vR1jQMiXjvk+Kl/+D8FTI5b3nzdwe80ITMn57nMe0+lwcWiqQRRq5gzspMWQQEViD7FIaORw6AbEXge84rh/TEJbjTFoVhgQ7PYf7WXoNHcA/5jt/jM3OeH+nbjmfD9blftLsVfDL91KyNrrU2YwFEQtNY4W7fAROrnFxQsPx686FAg9dVl6dGguQcCDOJrDXopdWWFE10iOVGLmN5W1Al9QFQA3kdtxiemvFyCOBeZ7dvNJn/ecfQ33Uf8ve6sTzuM4TvQ+1XnUb/+cum1eIUxlZyoFc0N2VWLpsAu54oA0Un2Rz0VEI27dQ+j1mJBFGHv0XNKnVvpWaO3+DyLiFcT78CSwqTSzsWIlJJp/Sgnj5rmZkYliFr0jLfUzhkIok9tbh/qGBZpAmS1T5dr/vl+y4lpGUX0qZITtdQZIftlJRQoHxAV7h/q8tVwm+MqTjQy4c7nQ05q/gQiNp/hBFuJLPdelmLjutMxij9TMrJwHYlKyMzLK+Di5ajbOxyjVp4ImbD9UsPJDqM2X8y8ny1Inp+fv8k2fMquywsOBs7a5zdt95VrSXfET0h6qSxB1ErmZtXqpoEgWpQT1XFxEdD4xk9TNh/9RhMmX/hK2xlGgmjVmmfybU1OgXIAURAU6WvYjYygmDRR/K6lZtx7xLtkPcolQIH6enBsemhsOkpQ2NBlRwsNXPus9PxpqiPgx0WUmpn3FLCcdyDgh7FnEAVzBWOi9LtKa2Fx6f7XUgWJCH0ARzj/l8DUOw/FlQ1nwkBocyMoQl3JiZp8llaFBvUHUcImZNx7EQ3o9z2H1h8wEG8W2E1CK9TrP+jrbiOCr/4fuHjS7aPnv1gya0Mjviff/oO91/uBkf/cffpLTJBKleVKF5eqMN/kO5qMAuUAopj/3EzP0r/HA1afR2maeV/BRT59V3qhHwX84FDbznW9+0AB0aVHgtQmReBop4Xu60+HfTnM5uNBx/e6XNN61vWkO9z7+dCTP46zBYlbzDSvO6wEUf3HWtZUU0B/EP2y06ibqS/fSvt9ePSrkbF/jYr7a1zSn/hCCYv+OxDYaUL3mj8PI7CRwMvYxD/X6zcIF5eO439Ovl2EhX0WoErDIjkzJQX0pUA5gChqSIx6tjtEbrWPoGyxi9h0JvyOCgsfZuduc4jcbKdcF4VqzWY673N7CoS9V3h+N+YMfOe3o0/XnWgvWNiZe/2QCXORn1rPdllrE7rb5apPRIqQABf7gVsFTZEDd17oblYclSCq7+ST9TQooD+I6sNKlrGOBFE5NyUF9KVAOYAoEk5wFOcTUQBCrmDjI7o4YLUXrKr6V3jQtnOf/kqF4RsuwMg+ys578DD3/sNCjMzOyeP7g0e5jx8XLDsapL5OfeAZpNxwOqzjAjcUom4ByWkqYa/4oB81t1+sBFF9J5+sJ0FUzgFJAWunQPmAqKavCB41uJ2o6Qb7CIiqVZV8QXN5Pfnu3aycuw8UyBy56ULJRF55MmTc1ktbHSJHbLjIve/3O+p/PY1b9rhc+2TwCRjW6iNO1Rx1quMCdzC13yrPpjOcjPNd0fMuCaLWvigqpP9GcKIJN/+o5jgfZf86L+9XWgxoXNKfifxnBFcqOdEKmQPyoVZJgXIGUexssQZKU4lkA6+n5ecrprYjN17kohqi+L7TKXLctksZKoPbvis928x17TDfrd1c166LPO6okHXViRDsibgIu4nN0VHPaLhP36jb/tdTKTm5+dS5kXKf71gtBUYrJeB6qntgEghn7hiHEkStciVUdKf1BNGXv50fn1yInY0H9R+2oI3AyA9bjT/p9j8tvHyvxaRrN17xCXr9UvDTQvoXXbjVulGCaEVPB/l866FAeYIomkhMe5yuJAjydJjveuWqYkz74GGOCN0ucFR8BzhV0trHfVd58WfzmU5Npju1nuMilKmknUHwy0WK/oZLuMFIP1HrmZtVq6d6guh5//9U+3AlmLfL5qtf7D+v2X0YlrfT1jb+qM04G/ePImMUYyI3n7d/GtyfL593GBN6/e9tRvfsNqmrUiZ37T2j40tfL0q49dTNVLq4VK15Jt/W5BQoNxAFAkG7Mz43xCucuhCHWVDvFefEnxn3sjstdFNMZ1Wh8DGmbb/ATQ2iTaY7AsBweG3mFFrnIhBGjcpF6lO5+9KzNEXE2nZzXWJv3RNsaKcFbr2Wn6PAsLr4K8gdf/sBPqnm9nKRnKjJZ2lVaFBPEAXzHM6/x78E89t2vMZx149xa5my9icQtMO47nO31Oens75vthjehy+fth+bcOupyFfg5Rcdx8RryIEliFaF2SXf0YwUKAcQBbQIY9ttkcf15MKgB9E37zae6oBolxC4q0+Gql9vs104V3Bo4acOT0AUP1EqN5nmKAIEiqAKhPSrO8GOi4p4VhUyF9vdtnNc8UYVrY3YeOGbUadhfIkF+NmQk8Tp5WJEfAYgqqdq0+hqEkTNOF8rb9P6g6iAvdTMl+w8Pzh35c3Gg/uv2FvrvP8bQxe0Wbi9rgDRliN6CxC9kfwnLZj8rP1YCaKVdx7JNyt3CpgbRIE9+EhnPyWkrfjEJN+FdxTWPcKMaIdjpOZ7917uyS1qEIWPDI5RDIWK/RDJCASdc8D/fOhNdYUVx4KRBl+5dtstIMnW5wbxHMRPNt6xRH4wGh31vFGCaLnP4srwQH1AlCQtL9ZY+L+248DF9mN/Hre82dZj3xByYfTSFpuP1Ow+pYuIT6QGUfASTvTegxfSMn+bfkcpBQXVPm47TopzK8OMke9gIRQwdwB6oeCcs99PvC+hi8A8YEYNSAqOTrSbvvuKqLDNPgLzXVAWY1riyHOFQArqOES6REu4fR82V4hw+dzMeDB8/QXEwjwiO7fQi0b8ROii9vNcaVlPLDS6mgRRC5nb1tUNfUAUgMQm6F/1p/Ol2qfLLgT+h3gLrUb22nDo24uB/zl7+U1337c0QfTjduNA0PZju//Ya0idPoPJodZo4IA/fDv/ZurvSzbZlYZF1jV5ZG8rkgIqTtS8zBkwiZCWeAvjt10qNmAQFYSoFo9PIFaVBM257TxX9KawsGg6sQZ6VoFnRfwLt4q90titPvUm2ot8Z9Sfvc9vo234hjPhpMgevcmHCEeqFC6K7ZJZi0yFVpET2mqfrSeIPnr0vADRWRsbrjnwHdGLsNcdNK/tnM0NFm6rW+1jJdy8mhP9V8PphKfXwkupE7XaOSI7bpEUsL0Uj0DVrKCiNrgF8J5l1KNE9ZupIJ+6AjgKuiN95boCq88o/CTupTIqUvGn+okihgPwqZgmKT+ZFz4FGZFU/7z0rEWOtuyU5VJATxDNevj8ayoQpew+9VWToX2HLWjtF/GauPLbGgv51/3SW82G9VW41Q9W6XKcKEqlTtRy54HsmdVR4Gb6A7hAs4bBUzuuGIphAhFb6sE4qrHT3KcBfdqH2yaNjNXNBNnhiqWAniAKKL7VZErWo+eJjttiuGI99POUzlfCXqvVewjKzs4Tu3PFJ+jfIxa1Sk79wzvNJ+mCqOREK3ag5dMrIQWQeeJtYu4QBPrAj7XXEXLp9vPdsnOUaA/yIymgPwX0BFHsb1+svhgnUS+//wqA7Dyh25Xwf6Hm1AxgpIDr1M6Ld9Txj/jngm11l+2uJcqGQzX/1WBGUtGc3rpAK3Wi+g+crCkpoFBgr+tVnDhx/4CLMqrYI03FIEiRnU5xQCqLYlJoK4ULiopTLJMoVShKaZBmaZxH8CBiFQmRL6pQo7pt3MsWfxdS8e/GnB681ltEK5QfSQGDKKAPiK7a9z2mudHxf/lb7dk9p3Wavanh4h1152zm3zpLd9XBSXTkkpbBV/8BKHpcfrPaO2v5QnwizI62HvtalAN2n2FYpOv3ooWjEkQNGjtZWVJAoUBubt6F8FseQUlng5INKMHJniE3zwYnHzobTeqV3c5Xycqy7lQYZkS4nZAZe9gGb/KDYhbbanYRHBWKTCAWRabaaIjvAneJQ1QIvU9iGLWZ44KicdpuUm0HrDwRTCqY/W7XTnrHYk/kFXIT893QuHTSkYogf0T4I2Upni3EAsRDlPC8FyNu8XbeYbfwhPEKvekZknwu2JDX1IMmHoFJCan35WSSFDCOAvqAKP4q6EQF4LlcfGf78RqbDtdcf/DbNfu/51/8W2A0CaLLr0FR/zjuqh0FUNwYk/DnXJ0ouxJEjRs1eZekgGko8DA7j0Qr4fEZANWpize2OUTM/yVgxMaLBLYFKcFFJYvLZAdsdGHXYHmRHhMDAVglnNCYLT7ALcETZu7zw3x36DrvnsvPcSNQSuXvVUnQlJgJ45XCFxW7bE/MP5GRW4nMoAqHixCVoEUjN12cvucK8Yw2ngnf6wrKxrn6J14MTwmOSb+edDc57QFRA/NUAXvlR1LAoiigD4iW7Jdiwl8lJ2pRc0N2xuopQN6x5PQHBAOCjTt1MW67YySYB/h1W6I4nyBNBe1+GGdLzKAaI06pCxdhQMl0NmmH7+IjQXCoNhfivMNvkYxMxL/V51NQUEBlOLzwGxm+kbfdApNoZJ/r1Y22EcuOBc/e7zdxuy+50ohqRJA/Fe7a0gHStmiWr0eeqjn6NHj8BIPt6DOS58bTHPGN4d5RRaHXxjvOxT/pQtitgOtp1xLvJKU9IExSTp5Uc+ozYrKOkRSQIGok4eRtkgKWQIG7D7KJV0DOE0L8HD4XTTLOmfuuoN4j7g9gAwdZe7zt92PPEEhPDVEg009THXHiBMNm7L1CWhXEuY5XEvyvpSWm3s8pGuignN+RiPZwxqA1Yt6zwTftLt04dPY6Gb9XHQ+BRZ666zKoOWCVF52HGwZQa446XX2EkjHtSbHhNXlZVTJwhQPmQAARYKYbT3EgB3iPZeeGrfeetAPZcuBam7CdTlFHPWMcriQg2SakfsSNjBsp99LuPCTleDm/uHyc9VLAaBAlT4sJeVDRlORErXciyZ6bhQJ5efm3M7MiEzIRbNr5xu9xuQobBw+HNBVxKAZBWOXApYEZQCNAoiDlcBvwA8Dos8KTbJ1gDwLSY14xqBKJQKuZ5tosPS73RsmelnrnUezNewh+4UEdr8Qf9YrZ6RyFfnfR4cAZe65AhMFrz/dYdrbdPFdODxwpIJEWy/vNyNOw4/yEsFrgLrRF7IyKt8sij4GrzyOvnrvff8XxkK32kQfPXickIZpUtLahsenRyXdvpWfde5gD813uby8fWPEUMBRE32462S9ccQ/9b5Opl4L/rYmj2BlhZLT2wPeLd9ZZsefHmRsaefm90Xt6x8Hz2lIIsZuUIrO4VPyIyx5YFgUePMwlAB4xZmG8jp+P2WwXMU/RSl5AyEn0djSIisR17BlYLjUryZcGk+w7L3QHG7AAWnYsiBCAtpdusKfH3rybpUpDJj8lUAC0y0TUfFsRNUM0t4DEkxdi97le47ShEjX7T9yhFjW7o7gtXdQ8QbH7xd5YqHsRNZNLVYiaMdQSWl6k2S7+iVhIIWq+moSo+b4ialblT5Ufq6aAQSC6aEedr7uOFMBJ6PlXas3RBNFT7h86eb/7RuMpa3/5jqCAxKmPiH4VQySCMFwK+ff3PYeRXrRk5lVyolY9l2Tni6VAQfq9R5jGYG7q7JdwwP3a6pMh03Zd7r/aS/gmFkpcNVnJETZwRfBAME9sxHP2+6+1CYX7cQ1IwooVaWd+vtx5K2Cy3X+EqPnB1cQ72A9jBU3EKAYFUfNKlah5yq4rDBbDqhI1uwCoaHO1WN6nombFzMoW3EUiLTyLVKLms8PWX5i80xcz5nU2Ybuco2CpHS8nYsNMRP7w+EySxKXefZQlRc0VMPglPVJ/EPUO/E+1T5TwfurSc3rnnwb108LFrzqPxL9lzLIWWteJUy9B1MIGX3bHFBR4lJOHAUtYXMb5sFunL8aR2GTx4cCxW3y6L/HAMxJtnJC4ahrvoMaDv0S6yJ6LbBapI0JCvD5gU9ij9TfeMUX3ZRtmpAAKZqLnx9y8FxKTzuCieAYXdzlFcSrCwkslavZRi5pxE0LkUFTFq4jovxl5ismj2EWrVLyFplVTlWznXRZ7DFzjNWHbJU5aK06EbLOPxGHpzCVEzckYcxWKmjOy7mXl5EvDZrONs54gejn039U+WE3ceS1o/K7nUBKLioszNjQi1vybTaaQEK1G15EftJpwPuA/TxF3WicJomYbRtmwIRRAgnr/oQEyT1BNGO+4K8Y7MRjvzNrnN2SdNygIDwHPQTYS9jjsWdSaNjY+xHowJcM2XECmB7OCQI89FCYm/rZiMGpIf2XdKkSB/IL8O/cRNT+IjM/E1skjKPm0zw0EGPjXrjwePPcX/yk7Fesqjl9dFxWyvN+OOs3c0yyF+t0ndlWKfneqImfGCrrjfLd+qzxHbb44Y4+fImq2DcdkGlEzDkVolHHV5RiXmPqAXOt6iprXnwrb7lAkI14VGi3Vq+oDoocdPqn2/uq4ZO082wIge0/vRICFqzdembaucXDU/wGrMYl/IUrRou11fYJfx5cUheiYpc3fbDrFL6ww1u6zhLpSnFvVpl8FvC/2NWBeVEKm+tm5efkpmQ+5gmu/vcp4Z/mxELRiGOa0nOms5JRGN4mZq8r3ERMeCpsUoXZQfQ1ac37STg0/kLBb1xU/EBn4pgJGtvI9Mg/+sRhjpQKu8hPzlpxxCEIQ8N7OfEi2VwJWeIXecrgcf8QzGsNjFAdIhmfuvYKr0ujNF4es9+630hMBCYc/FL1K6KipSqQqToHoFJjPTHJhTiUCVz2JnuHcbq5r7+XnsOWevFOJmLH2VCjMNFbNhMvwjbpN4whacPb1DnuaF7byjUUJb6QPiCam/PF6/F/+Wmv2vxtNfbvZpNcbTf1Xw2mUfzec+o+6M0HEs5eVVGhT1jRxufh2ze7DImJe7Te7/bjlzUOu/uO/Taecu/Jfr4A3BsxpHx6jzcjKYAtVaLLBzGHHWFGFp4fEpo/b5oNwFYOd0Vt8cJfE8BKZGJsFWwZ7h4hCJ/YRrqCmwngHO1gkZoo3yJ4r606FHjoX7R6YhKCMBuNT7uMTgiNmSmYWu9itjCxiAuAZiZtE3K17VIi5eZeC4ejjx9Zqt5n5KNntxgbPxJ2WU84l7PBK3J2T/7CyLh7CSP285Kw6/iLzU7vMUIJDqYsSs0IVoBFdLPGh2s51BSZBNQJfiMJpD8dfsJCfqMDEFtlyNCMeF+YMUGUOKEy8M1OJ10hRwm4QoEq1TJTgGwruFi4Wlgw/cQudAUq7LzmLe25lHZdnvZc+ICqgLi//V/z7Q8+hPkFP7YOqvbdaDYRzNzf4pN3YPae/4srQBa0/aT8uMvZv77acqL8njOREK+f023wmQuHnVJmtKqqo5K4KNIq9Q4RyFeFhlSKyjjzNxlW4xbSew66kbD3sSvzLn6qgd4W4K/YUVSnxvVRH+8WHg6wRSm/cDZrj8/XSKw0tpyy5XH+FX9Os3KeyhMq0bDDPBo2Yn4Uz8wmSGfnnE0TUxEhTZc4hqLK6WZYSkhvEwnoKgSvTkOkPogILf/PV4oKCp7ZF5OhWY+T09Y0nr24SFv1qYOQ/k1Nf7juzQ+i1v7/b4imI3s/6jbTOrUyTR693weoBawiRWtICir6x1DU3iLJ3mx0QiVn/VV56kcySKiXcC13kW2dNQGvLKav8W6wLbPcw964l0ck0fcE8jQBSVpeWhw5zsqyyvlUGgShS2beaTVYDIWj6h5rz1H/iGNpuTI/xK5qNWtJy4qqmJO6OiPnbOxog+vyXSySImmaxWUsrzv4JREx9Vj5na8+fZVD/IQKHiR1OUdYydqKfEkTLc7wwskVUY9C8soTKzG3OiEc8Y8qTVpbzLP1B9FH2c89/seR8wBtqIIyK/dtbTZ9iKsCp+eu0tY2Dov7v7eaFFWBD3ytNtCvFuZYzMUzTE4IGIPO0hHVuCX1ARoeBhmkoW16tSBAtL0orzxm87jyqR0uYq4b2AWXNkiPB5Ukry3mWPiBK9pUdx2tU+2zZxsM1QdDDTp9hkTthZdM/fTdvg+qKKNPW/fRRm3ENBwyo129Qo0H9sTkKufaPXtM71e47mMoftxs7d3N9yYlaztCXR0+EHaChC7Ky1ocUWHlgTlkepDfRMySImoiQejWDzygnLUPnP7oSlO7PulHJT6fY/pSiyKAaRgNGQzgM9NIjaP2r4kcfEM3P/1XTIX1Dr/9dQGBMwl+2Hf8aQPXyf8qVKuDq+KmmI+lR50+i4v7KdacL79q4fUSEo1ItjCQnWtmmIGHQWeGGbgr61xfbByu/2D1CWGe0VNkillDYPjA4xPSp1Jr6d6zYmvQWEMUtwYqGWYJoeQ6WESDKpOqy2J0sAoQI1sVRTGfRxHdd7KEkXcf87YlhLTbq6FnUUiK+dF3kfsgjGn8VlA5UVhc9D8EKiB6VIPrUXKhUtDNTBQmi5blgy+NZbeFEzQaiyvaxyH35USUge9PpmN0WQUr2BfJiYtAvrILV/nDsEURcww5C4Bw2umwfxE2dtvuK1vYBuJYRNbVup8OdFkoQfWqjtCq4zeKYjitD2hhktVSJDYuMAFEmMPDJYvaNSgEatbxWGk62J04vv5J7jkBaa2xCyb5OoGDSm+OLNWvfFZWFuQP+0ASnpBq55NafDttsG7HpTDhBRbbaRWBzqw+OShA1Eyga2qwE0fIAtvJ8hllBFN5x/HZl+wiOzag/0V7TfAkGFFjlp9t3HoGOpHpmayBm0BmfONKh3Mp8SCwhcJS0lE2nOd3MyFK2jwtxxF7ZZBtOuHAqE4ePwC6mxdHKBKIg38KETgsSO6vL0qvtDcPC4DZb3JokfPHKTtuGBuGoBFHh5SmYRSQxBFJgAnuG3oS5VDjOKYWmScxeohrxE4FEWAK6C3+f21Xih/Rb5XVflbSACIUPHuXi0awEcHiSxoCwwPqYNUgQNRTtVJrRT/mXPC269550+19K+u/U1zcdeao3lTrR8oSwin+WmUBUuHuzfYzZ6sNLXo5KrTtBydXM9iGglCVN4ip++sX9OiGKdAlBZkoikWLmQyYNZfu4+0gEAtTcPhYeDiJzlgmZ0UoDomDe7lMNsv74m0e/ez7nt7+mPK5W7crPbxuEoytD2+62qc+Nh/bUWhHWVn8AliCqpC6Y6kAswH1u13FfHrlRAdFzIcnMfxhN+EhWh2IxO9HuhHcsP5E8lWPl9N1XiFXJhCfUUaMpipO0skwOKMtERNZlFYDH5AtCqAugcoVIv9TRx7pegqgRIPr7bxZw14wNDd9tPlE4gMYl/4mAf2mZL9X8efhR549JfHYj+U9X4/766y+WUIGfYpP+LEG04oGtPHtgDhBlgyAyHzFsCX1ACFBe51LkbQ7LWx0iiOEpcBR3dUIj8RMcZ89l55D3kmSDP4Oi0whyJmKeEf9WvX1k3M+esP0SwfyQjCWnqxhT7zhUrab12Ks0ILoivO2hXT+Cf37d3jo35n9eIz/yHvzB0W3fq7FwdUDr1YGqUpyDqfgVEN11ugGN/LK/tgRRsSr1FOeK8CA5eUoyH8IPYQPPF+Ic/TTNSUxpEe0Isz7R7IQdl5TAfqqofiSUpUItlUJURNMlZj2RnwesLnRiFs2CtCM3Xvh08EmWkj7yGAmipYJoaubvzpz98LSq8MXN563/NJ56yOEz74A3RixqdcDuCxxgyNPSZEi/NqN7/uenqbX7DO40vjuR6FsM7/2XH+a2H9uDnzpN6CZBtDwhrOKfZXIQZe9AckvgUN6tzVyXkSoQ9Ym8DTSKt2V/YacAEcWfhDrjT5SdoCl/BlxPZVNQbTFOcJlHzkXzU+8V555sHEqzNE4G5s+GnGBn0Wf70J9VrUwgenBPLfBvp13DRXEdYUApAggBSCB2YXwn/qQoX8LbCigVEuDlke2WRHdYGdxmyfUOmiC6KqjNohudFsd2LBZ3NflUyYkCkMPWezNXo+IzYRwLxbkhyeQ/IIg81xceCkTQcj60MJgt4Z17Lj9HilMKnGheXgERdNFW9Fx2FjGvZ8hNcXDkgxRXFaWy8JOXX0D9gWvOl7oQJIiWCqJnzn7wWv0Zwxe2GjC73YA57fjy3yZTfp7aedDctiMXt+wxrbNmXNxhi1on3f6Dh++botkPWo0vtX1RQepEKx72TNsDk4Mo4Ddig3Luvppwh4jwo7coIOoblfrVcBuPoCS+Lz8WXHeC3e3Mwk0BnRBBt4FJAaskYQZNUQLxL47tSMBIWCFe+WFOHnFuNbaP/IfZefpsH1UZRPceq6fJRIJ/S6+1P3Cg9p3/ewmIpfDlwC91ll1tD4LuOtUg9zfP/XKg9oM/v8BPNmtrbnNuLDhRMBjeNPOfv0t9++XlEe1KxtEqDqIissGpizeYqyjvlVXwRCdKaoSJ25R5Tv7a78acTr1bGF54tkroUuyHDPBEowyJzTjocX2zXTgWA1jzssrmHPBHFOx/PY2fyAxfqkRXgmipIHfa/UM8PjWr/dBraMKtP2heIdy8X/hrAZH/JPLfBZKPfrCKaAzEW+AigQCvhP0L0a7kRE0LUpbemslBlO0D6ROvvdMpkrO20IkCoj+MtR2/zVdsHzxUoYuS/6JAtUcU88HgCMkt6R7DbmTAj5IQyicyZeh6b5hUxLwnzsf6X0sLjE5VgnGbzrq48nGi21waz7vVBXZTzXruO1IXXIyt+fe9J+odOFgn9e0/8OcO+4bLotrvOaloQCkRTf7lPumTPSfqb7dvxJ8HDtVZFNsx/T+/L6hWbYt7k5UhpehHqziIMiHhC0XSWVQVmAJoGhbxK8dBfiK5wtFzMfvcrvEdC4DVJ0NB3HWnwzAdIgkMLjEbToevPRXWa/lZDO74CQeV86EKF0tuFn7iysoTIdjZwbzq47oqQbRUEHU4/y4B/4jnR16zkYtbUb/58D5nryi8Zu/pHRftqMMXuFLC/nWd1JVS7eMVBGToPLFbx/HdO03o3nH8z61H9Zy9saEEUUuHPdP2z7QgCqRhQHQ3S9k+fl6quL6pQZTrDaY4CJPCTgvd3fwTXfwT+Y6mB4BcdyoMNSp/kqZRbA3kwYYZ3el8VWwf7oGK8REpFflTbB/Y6A5cTfiYwoD1+rObJdSsfCB6558vpb/++4x//S7rT785vum7BcmdsbZ9+KffLLneHoYSBnSdTwtgMrjNGwhysUXie1iz1zHohfVcFtVOiHN32zSI+f7v+b+qtsmzaalsKHLdKg6izMnJO5TzIhmEao2zxUad9KL8iXUuugmMic4GKZMZzpKTJXJdviPO5SdUHkInipD2+7G2Qs0xeafSVAmfeQcCMCAodf5LEC0VRE+d/bBOn8GuPm+7XHzn5ZqKSdHAOe0OOnzGFzjOvPwiPqb1+w/cdOSbUtvUrSDFuaaFsIpvzbQgqmwfqjWPDFakPCSjmeBESWHGjuB4OYE/T3rH1hh5iqyKfEcnSrYm/OeETtT/WioiL9CX+qVuH4uOBOmzfZS6v6grVD4QDW7zn0v93vPt/Y5/l7d2nW6IpjP3hedCW76OolToR/mS9sbvM17//fzkLgJE9x+puzy8naIifWJYdPsthVsFQeFWS1WIShBVGbs5o7bA/pw5jzxm2HpFwYHrJ/McrhE7o/kHA3D9BCaXHVVC8QGiVKMymg5kvGj90aSKnIAqZzAn4Ha7o5JY+1JkCt9ZaD+MOyOOoeO2+oDTpU5yCaKlAt7Ok9VHLlIYUMortebw76q9PyzeUQc2dPq6RurbHzx8nrjzr9aZPWtjw9FLWsC5ijJmWXMRvUhyohUPbOXZA9OCqMh0uPhIEGnFUAWxLwzdoJhX4OICKLIXDNvgTdJgFjy/OvspW0D7ua5ioyEzKH/6XUv9ZuSpuhPt2SaEWIwtg+RTyk9Xb3OK5zqWR6cuxHFlrH7bR6n7SyUGUeS0i+I7Lb3eAVUoytH1Pi1gKP07v4npkDAFWpjQ+eZHf777j9/CfQoQ/eWXQltcNYieH/Yh1y/2fw/ElSCqj+yUVQD+oapEXrLNITI4Jp3p6uKfxCpgson8uNQB2ASITtjuu8v5KqDIKRP/Fq7YXrpBWtwVJ0IaT3GAkb1y9TYXH2bndl7oNmu//9gtPtjWpalUqohzS7UqEk5lMmJRyfA2bV3j5btriToi/dm1+L/+ve6sd5pPUt+4+cg3GOJW7zoCBIVhPXPuA1HcfN/6rscwG4+PJIiWJ35ZxLNMC6LCxxzuEFxcfzqceAh+V1N5TywSOVYTsYggZ8r2Qd6xifYCRIlGxH7heCUBBwD+xJXF9lI839kmOF+TavtiRArXOZvjMzpl5+WxWy+hYbqlskvqtVyv7aMqg6imYRGWQStC2z56+fnYb15dkNRZ+LEArvdfeSFOdaUQRA9og+jOMw09R/+PjeXEhm/B41IdRqu4OFfMNxYCIhYUEOp1jmRFKyoCwIbukwqTd16OSijMlQ2IqlN+nva5gQGRaAEhDS4x4KXmxuEVcpOTZalWRRJE2807VSq8NRrY3/3SW1TLvPPic18oGc1S0n5f7c0NAeH/5PvSXbV2nKgO0KZmvkRKUaLmajXYZ2bHUx4flvoUKc61COQzYSdMDqJiB+EMfuqiwiyKz8y9flpREQBREWMBI35x9ObD3iF8Y/jgfj5nX+H2ERKbjhoVB1PNF/cOvYXXnT7bhwRRAXug5uKYDiGt/gMcYoiLwdG8lK52S2rw58l13+LQ8iwQxXwXjWnCF3+l5uazTUv1GZUgKqackgd7pefSo8GE9Ou93FOdcF49IakwaO15bIuwPxLRNzUz44o/AVpsjgas8UJjCguLCzU8KBEYpu2+DA/Kr3q6SktOtFR4+9XnCvf5ap1ZrzeadsjxU+xyX645f/jC1rV6D+F6rxmdjjgVAifC26W7asff/BPyW1GSb7/celRvWNJSnyJB1IT4ZRFNtTFP7FyWOvsCoirUQix1eFMttIPLnL7nyi7nKAIy6IIc/unUZ9dg+xiy3hvVkZCAEZOB7YMb8YGhTRPa5Yo+VCad6JHtPygKzkN1NDGPWLjrfFve+/tv+SnlvT9kvvY7vgR2/K/wIt17XLHOPbznR3EL4lwMdJUru3+kwtrLLbDOffjH36zxb7UqsKQc4BJENWFSMQ6YqsRMKPbAJ5IrsF6U+Ay6ZZazEO0w/8Xt/ItGQxgcINfR/xAps7iUDG/jVzbDjIg62TnP8W/CzT9W+3j5xeDX+d55QrcPW4//zZdLCLYgGgFEP20/lugKrUf1EqXjuO6grwRRi0C1cu6E+bK4iKhDyvp/xlIHR9k+it87SO1S8vbxZE/Rn8vUp6bI4vLI+rO4rApqvelc03NjP97g3YzvmgJYoBHzojPLagR0fvNSn/f2Ha0nfEDBxfUXmp8d/wkGROIWLhZeOadcwdpoh10jgh9t8tRuU0vAW4lBlCOd0cnI9JmB5quDIEfoX6vgR59UaBExf7v/4AVNoM24+1v1n6g/fUP/pf7zlPtHodf+oYXKNu4fRsb+TXKiVW6CkYNJH6sE861ti2oZUmDfpNZIWcVseFYqNGAPHxUtBBVopyBiRDu1tZHaVggc1boFHFVfoRoBGZ7VZhWJWERKzoaTC8PHW9TULbkziu/ZRLvTGhoWq5jbpuqkPiBaKviZqoIU55pqWC2lHQ6nCEutaDswa1eViPkqnxwr+sh8ouU5WIm3H2A0Z77sgWaa3iJxr9rgoDwpZgnPkiBqCaNQafuQkpmFDaFkRoVCFE+b0FjFG8GKPhJEy3mwHC4nME+QjoJMBhVWmZKCXqXa1C3CPYxSsppTVGOu0po+T0f4zALH3yY8PqOcCWU5jzMfiHr5/ZdcLgYxqZITtZyJYbKe+EbeRkJFuD5hrWCSgr6TRc5SL2VHmO2i2hEKt4OS64sIfzRL4ybppGYjbDR1JtrZ+irxTq3rI0G0/MfrRsq9ufsD+q/2Ikb8swq/Ynk7dJ03oRUQbxAaGtesPivO4aYi9P3MdlCQRcfcw20a72cmNn/yBZDGVVokEwQFMS9QWxWRxL7bEg9CRuMDRpv8ixcpnmDkUONxxP/C5u5pl1Z6cnGtTaiIQVhlP3qCKI4r77aY9Em7sZQvOo4mJpH4Tnmz6ZT9dp/rguWCbfUwO5IgWmWn1tMXv/sgZ6dT1PQ9lzF8NajM2Os3a58/rmyEwCWAGRknlh0LxvWNiApEvsUul2SK6vUvwBLoUgISAVoT7EjD0nCKfacF7oPWnGe1t5/niuaGTYR/wXVhlCiQVZQeS8+yH+H9Qtg/BNGLDgcR+QV7XfpATwzquWZlsoJvsgu/lVEY6d66JoQEUYsdr/tZOREJmYS6XXsqFJADPjkFMvlVM9+WqEaYKZFS+9C56MDotHtZOaQqQh9P7NyriXcIvLDDMZIcDAAkenqAlnWhCg3ogKUe5usd5ruSl23JkcCDZ6PJBnMt6U4VR8oSpoGeIJpx90U8VW6m/j414yXsjAiN+7igGn9SyBtKoCJdsFy2u3av6R0liFrsGrSajpEfODI+k4igeLwBpaxt7JVARPAPNxVWPuufXaDjAne2EtBr/akwmwtxftduk8uFtIhKIHrVhzSKj7Lzom/edQtIIs7LrL1+Q9adJy5g7fFKSCMR84idiMQv7CyrToTSSMD1NLJEqVuwGpKZrqMSRE1HyzK1RLp4UuQSJ2SbfSQMIhOV8yIz/+uRpwhyyaGQMyWTn9MqsUdYMgTI1fN5TO/snLz42/fPh9wk0TdLjGiaPy85S5s0Tvlm5GnWCI8DXHEtY+HscIoizkNoXMatjCzC2ev5oMpaTU8Q1cTCuw9exMXlWei4ev/32459za+AKEEB+dJzWieAVh80leLcyjrNSn8vljERcYNi0l38EtgIEGeRwoyMoYibYBxrjj5dY8Qp0iWSN7vlbGd+mrjDl/ChpOa+EH4rIfU+W4xxixlkvf8wN/xGpp1vPKHnp+z0VeKcTXf6WvU4dhC2D+RgiLkGr/WGDz7mFeMbdTvu1j0SpZX+VtZf48bdwJkXv1x8uZ7llEW+dZb5Nc7KybR+6j7zDQA2UI3EZPtcrxH3AGkKJ7za422VVTDcBuzkHDlh2yVmrGtAYsLt++qIIiakCWxrSubDK1G3mfMrj4cg3SWqV9Ppjgpsj1DK92POwLnC/nZa6EaIBg6vhEAiiNiNlPtEEDRhTyy8KSNANCv7+WqfKLEXii1/rTXnQqDiQqrmRAmu23RIXwmiFj4Tyql7YN3NjKywuAwPFWe56FCgIomaq8Qbg5v8bvQZoEugF07fPZad5dDN0ZithDM4J/EHKrQ0d1/ZkjLvP0IIRiz7lceD2SDoCYIypW/Dbegb7C+bWvv5rmiM0Alh3O9/PZVDgDn2MnO/bMntP8jJDE1zjkg/a1ElMv1cXkGl2qaJNInY4/j5GLQJTDakLIhGiPNcfYQNweJZICM3XuAMd/rijajEzAo8wDHDkesS5Mvu0o0NZ8Kn7bqMApWQJt+OOc3qAFnpLT1nOdNnJDqcdI+ci7kYfus6AmFV/qXK99EHRK+EvXbY6dPjrh9TbNw/2mf75Us1Frr7viWuUA45fHY9/hVg0j/itb/8oISn1wRRvlf7aGVc0p9LxVHJiVaqCUYA68iETO+wW2QAXXEsGLzpsMCNcyun1+/HFoIlCw+RbNfF7thHEH6IVBLoeEidfTeLXJ+FIfoshCgczG9nPiTNBa9DBPxRm31I2Qiass2BrOwdHALQyxJBkMhHm23DnfwSgmPTkXdZSP9lNyyHApn3s8PiMkk0tOpkCOoJjGk5oiFlUeGQDZY+qPBRxjPTAq8r6kzjpCzl9r6cazndApOwxUh65+z3G7bhAtwzUhyWBsiqSHQmKAJhJDrYJWHiQBJTFDQR8ZlInsutn2Z6kD4guuf0l2TkHji3HYV8on1ndfzjd/PGLGshrlB6TO3s4atE1m08qP/y3T/qguiMDY1q9x0sQdRMg2jGZjkgl6oRZEe4nnzXJyLFxjsWtgyxD+giwnIidxKSH9YSq6jDfDehtiT7xBmfGxy9yW6I2tKML2DmpoUUmixUe1yvseuxd/COpJHifQFXJe3aZAdIgYZpxl5FX0XqjIj4jPS7j8zcL9l8BVAgOe1BUlox5mMwjuSKBzO22D1VZ2L1phy/VIfIPis8p+6+stMxihNn6p1HeRZ2fDSOlOwbmCCwOrzDbv7icR0zPaz2ui85i/eO2BMo7A/8iQ1U9yUeSK1R9ypHz5h0yFjyGRoJtnG9Msdd+oCoFvjlke2oOHHu7YzfVftwlbqylmFRtXfWxSX/qWQclZyoOYbY+DaxMiAsp/r++w9z0AWSTYy8KHBaGJ32WHaOoyWCTaG2FGYILAyMZgeu8Zqy6/Iam9Dj52Ph3thfHhqrtjT+BSriTpgGzJnU5ksz9vhhG6zIu+AzFGQ9xe6JXx02GmydGE8ecL9+PuzmtcQ72DBr9RcxMgSviJeQzzSYApjz4MXkGpDEnagzOVPud7s2Y88VDpTIZlkg34xSFgiii+5LPZBVbDwThoEbGFM5IFN/emXn5qfdecgB+qR3HPsDGWZwmyEFEwsE8fU3o5QFArJy9ETVSjrCtafCSE1Isra4lHtZjwpl+Bjqw6zfz7IIkb4RIJp+96ViDYt+6DV06rrGzwLRvjM71Ow+XIKo/pPNgJpYx5jww4Nv3Lo3ZK03zmSkG5x7IAD/MBgs9n30lHiPoPOAweI7GwTCKHaERYcDAQPP4JuxN++BlpYmiTWAlOasyvHZM+TmbpereM6M3HQRwW+9SXbCNhiuHZkekXXh1MnLwckDv4KWs10QfR/1ijFnp6pc2wWmXizZOfnrToWpktQqanJWCsdKMogh3ucK5qxwYOTaxNgbI3M8TIoV7XDRwmW2Zp0o6Eru3M8OicuwuxSPmAphFfodXM6E047Yc9hwOIyCrKM3XYSjZWlgAEiWQzpmwt1PzA6DXtaEIIrMVtPXZdW+HzVdXG4k/1kkUyuhSE7UoLF7jPqw7yovjN1NW9gFRMAB4T2p5HNQeWRzoFZHPBHeme3nuXVZ5M5c773CE2sI3LT5E1eTjvPdaIRfRcdGbb4YeF1J/Fl1PhglwcdvdYjEl2a7Y9QOxyhkuXtcru53v46iC+kWf26yDV9xPAQpFgcR4bEDkdl2AVT2Xwo7CBf5ArKiLaYpUxVSsdIZssUZul9Y7wgmpt4nZR7T0rSLhUnOzs5GL1aEGDKxTMQV1gLC/N4rzv289CyHTs5JmktDtzNUg4W1XjqX3HOO1xtOh3F8VL84BIQgkAUdKt5lvH6v5eco3RZ7iIO72hFcHUpJCRChcu8WTm6sHdOOKa11XuS+4UwYzIk+A2FCEBXoWFBQTYSnH7GoVZ+ZHUrVg2pWkCCqz5AV1pm1zw8OhtMZxizK/mvSouwCxQUP0wwnJrYJJZZYyY9WJcqmqwfPXjfg9ay2Kg4zxJGBLwH8OCzDshdTpjggsCpMOPVkR9AK1abehfnCIYZtuvimnvWI0q6Tk7XuBDu2MCwtrZbY+nb8UkQKBIeGItCVaUvJwfZEJCz9n8hYIxZG9lP5zjfwmgCesN0tlSCCqiWHJBO520ptyogK9BD2FzRFrlbqJDMCRG9n/r7a6xtLQMff11zwj7ozX/lxjpffGxJESx0CYypglVNrnF4Z580UctrQZlkSqDqIe2LM21rVPeRJBjtLXfyGEtAc9ekkhzDU3sWaw1gV1UvqLMealrOUaFbmoKE52mRc2MEJy1VphkC8CBJaFcteTGhfc5CxjG0qppFTHHDgKXUUjADR3Lxfnbv8ZgnomHnvxfQ7Lz18VEwYIynOLXVE9KqA1JToXGWcJeV8OzNy3oHKti9ojRbRw7EcsQoEVY8++xoqKL2mnXVWOnUxTjUo1rF3i3ERsv07OrZm1jkCSq+T0u4TnMG6lga9ZebE3y7FuM8IEDWIuTSoshTn6rtGkOwhRy1nFCzj49BkEMxT3ze0znqTd/oipC0jocr5diXL6QJ3q3Y0KnmyEABW5UdhTSDK9s3hJuxGhnWug2J67RaYhPrA6kYBkQBuaSWPggRR65uluDazUxsKopxtFRMhJWNDMbuJkkdJD1SmmkjSZMRi4C4MZKyP3Ib0eNj6C5wVjCBOGW9Rx9AvVZOt+yAmBrqfe3rofgyhhAXVxbXf0JONStCt6PKLXRQi20+pTJUwyuPRpdYsNnMZIBpaiUDU2S8RQwGD5rmwBlBGYWYxDIPyq96jgLGePvubjl2CC/bzbv6JJgTRXTZfPcr+danMZb9ZhtkTqRuUnKheWw82Y4aCKBsllm8kbRi2wVu1/ovgKLa4wBviI5qlMOFYwNjFMOmRZqhnMPozInZuOhNB0iUOaFRTF33SCCsgWtk5UeKcGQqiDIcS/n6SfbFbrbDUFeQVZlzqXI9qmnOdUVOEExoZadSwWuq2JUAUxaFek88KK+FQZBCIClsVnHTx8iR2ndbmC5GxP++5/BxDIzCSYyVacJE4SM3ycheLCD/gNSdDhF2YerFwV6mDIjjRygSi5I0xCEShAEsDw/7Z+/2wcNbCUfErFnwi4WDhrjVZ7Fp2FLGa+BfzXXy1N9lGCG8ZA0cBELV3CzAZiGJ2W+391dEJf567pf6Elc3w++w+petnHcb8u+G0r7uNUAPhAbvPn/9yyZxNDSavaUICNcqczQ1mb2wYnaDEBZQ6URNsQkaAKPMM+36ejUt4/UlF9EPMLYJK8xNBVcjeQLXFRwLxvjh09rpLQCKhiLAypw4tAKIk2abmXterxLzFnXHpkSAC4BGcutsSJdpnyVuDBFFd+rARYLmQfu8R/qO65kjsyESAwpGp7TwX9ElgLVEaiG5BeBfQWnjxs00QCmrx4UDGZcPpcKIPIjRTF4asVDZIgqgO/6EcSoi9Dkn7rDynmVKe0ye7Kl68/ESyvCk7LxOmavXJ0F3OUad94gKiU7faRzBqrBfcf9edCqUakaKBUlYK64XFwhf29FJxVIKowL/wOEWgPWqT9tmUzaTnsrP8xMJRgHafH8MB8Y96xpwLuYnBOX66nGNqT7CduVfR9+PLqx6FJYeDKNht6TEKJgbROZvrj17aIiX996DjxsM199l+8ZuvFqdlvnQ7/XeZKp8Wil/4a/9Xb8brjaf5BL3u6fem+6W3g6P+jwCB1T5aRU0JoiZAUJowCESVw5fKm2Lq7svc6xGYzDFNXBHbK9+ZUvxEfkECbul2EZs6tml8xkWwOnZ8EUsBE3x1LHiCE8HOShDVnxMV3oTsBUiAIWZUwh3O6YIHEmTkOyN1K0PZyjlHE0CVcC246quVl7aX4rkFZJ13wF+MGuOSl8+ngDhzIv4R4b9LZcIkiKrnrZIFYbLi1A/RiI8DAXutOCcYTTEuyolzhiNxLsmwR2oE3cVCIB5yrcAPHTwXza8MR8a9wqjrRIgU9VlHjFrJi6UqgyhEVuJUTFPSiftfU/zLh2/wZh9TjYKiK4E4/ERuGX4iTi+LQmcgCvAxrTXOFmZA9VNB2p3CQJuaun9V1tWSNOXizGRCTpSg83HJf9QEwheqL9b8097r/d/XnP/g4W92nqz+VZeRIvDCJCWb98SbqS+XiqBUkOJcvVBWfxBl2u12jtpsFwGvCc7RuntAEucvsviuOK5sr0xHPE+Eh0PbOa6IWxH5cl7mz0uRt5lDCPrYU+b/omzTwnGNykAFkiuSkRFZlytkliB0SKkqB8mJqlcsOzL+5mzZyGCFiJtcbPgsKSnEVdepyTCN3HiRn86H3iI7mxKgOOmuGAIS4BDGiJEiKxwR0cSkIcUNoV6IxgA/SjoqcRGZJMNX8k4hQVTQB7ITM4SjCZkS8GUUIPrzUo8RGy8e9YxuP98NQgGo8JFcJ3Y82yuBuqhMWhWu8IVol8gJwIAbqnvF5k4CImY+Oa5PqkaKzArk1CtV5l9lQRTqQUZkv5O2+4KC/qqZTDSS/qu8EAAQgQEcpQ57lwocH1Nn0g5fQpASjYQLpBCHdLTQeJqjYAlELnHCehOhl5+QoqlWRsG4rT7lzInO3dwAbjI1o5DjBPByc3/1wldLNKFx7YHvU9J/J66sOfD9c58vxVW0Tp/S485LnajY8fT96AmioBp7gWgUMSCiJ764+idxlOYLsaEV5/0pDsSuFHWYUvwJ09lr2Tn+JKg6JzUhxWXyMa2RkDDzROXbqtwLhP0k3PznQ08SL1eKcyGIPpyoIoAdb0fqNOqzNQxQOaKFxmawNcDlx9y8qyi8FXmgLfFX+QnJOewRW3zNkaeS0x/k5uc3m+GMwJYT0jAVAOPCgdUGX4gvSghG4hDxPTr5HtDLWafUcZEgKkAUIhOREdIdPhfNzBcgShg/9yCFnkuOBCuhM6Y4iGjGHFagLfJGoqj7qYYSUQ0VWCwA7coTIShiOZ4SaJqf7mfliORlBMtl4IigSzul8UBVVCeqFox5hdwklK4AUWYyUUX5AksggnltsVcgM/XuQyLuQswfxtkS+YsrhAYDVuFiuTh7nz/J2r4aZiPMa4lozUDwhaXHUwhkTTuljYLJONFrN155pdacT9uPBSNTM19Kuv0HhLoxCX/+3TcL8/N/lXz75cSUP9x78EJs0p/tPd8fuqDNR23GNxw4YPvxGraeH7QY3vud5pNq9RmMUHf9we+kTlRgUJk+eoIoM0lInNAQAHJTVZwo4twvhp0MjlbOaFN2XgEXYXFEb5hPSug+VbJf/iT1NCIRtgYics3e72/re4O8ZiIANIKpm+mFGb6Ymmz9JPwirHbJ+7XkRMWKhUrwK7n5BYwjfxJHG5LizMB2TOByvg9d783yhgES48J2TOY4oth8MeQkIIqEsJlK5YawFwEARl4g8cJDAeLELT7E+N5iHwGg4nKDLVixxo2abLE0LBIauKtJd6EeqXiQkwsQ7bpEiQ7NF7Dz21GnSYItKLzDKbLtPFdWR9u5LqEqvd3YLZdYOyjq0FWTQRP5AWJbtfBG3IW8HbE8B9Aj56JLxtGqyYkKOe2FiFvQCuMMTiFqTpQlw8Ws7Dy2ss4L3QU9SaPGqBEjkCuI1rjCAYj9SuxaB92vk4QYarNk+Ek5gKr0UKw74hBxHcagZBw1oTh3woqmzhff+ab7CKIodBj3M4Hm6/QdXLfvoL/Wnk3us9p9Bn/ddSR5RluP7jlqSUsn73dByhV7fzzm/LEaMoOi/oF50aYjNSWIqjc647/oCaJsBPAoPIbjGDoYtU70+7GnMfrnOsfkjgvd+KIEv84rmKeS2ep+SBMojJJibt6z940nkzbK/P6rvYh1iUkFp7xrSXfBACTGJUt0JYgK3IK5F9y/37Xb7AjC7QdxLjZBZJfkOzmzqg8/Ffskfwsa6yOe0Sx4Un+rGJoCV/9E4m4jUQQp1ePFlu0TcYsWOMJn3Huaag3DJU3TGN2jt+REhSwXCISYiFsbT1H4GAGiPZafRWAjksIS1lXIBvhsd4q8kVJ8Ni6ki4gTOJteuZqKnQH+kTC47PUTtvse9Yr2v57G1s+CKlmWWDVBlNMerLygMDwAx0QBokhc2ME4xPMdDcX47copn09C6v0nWk/tfYv1cjnqNjbnQdHpxKl29k84eSEW4QFWSESuRmaTkvFwzclQkfjhWcWEIJqlij30v7bjkm4/VW0+fPTr3369SBMUEfA2GdKv7Zge7cb0+KT9WAx3mw/rwxX+BXrv3n+hVLWo1Inqhaz6gCiLsM54O3HyIl4lm4KmYRELWDyJkG9MNbIY8r3vKs8DHtd3O189eV6BXvQ6qBkImI5siv0F+Qnph9A9IJLiV6zgEDMuOBQIk4r1Su/l58DIkg1BJYgqNhGzXZDTniuUEAaxTcB3ChBFJyqO2JxpGk1xFLmf+JMEIIXC8yfhsNVxsQHgnU5Xp+++gr4HuTqV0dJ9MfQkww2fBC+Le0CpHo0SRBkXJLFiO+aYqHiqaBgWwfQfUlkJoZPDpJO8AnwHHTEHJVI8ofxhcbhy4nwsa+egx3WwlqWBWTWGu8K8AO5TfCchEjaiNKIOWP/s7bsqinNRZIjzesC1NKSyimGRCkQxLGJQyJvG98tXU9FSofW/mniHbMQEGUYPCkyKfQnGgHwPwCTuSawLJAcwDLQpdkLMCNjEuMJwwLlysil5yzIhiArwQ0ibmPIURLOzn/tNUZ0oPjDh0a9ej38l4+6L2BxFxf01OuEviIIx332jyZT4m0WMkooFVAmiJgNRznEzVRYQsI/MRcU694k4F/dhjnXYDSl7gVPUt6PPkHWL76jiqSkMcfkTdhP5FfOM6Ss41xI+gGupWnoJokKW226eGwYRfLAhQletBtG6ExRT2xCVNQRbMAlZyTHA9wUHAzGmQOLaYJI9LBGyKfJAkTmEMmTd+Qdoeh4qBUmXGCCySiHOVax5s3M535QarEeCKDspp0kYRKgn7E0UEFVJAoR1LgJzcbhB3AJG8p1dG2Ej0KvoRFWKTwaFlcIK4nbR1LM+8EBIIErTxlU5EFUk6lMcIuIVdnPhoUDhIa0GUXYwJrwgKUfGBpMcSMXKJCdLK6OgVlehq/5uDOPCPmZLjt6Sdy3cxkobBZPpRIsF0ccF1bSsc9W4OH9rvSaD+2nC5N/rzCLiruRE9cLIUivpw4kiGGk314UpxcmLtc1pWnAq6EQBUWQmk3b6rjgRQhIP5t+FcEVIJXKFso/3XKqAKO5WNUeeZh4Dfkxf9KPsJvvcFMsLhFpEZoDBZWYLMxZ2/FLDGEkQFWJDdGwPHuWExWXAhrLhCp0onCjidyhMcjQchzbZRaAHFcppNhSRmZIzDSCKLrXtXDfQF+KTYIsDONkI8CWlJjc6+MY7Xk6w9bkhYv0jCgYPpHVuyX4+wrMI7TKUZGIrR8nxdjFPQBTK4yq9y/kqTA/jhQZOAVHnKBYONbFPESCKtIa7YDFZeiwW/sVATyiqERiwgtDqkZyAPxU3mNIC4FVBca6In8BycPZLgFbQliWAPAaKKfZ6qoSMjAKHTiVswmSH5DQFRL8bfYaaHGgEk7DNPhJTI0CUYEYikxrhMpJVBhxsgCwEJXrGTGf+5KIeRxnTgyiGRUFR/3f67IcO59876fq/X3+x9ELQf+w830chSsR5gZHDFrb+T+OpmnipRGn4YFWpCCpdXEpFz8IK+oAo00VE6ABBYWvgSK5EKdPR+UqCKjiOkl5bWIFSQYAoEw6B1RHPGJHnljmKVMT20o1Ba84zgwes8RJ4CSdEAlFySgMGbCtIVLjYYYEbu0/Jm7UEUUWcq1BekXt3WODOTsFYYPujgGh8BnabQqnMQICm7Ndo1/gJwyLqI+llFAh2Af17LfdU0lIuUI41Xw6z4Vfh04I3xf8GHufKe/2OnlDJ5GmhVAmB5ERV46LE+eNY02eF53aHSLWyuftiDxERk6XEvswc5uACYTfZhc/a549/EVajt1U+iOQeOHY+Fg6VPZ3tmxOqsMJDIQru4mzdb5UX0MsVF79Exr00HqjKcaJiFFT5zO2JCQXdVp8MyVGJYdlnhLZIxBxlODgaskGheEY/Qh5v5O1CJxUSl4501+ZiHBYbrCPk58K7HSk9IdvYtRAqCBMkzC3Z+kobBROD6L8aTr+d/tLWY1/3nNap3+z2A+a0G7+iGV/6zWrfbXLXhFt/xJjob7VnEclI4KV/+Gv/ajD947bj3m42ed0vpdjlilukOFcvHNUTRMX8YEbirKJud/KOy1q7KjNJeDSTh1ZdTR1FgSs4mKL+ET9FxGewmzOPNTvqHXoTxqjUyDgSRMWIgKOcXRgX+B61dlMVBEPZWCGjiN6n2B+pQBT6B0Wn6c6My1GpqKIFG6Rszf6J3B5+IwNjUf4VF5E9lmxV9ETCLMP+FbqKAqJqUkclZCJC15zYEBN3CwGi4qwpPupxTMnIAkTVFu/rT4VhL+ZcNPgqvJT0Ey0BvcT8V9MWYmqNAr/CAGTcz36YnYu8vdhdC52U2jQP31CUVmSh11xEHF5LPV+aXCd6PuCNR9nPlcBQEq5IS/GZkvb7W2m/v3PvRX3YUAmiuvtk8VcMAlGOz4PXnSfkDXJCguPohsNGG4TIF0MhFG9o6ZSy4Gkh5xrTnWP4XtdrBAVUzuPTnVBXLDwYiMERthJYr8AhlexEIRaMBFHNjYMFzDEZR1tYecwOddFOEbmrQJQ8ZZhUENHihHcsvA6FL6d9bmAaDT+KNhQTMEwnEGEBzJyv7z/MSbv3iNgLmFHoE/1ccqLqcRGSgJXHgyE41IOV0fLaYp5ziOT0M36bLzX5rrlYVGvHjdVB4AUMjnD5R13HAgSYYaqQBmGmwC0MfaknzioozlWPgpDrkntn7akwTBcRwGodBAXDusUuAuku1GaPKjIKC9zhB1QyA8/97tdYIxxraKHLYsWbADYUW0iWGzfqMQom5kT1BMKyVJOcqF44ikDPoAD0LGMReflZBrTgKKtdBDdHKqtVmGpiSasDsSonQcX4QlHLcaYuNVbRUxCt7Flc9Am28IQfVThOVGWFQiodYbhY4ey51BH5ALQK3D8Dyk6tMoRRdgQaFNF0OQ+hNNIHQasCJ2pQFhcms4gpL5QdugwTFzmvKNO+uMUi6K8cNKcokQLFICq5j1TZGhgpFlepe7cQSFSyAPQGZXERvKYYhWK9z8WqEUbOulsW818gMRXU1ulKwCnVKNBmqSbraqGRybO4lAUg9blXgqheIEolK80nKixRK/FHH0md5ombjVgIr4qVbqng8Jm/ilu0bgcDSm5T90GCE63EqdBIqFCqiXLJurHy/1WAaGXKJ+oaQBYXq8wnKpxnSvjIfKJWuaUjvihV11X+K7/kJ7KR4bZoleTWu9OIVUsN+G5p46JIuha55+YqFhyV8nPSO65UExJLGxRONoxLpkYUKmsfGjxScD7Rhwu3nLGgt9hRq3WrzxqCljPdOyw4oQ+bWA51Drj/XGOEx1VVPOdiP1gfyY9CgdMX4n4cb2tFMxIOiXikkSonsEr8IcwYMS6saFzYsJASL1LFBKisH5TEBEpEqWE5u3PJPWH+YL6rTs5TacaFZMZWJBLA7pfeYhhcKv2bTVdMu/ut2t1r+f6KLX1W7ukw3+a70XZYgEoQLXXgiC15hbDL6Ck5sVp4QRUEgopQL5X+g7shYis99cQVu60riiUl7Jmz2pq0so7OxYgUzgpCQ2bhBX0qfHO/lZ4YnVWy4cCeVnHrmqg4cVr6KMxw4hzTerbzPT2EAaRjaz3bte1cT0so7eZ5tJnrIhIeSE609BWEWz3OmsjiiHmNF5QFFqVjiz3GbPFRe2KU/lZWXoO4NvMOBICjCIL412ILOzWR1Yism5RafAxYKx8H7e4T3B9hO3GFLHaxsH7pG9E3tZwxKtNAkIsYy2clZPwidwvcr0SX2FHpIe71mslHSx4FooM9ysmzhAJ8ioD7EkQNWDjCH1n3g68nEeDURSSU0P1wu2a1Yutwr2YdTS9SzfoEqCy1KQNezJqrElqIkE/4bhIsHh9QPMG1CqEWXQOS+FVdiLOoW40AF5p1sHE4r9MUd3Fdsxoh7HWbIjC9ug4d4xaRR7YKfvScqJqTWQRf1f3gb6ZZLf9Zq0xjJVK/hFVWRYaDyJTQ4Zmbkia5nkF5PTclzdF5FuWhuZ7VKsHoFNGJ4mBHhB1C6qgL/lunfQpzFKvf9mL4LZKZaFbD0EBEaNT8HD8fo1mH72RO1yI6WZFPehd5Ii1rhjIQDRK2Cjc+zdYITq3OHSbqZN5/pDSlUa3YzhNmiKgomk3ZXIgLjlXCq2p+uJeQHJqFxjkWadZJSH1AU5p1aFa382j1yEusWY27RIou9QffxDMXtZ9Ia1q9wrYQ70aaIqSIeAU6LwI7aH7sfOPpv+Y7Mqyaib2ozHYPDTXr0DLgpNUUOMR1rbG+qgqAp9H5HOpoPpHvjKPWLon6lnmi2RR1mEtaTyTenm7n0+4WCZ1KcmYH3wRAS13AMLBQq6nA6DTcADSr4c4fe1NJzqX5cQsAd582BRI7qZKJan4gF1IKzaZo+bIqgprmxzP4puYM5GVVE7UIst55kKNFed6XjqnDC4gGCc9WzESNKRIjAgqTeaYIuXyUKaFlGIzbK46wWmMtUkJqfpioWmPNXfGqkP3qDzGDijalTEVV54vAWGhsOgtWc87TyQCdABeMGrdrViOvjpbtD4cn3kizDrcwRlqdR7wM5YussotxIlqv+sPmo0t57iITsGY1AmvYaE3UC3HqbDPqmkoWoKKrjC2CAFiaTZHnQHdHZXlqdd43UmesvePU8T1EZRBO6bzW/nbxBhybZmu8MstKa1MSsYc0Px5BSVqUZ7LdVKXWUX8IAciC1doGGUetpgKjU7V2S8iCd7VWNa19nhfhCvueZrX4lPv6TFSPwCSdTSk2rmgKoEc5uce8isx5nggkafUqOCaN2VVkU7oQJyIjan4ULNPaUb1iSU8k6hQBUdKPvNv3aPURp9SFgGdfDT+p1eKQ9ec/GXxCs9pHA46r8wI+qVzwXp8jhMHUrPZmr8NauqI9Ltc+6H9Ms86ng09ohswQrTWcYk8mDc1q7/U96l50x2fYPhpwTPOJJI/9criNVudJn/TxoCKdJ67b4kPaZiCfDTnxVdHOv937SMLtIrshy+P9fkU6/9mQk8hatZ5I9o/PhxTpPK981FPJYqH+EMnls8FFnsjTvxh2gnxqmtWI4UBvNenw8aDjIneu5odYlwycZrV3+hwJV+VoVH/AAELZadahk+3mu2o1RTbHT4cUIdeH/Y8RiU2zGutWNU+ePpHvkEI9yUTljafDP2SANGYXs2jI+gtaTyQQttZYMydFcH/1h8ysKso/fSJpzHFE0cKhoesu6E5UkblC/bmV/oCI25rkUjo/+ITWhkJkDO2JOuQExNHqfIuZLvREa6K6BRaBZOIRvsec1yAX+WhRF2UV3VCIC6E7UUlXovnEu1nZRGbW6vwng05cL3pQOKkzURlrpqVW54lswKhpdh4is8VoVou/fe99po1G53n6D+PO3Ln3NPcq9XEk1Z2ok1WxWNUfjqT1Jxcd6+E2LGGRXF39Aau0JirTA6dqrc4TRJOtQ7PzjNd+NyXvtPqTfi+bfUOr8zVGnkrJLHJEI4AAG5rWRMVfWeuJTac5FhlrVee1ztBAr+6OijWDVlNo/Rk1rR11ddGJyoHpvX5FdlQmKh1ILKo72O96VZ8dtdUsrYlq82H/4xwTNTvGkZ19Q7NX4olanWf/YRfSrMbQ6ybYeLdvUTiAXAOPx94scsphsunuqHiLaT2RGONaE/XDfsfYjYus68yst3oX6Tzj/k7fI1pNLTyoO1FPiJAsmp93dbDs7T5HrqoSyfEpAqIwK/gewXyoy7mQZM6nWi0GxaQh3dKsxqmWhH9a1VRNFanGetDiThJu3+dezaZ4nNYqotkL4beQwmlWg3tIUwXYVH/Yst0Dizyx2M4zMziFaTbFn+QA0ur8WaVOkSciuHtYlBOFwyC1oVbndU8x7Pi8VJHOB2rL/TB3VPXqabViO08MdHedzofryABoR4tcjIXIQa/+cEaGhlqdp6tadIDN1eo846XFRhMqTPU4zXdM5nXyip4AWDDaYx2UzFzSeiKnZt3Oa529+BOmsAi5gpN1eQWOmR66EzW5yERFSQMRoLYGKZTOaylvyLOoO1H9im73vIhPZIruRNXKQMJYqyivMdbBiqxY6wQAI1LMRE0oMlHR1SDELvrEZGaIiDGr/iCz0Z2oumPNGVp3omqx0SwBVVNFOg9yaK1r/AF0O6/LWums62SIfPdBkYkK9bQmKu+rK8BA6qC7KTFqmnTIzSuAhdVaZZ7ByVpjzVamNdbMIuaS1kSF99WmfGCSiCur/mD4o72jBifrCqtg3LXIRQeIkKX1RK05z4twl654TJ8dlVNp0bFWKJ9SNFUOnKguHEAKrV6x/+iONVyBTue14EB5ohYbXbaJWoSNzs7JA2409zfIxeto9YqdX7fzus7EuljGlQdPTr3SxUWLqvJPSQFJAUkBSQFJAX0pIEFUX0qVWg+G7HryXfyI9SwitZb8mJsCHKhRves5KHAhaBDRQJm7V7J9SQFJgcpBAQmiJhtHTJZ+HHem0XTHhsRZLa00muaI5vJZlocm65Ns6PFjrAbIFdxohl7jgpaOiOf6G+JLAhtNAbtLN8gEMPeA/9xfSisH/Mmmvu5UEWW20c+VN2pSAINQjN4xytOnIB3V1b9IekoQNdkcQH1Yf6p9u9F2XXud7NLHpoTStefJ1pMdak3EvkByPCaj/7MaIi1lncn2HYad6VLKuJxk4JpNcey2xONZ3hdm72tVesCakyHECGtETHNOnLNKLDOd6k2277Vc24yrKlHLXO/K6aTm6NO1pzrUmlZ6IcrgsMoerNsIQksQNYJoxd/ify2t3kzHnu2PjH176+gPtpVQxr25peOwM7Un20kQNRn1n90QIFp7hmP/Rr+MebeUcRn7ztZW4+y7LzsrQbQcxmXD6bAG0xmXA8Nq7B76zZ5nlq93D/5+T7OpDv3XlB4urhy6XckeoeQSmO7Ys9Ox3m0O92575JmlzZE+rQ83mu08YfulSkaBsr+OBNGy07CwBQGiPTodHf3h9pGf7SyhjH5/W4cRthJETUb6EhsSINqv6aFR/ytxXD7dMfqj7a3GO0gQLZ9xAUTrz3Ac/OPeUR9tH/nJjmcVRm3E5zubSxA1z6gAog1nOA2rsYtDPwPxrMKeNuaDbQ0XuEoQ1R0HCaImm5sSRE1GSpM2JEHUpOQ0WWMqEHUaVHvfqI93lHTo/GTH8C8liJqM7FoNCRAd+u1u5RBTwtH/0x2jPt4uQbTYYZAgarLZKUHUZKQ0aUMSRE1KTpM1JkHUZKQsQ0MSRMtAvMJbJYiWnYZSnGsyGpqjIQmi5qBq2duUIFp2Gpa9BQmiZaehBNGy01CCqMloaI6GJIiag6plb1OCaNlpWPYWLA1EiYe16kQIQWQtrZCCZrfLVSnOLfuUK6kFKc41L32NbV2CqLGUM+99EkTNS1/9Wrc0EK0x4lSdCS7VR1yytPLjOA9CB+vGYoTMkhPVb67pUUuCqB5EqoAqEkQrgOh6PFKCqB5EMnsVywNRh6Hrt2Xe/1P87X9bTkm7+9c1NmO/HukWmagdE1iCqCnnaOB1I1xcTNkB2VaxFHC6kmioi4tWLHhJWHNQQIKoOahqaJuWBqLVRziN3rRBxd1ZVtnl3K/6CI8oCaKGzjDd+mT1I/8J+SxJlKFZSH1+MTylwSwn/f1E606xf/AwhyQMWk2R5UMrF0TZu13pWyAROtlwdceF8Tp18UbdmU76+olOUPxESWekOy7E4M0omvCr0lPVrC+41T7CIBeXgevOm7U/VbPxJUeDDHJxmWjmYAuA6KhNGy0NQenPDscBEkRNtkb2uV5tPNWBnHYdF7hROixyp3Rc7N5+oXvThW49uhzTK9jCKLum81w7LfbosFi5XWlB1Vrbua7NpjuR38pk3a0yDa04HvzTNMcO8xUyaoyLR9sFbk0XufVtVnqwBTzN20x2bM7ILlYGVBmUhYXj0nq2CyNOyqoqQ07TvOid+9kbzoRvtovY7hilWcjPOmLjxZ9mO+vpJ9pyumPnxe4H3K9rtbPNIXLVyVCtXLmm6XolauXBo5zI+EzyTmoVct3P2u/XaKaznn6ijRa6kvqURIS6TZFTzCRHTAmilWjelfgqxDSvO9GOLbv5TOd2w860GWnbZpRt29F2bSc49G59uJTIOJ/tBGW79rVpN86+zWjVjSNs2460pamGUxyaTncMLZo9u6rQ1BTvucs5qvZ42ybTnVpMc1TGZdSTcZno0L/hL3iLl+JO/r/tnYacaTf2ybgMP9NmjF2zWc51J9qTa52NwxR9rHJtXIpMaTjF/sdxtg0mOzSY6lBvllO92UppPN+16TKPQXX1CLbw1c6W812aLHITN9JC/WmOtMYaJO7rrqIp4qscffV4YcJYTtt9peao042mOjSe6khK80YznSiNZzk1nevSbKHb0O/0CrbQZIVHs7ku3FV4+3RHpbWpDsTUHbreWyuzqR79KqaKBFHj6GaVd4XEpreY6dx4hlO3HsdHq4KyiohZIwm/8mmJsT8IC0L4j/8VRtga/d7WUR9u6zTkdP0pDj2WnU2/VySpr1WSpkI7TZ5kDjdNZjj1ant4zNtbno4LAVkMGRcC7Q7/Ymf70bZ1J9uP2+pDjt8KfS3rfvjtzEe9V5xjhred5DCwzr7BP+wdWHufUurug8iljIsyajsK69feN6jW3sHf7uk0+PRPM52aTnfSzc5t3ZQyZ+93OEbVGm/bbKZzm4kO3Xqc6NzPhtKl/6nOA08T9q/UiEVU6DT0jFJfdWPXHifajrFrPsu51jjb5ceCTdVxCaKmoqR1tJN+LxvYqzfTqcNI2xEqXFS2g1J3ahFbS1UTlnTY17uVjC5T7Cft8JUpXUwy8NeT7nRY4IZ+uks/G840SlQ5Q8flg23s9S2mO9WeYr/ieIhJelXFG8nLL5i807fOFPu24+yHVd815v1tjEvh0JQYaFosFlGZ9UJ84y59bRrMcOqyyD1OyfwqPwZQwD0wqcFkew4fvVsdJg0GQbxFnoxSEPTJllWYVOP9bdzbr9Evzac71Z1kd8wrxoAelFZVgmhpFKqMv0/ccYlEQq2nOA79ZvcoQs/rDaLMyAH19itHucn260+FV0baVNg73X2QM2jt+bozHNuPshv+5S5FQmDIuPRpfqjpbOd6UxyOmnSDqDByWMyD158O51zSYobTgHoHlL1bz0EROPrRdtC33Vi7OjMch2/0fpgtZQPGjCtHzJZzXBrMceYsUig5K/UQo1nhE44y237udrzRXJefpjtdjrptTCeefY8EUdPS02paI7gGQNhstvOA+vv12hrgQd/fxmGw6RyXelPsz/jcsJpXtaqOzt7vx/mm1RTHwd/tUay9St2yP9mBaP3nrscbzXFG6uUblWJVr2sdnSUXd/2pDpgUYT2g12JRISjDR76XltOcGNBFh4Os41UttZd3s3L6rfTiLNJ+tN2Iz3aWasNRaEnw6U7FquDjHcjS6892xnYvOT3L5K8oQdTkJLWaBjE1QuXz0zyX0rcG1VGu+88nGs5xbjrTKThGGnyacZSxOkGEiHEQ+URL3rIV0eInOzoPOoXdCnm5E6UZkdmGhTnfYrYz8x/NXGEetBLzhzBwfZsebDpHkQ0c9Lhutn5VrYZn7PX7cYo9R8wh3+pxxBSSgK92tR3vUGe64/ANF/LyzKJ9kiBatWah1tuyNSCbbTjXpVvPk8BksWoGZaf+eAcZudGkdl96FpfTKk2ycnl594Ak0g43nuvcs93R4tU/T0SFqOtqT3cYtemiFBWae2RuZz7stfwc8vaOw5/YExSLo0J42OUYsoEmM528w26Zu2NVqn0chBChNZ/t3L/hAWRjzxTVIAn4YPugH/e2mKHonhYfMaMkwAgQ/Xlq58SUP6hdS+Nv/qnrpK5anqbRCX/pN6sDFx9l/zon9zl1yc5+rkC/qA7ST7SclgZ+Vz8vPQsr02HYGWGCO/LTJ9m5EYaolDqYxtWa6jB+26X8/Pxy6laVf0xkQma7+a4NZjt37XNSWw9UVFS49KgZN4gqPw5FCEB8Eozpak9zYEUMrblbV95eKBsYeKr+bKdOmBHdkmZEpp9BLv6J8Pc/zXXp2e5I8aIale6pb7ODOMPUmWx/6Gy06Tuh0aIRIOrq8/Y/681Qo+YXnUZtO15DC0T/WX/GvjNfcPGzDqNr9R5Su89gSq3eg7/qNMo/4jV9YjtIEDXruGs3Pn77JbaG1pMch5IvXpi0KEe5bQNr78ekgqPc6pOh5doh+bDHj/EQ779aMTXqMMJ2xOcqPRDnG9W4KKLC2c4EkDL3BiHHQZcC606HCVOjgfU1TI3UwkNhRrThwsPsXEk9M1EgMv5Oi1nODeY6d+19EpuAIiK0QkmAMCNyJCibmfqgbtYgEIXjHDi33ZS1jb/sPKrf7PZDF7RuOaL3X36YO21d4/6z249b0Uyg4zfdh49b3lx8T7/z0p17L6pLxt3f5uX9SoKouYfVmPa32IU3mO6I4gdPCbZpDPr7tDiEn3K9qQ423nHGtCjvMQUF5uz3bzDTibBEQ2ruEfb6PTofazLPlZHyjTSxnaEp+lsl2rC9FAcz1GTOE1MjZePejj+oMCNaeCiwSlChQl+SOJdCut5+pK1ahCZ0T52QBMxxIhBY+QQbMQhEd5yocczlk7HLm//Qa+jpsx/+Yv/5mbMfftNtxIwNjQ87fXrc5WPQ8YuOowFUvjQe3F8fsHxWHcmJltMMJXA5cc5upmfdysxadCiwyUznFvNdscL9ufOxZgvcWsxx8b+WWk5dkY/RoQBxdLNz8+Yc8MdPv9Us5z7ND3YecKrZAtdWc1yIqiMJVoEUCIpJKzQ16nkC4WG/pgfB1LpTpRlRuY7JlF2XMTUS3npj3ttGHAyiqiEJGLzOOye3nHRPBoGoADwHr/faj++hBj/A8mLQf9R/Ol94h++zNjVoMaJ34q0/ePm/4R3wH8qlkH9fDv0XX85eflMfcJUgasa5SNxzwqbg5TJi4wUUom3muDSa4lB7vBIUsOUs55azXZovcAVKEZhwmhu4xmvMFp+t9pFXrqYCt2bslmxaRYFb6VkegUmE1SUsGaH7GJ1Ws12UcZnDuLi1mOfacjZj5MxFRqfPCk8CAux3uxYWl5El5YflO4WIvNp/tVej2c5s3EjXVScbKRso3zF4/JisAJxdWCAoQVtNc6w7zWHx4XKVBBgBoi4+73Se2E0NhE2H9dVSc4Zc+/uvv1hChdmbGjQd2rfVqF7tx/b4vMPo1xtN7zDu54YD9eJQJYiafi6m3Xl06Fz0oHXnm81wqj3BjrC3TaY78p0QuMoePUvZl7UKF6nQRBX2kxCvMEMjN13ESRRZiun7V7VbRPS0wzGy3yovYnvWmWDHsYaAuhCfSI3iZKM5NFzhiMPANZ3hxNGn/mR7bmk/323yzsteITfJD1O1aWn2tyeLUUrmQ0poXHqPpWfxR+JY4+KXyLogCiZxX83eA/kADQpgGUDUzOZENp7ptMm2vIPA6A+iGw59W7P7sAYDBiC//W+TKY0G9a/bb1CjQf3+22Rqze7D6/cf8HW34Z5+/82489s/fjfv/ZYTtNjN/bZfCDGvnkWCqClXCUsduQe7bb1J9kqsc9W+rAuZJV/hFnZtAJX9mh187gH/mOS7puxlVW0LqQA+Kpxp6k9SwptBWy3I1GekVKOjACqj02Ge68Yz4WkyprHpZhS4SNIPwsXN2ucH99lpgRvnG1YTAeVZFEJUoESrn6ywRN0WeyBFWHY02PlKYlL6A9P1Qrb0mIjQMTfv4eO+9GgwB/reKzyR1vy8RBGniT0N0RpXkNCwppYdDbK7FB97655Z40jrD6I3kv/kE/x62PW/T17TpNvkrhExryKejYj5G/rRbce/Dor6P37NzfvVX3+cs/f0F/9qME0LLLcc/abH1M56IqhMhWay1RJ78x6ZgOpOsIO/UWGnNq+pzwatW4eNA1ap3kT7qbsuo0w1WXerWEMB11MHrPYC9gA/sNO4sdAVHjSf4STweN2p0Ecy1FwZJhU6aaLEYdvVZaE7eAlqso4gLOcV3ZOoEOdwXRHeTHdigSgShakObPTkVou+KU+cxo8ELL6rf+LEHb6dxUBMtIewQpCmlqWJowxbE1eQ0HDcZwhIZ0R97sI3yTUgkQy7xnfiGXfqD6Jq/Os5rTOoqf4TltQ74A31n9duvIJX6Cs/zpEgavLBMrjBdafC2ExZ9kbwnfps6DTLNGU273O9ZnDnqvYN5GCa90sAy5ulbqbRYTdn0283z/VsUHLVJrYxb//gYe5e16tdF3kAhKwg9mXjhomzERs6HCorkdjIhFM3pjdV+J6ohMzpe69AfDRQSiZHwwdCQVaV1kOI0Gbu9buamGlCihoKovfuv1Dtfyuyc36txsgGAwecvfyWJmSmZvxOF0R3nqz+85QukhM14diV1BTRVXosO8d5zVT8TQmYymaNURL5irMk06Pf8EbEZxLGk9wUxu3L+pxvRB3Ewuz+7B0yIIN+I6PUKnhcQP7tVrNcYGKMxs5izQvgnBiLXsvOeobIDPalDwjy8zFI0SYqhxghMy9jEXwqh37aHLvVh/ZL74QeNQwC0bv3XyDMwqIddTSxsF7/gR46IPqn7+eKOvn51ZD03kr7fb9Z7aVOVI8BMUUVzm7i5GXuPVo9p3kQKr0O89wwtTDFG1TmNs6H3iQnMOI+U4nWS91ZGB3wAKk+7kyVmbKmeLeg6LTuSzzUms5SaWtoBcYCaTBQOnH7pQyptH7GkOXm5WFhCw9gpk2MUQCYWRRLjgQRhaqME8cgEP2+59ARi1ppcZOIc7VA9Hb67/5Rd6a62qt1Zn/aYcyHrSeER78qOdEyjlfpt0ffvPeTSm1j6PIue31mfOvZLsTZKb2XVbXGhfBbiPXgb8pObYNaYNfguZhaVFXC6/XeO50i2bhV5xsT8D0lDJA4dCLCYT7o1bOqVCkiPgMdBNPV3KOgxDyabN9urishNstCYINA9M79F3VREC7zkYZ0lwoFBdWSNILr6g+cmjWlda4xw4oRGjDGLmDQDmvCypzvSPptTNerwD0Jqfc53JQ/ghaKdmc5gxALfgmoApQ25hWxHhI6MxMuh5KbEva9x2X+V43hwvaHWVpuPIAQDOAh5uyXYMykUd1jEIgaB4fG3SVB1JgxHbftEpY+5j7Blbw1IApbdSLEmN5X9nv6rfLkkFFue3Sxajm018TvruyUNvj9cFzBgr38Fw7MKMh96qIMq6kMmZ1vPM7oJlF/GrTKeCLrwumKkThaFhBNzXxJT4AkZK6eNdXVJIgavBEQUYgFWf4bga6LRa3xtvEyt2XRATzuHcvxosJHB+6HOEcyGoDm4Gy2i6jAhaMYUU+0vxxV1YNrBkangaBQwyD8M1VlcZoJiE4zeNstGyda7bNlYB4WQ4u219XCyGbD+mCFpL74ZpMpEkSNGB3Dbum7yhPzP1PNqrK0g/3b7P1+hvW+stfuusi9ogS5mkMJirNZnPSOrez01vf92Ls53JSnFFd3ZSFRbDvX1awBAfQlRwXV492Fx2dZtp0y3qt0YLqTEXZGZeFEq721XkDjD72GBF/9hyZM/rXW7GMuHzce3I+Yf23H9MDjpdOEbq1G9moypO+czQ30AVTJiRo2nW9lZJWDKl7PacqW1HCyQ6558sgbRhfLqB1wnZ3a7IYSeo4OKvPBa89bBmEqvheEtqnwo6di9jXZfsWx4IonRwX1YPHhIGx89JzAZqqmWHtNdsB721Aa6A+inlf+++3Pw38a0q/hwAGNBg5oPqzPn76f13Jkb6LjNhvWt/nwPt/1GBYc9X8A5KYj38zc0IjoRcm3X8bs6HbG7/5We3ZO7q9upr6cdPtl/pUgaugwlV7/1IU4ywFRZjkSXcTLpfe7atRAYIi7vZkWv6HNipA66fekEfVj77CbKMMqXMbOCIo4O3cfmD6ejuWvMKIRWcgocPpHLEFeAYOIpj+IPsz+deKtP4ZFv5p+57cY39598EK1D1fl5iuGuCnpv79x80/JqS/n5j4HQL7dbFLIdYUxbTyoP6HqKe+1nNh9Spd2Y3r0nt5RHwSljuREDRrHxyT9wKTI0P3UfPVB9P3uMoxR4SDio0lkIvNR26CWwQyOODgTGzbDKmPtCdt98csyiHpmqsygoBmtmmL2HU5RbBdmIqxBzTIKHHZ3OkUZNNn1B1GALTtHiecHfymAsNq7a88/Cfj3WYfRdl7vc5Er1d5cHxX3N76/WH1RXv6vYEbT7/4WfvT6jVfeaT5JgqhBA6Rv5el7rlSs5afWZMUNbv2ZMH17X9nr9V5+jthvBq1ns1ZGLXohoqqnIyVzHP6I5W8L+qyRBc7HbfWp7EuhmPcbuOZ8ufm0lLqsWKek5TFoFAwCUfDvtMeHz32+5OGj5xUQ/WTFx+3G8QVBbpcnydHebjaZkPSCE321zixC/XUc/zOl0/jubUb3rN5lpARRgwZI38qz9/lZGohuto3Qt/eVvV7flecsZ5tgHyEMqczpTd7WCnFredY+jjiX5DCVfSkU834E8Kooo1zdsVAiMEyyN2gUDAVRIPCI0yf8eyXsXy9UX7x4R52//DB38pqf1NC48dC3vWZ0Coh8jSsvfzuffwmlS0EIHJv4Z+IWSRA1aID0rUzqK7TipZ6zyq0CXuQnpAnok9GbpspDV27EL/lBioHueLu4lHv6zq1KWo805oi1LWRQhFoU7yMjrEOtenwePMr9fsyZcguBWepwC/Oiu4bkSzYCRGMS/lK//6DPOoz57deLQMT//jSV4PKa0Nh6dC8BogT86zmtE3a5lC4Tu2KmW73LKAmiZpnz7kHJlmNYxET8YazttSTTxHc2C73Kt9GDHtc5VZS6gMunApt127kuZCkpXxpY3NNIA1BrnEWBqOLCm1/mUK4WR+gSO3T/YY4ComUOLm+qtSPUoncMiV1qEIiGXX/1p8H9Xm88bZ/t54o49511/HvvwW/+8O38GesbqdGx9ahCEH255nxsdDHHpRBQF53oh63HSxA1yyTPzs0T0ThNNZnK0g7ZFsmRa5b3tM5GyV6ujE45hpQrYfjgiSdu97VOQpqy12Q6qm8xfkeMF+LcLos8TPmGVtIWp38LWRqMAj2hPwZRTn8Qdbn4zvNfLlm590c1ClZ7c4P4nvXweexvAciUtN/zJyAaGPVPhROtPXv00haD5rWhDJnfpu/M9jWkTtSg4TGo8sw9fkQ5sATBCFzXFnupEC0yekPWeVuCRFcEW/Cp8lZFjE12bj65mivWwV/zrINNAynuDVrylaNyL0syu2M+dJxvmGZafxDFzhZuEmiErQy59nd7r/eqfbxCk62cs6kB5rtcwXnUN/TfZOr+9RdLr8b91Sf4dQpXPHzfIruLt/8b+jCj0sXF4AWSkvFQOdNVNDOKtBB3/qocfqXYkfO7lmoJYf8A8qHrvA2eW5X0hll7McezCEsCka7O+UpVDGu8xiYMOU1ZRF+muhcOhJ6ssQk1aL7rD6Jq5HP1efuf9Wd81Gb8IYfPioXDgXPbXQr997AFbeZtqT92WQt1Gb+i+exNDUcsbiVB1KAxMqDyVvuIit2p2Qt+HGfr4BtvQKerTNW5vwRUrN6a8w2WhzE371YZkpfyomQPxVDZMoItOLWe7ZydU9bcltY4somp99k0LGEU6APzIT7lvkFkNAJE9YHAsteRnKhB4/i08vCNFzhMVciMVJ2m7eb94m9k1yv7bfkFBbigKSL3ijCjQNmjRM09LxOGFJlnIzderHDfMCXSwiR7Q338K9NyIUU568JUDKVx7cCGMhOIi2IoYSWIGkoxK6jfa7ln+eOokEeNr5Le4vrPiYz72fgCIkIs51OOQNCtdlJRrT1WcbfuYY1ZsSEXkLF3X2KYg7/+U84qamLkRcCmilVFMQcQFKXdeWgoxSSIGkox66g/bP2F8ox4LhIJzdh7xTqoU6G9zLj3qOeyc4TbLjccxVYCCcFuZ8OCmVUokcr14TbesRWYCo3RAURjblV1t137y/F4HJXbotDiVhVB7ng7u0vG6KEkiJbrci3Ph60+EcLWSaAcs85LGicqLKfIPS5Xy/PtrPpZBQUFM/f6MTpsoOYeHeH4dC442aopZu7ObzgdDo6Wv6MFEwA+2Dv8lrlf0Cra32wXXiGR6EU06c224cZRSYKocXSzjruuXL3ddZGHmTZrZp5gcfqu9JTRzI2YEE5XEsgiiQQJOZLJobTwcDPJfvJO3/R7j4zoXlW7ZRtGeRPscHE2TqNm6F0MEAxok2lOFySCakw1TCNrT7AtT+k6z+KJW8qg6ZAgWvn3ikNnr7eb58YGIbjSslu1cGCH++Tk3mWRu+2lG5WfgmZ7QxyBNtmGt1Jl8DAJV8r4wndiH4GhyqA15y9H3TZb3ythw87+iaCaytnavEFLGCMOT90Wn42t8lJc3WnkcDmehFScMMw9CrTPSmk8xcGubN4EEkQr4V6g+0p5+QWI+/ut8kK4x+oFTQ3lfphwwgGU7V7xNVzv7R6UVCVoZ/6XJPIZcQF/XnqWzMwI9xgdNln9dxBORarRUVRrCAYYJnz2A67LZK7GjNzNjKxRmy9iT2AmPYjYuFmGq06EPH5cYEwXq8A9yWkPSO3CMd0kJ0tdIYGQotH+oLXnk9MflJGiEkTLSEAru52T727nqwNWezGx2HABVJY00MiUorARC3DV5FbZ0NmdORsiewQ7j3rGJKaWddpZGdXKq7tEc4Ux7b3inOBUILsKTV3ELsAXcZRprhosCvIAxoVxZFNuP9+VYH6OVxIwAC6v/lba57gHJuGMBGGhsEkUpWLgGCwMysZu9bmeJF11S588Tn4JmLIDdSY80DAQtEabBKtisZTeCT1qAKJjtighcC2t7HXtVX2ER1RiMZmD6av8lJUCZG8Pjk0/fC564aGAwWvPwwYRt7PjAjcyLLJ915toB7iKnbrbYo/lR4MRDMogRGUlut73P8rJ87uauvJECFs5JxtGgeFgT0fSSIzyTgvdGRSCpY3e7LP6ZKjj5Xhi/efk5undvKyoFwW8Qm6KYI3Ixg0VDzw59yjYKSQEbN/kK7wqszLoRfunlRwuJ/RZ4YmEhsJCMOJMo+g4VKynqhH7Pis9gWcDe1FS9RojbHssPfKLR/edTv0sp+x36zF2y7pvRztFJEgQNeFol9hUweMCYBLR4tXEO46XE+Yd8AdZ4YRqj7cV8UTYUNjWPYOT0+4+wr60vPpVtZ6TfvcRbNCiQ4GYa8G4YKwIfKJ7xpqXlR9z817Wo7zcvKoY16ai5kHC7fv73K6phTfswoAiqZtVkhtFA80GrQhvNNSoQloo9n1OpeO2XoLpuZeVU1GvUAmey6a0/nTYz0vONpmunEiQEOjqO8QoCLMAhkYR1Ux3YhHBd3IXuxktXDODDAA50I/jHL4Zdc7Syg9jnb8eeepmepbuBJCcaPktipTMhz7hKRttwwas8mKz+G7MmeojToGp+IZP332FjKE3Uu5LDrWM43HnQQ4mmsuOBiPIxdS++ggbKIzwfOIO31MX42JvVnUPwjKS11S3I7xBPLDb5SoqZ0aKkw1jpMhpZziRgVLICRRWSRW8esTGi4h5ktKk4sNU5C9sh7MIEoJ5vwRwOhF4KRxtkZ8peo3JDkQy4QpZpHBMQMaG7tkjMMmsAwFKBcekh8ZlWFoJiU2PjC+GDYWUEkRNPC/1bI4MlBE3Mtgaxm/zQQPHlK0x4hQnndZzXLDF2O4YGRiddu+hPG7rRc4Hj3L8r6WuOxU6cI0X0sLqw23IqsjmO2qTsvly7pa8vl50rMhKBWzoqXceYgWDOP1c8M3FhwO7L/UQKjd2c+Tts/f7216KT07PkqNZxoHKycu/lZHlFpCE/oLIfGg0QE1hecRpBmuAg2ej2X9YONE37wKZdwzJql3Gvlnj7RJELWLUCNPs4p+06HAQXCknwW9GngIJkGz0X+W15HCge0ASobzy86XU9+lgoekMj8vY5hA5bMMFzsscQb4dfRq5E+flPS7XwuIyJE9vETO7bJ1ITHvg4p8wa59/xwXu4qDJKHdd7IFC1MkvMfWO9NnVl74AIZ7urBd0/+3nu30z6jQ7DEIazpoD1pzHBM877BYnGH2bk/U0KCBB1OKmA1pSpvtW+0hMxlvNdv5hrCL1RfbLIRHZ15FzMdHJd4EQi+u3+TuUk5vPu+93u8ZGAF6ypbIXoKpB5UnKVRxRUEKbvxfyCRVDAQLznvG5MXnnZQS/KkH9qR/G2hL0EZ33uZDkTGlHXXRYsrJz4emx/0dVhEkd1hhfDbepOeo0zD0n9QUHAwkNyGrKljZ0ZZ7OEkTLTEJzNgBYRiZkHj8fO3nHZUxJkbqAHBQUGCM2XNhoG3Hl2u27DyozcsB/k90JCkza7ttmrgsSbwoKM/aF1TYhlyJSpBeKOSeghbaNW8sxr5gxW3xQf4hTJtJIzlIrjgczJaqm2RFHTBSKLn6JS48E4xiK+Q+8JnsF1lsd5ruO33bpF4/rOBFk3pNeWyae1RJETUxQszaHUymK/WXHgnssw7LOiXMl6wQxF2brCw4GYLWIqiMvvzKYm6ZkZhH6ZMaeK50WuH8zSjk3sBfgOLTkcJBnyE2E22als2zcWiiAcXXEjcz97teGrfdWjPVGn2GqcNZEioP5KIo9DLCt5V0M72fBnfvZ+MshtUK1iXGQIqRVWdIpQtrVXhvPKEJas9oBGd7nSniHBFFrHVQSmARcT9vlHEXQBs7jrBy2D2AV/9QJO3w5dV5NzMzKtqYdhDdyD0ye/0sAxvcq02XlfNBhgdvsff4u/olyL7DWmVpe/UaAGRyTtsMxCksCbGSUI+YIG5yayAq83SEyPD6zEqjJsx7lYu9z+JwipMXPhFQtaiFttyUenKTtfW9cl0La8ppy4jkSRMuX3mZ7Wtytu/a+8XMP+Hdf4oEkBxCqMfIU3CoQi9nqxfBblmlih+QNj5Tlx0IIo0gQxJqjT8NGEFoF7S+RhONSpEeK2WZMpW74blbOlaupsGIAKp4b3489g0VS69kuuJniqIou0Fr8g1VC2gfOfolLjgQNXufN4YCTgRDMYNWPkPbQuejwGxnSGqACp3MhiDLn4m/f57CflPogXmfnSrvzCC9p5dcnhT91Nfk3Uu5p1uE7Vwg7oPl69x/mFj7oSVNovFIytD1YsRNDdKnZGvarnDQ1m2IZcJEOP62mdP6+FjVJu6HbeZgerWrU0XoinddaaQ8eFdN5AoRqNYVMlZcq0vnb9/Fp0eq80qvSOg+RdTuP5ZHWEwlZiYSTyhxU0+4+xAMPI/XlxxRfSVYd24dQGhFeZM5+v1MX4mKS76oofB+pqVZTt+9kJeh0XkvJJPSURciloryW78G9B9k6Y/0g/e5DGAJ46PWnwgauBTjtMBIRMbIxEtlwJgxpLa+s1StuUcZaYwbydLwdtCKmkgS41ImaX1B857WMnxkvfSYqWijtsWaiPiploiqdVywhiywNfSYqFGbO6FJea6LSAd3O6/qJs+5KnaiQRWuV8XTu0hrrZ0xULal7AUOm3fnb98EJzeHGDqCYsdYxHGWi6nZeVxuKwDM0Nv34+Rgy8CDvFU6QMKn4Pk7cfumoV4xw4dBqiiVA+1qTsJixvn1fy8QPOx28vbUmqm5oT+yKdSfqQ7G/FShCWt/I25vtIlD6IlhigQjHWTqPUdW6U2GcO9WCGQaCVcyew4wSzy12R2Wb0iWX7o6qtYfTc93FyOZZzI6qY9hV7Oasz46qWtdFPsVOVKBEsxITVRuAUhUA0mpKzx0VECyyOauwDNegYqG6EEQ320V+OOAYWy3CgY8HHdOqisD9k0En+FVdPhp4fMXxUK1q7/Q5gopOs9pbvQ5nFvUxQsz4QX/lQery2ZCTCCK0mmo4xf6LoSc1q73f7ygxqzSrYXHz4YDjmk9UOj/wuFZT03f7fTzouGZT/xt4fO5+f61qnw05we2a1d7ufQTBiGY1vPU/UFFJXT4fcrL9PFetplDd8VKa1Xjlo17RmtXw+v+06BNVlD9OdHvNahw/6a1mUx8POoEjl9YTvxtz+sthhZ3H7gbUpFpM8h2qcTxCxnXAXQkTg8iXBYkPJRVgVfkXU73QuPTC1atqFBeRz4ee5KirfuiH/Y/tdCqSgzox7X6N4cpUKUrVY3fuFzFxQtT8yeATMAE8VxRsQBCv8VBu5OmwCNjZtpipxKMRoVDpHh17v/+x86E3Nd/xUuTtD/pB+adPZHrAcGtN62InKnEWNZu6fefhd6Ofkkt5heE2/xtwPCm9CHIfPhutM1FP9FzmqUV5mBvIpT1Ri8YRZaLSvuZE/WLYSfxZtbaw6Xu0JyqTedY+P80n3s3KxsxSPdai8x8NOI7oXrOarW8860VroraZqz1RuxU7UT2LTFTgRJmBGmPN038cd0ZrXetOVHaMcVt8NHuVm5vP6BdZ13R+4LHAovH9z4XcfK9vkc5zS6OpjlqU77/a69PBRTYl3YmK0Rm7GZpC7HhFVGQKfSBkFbbuwkyPecjc05ylTFRIN3Td+aJPLGg507nIWA+3Yc/0DisyUf2vp77bp0jnIdf3Y2y1Oj9mqw9zgJWoXhrIYIZv8J6zH0nSWaUDw21YCBx86SR9poeqBeJQZ7xtatEz9F7Xa7o7KrERtJ7INsVmVWRTGnAUv1vNaoRRfJs9XGPts8Y/H2qj1RQeR8xMrR0VSbJWNeoU2SJUq4y1oFnt5PnY95V1rbGjDj2J1aRWU8VOVBJqaVbjiPNW7yKdh4bv9j2q1RS7AeCl+UQmKocVrWqfDDqmtb+92+cI8Ra0qok/C0H0YkTK0qPBa2xCcb+Fg9GqCnggcONXdSEijG5q4kWHgrhds9qCQ4FaJzVYENabZp0Vx0MOuBchB0/HY4HoGJrVFh8J0hoAXLPps+YT+Y7RjVbnibrHGxXp/LFgnM+0qmHXp9X5hYcCtXg+vA+1Ok/ovr2u2gm08cHgpTSfyF1BMUUGgNMcdbQ7fzRYyxXUIygZUms2xbtoTX1eZO2psFVFKY/LqZbXF38uORq01iYMl4CRmy6SOopAsuzI7CMccjHE4F1wrdnuEEHHQE1cypCGceylA75Fs4DdfZBNz9WdF9XomJbOif1l7NZLPZYqIeABTvYCBLasECS36Kgw+nioUtnyIO2xPhwUe6vI8QW+ChpqkovecqMWP3S6uIl6NqhIDm1YTOTbmuSiWSYSL6U5Jeie7kSFv9eaNrucouiJ9kQtGtkE2IaGmp3nfTfZRmidAEiJyuzVmqhagUmh8IYz4atOPF1lypw/GqzlMUnwfd2JustZe6IecLte3ERN03xHuDStVcbTERhoretiJ+ppnyKp/ZABMGSa5BKU19J2I2tdfLjIFgG5tthHalH+iGeMVudpCgZOsxoTbNmxItNGGYWThad/2CxoDqDihKokvFOlVEJyg4UBCE3AE60nsijUnV9/OpyR4omoUTSr4diqRXnIhYmTVlPHvGLx1Rm81rvdXBeeKFYHR0xFSDtPEdIePHudGai5ysTmzCunF+X5/K7dxhy31B0VrNWaqEuPBKEn1uwYOyqbg2ZTPJG7tDrPnNSdqK4B2nmotOa8mKi3i7r2IiTQnahaR3aeXuxEDbxeZKISmoYdW6vzbINanT8bXMyOevqidg5KdjMtOFh0OLDYmH9PQbRYgJUXKzcFEAFdCLu14XQYvgG4XXIu5oDWcLL9kHXnme6u/olaEnty/BKNVpcmmC+tP124MSnyxrQHik/OTl8ioZAGq/YEO0C09/JzbCWAsRZWVW4Ky7ezFgogGeIENnmHL4EIwDPCLIswSZzdvUKSdb3IjJjGmfcf+USkENaAQFpwirCYHGF5Fla1A9ee51ziHXpTWs9Zy4TR7Kc0LLLGUTN9n1H3hsZmcP4ltxR6l6dhCAmet/kiFo/XEu+0maME2MSDW/Px0Ul3SCsGU8tpDtmj4pEyUnikOCDWBozPh91ETWv6HssWJQXMQwHMX496RqMaYLYLJ1QwFfEJDDGc7sOcPLzIYBmdi8tectw7lijNol9ophGekd0WK7luS86KppAeo4ZAPon80873hkwZZJ4xLNdWJYiWK7mt5WFEh8EgEPEIZvT4nKHAg6EEKZE7gY5E3USfR8HAgZB7IrMVJ2s2HepzF86szxJ9WAsFzNrPI1GTdoT23RU2wNLK5uBu0ZnaGnezksKSG8cKJuxGxj7Xa4PXnUdUo1i8o/uY4oDdAOJfVsSeoqocJJ8i28FawjivPg+XiVoOGwXyw7ef54ZhMKYJQdFpMjyIJQ+6EX2TIGoE0arULQV4zrBrqDJaKyk1+AKm1p1gB7dKEXk2VHmSnSbt8NVSSlUpSun/stuCey670nilXzNLKwt8f4xIO6f/i1Sdmih0o5PvENUBxYTIa42tL9qKqbuuHDobDbuJL5lIdMqKAGIRC2Ougm2dTwQxaYvJn1V1SFfp31SCaKUfYmNeMObm3Y2nwzGv4DQNi4ntQ9EUjwpqqoqLSJgscJTNhX0EA43eK5QAbOE3is8cZEyHKtc9O0L6rvRvviagtaWVxZfrRaZrWyBXLtob8zYkaccXE9scrJA4UIrZLv7FFgnRLuIZJr96IeA/A/OKtZ1XKElrK3NUTmOoWenukSBa6Ya0DC+Ul1eA51zv5Z64mmBYochpNdIjq/Gy5C8Kms5Q8vcSToWEG3tcrmr5TZahg5XkVgmi1jKQmALN2HuFCY+cFqQkfzUZT3VTWGutCJFIHH6UMyVuKv1WeWJxSjpha3lr2U+DKCBB1CByVebKhD5hL0BOCwSWuk3oA6hiK0H2y9aDzxIGGZWZfIa8mwRRQ6hVAXU5TeLRTuQssBMsRCHa8onERZ+Zr1lHSGhEmutJOy5HxGdUwPvIR5qTAhJEzUldK2nb71pq50XuHJnLslmUsLkoatSJ9q1nO+NNaCUkMW83JYial75la93mQhzyWDBPpcV4qrAwFD512VPwuNZ4O4KlEMmvbH2Ud1sQBSSIWtBgVEhXCNSAv5rKVsJk+0Wx2w1bElJi0ilXyGta1EMliFrUcKg7g5vmwDVezFJktmWEzGfdDmOKQXuDSfZoWC2TCLJXhlJAgqihFKtU9UdvuihMCs20ZegexpHu4sNexeNlPwtEVwe0XhHWdkVo21INjlYFt1kS3WFlSJtSaxpUoSobFiEmwUQIQyFznyaFiTuCHzywrSUOfqXa9Uz9MhJETU1R62lv0Bovdo1yQ1A1oGJzRORSzYC91kMz0/S0WBBVEDS07YkN3x7aU6tkHAVBtzs2vlb3n7tt6psWR6ssiB4+dx15DOqM8jlNCsteLJW6LnKX5rumWVQV14oE0YqjfYU+mRQWqvAI5hXhPmtLAkfJUVWhBKjIhz8LRJde65D90q9TPvjjoriOJXCQK8IVrH1crZrD/K+WR7QziNcsuXLVBNFjXjEYEBlhiF52xCWwPgdKyY9W5Gos87MliJaZhFbYAAkQylOKW+xegziLEM9WSDwTdLkEEL3799/GV/+rGkRXB7YGMpdea0/hC3+CgvCsMKAbLrRYGdqG71wESlcFKYws1ZZFtV8VZKSYtwqCaHBMugjvXHZENK4FXLEJ1GCCWVVZmiCpGaEtLLMUS2MJopVl6un9HkTTRvFTnpKrYjcXxFlsXqTs0LvjlaeiniCK2HZZRLsjO37w7f0u5cj2H5ZFApZtQM31Pi2cZn+x0auZQFPHOV+uCG2z71i9yz3f8Rj/yTrfliv1UKzqcqVVDUTJl0CUPny6jMM/k9zFQuBE+4tOJqvKM931fhOGo/sSj44LKJ6WV84xVbzDi2S+E28mQVTvEa4sFdfahCqqUGP93kyycYhGsPiftutKZaGrAe+hD4jCWcJowpUitk178+WMf/2OLzHf/R1+lLL3eD3+PLznR1jPfarv4U3/zb+Zr73Evw/+8uKaK62M4EerGojucIwEwEw4pY1rihMtvtQiM2BV/hCvv+Yo29ZzbDsvPNZxwQnLKZ0WHKcztSc4kopOd4AkiFa5SdtqNnFuK0x4pbnLoIUCzu8UzY9YFcZDHxBder3DhUHvg4j7D9edd6vLvJSuZ5Z/zZ8wnYtjOu4+1YDvvxyoDYjuPq18f/CXFzZ6N5ud0f3g7h/5037BV8sjDVaXVikQzc/PJ1E5MZ+NQz4T3gUzioGCbmbiqrAWNN/xWtLd6iM8Drj1UHF3llXuP/xd9RG+hHKUIFrVpqX2+5KcnXh+5W+R+6wdB81osSmlKvc4lQ6iNzotj2r34M8v3Kj+twWJnYTiE7y8/8qLSZ++Mj+5sy6IHvilDhUUYW9A69zfPOfb6x1g2FCboyoFohcjUrAnMiEWlqUpvKi7LHSv3NO+1LcTILrDYZClISj9SUx7TYJoqSNYJSqQLpvgQWVZ7aa9F6uKNSeLkZBU7sEoFUQXJnRaf6lFwa+q+XV/G39QYUy0ML7Trff/ePf/XgJWdUEUrhQfU4TAqwJbZ//u137d3l4iQbTEaUTmMqzETTufjW4NqUyTaU6pVTvzrgTRyr3vVZK322wXDidq9FI3+Y2oRWfsqXJqUV0QVXjNgNbA3t1//Dbhq1fAy7WXW+Y+/6uwFq8LS10FRG90Sn3r5dS3/jA/uUsxILpfAdHVEkT1Xqnkn0cTafIpbVyDKrdR+4DraXp3vxJWlCBaCQe18r3SJttwmD/j1rk57gJEp++pcoEAtUBUBCpCGLs4tuODV16Mrfnq4riOi2M6YE+ExwsX8WBZerU9VrgoO337vLvoRnGcqARRA5crjiVNnuQvM8fcNqhNQJRgXhfDUwx8iUpVXYJopRrOyvoyh8/FKDEWLMA0V2wxyNPIPFpZqf2s99ICUaxtT6/42mvUR65TPwMmzw/7EMjELMhmbU3+vFr/n7tONThwoE7G67/nz43ezflpj41iTHRwfy2gd4/KyOjgvlqCEwWSc158zr/LW1KcW/K8GrHpYpPpFsSJsjB9IyWISp1oVdsOre19A66nEvzacgyLcDCw9blhbVQsa391QdRm7TcAISXx87+s8W+NahMsBCDtF1fPfeE58dPND/+8zbkxXCm+obvONOTKgUN1l0W1K/x+sA6+odgfoRO997cXffq/DxJLw6IShmrWvisIQgziF81XGZ0ogeljblZFt2n1GElOtKw7i7y/HChAokQQ1EJcXISbedrdR+Xw4hb1CF2dKNC4PKLtGr9WCG/V/p3gKBi5KLYj+tGVwW0WxXVSh1BYGdJ2MQHoVRGLNL+DmgAw4QMJy8BPEkRLGPcT3hZkZKdkIZzlbFGztPw7YwSIhlz7R1j0q5rWvKv2/WAO415pnVv+88Fyn7jwYABqUUtgRgmcNGaLj+VSymw9K946FyZSxYBqIR9XlOuB2j8JWyRRWfO77p/6Q2mVcnHh9FbhwS/VrG2jqQ6z91c54wCtFWYEiH7ZedRRl080UbPa65u0QHTS6iY/9hracOCARgMH1O07uF6/gXyn1Ow+fPvxGnoirgRRs22HVtgwCYEB0QoMFio2DlCcxI1ELrVCEpa1yzKfaFkpaKL7J++8bAkSXWFVFBGfaaLXstZmDAXR8OhX320+CRSMSfzzhJXNZm5ouHhHnd99vXDprlozNzSauKpp8NX/49dWI3tdCPqPAMuJK5vtt/1cfN90pOa0tY0liFrrdKnYfm88E463aAUyo2SPqT/ZfvY+/4qlQ0U9XYJoRVFe67mxt+7VGW9XIflb1DwoyxA2dOzWSxZCkwrshqEgWr3LyKSUl8+c/WDyqiYH7D/fe+aLE67/e7H6otNnP+T79hM1AFcwstvkLj8N7tdreqe+MztwS73+g/rM6Ej5ptuIhdvqShCtwBG37kcPWO3F0q0oHEWQ22lh1c0AJUHUchbPZruIOuWYl17XNIlYRRgJ38nKsRyaVFRPDAJRGMq3m02Oivvrn7+fG3/zT2osrPbhSi1cbD+2h73X+/ezfpOT+9zIxa02H/nm4aPnH2Y/v2x37VkbGkoQrajhtvrn5uTmAWPIssoZR/GuwcMdTjQl86HVE9HYF5AgaizlzHLfiI0XyI9dzgtBoCn2RMiEqrh7qHpQDQJR5wvvztnc4I2fps5QASEyW0rH8T//4dv5nSd053uzoX0FQHYc93Pnid3QjE5b17h27yGtR/WcsuanKWt/qttv0JxNDSSImmVRVZFGH2bndl9ytjxD6SqSqykObea6JKY+qCJELvY1twX3Xu7XZJV/C0srC31rR6Sfq2pDU/C4oO9KTyW10azyS8zAaZLY91g22V2Kr2oEf9b7GgSigF/6nd9+0HKCQEEktwm3/ph464+pmS/xhRId/xfx08LtdQ85fHY59F/BV//Re3qnOZvrB0T+0y/8tdX7vz/k8KkEUTn9ykqBSTt8WcmsZ3PvIJgycegetPb8/Ye5Ze20ld+/K3Tgav/W6wLaWVpZdqVxZLqXlVPXyO6P3nSRhVA++lHWGvIY7PvcAhKN7G5lvM1QEP2/+jOOuXy859RXtuc+uBD4xqbDNTc+KXw/e/lNAHLrsa93nKhB4Qsa07aje4xY3ApM3Xrsm1021Tcf/eaIk144Kq1zK+OMM907nbl0o+l0J1hScM4cUMrGxH6BL/k+t2um67VsSVLAxBTYYhcBjqKhNMcqUBuls8oITtR1kUdcyj0Tv4CVN2cQiF4I/M+/Gk5vN7YHgtm45D81Hdp39NIWW45+s/7gt0DjmKUtGg4YCIgCq8v31Fr3y3dAJvXfbj75tQbTqbzn9Jer9/+AWvQX+8/0YUYliFr55DJ/97Oy85YdDQbnUA4Jv++yB2ehEfYL4BNB2Yy9fql3qq4S1PwDKJ9gGgpEJWb2XHYWkUnTGSaWzYjlgDqDFUEIa9N0t3K1YhCIaiJfbu6vmg/vQ+AF9cWwa/9oNGiAZh20pHM311+6q7aN+0fNhvUxNCaDBNHKNdfM9jbpdx+tsQlFtMtJGZsjgaYGASqaHhERCftbGoHBXXAooIprQM02XLJhc1HAxT+x8yI3fDeZxmUUz2BDx4rABJejJGtq9n7/Kp7vrIQxMwhEr4T/a8SiVo0H9Ye/HL+yWZeJ3dx9387Oee7egxf418P37SZD+gGieXnVlu2u9WqdWceclZgM45c332+n+IkOWdDm9cbTwNTElD9ITtRcC6kqt+sZkjx112VhB8RWwuJnFwAa2VCQzQpkVUrRQPYCQdvOde20wH3a7ivngpLzCwqqMhnlu1s1BbzDbo3e5COOgwbJeMXqYLFwiES0A3y2m+u61T6CQ6pVE8TcnTcIRE+6fbRsV20194kt7rstJn7ddQSeoPz7botJLYYr1rmfdxzTa1qnvHzFwogyfGFr/EfF99ikP2PNi8OoBFFzj2yVbv9q4p0T52PnHPD/eelZcaDGIAJMxccUcEXqxR7Bn2wxzVUoS4V+Kz0PuF8PiE69kXI/61FVtyGq0rOnUrx8bl6+W2DSjD1+IsyW8q/qiwKTKqQU017l7ukE4iKtZV1gYcCVXsvPoWcNjauKYbmMGHyDQFQL+Q7YfX4/6wX1RbxC99t+oYuODl7v+Uf8Ux/U1KojxblGDKi8pRgKYFiblPaAXBORCZnnw245Xk7Y7XKVYLwjNlzoMN+NbQVNErD63ZgzNUacolQfYYOlRqeFbuRuJPn2WpvQo14xHPBp4VF2niSxpIClUQDIZIb7XUu1943f6Ry5+HAQIhkcSXuvONd6jpK5D3RUjo+T7PkOagKiXO+y0B1NKpN8+p4rhAOzvXQjJCb9UY6c4YYNb1lA1AhcNOgWCaKGjaWsbTQFMu49upZ4xyci5fTFOM7gs/b7DVh9HrUQ3Cr7zo/jbL8eqYArhS+Npjp2X+IxatPFuQf8t9hFcsvlqFS2sLz8fKM7IG+UFCiVAvce5lxLuuMVepMj3fpTYUR+H7npIj7TCFSYltVV85PCWbD2BDtQk+vIY4etvzDvl4Ct9spEvRh+KzI+k4AheXlyrpZKb30rSBDVl1KyXhWkQH5+QUpmVviNDHauY14xa0+FTdl5ucfSc81nKIFD4Va/h3lV4StbWM1RpzFu6r383PhtlxYdDtrldNXpSkJwbDppNwqkkrUKzh7DX1mZbxkPA2PSnPwS9rhcxfKc+TZwjVf7ea51JthVH27DNKN8M/LUD+Nskb5il44+Ap0FbtMrT4Sgj3D1T/S/nhp36949GZDPcPobd0dZQDQv71dT1/6EVVGx/OX1hL9sOvqN5k94wojIunoWyYkaN6byrvKgwKPcvMS0B0HR6e6BSQc8ri8/FkwwbkIScvyHCYAV+Hb0abVw+IexZ9rOdYG7Jf/G8uPBv3hc9whKRrZ8/6EMPVoeg2VRzyDkFnqBC+G3TnrHbbQNR54xZvPFnss4mTlxDkOVIHhK5k/t8bZY96CwRPQ6ZJ33nP3+hMy18Y5DJREen3krIwsprkW9WtXsTFlA9KvOo95qOrnb5K7PAsW/1prjdP5d8Suxdqt9tuzO/eIRt9gWJIhWzTlp9W99PyuHPBt+V1MdL8fvco5aeDBw+IYLWP8Kg8la42zZKzWVrx0XuKOXmrnXb92pMPhdlK/cnp0rVVPWOhMQPOAQEhab7uqftN/92ooTIdN2XQYFGeh6E+0EN0lBBsvpCnkGesqmMxy7LTmLDIPT2D7Xa85+icwfsPbuA3nMsvRpYDSIft5pdPfJnQG/n4b07TyhmyYKXgz6z8p9P2w/WWPG+obNhvfBNHenTfV/N5o2bGGr3ae+WrH3x+vxr+jDjEoQtfTZI/tnKAUy7mdjOXwxIuWUSvk6c59f/9VeijO7Ihy2Z0tFUifwlcLeisbrifI14ozPjStXb6N8Rehn6HNlfZNTgFMOhty+kbcZSvxAFhwMGLf1Uu8VntipwUSqRa98JwGt8GBuPdtl4Jrzs/b5YcVz/HysV0hyaFzGzfQs0iqYvHuywXKjgBEgShYXYtBPXt1EDYT957THyyU59WVxxdH73TFLW87e1PDVurPHLGuByJcydlmLfzaYMXdzg1FLWoqco6WWUkBUeiGU2yyRDzI3BeBdMPdA+eoZopiNYA88eadvj2VnlbiGUxzQh6F8FcZNT5WvKxTlK3aYu12iUL6GxKZLfz5TD1NB5v3siPgMZO+HzkavPhGKxwgygy6L3JGyqrhJRK82jMv3Y88wRsKWh1/HbPVZejQIpabjlYTLUbejk+/Sjqn7JtuzFAoYBKKPsn89dEGb5z5f+n3PoYTuIwLRyr0/rtr/wwG7zz7vOPrlbxf0mNYp485v1ej4XosJGfcK/yTAwkdtx5cKnJoVSgFROSstZRLJfpiTAnA8SWn3g6LT3AKSsBxZdix4zBYfBIMIh9nKUZtpKF+V3bzNHJSvXlN2XV55PATl69mg5CipfH32AOXm56PbVpxDLsXvcIpadDhwwnbfvqs84Ro5uHz1xJYHCTxG2oqLyFQH/CyRHwCoG04r4vdzwcmhselICLKlc4g5F4LFtm0QiB51/qThgAFAKfFy1XHn+bLh0LfIacG/9uN+Js2LGgjfbTkx896L4s+k26YGUYulqeyYpED5UAC7pNhbd5HxOqiUrwt+CRi2wRsQxWhTeOY8Vb4Ot4FVEp6vKF/Xnw4/7hWDbQvK15zcym+cgqkqUnSvkJtHPKNRPM/e54cPZbfFHngrCbdgClbWwjlEseWZ6thpgdvozRcXHw7c5XzV/nI8YttryXdwhSqfkZVPsSIKGASievKRvaZ3Grm45aRVTf/TaFr/2e0IUk/pO7PjfxpPQwg8fGGr8Sua6dOU1Ila0USSXbUsCmTcf6QoX8NTbC7EbbYLRw/Xf5UXHjgIh7Fk0VK+crEbnq+bL6ocChXlK1YtyekPrCj8IV29lZ4VGJ2GBJVIGkuPBCMPxxwaey4OEyqGUimCoYQCvHKzmU7k4yTQI8LzI+eiYdmDY9IImPxQMpSWNZctvTdGgOhXnUb9s/70N5tO/m+TwvJW00mv1Jr98xTFzoiy9pfvdpysftT54z99P2/78RrkciF/y+Kddd5qNuWI8yfYGfGnBFFLnxmyf5WSAkL5GhaH8jX5iGcMgftxMeyxVFG+ErMJPkxT+YqVE0HgiHozAeXrEZSvV539VMpXvRmyrOySTBeQVBvkQfvgUS76xQtht054xwjnEIAfL0kk20q0AZByuI2INiBseRC9EpEKpnPhoYCdjlFE5CGeBmcL/ftfKeeAfCnTUsAIEP20/Zg7T4S0aiz08H2r/djuWtBY7YNV6iu4uHzYxqQ6UdMSQrYmKVDFKQCkwYfBzOGwj2MGnv4q5asbUKR45mgpX8cUKl8JL7fyRKiifA1OBp/g4zTJaOtzg+hOtzKKSSd3xicO8bIuzck9B06TkGS/27UVx4Npn4zoRBuoPV4VbUDFU34z6vQPY20RUAP8Tac7EuACHfCak6EHz0YTMBb9cXyqDIBcxadz+b2+ESD6WfsxySmFhrhqjHQ4/36HcUVAdM7mBm1H91RXiIr72/utJurDgKrrSHFu+c0D+SRJgRIo8OBhLtpTDE2V0KxOUbhzoFtF+aoSDhdRvtZA+TrRrvNCd1xjqTZy40VUjIhPQWV1+8AkvxJzh6jo2OZgyzNuG84h5+B6vxl5WhG9qhhK4RyCcpentJvnOmzDhfm/BGxziDxz8Qba3KiEO2l3pIZSTtuKp4ARIIo3Cym4T5/98KTb/0Sx8/xgypqfuqncRkU57/9GtXfXajKsgOh7EkQrfsBlDyQFTEoBledrJsrXUz5x4OuSo0HgK76SIm0OUmKQEnPW+ipDYnhHAJUv/CrSicDmUg15LH8OXneevJVImOFrXQOSAq6n4YiJCNek/ZWNSQqYmAJGgOjHbcf1mdlxwspm45Y3F2XS6qYk6O44vjDkwqWQf1d7c/3FoNc1+c7wmFffaDJVcqImHj/ZnKSA5VAANw+cIxEC4x+imxT9aT5XVWYudSHQP2gKJ4pPDjpLy3kd2RNJAX0oYASIOpx/TxcLcWXx0UDNhJt/1KrzMPv5K+GvSRDVZ1BkHUkBa6IATjJ7XKMw4flx7BlEr+SV00VQTdTU/Q6Okt4SfhRWlbjquGDi22pNJJB9rcIUMAJEDQLCslSWOtEqPDHlq1sDBfLyC4hgh9kRmks0mmBhyWCpz69wpQh4sRsast6baEHWQAbZxypNAQmiVXr45ctLChhNAYyMCEoAggJ7+qCjQXWEVhWfzpl7rshY/EaPkbyxHCggQbQciCwfISlQqShAZANi44FwyGANgkZDKwOlyIdB0ytXUysVBeXLVCIKSBCtRIMpX0VSwPwUIMw9Xps4aBqq+DQUQdX1SbQJYBNUyPwvJ58gKWAwBSSIGkwyeYOkQJWlwO07D0nchgWQ0Yho3I1IjMnDus/tqbNplR0C+eKWRgEBorud+pXFAshM996+87fqI3yJF61LNHxR5UdSQFKgXCmQk5ffcb5b+SOowF1wlKBFhMYt13eWD5MUKI0CV5PufDPKZf7B2QHXP/eJqGk55XJUDXvfZt+N8VprI0G0tFGUv0sKlAMFJu30RYprHCtpkrtQwRL/CG/UcnhZ+QhJAT0pcOP2/S+H2fww1q36CG9LK9+M8iTy13rJieo5lrKapID5KECkPRjBctODPgt08X4Ztemi+V5TtiwpYAQFnPwSyCx74nysBRbS/2UVF/ZLinONGGh5i6SA8RTos8KziSqGX8UWUJzYvISYN/5N5J2SApICKh2s/EgKSAqUEwWiEjOJeVvhbKjAb5hR8oqX05vLx0gKVFIKFAHRAvGShf9V0jeWryUpUHEU2GofiTKyYnlQ9dMJjdRpgXtObl7F0UM+WVLA6inwFERzHucriylfVeRHUkBSwAwUQA1JxAMLAVERF/BGyj0zvKhsUlKgqlDgKYiSJykvL09hQyWIVpXRl+9Z3hTou9JTJDWzhEKEXpKphcfLCPXlPQ3k8yoTBZ6CKNBZkJ+vgKgo8iMpIClgagr0XuFJbhZLQFD6gGqWZN3hNySImnqYZXtViQIa4tzsnAKcwOFHhVBX4mhVmgfyXcuHAoPXeVuCaa5AcUCUFN/RyVKcWz6DL59SOSnwFETzsnMeZytq0WwBolKoWzlHXL5VRVJg2bHgRlMqMsyCJhNMyIW2c13vZeVUJEXksyUFrJwCT0G0AKVodv6jx48f8kpgqQRRKx9a2X0LpIBPZApqSAtxccHEacTGCxZIJdklSQErooCGTjQnLy83Jw/rIvIzFTymyI+kgKSAaSmQn1/QcYEbviUVrhZVgi2Mt3P2SzTtC8rWJAWqGgU0xLn5eVmPsxRpbnbBwwLJiFa1mSDft5wosN/tmiXEW8BIuMsij3J6Z/kYSYHKSwENF5f8/IeKNDf7cU7BIwmilXfI5ZtVOAW6LfZoMr0ivUVhQ5EqXwi7VeGkkB2QFLB2CmhwonkFD/Me5QOiefl5EkStfWBl/y2YAtHJd4lbhF1PhQh1QVBY4WVHgy2YQrJrkgJWQwENnWh+QXZubu5jIhepvEXlR1JAUsBsFHALTIIXJC93OeOo4tYyyV7mbzHbwMqGqxwFNHWij3NycnMUEM17nC9Z0So3FeQLlzMFXAOS6kyww8io3Ix1BQ86ZrPMgFbOQy0fV5kpUCQAfV4uStGcxzi7EHRBMqOVedzlu1kEBUJjMwhghOeouXGU9kHrWuNsV50IsYg3l52QFKgsFCgConCiD/BtwbslFx+XyvKK8j0kBSyYAgX5BeO3XwLeQFNzQCltEmgeEW6z6U6+UbctmBKya5ICVkmBoiD6+DERFxDlqv6zyveRnZYUsEYKXL56u/NCd6S7eJ4AeyZBUxrBdqnBZId6E+0220ZYI1lknyUFLJ8C2iCKKLcAUa6MQW/5Qyd7WOko4B12izQvBIVvONlB6EoNRVNxC/ZK5DhD/fnTVMct9hE5ufJEXOnminwhi6FAERClVwU5hCwqyC2QeXotZohkR6oYBW6mP9hiF9F+vmvt8Xb1JtmjMYU9RSQrAPJZpfkMp5+mORJQHuzk32m7rgDJVYxy8nUlBSqAAtogSvT5R7n5d3IeyLB/FTAa8pGSAhoUuPMgm7B8y48Hw54ilUXYC0DWm2ivWepOVFCz7gS79vPdpu66fNAjOipRpjaT00hSoPwooA2icXk5Gbk59wDR8uuDfJKkgKRA6RTIzc2/lZEVlZAZHJPufy014Hpa+I2MGyn3ZBqW0mkna0gKmI0C2iBa7IMkoJqN/rJhSQFJAUkBSQErpkCJIIqF0aOC7AIlOZqCo5jsyo+kgKSApICkgKSApMATCpQIolgX5eDG9piw9IrfKBEY5EdSQFJAUkBSQFJAUkAvEJVkkhSQFJAUkBSQFJAUeDYF9NKJSgJKCkgKSApICkgKSAroUkCCqJwVkgKSApICkgKSAkZSQIKokYSTt0kKSApICkgKSApIEJVzQFJAUkBSQFJAUsBICkgQNZJw8jZJAUkBSQFJAUkBCaJyDkgKSApICkgKSAoYSQEJokYSTt4mKSApICkgKSApIEFUzgFJAUkBSQFJAUkBIykgQdRIwsnbJAUkBSQFJAUkBSSIyjkgKSApICkgKSApYCQFJIgaSTh5m6SApICkgKSApIAEUTkHJAUkBSQFJAUkBYykgARRIwknb5MUkBSQFJAUkBSQICrngKSApICkgKSApICRFJAgaiTh5G2SApICkgKSApIC/w/89W3ArSI3GwAAAABJRU5ErkJggg==" alt="avatar"></p><h3 id="具体使用"><a href="#具体使用" class="headerlink" title="具体使用"></a>具体使用</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="comment">//需求：计算1-10000000L之和</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//创建并发线程池对象</span></span><br><span class="line"><span class="type">ForkJoinPool</span> <span class="variable">pool</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ForkJoinPool</span>();</span><br><span class="line"><span class="comment">//提交任务并得到结果</span></span><br><span class="line"><span class="type">Long</span> <span class="variable">sum</span> <span class="operator">=</span> pool.invoke(<span class="keyword">new</span> <span class="title class_">ForkJoinCalculateTask</span>(<span class="number">0</span>,<span class="number">10000000L</span>));</span><br><span class="line">System.out.println(sum);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//计算任务类</span></span><br><span class="line"><span class="comment">//class ForkJoinCalculateTask extends RecursiveAction&#123;//无返回值的任务类</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ForkJoinCalculateTask</span> <span class="keyword">extends</span> <span class="title class_">RecursiveTask</span>&lt;Long&gt;&#123;<span class="comment">//有返回值的任务类</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1975909145028788652L</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="type">long</span> startNum;<span class="comment">//开始数字</span></span><br><span class="line"><span class="keyword">private</span> <span class="type">long</span> endNum;<span class="comment">//结束数字</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">THRESHOLD</span> <span class="operator">=</span> <span class="number">10000</span>;<span class="comment">//临界值，每到10000就分成小任务</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">ForkJoinCalculateTask</span><span class="params">(<span class="type">long</span> startNum, <span class="type">long</span> endNum)</span> &#123;</span><br><span class="line"><span class="built_in">this</span>.startNum = startNum;</span><br><span class="line"><span class="built_in">this</span>.endNum = endNum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> Long <span class="title function_">compute</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line"><span class="type">long</span> <span class="variable">len</span> <span class="operator">=</span> endNum-startNum;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(len &lt;= THRESHOLD)&#123;</span><br><span class="line"><span class="type">long</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">long</span> <span class="variable">i</span> <span class="operator">=</span> startNum; i &lt;= endNum; i++) &#123;</span><br><span class="line">sum += i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> sum;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="type">long</span> <span class="variable">mid</span> <span class="operator">=</span> (startNum+endNum)/<span class="number">2</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">ForkJoinCalculateTask</span> <span class="variable">left</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ForkJoinCalculateTask</span>(startNum, mid);</span><br><span class="line">left.fork();<span class="comment">//拆分成子任务并压入新队列</span></span><br><span class="line"></span><br><span class="line"><span class="type">ForkJoinCalculateTask</span> <span class="variable">right</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ForkJoinCalculateTask</span>(mid+<span class="number">1</span>, endNum);</span><br><span class="line">right.fork();<span class="comment">//拆分成子任务并压入新队列</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//把结果合并返回</span></span><br><span class="line"><span class="keyword">return</span> left.join() + right.join();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 教育 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 千锋教育 </tag>
            
            <tag> 培训 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一阶段知识点梳理</title>
      <link href="/posts/9962bc06/"/>
      <url>/posts/9962bc06/</url>
      
        <content type="html"><![CDATA[<h1 id="JavaSE"><a href="#JavaSE" class="headerlink" title="JavaSE"></a>JavaSE</h1><h2 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h2><blockquote><p>变量：程序执行过程中可变的量（存储单个数据的容器）</p></blockquote><blockquote><p>标识符：给类、接口、方法、变量取名字时使用到的字符序列</p><p>组成部分：数字、大小写字母、$、_、中文</p><p>注意：</p><ol><li>区分大小写</li><li>不能使用数组开头</li><li>不能使用除了$和_以外的符号</li><li>不能使用关键字</li><li>不要使用中文</li></ol></blockquote><blockquote><p>关键字：Java提供的具有特殊意义的单词</p></blockquote><blockquote><table><thead><tr><th>基本数据类型</th><th>描述</th><th>占用空间</th></tr></thead><tbody><tr><td>byte</td><td>字节型</td><td>1字节</td></tr><tr><td>short</td><td>短整型</td><td>2字节</td></tr><tr><td>int</td><td>整型</td><td>4字节</td></tr><tr><td>long</td><td>长整型</td><td>8字节</td></tr><tr><td>float</td><td>单精度浮点型</td><td>4字节</td></tr><tr><td>double</td><td>双精度浮点型</td><td>8字节</td></tr><tr><td>char</td><td>字符型</td><td>2字节</td></tr><tr><td>boolean</td><td>布尔型</td><td>4字节</td></tr></tbody></table><p>注意：boolean底层使用int去存储，boolean的数组的元素使用byte类型去存储</p></blockquote><blockquote><table><thead><tr><th>运算符</th><th>符号</th></tr></thead><tbody><tr><td>算数运算符</td><td>+、-、*、&#x2F;、%、++、–</td></tr><tr><td>赋值运算符</td><td>&#x3D;、+&#x3D;、-&#x3D;、*&#x3D;、&#x2F;&#x3D;、%&#x3D;</td></tr><tr><td>关系运算符</td><td>&#x3D;&#x3D;、!&#x3D;、&gt;、&gt;&#x3D;、&lt;、&lt;&#x3D;</td></tr><tr><td>逻辑运算符</td><td>&amp;、&amp;&amp;、|、||、^、!</td></tr><tr><td>三目运算符</td><td>变量 &#x3D; (表达式)?值1:值2;</td></tr><tr><td>位运算符</td><td>&amp;、|、^、&lt;&lt;、&gt;&gt;、&gt;&gt;&gt;</td></tr><tr><td>字符串拼接符</td><td>+</td></tr></tbody></table><p>经验：灵活运用小括号</p></blockquote><h2 id="执行语句"><a href="#执行语句" class="headerlink" title="执行语句"></a>执行语句</h2><blockquote><ol><li><p>顺序语句：方法里的代码从上往下执行</p></li><li><p>分支语句（if、switch）</p><ol><li><p>表达式的区别</p><blockquote><p>if：boolean</p><p>switch：byte、short、int、char、枚举、字符串，底层只认int</p></blockquote></li><li><p>应用场景的区别</p><blockquote><p>if：判断区间和复杂的条件</p><p>switch：判断单个值</p></blockquote></li></ol></li><li><p>循环语句（for、while、do-while）</p><ol><li><p>表达式的区别</p><blockquote><p>for(初始化变量;判断条件;更新变量){}</p><p>while(判断条件){}</p><p>do{}while(判断条件);</p><p>相同点：判断条件必须是boolean，true-循环，false-跳出循环</p></blockquote></li><li><p>执行顺序的区别</p><blockquote><p>for：先判断，再执行</p><p>while：先判断，再执行</p><p>do-while：先执行一遍，再判断</p></blockquote></li><li><p>应用场景的区别</p><blockquote><p>for：循环次数确定</p><p>while：循环次数不确定，先判断再执行</p><p>do-while：循环次数不确定，先执行一遍再判断</p></blockquote></li></ol></li><li><p>特殊的流程控制语句(break、continue、return、lable)</p><blockquote><p>break：作用于循环中，表示跳出当前循环</p><p>continue：作用于循环中，表示跳过循环体剩余的部分，进入到下一次循环</p><p>return：作用于方法中，表示结束当前方法，也可以返回数据</p><p>lable：给循环做标记</p></blockquote></li></ol></blockquote><h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><blockquote><p>分类：一维数组、二维数组、三维数组</p><p>概念：</p><ol><li>一组数据的容器</li><li>元素：数组中的数据</li><li>下标&#x2F;索引：元素的编号（从0开始）</li><li>可以通过下标对元素进行设置或获取</li><li>遍历数组使用for或foreach</li></ol></blockquote><blockquote><p>数组的排序：（冒泡、选择、插入、希尔、桶、计数、基数….）</p></blockquote><blockquote><p>数组的查找：（线性、二分法、插值、黄金分割）</p></blockquote><blockquote><p>数组的复制、扩容、删除 – 代码实现及内存分析</p></blockquote><blockquote><p>可变参数</p></blockquote><h2 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h2><blockquote><p>类 - 对象的概念</p></blockquote><blockquote><p>类中内容：属性、方法 </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> class 类&#123;</span><br><span class="line">    <span class="comment">//属性 - 全局变量</span></span><br><span class="line">    <span class="comment">//分类：成员属性、静态属性、常量属性</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">//方法 - 全局方法</span></span><br><span class="line">    <span class="comment">//分类：成员方法、静态方法、抽象方法、同步方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>成员变量 vs 局部变量</p></blockquote><blockquote><p>成员变量 vs 静态变量</p></blockquote><blockquote><p>成员方法 vs 静态方法</p></blockquote><blockquote><p>构造方法</p><p>概念：</p><p>作用：</p></blockquote><blockquote><p>封装</p><p>概念：</p><p>步骤：</p></blockquote><blockquote><p>this</p><p>概念：本对象，哪个对象去调用成员方法，方法中的this就表示哪个对象</p><p>作用：</p></blockquote><blockquote><p>static  - 静态的</p><p>作用：</p><p>​修饰属性 - 类属性：</p><p>​修饰方法 - 类方法：</p><p>​修饰代码块 - 静态代码块：</p></blockquote><blockquote><p>继承</p><p>概念：子类继承父类所有的属性和方法</p><p>面试题：</p></blockquote><blockquote><p>super</p><p>概念：</p><p>作用：</p></blockquote><blockquote><p>重写</p><p>概念：在子类中将父类的方法重新写一遍</p><p>应用场景：当父类方法不满足子类需求时就考虑在子类中重写</p><p>条件：</p><ol><li>在子类中重写父类的方法</li><li>返回值、方法名、参数列表必须一致</li><li>访问修饰符不能比父类的更加严格</li></ol></blockquote><blockquote><p>重载</p><p>概念：方法与方法之间的关系</p><p>应用场景：编写多个方法，方法功能大致一致，细节实现不一致，就考虑使用重载</p><p>条件：</p><ol><li>在同一个类中</li><li>方法名一致</li><li>参数列表的个数或类型不一致</li><li>与返回值无关</li></ol></blockquote><blockquote><p>访问修饰符</p><p>含义：修饰类、方法、属性定义使用的范围</p><p>学习：做实验</p><table><thead><tr><th>访问修饰符</th><th>本类</th><th>本包</th><th>其他包子类</th><th>其他包</th></tr></thead><tbody><tr><td>private</td><td>OK</td><td></td><td></td><td></td></tr><tr><td>默认的</td><td>OK</td><td>OK</td><td></td><td></td></tr><tr><td>protected</td><td>OK</td><td>OK</td><td>OK</td><td></td></tr><tr><td>public</td><td>Ok</td><td>OK</td><td>OK</td><td>Ok</td></tr></tbody></table></blockquote><blockquote><p>Object</p><p>含义：</p><p>常用方法：</p><p>标杆作用</p></blockquote><blockquote><p>final</p><p>含义：</p><p>作用：</p></blockquote><blockquote><p>抽闲类及抽象方法</p></blockquote><blockquote><p>接口</p></blockquote><blockquote><p>多态</p></blockquote><blockquote><p>对象转型</p></blockquote><blockquote><p>内部类</p></blockquote><h2 id="常用类"><a href="#常用类" class="headerlink" title="常用类"></a>常用类</h2><blockquote><ol><li>包装类（出现原因、底层原理）</li><li>字符串（String、StringBuilder、StringBuffer、底层原理）</li><li>正则表达式</li><li>Math（静态导入）</li><li>Random（种子数）</li><li>大数值的运算类</li><li>枚举 – 底层</li></ol></blockquote><h2 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h2><blockquote><p>Collection vs Map</p></blockquote><blockquote><p>List vs Set</p></blockquote><blockquote><p>ArrayList：一维数组</p><p>LinkedList：双向链表</p><p>Vector：一维数组 + 线程安全</p><p>Stack extends Vector ：栈模式</p></blockquote><blockquote><p>HashSet：底层由HashMap实现</p><p>LinkedHashSet：底层由LinkedHashMap实现</p><p>TreeSet：底层由TreeMap实现</p></blockquote><blockquote><p>HashMap：一维数组 + 单向链表 + 红黑树(JDK1.8)</p><p>LinkedHashMap extends HashMap</p><p>Hashtable：一维数组 + 单向链表 + 线程安全</p><p>ConcurrentHashMap：一维数组 + 单向链表 + 线程安全</p><p>Properties：配置文件类</p></blockquote><blockquote><p>Collections：集合的工具类</p></blockquote><blockquote><p>内置比较器 vs 外置比较器</p></blockquote><blockquote><p>理解每个集合的底层原理</p></blockquote><h2 id="多线程"><a href="#多线程" class="headerlink" title="多线程"></a>多线程</h2><blockquote><p>线程的创建方式和基本使用</p><p>线程的生命周期</p></blockquote><blockquote><p>线程安全的方式</p><p>卖票的案例</p><p>生产者消费者模型</p><p>仓储模型</p></blockquote><blockquote><p>线程池及自定义线程池 – 底层</p><p>带有返回值的任务类</p></blockquote><h2 id="IO流"><a href="#IO流" class="headerlink" title="IO流"></a>IO流</h2><blockquote><p>字节流</p></blockquote><blockquote><p>字符流</p></blockquote><blockquote><p>对象类</p></blockquote><blockquote><p>打印流及重定向</p></blockquote><blockquote><p>内存流 – 关闭不掉的</p></blockquote><blockquote><p>随机访问流 – 断点续传</p></blockquote><h2 id="网络编程"><a href="#网络编程" class="headerlink" title="网络编程"></a>网络编程</h2><blockquote><p>TCP&#x2F;IP：三次握手和四次挥手</p></blockquote><blockquote><p>UDP：发送数据报包</p></blockquote><blockquote><p>HTTP：理解请求和响应</p></blockquote><h2 id="注解"><a href="#注解" class="headerlink" title="注解"></a>注解</h2><blockquote><p>预定义注解</p></blockquote><blockquote><p>元注解</p></blockquote><blockquote><p>自定义注解</p></blockquote><h2 id="反射"><a href="#反射" class="headerlink" title="反射"></a>反射</h2><blockquote><p>获取Class对象 – 3种方式</p></blockquote><blockquote><p>操作类中的属性、构造方法、方法、参数、返回值、泛型、数组、注解</p></blockquote><blockquote><p>反射案例</p></blockquote><h2 id="JDK1-8"><a href="#JDK1-8" class="headerlink" title="JDK1.8"></a>JDK1.8</h2><blockquote><ol><li>Lambda</li><li>函数式接口 - @FunctionInterface</li><li>方法、构造方法、数组的引用</li><li>Stream</li><li>日期时间组件</li></ol></blockquote><h2 id="学习步骤"><a href="#学习步骤" class="headerlink" title="学习步骤"></a>学习步骤</h2><blockquote><ol><li>理解概念</li><li>学会使用</li><li>分析底层原理</li></ol></blockquote><blockquote><p>经验：JavaSE重点关注 – 面向对象、集合、多线程、反射、JDK1.8新特性</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 教育 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 千锋教育 </tag>
            
            <tag> 培训 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>传统日期格式化的线程问题</title>
      <link href="/posts/97d5d539/"/>
      <url>/posts/97d5d539/</url>
      
        <content type="html"><![CDATA[<h1 id="传统日期格式化的线程问题"><a href="#传统日期格式化的线程问题" class="headerlink" title="传统日期格式化的线程问题"></a>传统日期格式化的线程问题</h1><h3 id="需求：让多线程同时去解析日期"><a href="#需求：让多线程同时去解析日期" class="headerlink" title="需求：让多线程同时去解析日期"></a>需求：让多线程同时去解析日期</h3><h4 id="错误示范"><a href="#错误示范" class="headerlink" title="错误示范"></a>错误示范</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//格式化日期类</span></span><br><span class="line"><span class="type">SimpleDateFormat</span> <span class="variable">sdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyyMMdd&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//任务类：用于解析成Date对象</span></span><br><span class="line">Callable&lt;Date&gt; task = <span class="keyword">new</span> <span class="title class_">Callable</span>&lt;Date&gt;() &#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Date <span class="title function_">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"><span class="keyword">return</span> sdf.parse(<span class="string">&quot;20200123&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//Date解析结果的集合</span></span><br><span class="line">List&lt;Future&lt;Date&gt;&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"><span class="comment">//线程池</span></span><br><span class="line"><span class="type">ExecutorService</span> <span class="variable">pool</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++) &#123;</span><br><span class="line">Future&lt;Date&gt; future = pool.submit(task);</span><br><span class="line">list.add(future);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//打印结果</span></span><br><span class="line"><span class="keyword">for</span> (Future&lt;Date&gt; future : list) &#123;</span><br><span class="line">System.out.println(future.get());</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//关闭线程池</span></span><br><span class="line">pool.shutdown();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="正确示范"><a href="#正确示范" class="headerlink" title="正确示范"></a>正确示范</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//任务类：用于解析成Date对象</span></span><br><span class="line">Callable&lt;Date&gt; task = <span class="keyword">new</span> <span class="title class_">Callable</span>&lt;Date&gt;() &#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Date <span class="title function_">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"><span class="keyword">return</span> SimpleDateFormatThreadLocal.convert(<span class="string">&quot;20200123&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Date解析结果的集合</span></span><br><span class="line">List&lt;Future&lt;Date&gt;&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">//线程池</span></span><br><span class="line"><span class="type">ExecutorService</span> <span class="variable">pool</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++) &#123;</span><br><span class="line">Future&lt;Date&gt; future = pool.submit(task);</span><br><span class="line">list.add(future);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//打印结果</span></span><br><span class="line"><span class="keyword">for</span> (Future&lt;Date&gt; future : list) &#123;</span><br><span class="line">System.out.println(future.get());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//关闭线程池</span></span><br><span class="line">pool.shutdown();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SimpleDateFormatThreadLocal</span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> ThreadLocal&lt;SimpleDateFormat&gt; local = <span class="keyword">new</span> <span class="title class_">ThreadLocal</span>&lt;SimpleDateFormat&gt;()&#123;</span><br><span class="line"><span class="comment">//重写父类的方法：返回此线程局部变量的当前线程的“初始值”。 </span></span><br><span class="line"><span class="keyword">protected</span> SimpleDateFormat <span class="title function_">initialValue</span><span class="params">()</span> &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyyMMdd&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Date <span class="title function_">convert</span><span class="params">(String str)</span> <span class="keyword">throws</span> ParseException&#123;</span><br><span class="line"><span class="type">SimpleDateFormat</span> <span class="variable">sdf</span> <span class="operator">=</span> local.get();</span><br><span class="line"><span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> sdf.parse(str);</span><br><span class="line"><span class="keyword">return</span> date;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="JDK1-8后-正确示范"><a href="#JDK1-8后-正确示范" class="headerlink" title="JDK1.8后 正确示范"></a>JDK1.8后 正确示范</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test1</span> &#123;</span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test01</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//格式化日期类</span></span><br><span class="line"><span class="type">DateTimeFormatter</span> <span class="variable">dtf</span> <span class="operator">=</span> DateTimeFormatter.ofPattern(<span class="string">&quot;yyyyMMdd&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//任务类：用于解析成Date对象</span></span><br><span class="line">Callable&lt;LocalDate&gt; task = <span class="keyword">new</span> <span class="title class_">Callable</span>&lt;LocalDate&gt;() &#123;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> LocalDate <span class="title function_">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"><span class="keyword">return</span> LocalDate.parse(<span class="string">&quot;20200123&quot;</span>,dtf);</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//Date解析结果的集合</span></span><br><span class="line">List&lt;Future&lt;LocalDate&gt;&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"><span class="comment">//线程池</span></span><br><span class="line"><span class="type">ExecutorService</span> <span class="variable">pool</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt;= <span class="number">10</span>; i++) &#123;</span><br><span class="line">Future&lt;LocalDate&gt; future = pool.submit(task);</span><br><span class="line">list.add(future);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//打印结果</span></span><br><span class="line"><span class="keyword">for</span> (Future&lt;LocalDate&gt; future : list) &#123;</span><br><span class="line">System.out.println(future.get());</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//关闭线程池</span></span><br><span class="line">pool.shutdown();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 教育 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 千锋教育 </tag>
            
            <tag> 培训 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>平时在用的网站</title>
      <link href="/posts/88d43a64/"/>
      <url>/posts/88d43a64/</url>
      
        <content type="html"><![CDATA[<h1 id="平时在用的网站"><a href="#平时在用的网站" class="headerlink" title="平时在用的网站"></a>平时在用的网站</h1><h2 id="学术"><a href="#学术" class="headerlink" title="学术"></a>学术</h2><h3 id="信息检索"><a href="#信息检索" class="headerlink" title="信息检索"></a>信息检索</h3><ol><li><a href="http://muchong.com/">小木虫 - 学术 科研 互动社区</a></li><li><a href="https://www.iresearch.com.cn/">艾瑞咨询</a></li><li><a href="https://xueshu.baidu.com/">百度学术 - 保持学习的态度</a></li><li><a href="https://lib.cdtu.edu.cn/">成都工业学院图书馆</a></li><li><a href="https://www.webofscience.com/wos/woscc/basic-search">文献检索 - Web of Science 核心合集</a></li><li><a href="https://wwwv3.cqvip.com/">维普网</a></li><li><a href="https://www.wanfangdata.com.cn/">万方数据知识服务平台</a></li></ol><h3 id="图书馆"><a href="#图书馆" class="headerlink" title="图书馆"></a>图书馆</h3><ol><li><a href="http://www.nlc.cn/web/select.html">中国国家图书馆·中国国家数字图书馆·国家典籍博物馆</a></li><li><a href="http://prechin.net/forum.php?mode=viewthread&tid=35264&extra=page=1">普中开源电子分享网 - Powered by Discuz!</a></li><li><a href="https://www.bookstack.cn/">书栈网</a></li></ol><h3 id="标准"><a href="#标准" class="headerlink" title="标准"></a>标准</h3><ol><li><a href="http://www.ztflh.com/">中国图书馆分类法 - 中图分类号 - 中图法 - 中图分类法 - 中图分类号查询 - 中图法分类号 - 中图分类 - 中国图书分类法简表</a></li></ol><h2 id="日常"><a href="#日常" class="headerlink" title="日常"></a>日常</h2><h3 id="视野"><a href="#视野" class="headerlink" title="视野"></a>视野</h3><ol><li><a href="https://www.douban.com/">豆瓣</a></li></ol><h3 id="购物"><a href="#购物" class="headerlink" title="购物"></a>购物</h3><ol><li><a href="https://www.taobao.com/">淘宝网 - 淘！我喜欢</a></li><li><a href="https://www.jd.com/">京东(JD.COM)-正品低价、品质保障、配送及时、轻松购物！</a></li></ol><h3 id="视频"><a href="#视频" class="headerlink" title="视频"></a>视频</h3><ol><li><a href="https://tv.hbys.top/">简影</a></li><li><a href="https://dmdy4.vip/vodplay/1618-2-1.html">咒 1080P完整版免费在线观看-大米星球</a></li><li><a href="https://jinmantv.com/?utm_source=iui.su">金曼TV-在线观看</a></li><li><a href="https://vidhub.cc/">Vidhub视频库-在线视频网站-海量高清视频在线观看</a></li><li><a href="https://cupfox.app/">茶杯狐 Cupfox - 努力让找电影变得简单</a></li></ol><h3 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h3><ol><li><a href="https://www.kookapp.cn/">KOOK(原开黑啦),一个好用的语音沟通工具 - 官方网站</a></li></ol><h2 id="游戏"><a href="#游戏" class="headerlink" title="游戏"></a>游戏</h2><h3 id="学习版"><a href="#学习版" class="headerlink" title="学习版"></a>学习版</h3><ol><li><a href="https://se7en.ws/">SE7EN.ws</a></li><li><a href="https://byrut.org/">Access denied | byrut.org used Cloudflare to restrict access</a></li></ol><h3 id="论坛"><a href="#论坛" class="headerlink" title="论坛"></a>论坛</h3><ol><li><a href="https://www.3dmgame.com/">单机游戏_单机游戏下载_单机游戏大全中文版下载_3DM游戏网</a></li></ol><h3 id="平台官网"><a href="#平台官网" class="headerlink" title="平台官网"></a>平台官网</h3><ol><li><a href="https://techlandgg.com/">Techland Gamers &amp; Goodies</a></li><li><a href="https://store.epicgames.com/zh-CN/">Epic游戏商城 | 下载畅玩 PC 平台游戏、模组、DLC 和更多 – Epic Games</a></li><li><a href="https://arena.5eplay.com/download">5E对战平台 - 5EPlay旗下产品</a></li></ol><h3 id="我的世界"><a href="#我的世界" class="headerlink" title="我的世界"></a>我的世界</h3><ol><li><a href="https://www.minecraftskins.com/">Minecraft Skins - The Skindex</a></li><li><a href="https://www.minecraft.net/en-us/download/server">Minecraft Server Download | Minecraft</a></li><li><a href="https://hmcl.huangyuhui.net/">Hello Minecraft! Launcher</a></li><li><a href="https://cloud.chriskim.cn/s/louN?path=/">MinecraftServer - 颢天云盘</a></li><li><a href="https://www.zouht.com/2954.html">从零开始使用云服务器搭建 Minecraft 服务器 – 颢天</a></li><li><a href="https://files.minecraftforge.net/net/minecraftforge/forge/">Downloads for Minecraft Forge for Minecraft 1.19.3</a></li><li><a href="https://www.mcmod.cn/download/">MOD下载列表 - MC百科|最大的Minecraft中文MOD百科</a></li><li><a href="https://www.curseforge.com/minecraft/mc-mods/fishing-bot/download/4465669">Download Fishing bot Minecraft Mods &amp; Modpacks - CurseForge</a></li><li><a href="https://www.curseforge.com/">CurseForge - Mods &amp; Addons 社区</a></li><li><a href="https://wiki.shaderlabs.org/wiki/Shaderpacks">Shaderpacks - shaderLABS</a></li></ol><h3 id="求生之路"><a href="#求生之路" class="headerlink" title="求生之路"></a>求生之路</h3><ol><li><a href="https://developer.valvesoftware.com/wiki/SteamCMD:zh-cn#.E5.AE.89.E8.A3.85.E6.9D.A5.E8.87.AA.E8.BD.AF.E4.BB.B6.E4.BB.93.E5.BA.93.E7.9A.84.E8.BD.AF.E4.BB.B6.E5.8C.85">Steam 控制台客户端 - Valve Developer Community</a></li><li>[<a href="https://forums.alliedmods.net/showthread.php?t=336378">l4d2] List of missions - AlliedModders</a></li><li><a href="https://www.gamemaps.com/l4d2/campaign/">求生之路2第三方图下载</a></li></ol><h2 id="个人"><a href="#个人" class="headerlink" title="个人"></a>个人</h2><h3 id="软件官网"><a href="#软件官网" class="headerlink" title="软件官网"></a>软件官网</h3><ol><li><a href="https://www.xshell.com/zh/">NetSarang Homepage CN - NetSarang Website</a></li><li><a href="https://www.typora.io/#download">Typora — a markdown editor, markdown reader.</a></li><li><a href="https://maven.apache.org/">Maven – Welcome to Apache Maven</a></li><li><a href="https://navicat.com.cn/products">Navicat | 产品</a></li><li><a href="https://www.python.org/">Welcome to Python.org</a></li><li><a href="https://www.voidtools.com/zh-cn/">voidtools</a></li><li><a href="https://www.mysql.com/">MySQL</a></li><li><a href="https://www.anaconda.com/">Anaconda | The World’s Most Popular Data Science Platform</a></li><li><a href="https://dev.mysql.com/downloads/installer/">MySQL :: Download MySQL Installer</a></li><li><a href="https://www.centos.org/">The CentOS Project</a></li><li><a href="https://www.nvidia.cn/geforce/geforce-experience/shadowplay/">N卡录制</a></li><li><a href="https://www.nvidia.cn/geforce/drivers/">N卡驱动</a></li></ol><h3 id="教学网站"><a href="#教学网站" class="headerlink" title="教学网站"></a>教学网站</h3><ol><li><a href="https://www.code-nav.cn/">编程导航-程序员鱼皮</a></li><li><a href="http://hx.1000phone.net/userLogin">千锋学院</a></li><li><a href="https://www.cctalk.com/">CCtalk</a></li><li><a href="https://www.51cto.com/">51CTO</a></li><li><a href="https://www.hundun.cn/">混沌在线课程</a></li><li><a href="https://www.kuangstudy.com/">KuangStudy-狂神说</a></li><li><a href="https://xdclass.net/#/index">小滴课堂</a></li><li><a href="https://www.lanqiao.cn/courses/">蓝桥云课课程</a></li><li><a href="https://www.itlaoqi.com/">IT老齐</a></li></ol><h3 id="教程文档"><a href="#教程文档" class="headerlink" title="教程文档"></a>教程文档</h3><ol><li><a href="https://vue3js.cn/">Vue3</a></li><li><a href="https://vant-contrib.gitee.io/vant/#/zh-CN">Vant 4 - 轻量、可定制的移动端组件库</a></li><li><a href="https://es6.ruanyifeng.com/">ES6入门教程</a></li><li><a href="https://wangdoc.com/">网道 - 互联网开发文档</a></li><li><a href="https://wangdoc.com/javascript/">JavaScript 教程 - 网道</a></li><li><a href="https://www.thymeleaf.org/">Thymeleaf</a></li><li><a href="http://dict.code-nav.cn/">编程词典-程序员鱼皮</a></li></ol><h3 id="软件下载"><a href="#软件下载" class="headerlink" title="软件下载"></a>软件下载</h3><ol><li><a href="http://nodejs.cn/download/">下载 | Node.js 中文网</a></li><li><a href="https://archive.apache.org/dist/maven/maven-3/">Index of &#x2F;dist&#x2F;maven&#x2F;maven-3</a></li><li><a href="https://cn.ubuntu.com/download">Ubuntu系统下载 | Ubuntu</a></li><li><a href="https://customerconnect.vmware.com/cn/downloads/details?downloadGroup=WKST-1625-WIN&productId=1038&rPId=98567&download=true&fileId=b72276af0d1f093c146c6623c463218f&uuId=06903c3f-2a93-4c28-86cf-7526227c96a2">下载 VMware Workstation Pro - VMware Customer Connect</a></li></ol><h3 id="插件下载"><a href="#插件下载" class="headerlink" title="插件下载"></a>插件下载</h3><ol><li><a href="https://theme.typora.io/">Themes Gallery — Typora</a></li></ol><h3 id="下载仓库"><a href="#下载仓库" class="headerlink" title="下载仓库"></a>下载仓库</h3><ol><li><a href="https://next.itellyou.cn/Identity/Account/Login?ReturnUrl=/Original/Index">我告诉你，新版</a></li><li><a href="https://msdn.itellyou.cn/">MSDN, 我告诉你 - 做一个安静的工具站</a></li><li><a href="https://mirrors.tuna.tsinghua.edu.cn/mysql/downloads/">Index of &#x2F;mysql&#x2F;downloads&#x2F; | 清华大学开源软件镜像站 | Tsinghua Open Source Mirror</a></li><li><a href="https://hellowindows.cn/">HelloWindows-精校 完整 极致 Windows系统下载仓储站丨www.hellowindows.cn</a></li><li><a href="https://hub.docker.com/">Docker Hub Container Image Library | App Containerization</a></li><li><a href="https://mvnrepository.com/">Maven Repository: Search&#x2F;Browse&#x2F;Explore</a></li><li><a href="https://www.npmjs.com/">npm</a></li></ol><h3 id="工作台"><a href="#工作台" class="headerlink" title="工作台"></a>工作台</h3><ol><li><a href="https://orange-escape-449629.postman.co/workspace/ba02e2eb-7f32-40da-8c43-fcd8d58e7167/overview?feature_overview=show">Overview - Team Workspace</a></li><li><a href="https://filehelper.weixin.qq.com/">微信文件传输助手网页版</a></li></ol><h3 id="计算机维护"><a href="#计算机维护" class="headerlink" title="计算机维护"></a>计算机维护</h3><ol><li><a href="https://www.nvidia.cn/">NVIDIA 引领人工智能计算 | NVIDIA</a></li><li><a href="https://www.aida64.com/">AIDA64 | The Ultimate System Information, Diagnostics and Benchmark Tool</a></li></ol><h3 id="工具-1"><a href="#工具-1" class="headerlink" title="工具"></a>工具</h3><ol><li><a href="https://planetscale.com/">PlanetScale: The world’s most advanced database platform</a></li><li><a href="https://waline.js.org/">Waline | Waline</a></li><li><a href="https://www.wepe.com.cn/">微PE工具箱 - 超好用的WinPE装机维护工具</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> 实用 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 推荐 </tag>
            
            <tag> 网站 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数据结构</title>
      <link href="/posts/79666db/"/>
      <url>/posts/79666db/</url>
      
        <content type="html"><![CDATA[<h1 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h1><h2 id="引入"><a href="#引入" class="headerlink" title="引入"></a>引入</h2><p>对于程序员来说，数据结构是一门非常重要的科目，但是也是一门比较难以掌握的科目，这里记录了自己在大学课程中的一些实践代码，方便以后回来看看自己写的数据结构有多烂……</p><h2 id="线性表"><a href="#线性表" class="headerlink" title="线性表"></a>线性表</h2><h3 id="顺序结构"><a href="#顺序结构" class="headerlink" title="顺序结构"></a>顺序结构</h3><p>线性表的顺序存储，C++代码实现如下</p><p><strong>SeqlList.h</strong>，如果一个类使用了模板的话，不能将实现与定义拆分成两个文件，这个问题我卡了很久很久~</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> MaxSize = <span class="number">200</span>;<span class="comment">// 设置顺序表最多能存储的元素的数量</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType = <span class="type">int</span>&gt;<span class="comment">// 相当于Java的泛型，在C++叫模板</span></span><br><span class="line"><span class="keyword">class</span> SeqList</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">SeqList</span>();<span class="comment">// 无参构造，建立空的顺序表</span></span><br><span class="line"><span class="built_in">SeqList</span>(DataType a[], <span class="type">int</span> n);<span class="comment">// 有参构造，建立长度为n的顺序表</span></span><br><span class="line">~<span class="built_in">SeqList</span>();<span class="comment">// 析构函数，就是在对象销毁时会被执行</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Length</span><span class="params">()</span></span>;<span class="comment">// 获取线性表的长度</span></span><br><span class="line"><span class="function">DataType <span class="title">Get</span><span class="params">(<span class="type">int</span> i)</span></span>;<span class="comment">// 按位查找，查找第i个元素</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Locate</span><span class="params">(DataType x)</span></span>;<span class="comment">// 按值查找，查找值为x的元素</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Insert</span><span class="params">(<span class="type">int</span> i, DataType x)</span></span>;<span class="comment">// 插入操作，在第i个位置插入值为x的元素</span></span><br><span class="line"><span class="function">DataType <span class="title">Delete</span><span class="params">(<span class="type">int</span> i)</span></span>;<span class="comment">// 删除操作，删除第i个元素</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Empty</span><span class="params">()</span></span>;<span class="comment">// 判断线性表是否为空</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">PrintList</span><span class="params">()</span></span>;<span class="comment">// 遍历操作，按序号依次输出各元素</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">DataType data[MaxSize];<span class="comment">// 存放数据元素的数组</span></span><br><span class="line"><span class="type">int</span> length;<span class="comment">// 线性表的长度</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 无参构造，建立空的顺序表</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType&gt;</span><br><span class="line">SeqList&lt;DataType&gt;::<span class="built_in">SeqList</span>() &#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;length = <span class="number">0</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 有参构造，建立长度为n的顺序表</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType&gt;</span><br><span class="line">SeqList&lt;DataType&gt;::<span class="built_in">SeqList</span>(DataType a[], <span class="type">int</span> n) &#123;</span><br><span class="line"><span class="keyword">if</span> (n &gt; MaxSize) <span class="keyword">throw</span> <span class="string">&quot;参数非法&quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;data[i] = a[i];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">this</span>-&gt;length = n;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 析构函数，就是在对象销毁时会被执行</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType&gt;</span><br><span class="line">SeqList&lt;DataType&gt;::~<span class="built_in">SeqList</span>() &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;被销毁了&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取线性表的长度</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType&gt;</span><br><span class="line"><span class="type">int</span> SeqList&lt;DataType&gt;::<span class="built_in">Length</span>() &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">this</span>-&gt;length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 按位查找，查找第i个元素</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType&gt;</span><br><span class="line">DataType SeqList&lt;DataType&gt;::<span class="built_in">Get</span>(<span class="type">int</span> i) &#123;</span><br><span class="line"><span class="keyword">if</span> (i &lt; <span class="number">1</span> || i &gt; <span class="keyword">this</span>-&gt;length) &#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="string">&quot;位置不存在&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">this</span>-&gt;data[i - <span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 按值查找，查找值为x的元素</span></span><br><span class="line"><span class="comment">// 0：没找到</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType&gt;</span><br><span class="line"><span class="type">int</span> SeqList&lt;DataType&gt;::<span class="built_in">Locate</span>(DataType x) &#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; length; i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>-&gt;data[i] == x) &#123;</span><br><span class="line"><span class="keyword">return</span> i + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 插入操作，在第i个位置插入值为x的元素</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType&gt;</span><br><span class="line"><span class="type">void</span> SeqList&lt;DataType&gt;::<span class="built_in">Insert</span>(<span class="type">int</span> i, DataType x) &#123;</span><br><span class="line"><span class="keyword">if</span> (length &gt;= MaxSize) <span class="keyword">throw</span> <span class="string">&quot;已满&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (i &lt; <span class="number">1</span> || i &gt; length + <span class="number">1</span>) <span class="keyword">throw</span> <span class="string">&quot;位置错误&quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = length; j &gt;= i - <span class="number">1</span>; j--) &#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;data[j + <span class="number">1</span>] = <span class="keyword">this</span>-&gt;data[j];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">this</span>-&gt;data[i - <span class="number">1</span>] = x;</span><br><span class="line"><span class="keyword">this</span>-&gt;length++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除操作，删除第i个元素</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType&gt;</span><br><span class="line">DataType SeqList&lt;DataType&gt;::<span class="built_in">Delete</span>(<span class="type">int</span> i) &#123;</span><br><span class="line"><span class="keyword">if</span> (i &lt; <span class="number">1</span> || i &gt; length) <span class="keyword">throw</span> <span class="string">&quot;位置错误&quot;</span>;</span><br><span class="line"></span><br><span class="line">DataType del = <span class="keyword">this</span>-&gt;<span class="built_in">Get</span>(i);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = i<span class="number">-1</span>; j &lt; length - <span class="number">1</span>; j++) &#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;data[j] = <span class="keyword">this</span>-&gt;data[j + <span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">this</span>-&gt;length--;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> del;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断线性表是否为空</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType&gt;</span><br><span class="line"><span class="type">int</span> SeqList&lt;DataType&gt;::<span class="built_in">Empty</span>() &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">this</span>-&gt;length ? <span class="number">0</span> : <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 遍历操作，按序号依次输出各元素</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType&gt;</span><br><span class="line"><span class="type">void</span> SeqList&lt;DataType&gt;::<span class="built_in">PrintList</span>() &#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>-&gt;<span class="built_in">Empty</span>()) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;&#123;&#125;&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;&#123;&quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (; i &lt; length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">cout &lt;&lt; <span class="keyword">this</span>-&gt;data[i] &lt;&lt; <span class="string">&quot;,&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; <span class="keyword">this</span>-&gt;data[i] &lt;&lt; <span class="string">&quot;&#125;&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>Main.cpp</strong>，做了个菜单，自我感觉良好</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;SeqList.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 菜单</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType = <span class="type">int</span>&gt;</span><br><span class="line"><span class="type">void</span> <span class="built_in">Menu</span>(<span class="type">int</span> choose, SeqList&lt;&gt;* list);</span><br><span class="line"><span class="comment">// 清除控制台（未使用）</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Clear</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">SeqList&lt;&gt; list;</span><br><span class="line"><span class="type">int</span> choose = <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (choose) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;--------------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;元素[&quot;</span> &lt;&lt; list.<span class="built_in">Length</span>() &lt;&lt; <span class="string">&quot;]个|最大容量[&quot;</span> &lt;&lt; MaxSize &lt;&lt; <span class="string">&quot;]个|顺序表状态&quot;</span>;</span><br><span class="line">list.<span class="built_in">PrintList</span>();</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;1、插入一个数字&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;2、指定位置插入一个数字&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;3、获取某个数的具体位置&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;4、获取一个具体位置的数&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;5、删除一个指定位置的数&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;0、退出演示&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入对应服务编号：&quot;</span>;</span><br><span class="line">cin &gt;&gt; choose;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="built_in">Menu</span>(choose, &amp;list);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">catch</span> (<span class="type">const</span> <span class="type">char</span> * e) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;出错啦，错误消息：&quot;</span> &lt;&lt; e &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl &lt;&lt; <span class="string">&quot;--------------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 菜单</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType = <span class="type">int</span>&gt;</span><br><span class="line"><span class="type">void</span> <span class="built_in">Menu</span>(<span class="type">int</span> choose, SeqList&lt;&gt;* list) &#123;</span><br><span class="line"><span class="type">int</span> in_1 = <span class="number">0</span>, in_2 = <span class="number">0</span>, temp_1 = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">switch</span> (choose) &#123;</span><br><span class="line"><span class="comment">// 插入一个数字</span></span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入要插入的数字：&quot;</span>;</span><br><span class="line">cin &gt;&gt; in_1;</span><br><span class="line">list-&gt;<span class="built_in">Insert</span>(list-&gt;<span class="built_in">Length</span>() + <span class="number">1</span>, in_1);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="comment">// 指定位置插入一个数字</span></span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入指定位置与要插入的数字：&quot;</span>;</span><br><span class="line">cin &gt;&gt; in_1 &gt;&gt; in_2;</span><br><span class="line">list-&gt;<span class="built_in">Insert</span>(in_1, in_2);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="comment">// 获取某个数的具体位置</span></span><br><span class="line"><span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入要查询的数：&quot;</span>;</span><br><span class="line">cin &gt;&gt; in_1;</span><br><span class="line">temp_1 = list-&gt;<span class="built_in">Locate</span>(in_1);</span><br><span class="line"><span class="keyword">if</span> (temp_1) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;所查数第一次出现的位置是：&quot;</span> &lt;&lt; temp_1 &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;没有查到哦~&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="comment">// 获取一个具体位置的数</span></span><br><span class="line"><span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入要查找的位置：&quot;</span>;</span><br><span class="line">cin &gt;&gt; in_1;</span><br><span class="line">temp_1 = list-&gt;<span class="built_in">Get</span>(in_1);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;所在位置的数是：&quot;</span> &lt;&lt; temp_1 &lt;&lt; endl;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="comment">// 删除一个指定位置的数</span></span><br><span class="line"><span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入要删除的位置：&quot;</span>;</span><br><span class="line">cin &gt;&gt; in_1;</span><br><span class="line">list-&gt;<span class="built_in">Delete</span>(in_1);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;感谢体验，再见~&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;输入有误&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 清除屏幕（未使用）</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Clear</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\x1B[2J\x1B[H&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>运行效果</strong></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/knowledge/data-structure/image-20230317232746299.png" alt="image-20230317232746299"></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/knowledge/data-structure/image-20230317232856469.png" alt="image-20230317232856469"></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/knowledge/data-structure/image-20230317232916272.png" alt="image-20230317232916272"></p><h3 id="单链表"><a href="#单链表" class="headerlink" title="单链表"></a>单链表</h3><p>单链表有头插法和尾插法的说法，案例代码具体体现在链表的有参初始工作中</p><p><strong>LinkList.h</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义单链表的结点</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType = <span class="type">int</span>&gt;</span><br><span class="line"><span class="keyword">struct</span> Node &#123;</span><br><span class="line">DataType data;</span><br><span class="line">Node&lt;DataType&gt;* next;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType = <span class="type">int</span>&gt;<span class="comment">// 相当于Java的泛型，在C++叫模板</span></span><br><span class="line"><span class="keyword">class</span> LinkList</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">LinkList</span>();<span class="comment">// 无参构造，建立空的顺序表</span></span><br><span class="line"><span class="built_in">LinkList</span>(DataType a[], <span class="type">int</span> n);<span class="comment">// 有参构造，建立长度为n的顺序表</span></span><br><span class="line">~<span class="built_in">LinkList</span>();<span class="comment">// 析构函数，就是在对象销毁时会被执行</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Length</span><span class="params">()</span></span>;<span class="comment">// 获取线性表的长度</span></span><br><span class="line"><span class="function">DataType <span class="title">Get</span><span class="params">(<span class="type">int</span> i)</span></span>;<span class="comment">// 按位查找，查找第i个结点</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Locate</span><span class="params">(DataType x)</span></span>;<span class="comment">// 按值查找，查找值为x的结点</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Insert</span><span class="params">(<span class="type">int</span> i, DataType x)</span></span>;<span class="comment">// 插入操作，在第i个位置插入值为x的结点</span></span><br><span class="line"><span class="function">DataType <span class="title">Delete</span><span class="params">(<span class="type">int</span> i)</span></span>;<span class="comment">// 删除操作，删除第i个结点</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Empty</span><span class="params">()</span></span>;<span class="comment">// 判断线性表是否为空</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">PrintList</span><span class="params">()</span></span>;<span class="comment">// 遍历操作，按序号依次输出各结点</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">Node&lt;DataType&gt;* header;<span class="comment">// 单链表的头结点</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 无参构造，建立只有头节点的单链表</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType&gt;</span><br><span class="line">LinkList&lt;DataType&gt;::<span class="built_in">LinkList</span>() &#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;header = <span class="keyword">new</span> Node&lt;DataType&gt;;</span><br><span class="line"><span class="keyword">this</span>-&gt;header-&gt;next = <span class="literal">nullptr</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 有参构造，建立长度为n的顺序表，头插法</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType&gt;</span><br><span class="line">LinkList&lt;DataType&gt;::<span class="built_in">LinkList</span>(DataType a[], <span class="type">int</span> n) &#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;header = <span class="keyword">new</span> Node&lt;DataType&gt;;</span><br><span class="line"><span class="keyword">this</span>-&gt;header-&gt;next = <span class="literal">nullptr</span>;</span><br><span class="line">Node&lt;DataType&gt;* temp = <span class="literal">nullptr</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">temp = <span class="keyword">this</span>-&gt;header-&gt;next;</span><br><span class="line"><span class="keyword">this</span>-&gt;header-&gt;next = <span class="keyword">new</span> Node&lt;DataType&gt;;</span><br><span class="line"><span class="keyword">this</span>-&gt;header-&gt;next-&gt;data = a[i];</span><br><span class="line"><span class="keyword">this</span>-&gt;header-&gt;next-&gt;next = temp;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//// 有参构造，建立长度为n的顺序表，尾插法</span></span><br><span class="line"><span class="comment">//template &lt;typename DataType&gt;</span></span><br><span class="line"><span class="comment">//LinkList&lt;DataType&gt;::LinkList(DataType a[], int n) &#123;</span></span><br><span class="line"><span class="comment">//this-&gt;header = new Node&lt;DataType&gt;;</span></span><br><span class="line"><span class="comment">//Node&lt;DataType&gt;* temp = this-&gt;header;</span></span><br><span class="line"><span class="comment">//for (int i = 0; i &lt; n; i++) &#123;</span></span><br><span class="line"><span class="comment">//temp-&gt;next = new Node&lt;DataType&gt;;</span></span><br><span class="line"><span class="comment">//temp-&gt;next-&gt;data = a[i];</span></span><br><span class="line"><span class="comment">//temp = temp-&gt;next;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"><span class="comment">//temp-&gt;next = nullptr;</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 析构函数，就是在对象销毁时会被执行</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType&gt;</span><br><span class="line">LinkList&lt;DataType&gt;::~<span class="built_in">LinkList</span>() &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;被销毁了&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取线性表的长度</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType&gt;</span><br><span class="line"><span class="type">int</span> LinkList&lt;DataType&gt;::<span class="built_in">Length</span>() &#123;</span><br><span class="line"><span class="type">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">Node&lt;DataType&gt;* temp = <span class="keyword">this</span>-&gt;header;</span><br><span class="line"><span class="keyword">while</span> (temp-&gt;next != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">temp = temp-&gt;next;</span><br><span class="line">cnt++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> cnt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 按位查找，查找第i个结点</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType&gt;</span><br><span class="line">DataType LinkList&lt;DataType&gt;::<span class="built_in">Get</span>(<span class="type">int</span> i) &#123;</span><br><span class="line"><span class="keyword">if</span> (i &lt; <span class="number">1</span> || i &gt; <span class="keyword">this</span>-&gt;<span class="built_in">Length</span>()) &#123;</span><br><span class="line"><span class="keyword">throw</span> <span class="string">&quot;位置不存在&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">Node&lt;DataType&gt;* temp = <span class="keyword">this</span>-&gt;header;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; i; j++) &#123;</span><br><span class="line">temp = temp-&gt;next;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> temp-&gt;data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 按值查找，查找值为x的结点</span></span><br><span class="line"><span class="comment">// 0：没找到</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType&gt;</span><br><span class="line"><span class="type">int</span> LinkList&lt;DataType&gt;::<span class="built_in">Locate</span>(DataType x) &#123;</span><br><span class="line">Node&lt;DataType&gt;* temp = header;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>-&gt;<span class="built_in">Length</span>(); i++) &#123;</span><br><span class="line">temp = temp-&gt;next;</span><br><span class="line"><span class="keyword">if</span> (temp-&gt;data == x) &#123;</span><br><span class="line"><span class="keyword">return</span> i + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 插入操作，在第i个位置插入值为x的结点</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType&gt;</span><br><span class="line"><span class="type">void</span> LinkList&lt;DataType&gt;::<span class="built_in">Insert</span>(<span class="type">int</span> i, DataType x) &#123;</span><br><span class="line"><span class="keyword">if</span> (i &lt; <span class="number">1</span> || i &gt; <span class="keyword">this</span>-&gt;<span class="built_in">Length</span>() + <span class="number">1</span>) <span class="keyword">throw</span> <span class="string">&quot;位置错误&quot;</span>;</span><br><span class="line"></span><br><span class="line">Node&lt;DataType&gt;* temp = header, *new_node = <span class="keyword">new</span> Node&lt;DataType&gt;;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; i - <span class="number">1</span>; j++) &#123;</span><br><span class="line">temp = temp-&gt;next;</span><br><span class="line">&#125;</span><br><span class="line">new_node-&gt;data = x;</span><br><span class="line">new_node-&gt;next = temp-&gt;next;</span><br><span class="line">temp-&gt;next = new_node;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 删除操作，删除第i个结点</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType&gt;</span><br><span class="line">DataType LinkList&lt;DataType&gt;::<span class="built_in">Delete</span>(<span class="type">int</span> i) &#123;</span><br><span class="line"><span class="keyword">if</span> (i &lt; <span class="number">1</span> || i &gt; <span class="keyword">this</span>-&gt;<span class="built_in">Length</span>()) <span class="keyword">throw</span> <span class="string">&quot;位置错误&quot;</span>;</span><br><span class="line"></span><br><span class="line">DataType del = <span class="keyword">this</span>-&gt;<span class="built_in">Get</span>(i);</span><br><span class="line"></span><br><span class="line">Node&lt;DataType&gt;* node = header, *temp = <span class="literal">nullptr</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; i - <span class="number">1</span>; j++) &#123;</span><br><span class="line">node = node-&gt;next;</span><br><span class="line">&#125;</span><br><span class="line">temp = node-&gt;next;</span><br><span class="line">node-&gt;next = node-&gt;next-&gt;next;</span><br><span class="line"><span class="built_in">delete</span>(temp);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> del;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断线性表是否为空</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType&gt;</span><br><span class="line"><span class="type">int</span> LinkList&lt;DataType&gt;::<span class="built_in">Empty</span>() &#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>-&gt;header-&gt;next == <span class="literal">nullptr</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 遍历操作，按序号依次输出各结点</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType&gt;</span><br><span class="line"><span class="type">void</span> LinkList&lt;DataType&gt;::<span class="built_in">PrintList</span>() &#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>-&gt;<span class="built_in">Empty</span>()) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;&#123;&#125;&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Node&lt;DataType&gt;* temp = header-&gt;next;</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;&#123;&quot;</span> &lt;&lt; temp-&gt;data;</span><br><span class="line"><span class="keyword">while</span> (temp-&gt;next != <span class="literal">nullptr</span>) &#123;</span><br><span class="line">temp = temp-&gt;next;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;,&quot;</span> &lt;&lt; temp-&gt;data;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt;  <span class="string">&quot;&#125;&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>Main.h</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;LinkList.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 菜单</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType = <span class="type">int</span>&gt;</span><br><span class="line"><span class="type">void</span> <span class="built_in">Menu</span>(<span class="type">int</span> choose, LinkList&lt;&gt;* list);</span><br><span class="line"><span class="comment">// 清除控制台（未使用）</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Clear</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="type">int</span> init[] = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span> &#125;;</span><br><span class="line">LinkList&lt;&gt; <span class="built_in">list</span>(init, <span class="number">8</span>);</span><br><span class="line"><span class="type">int</span> choose = <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (choose) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;--------------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;元素[&quot;</span> &lt;&lt; list.<span class="built_in">Length</span>() &lt;&lt; <span class="string">&quot;]个|单链表状态&quot;</span>;</span><br><span class="line">list.<span class="built_in">PrintList</span>();</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;1、插入一个数字&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;2、指定位置插入一个数字&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;3、获取某个数的具体位置&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;4、获取一个具体位置的数&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;5、删除一个指定位置的数&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;0、退出演示&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入对应服务编号：&quot;</span>;</span><br><span class="line">cin &gt;&gt; choose;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="built_in">Menu</span>(choose, &amp;list);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">catch</span> (<span class="type">const</span> <span class="type">char</span>* e) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;出错啦，错误消息：&quot;</span> &lt;&lt; e &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; endl &lt;&lt; <span class="string">&quot;--------------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 菜单</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType = <span class="type">int</span>&gt;</span><br><span class="line"><span class="type">void</span> <span class="built_in">Menu</span>(<span class="type">int</span> choose, LinkList&lt;&gt;* list) &#123;</span><br><span class="line"><span class="type">int</span> in_1 = <span class="number">0</span>, in_2 = <span class="number">0</span>, temp_1 = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">switch</span> (choose) &#123;</span><br><span class="line"><span class="comment">// 插入一个数字</span></span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入要插入的数字：&quot;</span>;</span><br><span class="line">cin &gt;&gt; in_1;</span><br><span class="line">list-&gt;<span class="built_in">Insert</span>(list-&gt;<span class="built_in">Length</span>() + <span class="number">1</span>, in_1);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="comment">// 指定位置插入一个数字</span></span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入指定位置与要插入的数字：&quot;</span>;</span><br><span class="line">cin &gt;&gt; in_1 &gt;&gt; in_2;</span><br><span class="line">list-&gt;<span class="built_in">Insert</span>(in_1, in_2);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="comment">// 获取某个数的具体位置</span></span><br><span class="line"><span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入要查询的数：&quot;</span>;</span><br><span class="line">cin &gt;&gt; in_1;</span><br><span class="line">temp_1 = list-&gt;<span class="built_in">Locate</span>(in_1);</span><br><span class="line"><span class="keyword">if</span> (temp_1) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;所查数第一次出现的位置是：&quot;</span> &lt;&lt; temp_1 &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;没有查到哦~&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="comment">// 获取一个具体位置的数</span></span><br><span class="line"><span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入要查找的位置：&quot;</span>;</span><br><span class="line">cin &gt;&gt; in_1;</span><br><span class="line">temp_1 = list-&gt;<span class="built_in">Get</span>(in_1);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;所在位置的数是：&quot;</span> &lt;&lt; temp_1 &lt;&lt; endl;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="comment">// 删除一个指定位置的数</span></span><br><span class="line"><span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入要删除的位置：&quot;</span>;</span><br><span class="line">cin &gt;&gt; in_1;</span><br><span class="line">list-&gt;<span class="built_in">Delete</span>(in_1);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;感谢体验，再见~&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;输入有误&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 清除屏幕（未使用）</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Clear</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;\x1B[2J\x1B[H&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>运行效果和顺序表差不多，就不过多展示了</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/knowledge/data-structure/image-20230318123337905.png" alt="image-20230318123337905"></p><h3 id="顺序栈"><a href="#顺序栈" class="headerlink" title="顺序栈"></a>顺序栈</h3><p>栈结构就是先入后出，后入先出，使用顺序栈实现四则运算</p><p><strong>MyMath.h</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断运算符优先级</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Precedence</span><span class="params">(<span class="type">char</span> op)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 根据二元运算符运算</span></span><br><span class="line"><span class="function"><span class="type">float</span> <span class="title">Operate</span><span class="params">(<span class="type">float</span> left, <span class="type">float</span> right, <span class="type">char</span> op)</span></span>;</span><br></pre></td></tr></table></figure><p><strong>SeqStack.h</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> StackSize = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType = <span class="type">int</span>&gt;</span><br><span class="line"><span class="keyword">class</span> SeqStack &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">SeqStack</span>();<span class="comment">// 构造函数</span></span><br><span class="line">~<span class="built_in">SeqStack</span>();<span class="comment">// 析构函数</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Push</span><span class="params">(DataType x)</span></span>;<span class="comment">// 入栈操作</span></span><br><span class="line"><span class="function">DataType <span class="title">Pop</span><span class="params">()</span></span>;<span class="comment">// 出栈操作</span></span><br><span class="line"><span class="function">DataType <span class="title">GetTop</span><span class="params">()</span></span>;<span class="comment">// 去栈顶元素</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Empty</span><span class="params">()</span></span>;<span class="comment">// 判断栈是否为空</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">DataType data[StackSize];<span class="comment">// 存放栈元素的数组</span></span><br><span class="line"><span class="type">int</span> top;<span class="comment">// 栈顶元素在数组中的下标</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 构造函数</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType&gt;</span><br><span class="line">SeqStack&lt;DataType&gt;::<span class="built_in">SeqStack</span>() &#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;top = <span class="number">-1</span>;<span class="comment">// 初始化栈顶元素下标</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 析构函数</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType&gt;</span><br><span class="line">SeqStack&lt;DataType&gt;::~<span class="built_in">SeqStack</span>() &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 入栈</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType&gt;</span><br><span class="line"><span class="type">void</span> SeqStack&lt;DataType&gt;::<span class="built_in">Push</span>(DataType x) &#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>-&gt;top == StackSize - <span class="number">1</span>) <span class="keyword">throw</span> <span class="string">&quot;栈溢出&quot;</span>;</span><br><span class="line"><span class="keyword">this</span>-&gt;data[++top] = x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 出栈</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType&gt;</span><br><span class="line">DataType SeqStack&lt;DataType&gt;::<span class="built_in">Pop</span>() &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">this</span>-&gt;data[<span class="keyword">this</span>-&gt;top--];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 取栈顶</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType&gt;</span><br><span class="line">DataType SeqStack&lt;DataType&gt;::<span class="built_in">GetTop</span>() &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">this</span>-&gt;data[<span class="keyword">this</span>-&gt;top];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断栈是否为空</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType&gt;</span><br><span class="line"><span class="type">int</span> SeqStack&lt;DataType&gt;::<span class="built_in">Empty</span>() &#123;</span><br><span class="line"><span class="keyword">return</span> (<span class="keyword">this</span>-&gt;top == <span class="number">-1</span>) ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>MyMath.cpp</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MyMath.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断运算符优先级</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Precedence</span><span class="params">(<span class="type">char</span> op)</span> </span>&#123;</span><br><span class="line"><span class="keyword">switch</span> (op) &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;(&#x27;</span>:</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;#&#x27;</span>:</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;=&#x27;</span>:</span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;+&#x27;</span>:</span><br><span class="line"><span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;-&#x27;</span>:</span><br><span class="line"><span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;*&#x27;</span>:</span><br><span class="line"><span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;/&#x27;</span>:</span><br><span class="line"><span class="keyword">return</span> <span class="number">3</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;)&#x27;</span>:</span><br><span class="line"><span class="keyword">return</span> <span class="number">4</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line"><span class="keyword">throw</span> <span class="string">&quot;不支持的运算符&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 根据二元运算符运算</span></span><br><span class="line"><span class="function"><span class="type">float</span> <span class="title">Operate</span><span class="params">(<span class="type">float</span> left, <span class="type">float</span> right, <span class="type">char</span> op)</span> </span>&#123;</span><br><span class="line"><span class="keyword">switch</span> (op) &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;+&#x27;</span>:</span><br><span class="line"><span class="keyword">return</span> left + right;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;-&#x27;</span>:</span><br><span class="line"><span class="keyword">return</span> left - right;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;*&#x27;</span>:</span><br><span class="line"><span class="keyword">return</span> left * right;</span><br><span class="line"><span class="keyword">case</span> <span class="string">&#x27;/&#x27;</span>:</span><br><span class="line"><span class="keyword">return</span> left / right;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line"><span class="keyword">throw</span> <span class="string">&quot;不支持的运算符&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Main.cpp</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;SeqStack.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;MyMath.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">string allOps = <span class="string">&quot;#+-*/=()&quot;</span>, userIn = <span class="string">&quot;&quot;</span>;<span class="comment">// 定义所有支持的运算符与用户输入</span></span><br><span class="line">SeqStack&lt;<span class="type">float</span>&gt; nums;<span class="comment">// 用于存储运算数</span></span><br><span class="line">SeqStack&lt;<span class="type">char</span>&gt; ops;<span class="comment">// 用于存储运算符</span></span><br><span class="line"><span class="type">char</span> op = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line"><span class="type">float</span> num = <span class="number">0</span>, left = <span class="number">0</span>, right = <span class="number">0</span>;<span class="comment">// 用于存储程序会产生的数字</span></span><br><span class="line">ops.<span class="built_in">Push</span>(<span class="string">&#x27;#&#x27;</span>);<span class="comment">// 将结束符号压入栈中，方便优先级比较</span></span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入你的表达式\n每次输入[运算数]or[运算符]&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (userIn != <span class="string">&quot;=&quot;</span>) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;你的输入：&quot;</span>;</span><br><span class="line">cin &gt;&gt; userIn;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断左括号</span></span><br><span class="line"><span class="keyword">if</span> (userIn == <span class="string">&quot;(&quot;</span>) &#123;</span><br><span class="line">ops.<span class="built_in">Push</span>(<span class="string">&#x27;(&#x27;</span>);</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断是否为运算符</span></span><br><span class="line"><span class="keyword">if</span> (allOps.<span class="built_in">find</span>(userIn) == string::npos) &#123;</span><br><span class="line"><span class="comment">// 不是运算符则为数字，转为数字并压入数字栈</span></span><br><span class="line">num = <span class="built_in">stof</span>(userIn);<span class="comment">// 转为数字</span></span><br><span class="line">nums.<span class="built_in">Push</span>(num);<span class="comment">// 将数字压入数字栈中</span></span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断右括号</span></span><br><span class="line"><span class="keyword">if</span> (userIn == <span class="string">&quot;)&quot;</span>) &#123;</span><br><span class="line"><span class="keyword">while</span> ((op = ops.<span class="built_in">Pop</span>()) != <span class="string">&#x27;(&#x27;</span>) &#123;</span><br><span class="line">right = nums.<span class="built_in">Pop</span>();</span><br><span class="line">left = nums.<span class="built_in">Pop</span>();</span><br><span class="line">nums.<span class="built_in">Push</span>(<span class="built_in">Operate</span>(left, right, op));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断运算符优先级</span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">Precedence</span>(ops.<span class="built_in">GetTop</span>()) &gt;= <span class="built_in">Precedence</span>(userIn[<span class="number">0</span>])) &#123;</span><br><span class="line"><span class="comment">// 如果新运算的优先级比栈中低则先弹栈进行运算</span></span><br><span class="line">right = nums.<span class="built_in">Pop</span>();</span><br><span class="line">left = nums.<span class="built_in">Pop</span>();</span><br><span class="line">nums.<span class="built_in">Push</span>(<span class="built_in">Operate</span>(left, right, ops.<span class="built_in">Pop</span>()));<span class="comment">// 将运算结果压入数字栈中</span></span><br><span class="line"><span class="comment">// 将用户输入的运算符压入运算符栈中</span></span><br><span class="line"><span class="keyword">if</span> (userIn != <span class="string">&quot;=&quot;</span>) &#123;</span><br><span class="line">ops.<span class="built_in">Push</span>(userIn[<span class="number">0</span>]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">continue</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果新运算的优先级比栈中高则直接压入运算符栈</span></span><br><span class="line"><span class="keyword">if</span> (userIn != <span class="string">&quot;=&quot;</span>) &#123;</span><br><span class="line">ops.<span class="built_in">Push</span>(userIn[<span class="number">0</span>]);</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">while</span> (userIn != <span class="string">&quot;=&quot;</span> || ops.<span class="built_in">GetTop</span>() != <span class="string">&#x27;#&#x27;</span>);</span><br><span class="line"></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;计算结果：&quot;</span> &lt;&lt; nums.<span class="built_in">GetTop</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行效果</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/knowledge/data-structure/image-20230406202708597.png" alt="image-20230406202708597"></p><h3 id="队列"><a href="#队列" class="headerlink" title="队列"></a>队列</h3><p>先入先出，后入后出，这里使用循环队列完成了一个门诊看病的案例</p><p><strong>CirQueue.h</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> QueueSize = <span class="number">50</span>;<span class="comment">// 设置循环队列的长度</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CirQueue</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"><span class="built_in">CirQueue</span>();<span class="comment">// 构造函数</span></span><br><span class="line">~<span class="built_in">CirQueue</span>();<span class="comment">// 析构函数</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">EnQueue</span><span class="params">(DataType x)</span></span>;<span class="comment">// 入队操作，将元素x入队</span></span><br><span class="line"><span class="function">DataType <span class="title">DeQueue</span><span class="params">()</span></span>;<span class="comment">// 出队操作</span></span><br><span class="line"><span class="function">DataType <span class="title">GetHead</span><span class="params">()</span></span>;<span class="comment">// 取队头元素</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Empty</span><span class="params">()</span></span>;<span class="comment">// 判空</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">Size</span><span class="params">()</span></span>;<span class="comment">// 长度</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">DataType data[QueueSize];<span class="comment">// 数据</span></span><br><span class="line"><span class="type">int</span> start, end, length;<span class="comment">// 队头和队尾以及长度</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 长度</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType&gt;</span><br><span class="line"><span class="type">int</span> CirQueue&lt;DataType&gt;::<span class="built_in">Size</span>() &#123;</span><br><span class="line"><span class="keyword">return</span> length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 构造函数</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType&gt;</span><br><span class="line">CirQueue&lt;DataType&gt;::<span class="built_in">CirQueue</span>() &#123;</span><br><span class="line"><span class="comment">// 将头尾都指向最后一个位置</span></span><br><span class="line"><span class="keyword">this</span>-&gt;start = QueueSize - <span class="number">1</span>;</span><br><span class="line"><span class="keyword">this</span>-&gt;end = QueueSize - <span class="number">1</span>;</span><br><span class="line"><span class="keyword">this</span>-&gt;length = <span class="number">0</span>;<span class="comment">// 长度为0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 析构函数</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType&gt;</span><br><span class="line">CirQueue&lt;DataType&gt;::~<span class="built_in">CirQueue</span>() &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 入队</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType&gt;</span><br><span class="line"><span class="type">void</span> CirQueue&lt;DataType&gt;::<span class="built_in">EnQueue</span>(DataType x) &#123;</span><br><span class="line"><span class="keyword">if</span> ((<span class="keyword">this</span>-&gt;end + <span class="number">1</span>) % QueueSize == <span class="keyword">this</span>-&gt;start) <span class="keyword">throw</span> <span class="string">&quot;满&quot;</span>;</span><br><span class="line"><span class="keyword">this</span>-&gt;data[<span class="keyword">this</span>-&gt;end = ((<span class="keyword">this</span>-&gt;end + <span class="number">1</span>) % QueueSize)] = x;</span><br><span class="line"><span class="keyword">this</span>-&gt;length++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 出队</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType&gt;</span><br><span class="line">DataType CirQueue&lt;DataType&gt;::<span class="built_in">DeQueue</span>() &#123;</span><br><span class="line"><span class="keyword">this</span>-&gt;length--;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>-&gt;start == <span class="keyword">this</span>-&gt;end) <span class="keyword">throw</span> <span class="string">&quot;空队&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">this</span>-&gt;data[<span class="keyword">this</span>-&gt;start = (<span class="keyword">this</span>-&gt;start + <span class="number">1</span>) % QueueSize];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 取队头</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType&gt;</span><br><span class="line">DataType CirQueue&lt;DataType&gt;::<span class="built_in">GetHead</span>() &#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">this</span>-&gt;start == <span class="keyword">this</span>-&gt;end) <span class="keyword">throw</span> <span class="string">&quot;空队&quot;</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">this</span>-&gt;data[(<span class="keyword">this</span>-&gt;start + <span class="number">1</span>) % QueueSize];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判空</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType&gt;</span><br><span class="line"><span class="type">int</span> CirQueue&lt;DataType&gt;::<span class="built_in">Empty</span>() &#123;</span><br><span class="line"><span class="keyword">return</span> length ? <span class="number">0</span> : <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>Main.cpp</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;CirQueue.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用于存储病人信息的结构体</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Sick</span> &#123;</span><br><span class="line">string id;<span class="comment">// 编号</span></span><br><span class="line">string name;<span class="comment">// 姓名</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">处理菜单选项，并返回进入门诊的人</span></span><br><span class="line"><span class="comment">choice：选项</span></span><br><span class="line"><span class="comment">sicks：排队的病人</span></span><br><span class="line"><span class="comment">current：当前正在门诊的病人</span></span><br><span class="line"><span class="comment">return：返回处理后正在门诊的病人</span></span><br><span class="line"><span class="comment">*/</span> </span><br><span class="line"><span class="function">Sick* <span class="title">choiceHandle</span><span class="params">(<span class="type">int</span> choice, CirQueue&lt;Sick*&gt;* sicks, Sick* current)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="type">int</span> userIn = <span class="number">0</span>;</span><br><span class="line">CirQueue&lt;Sick*&gt;* sicks = <span class="keyword">new</span> CirQueue&lt;Sick*&gt;;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Sick</span>* sick = <span class="literal">nullptr</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">do</span> &#123;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;----------输入数字选择对应功能----------&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">if</span> (sick == <span class="literal">nullptr</span>) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;----------------诊室空闲----------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;---编号[&quot;</span> + sick-&gt;id + <span class="string">&quot;]|姓名[&quot;</span> + sick-&gt;name + <span class="string">&quot;]正在门诊-----&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (sicks-&gt;<span class="built_in">Size</span>()) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;---请编号[&quot;</span> + sicks-&gt;<span class="built_in">GetHead</span>()-&gt;id + <span class="string">&quot;]|姓名[&quot;</span> + sicks-&gt;<span class="built_in">GetHead</span>()-&gt;name + <span class="string">&quot;]做好准备-----&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;---------当前还有[&quot;</span> &lt;&lt; sicks-&gt;<span class="built_in">Size</span>() &lt;&lt; <span class="string">&quot;]人正在排队----------&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;--------------1、录入病人---------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;--------------2、呼叫病人---------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;--------------0、退出系统---------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请选择：&quot;</span>;</span><br><span class="line">cin &gt;&gt; userIn;</span><br><span class="line">sick = <span class="built_in">choiceHandle</span>(userIn, sicks, sick);</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;----------------------------------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">catch</span> (<span class="type">const</span> <span class="type">char</span>* ex) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;错误的操作&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="built_in">exit</span>(<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">while</span> (userIn);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">处理菜单选项，并返回进入门诊的人</span></span><br><span class="line"><span class="comment">choice：选项</span></span><br><span class="line"><span class="comment">sicks：排队的病人</span></span><br><span class="line"><span class="comment">current：当前正在门诊的病人</span></span><br><span class="line"><span class="comment">return：返回处理后正在门诊的病人</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Sick* <span class="title">choiceHandle</span><span class="params">(<span class="type">int</span> choice, CirQueue&lt;Sick*&gt;* sicks, Sick* current)</span> </span>&#123;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Sick</span>* sick;</span><br><span class="line"><span class="keyword">switch</span> (choice) &#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;再见&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入编号及姓名&quot;</span> &lt;&lt; endl;</span><br><span class="line">sick = <span class="keyword">new</span> Sick;</span><br><span class="line">cin &gt;&gt; sick-&gt;id &gt;&gt; sick-&gt;name;</span><br><span class="line">sicks-&gt;<span class="built_in">EnQueue</span>(sick);</span><br><span class="line"><span class="keyword">return</span> current;</span><br><span class="line"><span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line"><span class="keyword">if</span> (sicks-&gt;<span class="built_in">Size</span>()) &#123;</span><br><span class="line">sick = sicks-&gt;<span class="built_in">DeQueue</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;无人等待&quot;</span> &lt;&lt; endl;</span><br><span class="line">sick = <span class="literal">nullptr</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> sick;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;不支持的选项&quot;</span> &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span> current;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行截图</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/knowledge/data-structure/image-20230406203204850.png" alt="image-20230406203204850"></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/knowledge/data-structure/image-20230406203226150.png" alt="image-20230406203226150"></p><h3 id="模式匹配"><a href="#模式匹配" class="headerlink" title="模式匹配"></a>模式匹配</h3><p>字符串特有的功能</p><h4 id="BF"><a href="#BF" class="headerlink" title="BF"></a>BF</h4><p>暴力算法</p><p><strong>Main.cpp</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 获取子串在主串中第一次出现的起始位置，不存在则返回0</span></span><br><span class="line"><span class="comment">* param s 主串</span></span><br><span class="line"><span class="comment">* param t 子串</span></span><br><span class="line"><span class="comment">* return 返回子串在主串中第一次出现的下标（从1起标），不存在则返回0</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">BF</span><span class="params">(<span class="type">char</span>* s, <span class="type">char</span>* t)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> start = <span class="number">0</span>;                              <span class="comment">// 设置主串每次匹配的起始位置</span></span><br><span class="line">    <span class="type">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>;                           <span class="comment">// i记录主串某次匹配的位置变动，j记录子串匹配的位置变动</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        当主串下标不为空时说明主串还没匹配完，</span></span><br><span class="line"><span class="comment">        当子串下标不为空时说明子串还没被匹配完过</span></span><br><span class="line"><span class="comment">        当上面两个条件同时满足才执行循环</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">while</span> ((s[i] != <span class="string">&#x27;\0&#x27;</span>) &amp;&amp; (t[j] != <span class="string">&#x27;\0&#x27;</span>)) &#123;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            如果在某次匹配中，子串能与主串匹配上就一直往下匹配，</span></span><br><span class="line"><span class="comment">            直到主串到底，或者子串到底</span></span><br><span class="line"><span class="comment">            主串到底说明已经没法匹配了</span></span><br><span class="line"><span class="comment">            子串到底说明找到了子串在主串中的位置</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="keyword">if</span> (s[i] == t[j]) &#123;</span><br><span class="line">            i++;</span><br><span class="line">            j++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            如果某次匹配没有匹配上，就说明主串的这个位置匹配不上，</span></span><br><span class="line"><span class="comment">            匹配的主串起始位置就往下走一位，</span></span><br><span class="line"><span class="comment">            并将记录主串某次匹配的位置更新为主串新的匹配起始位置，</span></span><br><span class="line"><span class="comment">            记录子串匹配的位置初始化为子串的第一个字符位置</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            start++; </span><br><span class="line">            i = start; </span><br><span class="line">            j = <span class="number">0</span>; </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        当匹配完成后如果子串的下标匹配记录为\0，</span></span><br><span class="line"><span class="comment">        则说明子串匹配成功了，就返回最后这次匹配的主串起始位置+1（方法返回从1起标）。</span></span><br><span class="line"><span class="comment">        如果子串下标匹配记录不为\0，说明是主串的下标匹配记录为\0，</span></span><br><span class="line"><span class="comment">        表明主串已经匹配到最后一个字符了，也没有匹配到子串，就返回0，表示没有找到子串</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">if</span> (t[j] == <span class="string">&#x27;\0&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> start + <span class="number">1</span>; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123; </span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 给两个字符指针分配内存，方便存字符串</span></span><br><span class="line">    <span class="type">char</span> *s = (<span class="type">char</span>*) <span class="built_in">malloc</span>(<span class="number">1024</span>), * t = (<span class="type">char</span>*)<span class="built_in">malloc</span>(<span class="number">1024</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 输入</span></span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;请输入主串：&quot;</span>;</span><br><span class="line">    cin &gt;&gt; s;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;请输入子串：&quot;</span>;</span><br><span class="line">    cin &gt;&gt; t;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="type">int</span> index = <span class="built_in">BF</span>(s,t)) &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;子串第一次在主串中出现的下标是：&quot;</span> &lt;&lt; index;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;没有匹配到子串&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 内存释放</span></span><br><span class="line">    <span class="built_in">free</span>(s);</span><br><span class="line">    <span class="built_in">free</span>(t);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行截图</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/knowledge/data-structure/image-20230406203523753.png" alt="image-20230406203523753"></p><h4 id="KMP"><a href="#KMP" class="headerlink" title="KMP"></a>KMP</h4><p>对我来说很烧脑，我这里的实现有问题，但是能力只能先这样了</p><p><strong>Main.cpp</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用于装载数组</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Arr</span> &#123;</span><br><span class="line"><span class="type">int</span>* data;<span class="comment">// 数组指针</span></span><br><span class="line"><span class="type">int</span> length;<span class="comment">// 数组长度</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">获取子串的next数组</span></span><br><span class="line"><span class="comment">param t 子串的首地址</span></span><br><span class="line"><span class="comment">return 返回next数组</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Arr* <span class="title">getNext</span><span class="params">(<span class="type">char</span>* t)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">通过KMP算法获取子串在主串中第一次出现的下标（从0起标），未找到返回-1</span></span><br><span class="line"><span class="comment">param s 主串</span></span><br><span class="line"><span class="comment">param t 子串</span></span><br><span class="line"><span class="comment">return 子串在主串中第一次出现的下标（从0起标），未找到返回-1</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">KMP</span><span class="params">(<span class="type">char</span>* s, <span class="type">char</span>* t)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="comment">// 创建字符串接收变量</span></span><br><span class="line"><span class="type">char</span>* s = (<span class="type">char</span>*) <span class="built_in">malloc</span>(<span class="number">1024</span>);</span><br><span class="line"><span class="type">char</span>* t = (<span class="type">char</span>*)<span class="built_in">malloc</span>(<span class="number">1024</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 终端输入</span></span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入主串：&quot;</span>;</span><br><span class="line">cin &gt;&gt; s;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;请输入子串：&quot;</span>;</span><br><span class="line">cin &gt;&gt; t;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出结果</span></span><br><span class="line"><span class="type">int</span> index = <span class="built_in">KMP</span>(s, t);</span><br><span class="line"><span class="keyword">if</span> (index == <span class="number">-1</span>) &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;没有在主串中找到子串&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;子串在主串中第一次出现的下标为：&quot;</span> &lt;&lt; index;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 释放内存</span></span><br><span class="line"><span class="built_in">free</span>(s);</span><br><span class="line"><span class="built_in">free</span>(t);</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">获取子串的next数组</span></span><br><span class="line"><span class="comment">param t 子串的首地址</span></span><br><span class="line"><span class="comment">return 返回next数组</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function">Arr* <span class="title">getNext</span><span class="params">(<span class="type">char</span>* t)</span> </span>&#123;</span><br><span class="line">Arr* next = <span class="keyword">new</span> Arr&#123; <span class="literal">nullptr</span>,<span class="number">0</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 计算数组长度</span></span><br><span class="line"><span class="keyword">while</span> (t[next-&gt;length] != <span class="string">&#x27;\0&#x27;</span>) &#123;</span><br><span class="line">next-&gt;length++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 给next数组分配空间</span></span><br><span class="line">next-&gt;data = (<span class="type">int</span>*)<span class="built_in">malloc</span>(<span class="built_in">sizeof</span>(<span class="type">int</span>) * (next-&gt;length));</span><br><span class="line"></span><br><span class="line">next-&gt;data[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">next-&gt;data[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 循环对应子串的每个字符下标</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt; next-&gt;length; i++) &#123;</span><br><span class="line"><span class="type">int</span> max = i - <span class="number">1</span>;<span class="comment">// 当前子串字符下标需要比对的前后缀的最长长度</span></span><br><span class="line">next-&gt;data[i] = <span class="number">0</span>;<span class="comment">// 假想没有前后缀</span></span><br><span class="line"><span class="comment">// 根据前后缀最大长度，从最大前后缀一直比较到最小前后缀，找到下次对比子串的起始指针</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> j = max; j &gt;= <span class="number">1</span>; j--) &#123;</span><br><span class="line"><span class="type">int</span> flag = <span class="literal">true</span>;</span><br><span class="line"><span class="comment">// 比较前后缀</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> k = <span class="number">0</span>; k &lt; j; k++) &#123;</span><br><span class="line"><span class="comment">// 依次比较前后缀，如果没配对就表示本次循环的前后缀长度不是最长的</span></span><br><span class="line"><span class="keyword">if</span> (t[k] != t[max - j + k + <span class="number">1</span>]) &#123;</span><br><span class="line">flag = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 如果flag为真，则写入偏移量，并结束找最大前后缀</span></span><br><span class="line"><span class="keyword">if</span> (flag) &#123;</span><br><span class="line"><span class="comment">// 将最大前后缀长度赋值给next数组并退出</span></span><br><span class="line">next-&gt;data[i] = j;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> next;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">通过KMP算法获取子串在主串中第一次出现的下标（从0起标），未找到返回-1</span></span><br><span class="line"><span class="comment">param s 主串</span></span><br><span class="line"><span class="comment">param t 子串</span></span><br><span class="line"><span class="comment">return 子串在主串中第一次出现的下标（从0起标），未找到返回-1</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">KMP</span><span class="params">(<span class="type">char</span>* s, <span class="type">char</span>* t)</span> </span>&#123;</span><br><span class="line"><span class="comment">// 获取子串的next数组</span></span><br><span class="line">Arr* next = <span class="built_in">getNext</span>(t);</span><br><span class="line"><span class="comment">// 分别为主串的比较下标记录与子串的比较下标记录</span></span><br><span class="line"><span class="type">int</span> start = <span class="number">0</span>, t_i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 当主串比较到完，或者子串比较完就终止循环</span></span><br><span class="line"><span class="comment">// 子串比较完说明找到了子串的下标，主串比较完说明没有找到</span></span><br><span class="line"><span class="keyword">while</span> (s[start] != <span class="string">&#x27;\0&#x27;</span> &amp;&amp; t[t_i] != <span class="string">&#x27;\0&#x27;</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (s[start] == t[t_i]) &#123;</span><br><span class="line">t_i++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123;</span><br><span class="line">t_i = next-&gt;data[t_i + <span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line">start++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 子串比较完说明找到了子串的下标</span></span><br><span class="line"><span class="keyword">if</span> (t[t_i] == <span class="string">&#x27;\0&#x27;</span>) &#123;</span><br><span class="line"><span class="comment">// 返回子串第一次出现的下标</span></span><br><span class="line"><span class="comment">// 由于主串下标在比较时会往后走，所以返回时要减去子串的长度</span></span><br><span class="line"><span class="keyword">return</span> start - next-&gt;length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 子串没有比较完说明没有在主串中找到子串，返回-1</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>运行截图</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/knowledge/data-structure/image-20230406203822526.png" alt="image-20230406203822526"></p><h2 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h2><ul><li>双向链表：一个结点包含前驱与后继的结点指针</li><li>循环链表：<ul><li>单链表：尾结点的后继结点指针指向头结点</li><li>双向链表：头结点的前驱结点指针指向尾结点，尾结点的后继结点指针指向头结点</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> 知识 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数据结构 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>大三上软件构造期末复习提纲</title>
      <link href="/posts/edb528cc/"/>
      <url>/posts/edb528cc/</url>
      
        <content type="html"><![CDATA[<h1 id="大三上软件构造期末复习提纲"><a href="#大三上软件构造期末复习提纲" class="headerlink" title="大三上软件构造期末复习提纲"></a>大三上软件构造期末复习提纲</h1><p>软件开发的最佳实践的机制指的是有机体的构造</p><p>软件 &#x3D; 程序 + 数据 + 文档</p><h2 id="集成化开发环境的特点有哪些"><a href="#集成化开发环境的特点有哪些" class="headerlink" title="集成化开发环境的特点有哪些"></a>集成化开发环境的特点有哪些</h2><p>P19</p><p>IDE的特点是集成化、可视化和自动化。</p><p>在一个软件系统中支持软件实现的多个基本活动，具有操作方便、界面一致、自动化程度高、集成工具及时更新、有助于提高生产率等特点。同时，IDE体积比较大，内部的编译、运行、调试、连接等过程对开发者是透明的，不利于理解和掌握软件构造基本原理。</p><h2 id="敏捷开发的定义"><a href="#敏捷开发的定义" class="headerlink" title="敏捷开发的定义"></a>敏捷开发的定义</h2><p>P10</p><p>是应对快速变化的需求的一种软件开发能力。它以用户的需求进化为核心，采用迭代、循序渐进的方法进行软件开发。在敏捷开发中，软件项目在构建初期被切分成多个子项目，各个子项目的成果都经过测试，具备可视、可集成和可运行使用的特征。换言之，就是把一个大项目分为多个互相联系、但也可以独立运行的小项目，分别完成，在此过程中，软件一直处于可使用状态。</p><h2 id="软件的模块化理论、模块之间的关系、模块内部的关系"><a href="#软件的模块化理论、模块之间的关系、模块内部的关系" class="headerlink" title="软件的模块化理论、模块之间的关系、模块内部的关系"></a>软件的模块化理论、模块之间的关系、模块内部的关系</h2><p>？</p><h2 id="个体软件过程（Personal-Software-Process，PSP）的作用"><a href="#个体软件过程（Personal-Software-Process，PSP）的作用" class="headerlink" title="个体软件过程（Personal Software Process，PSP）的作用"></a>个体软件过程（Personal Software Process，PSP）的作用</h2><p>P9</p><p>PSP能够说明个体软件过程的原则；</p><p>帮助软件工程师做出准确的计划；</p><p>确定软件工程师为改善产品质量要采取的步骤；</p><p>建立度量个体软件过程改善的基准；</p><p>确定过程的改变对软件工程师能力的影响。</p><h2 id="简述敏捷开发的4个核心价值观"><a href="#简述敏捷开发的4个核心价值观" class="headerlink" title="简述敏捷开发的4个核心价值观"></a>简述敏捷开发的4个核心价值观</h2><p>P10</p><ol><li>个体和互动胜过流程和工具。</li><li>工作的软件胜过详尽的文档。</li><li>客户合作胜过合同谈判。</li><li>响应变化胜过遵循计划。</li></ol><h2 id="模块化的五个原则"><a href="#模块化的五个原则" class="headerlink" title="模块化的五个原则"></a>模块化的五个原则</h2><p>P35</p><ol><li><p>模块可分解性</p><p>如果一种设计方法提供了把问题分解为子问题的系统化机制，它就能降低整个问题的复杂性，从而可以实现一种有效的模块化解决方案。</p></li><li><p>模块可组装性</p><p>如果一种设计方法能把现有的（可重用的）设计构建组装称新系统，它就能提供一种并非一切都从头开始做的模块化解决方案。</p></li><li><p>模块可理解性</p><p>如果可以把一个模块作为一种独立单元（无需参考其他模块）来理解，那么，这样的模块是易于构造和易于修改的。</p></li><li><p>模块连续性</p><p>如果对系统需求的微笑修改只导致对个别模块，而不是对整个系统的修改，则修改所引起的副作用将最小。</p></li><li><p>模块保护性</p><p>如果当一个模块内出现异常情况时，它的影响局限在该模块内部，则由错误引起的副作用将最小。</p></li></ol><h2 id="IEEE对软件工程标准术语中给出的软件测试的定义"><a href="#IEEE对软件工程标准术语中给出的软件测试的定义" class="headerlink" title="IEEE对软件工程标准术语中给出的软件测试的定义"></a>IEEE对软件工程标准术语中给出的软件测试的定义</h2><p>P38</p><p>使用人工或自动手段来运行或测定某个系统的过程，其目的在于检测它是否满足规定的需求或者是否弄清预期结果与实际结果之间的差别。测试是对程序或系统能否完成特定任务建立信心的过程。</p><h2 id="面向对象的五个设计原则"><a href="#面向对象的五个设计原则" class="headerlink" title="面向对象的五个设计原则"></a>面向对象的五个设计原则</h2><p>P92</p><ol><li><p>单一职责原则</p><p>就一个类而言，应该仅有一个引起它变化的原因。指一个类只有一种单一的功能，不要实现过多的功能。该原则可以视为面向对象程序对低耦合、高内聚原则的实践。</p></li><li><p>开放封闭原则</p><p>软件实体（模块、函数、类）应该可以扩展，但是不可修改。对扩展开放，对修改封闭。他是面向对象所有原则的核心。</p></li><li><p>依赖倒转原则</p><p>抽象不应该依赖细节，细节应该依赖抽象。该原则与传统的结构化分析与设计方法对立。</p></li><li><p>里氏代换原则</p><p>子类型必须能够替换它们的基类型。这一思想体现了对继承机制的约束规范，只有子类能够替换基类时，才能保证系统在运行期间内识别子类，这是保证继承服用的基础。违反了里氏代换原则必然导致违反开放封闭原则。</p></li><li><p>接口隔离原则</p><p>不应该强迫客户依赖于它们不用的方法。接口属于客户，不属于它所在的类层次结构。</p></li></ol><h2 id="CSV格式的文件的特征"><a href="#CSV格式的文件的特征" class="headerlink" title="CSV格式的文件的特征"></a>CSV格式的文件的特征</h2><p>P103</p><ol><li>纯文本，使用某个字符集，如 <strong>ASCII,Unicode,EBCDIC或GB2312</strong></li><li>由记录组成（典型的时每行一条记录）</li><li>每条记录被分隔符分隔为字段（典型分隔符有<code>,</code>、<code>;</code>和<code>TAB</code>，有时分隔符可以包括可选的空格）</li><li>每条记录都有相同的字段序列</li></ol><h2 id="什么是表驱动编程？它主要技术有哪些？（重要）"><a href="#什么是表驱动编程？它主要技术有哪些？（重要）" class="headerlink" title="什么是表驱动编程？它主要技术有哪些？（重要）"></a>什么是表驱动编程？它主要技术有哪些？（重要）</h2><p>P112-113</p><p>使程序在表中通过选择条件而不使用逻辑语句（if或case）得到算式及运算结果。</p><ol><li><p>直接访问</p><p>通过数组下标直接访问表，例如用下标1~12的数组元素存放对应月份的天数，则用月份访问数组就能直接得到当月天数</p></li><li><p>阶梯访问</p><p>表中项表示一个范围，而不是一个单独的数。</p><table><thead><tr><th>输入</th><th>输出</th></tr></thead><tbody><tr><td>90~100分</td><td>优秀</td></tr><tr><td>80~89分</td><td>良好</td></tr><tr><td>70~79分</td><td>中等</td></tr><tr><td>60~69分</td><td>及格</td></tr><tr><td>&lt;60分</td><td>不及格</td></tr></tbody></table><p>使用表驱动编程，代码如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">starAccess</span><span class="params">(<span class="type">int</span> score)</span> &#123;</span><br><span class="line">    String[] grades = &#123;<span class="string">&quot;不及格&quot;</span>,<span class="string">&quot;不及格&quot;</span>,<span class="string">&quot;不及格&quot;</span>,<span class="string">&quot;不及格&quot;</span>,<span class="string">&quot;不及格&quot;</span>,<span class="string">&quot;不及格&quot;</span>,<span class="string">&quot;及格&quot;</span>,<span class="string">&quot;中等&quot;</span>,<span class="string">&quot;良好&quot;</span>,<span class="string">&quot;优秀&quot;</span>&#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="type">int</span> <span class="variable">index</span> <span class="operator">=</span> score / <span class="number">10</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">grade</span> <span class="operator">=</span> <span class="string">&quot;优秀&quot;</span>;</span><br><span class="line">    grade = grades[index];</span><br><span class="line">    </span><br><span class="line">    System.out.println(score + <span class="string">&quot;分别对应的成绩是&quot;</span> + grade);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>索引访问</p></li></ol><h2 id="调试的基本技术有哪些"><a href="#调试的基本技术有哪些" class="headerlink" title="调试的基本技术有哪些"></a>调试的基本技术有哪些</h2><p>P80-P82</p><ol><li><p>单步调试源程序</p><p>设置断点，单步调试</p><p>单步调试又有四种：遇到方法时进入方法内部；遇到方法时直接执行到下一步；从当前方法跳出，直接执行到方法的最后一行；跳到下一个断点；</p></li><li><p>检查&#x2F;更改变量的值</p></li><li><p>设置监视点观察变量</p></li><li><p>上下移动调用栈</p></li></ol><h2 id="简述交互设计的三个基本原则"><a href="#简述交互设计的三个基本原则" class="headerlink" title="简述交互设计的三个基本原则"></a>简述交互设计的三个基本原则</h2><p>P145</p><ol><li><p>学习性</p><p>指的是新的用户能用它进行有效的交互并获得最大的性能。</p></li><li><p>灵活性</p><p>是指用户和系统能以多种方式交换信息。</p></li><li><p>健壮性</p><p>是指在决定成就和目标评估方面对用户提供的支持程度。</p></li></ol><h2 id="简述交互设计过程模型的四项基本活动"><a href="#简述交互设计过程模型的四项基本活动" class="headerlink" title="简述交互设计过程模型的四项基本活动"></a>简述交互设计过程模型的四项基本活动</h2><p>P146</p><ol><li>交互设计以标识和建立用户需要开始。</li><li>提出满足需求的候选设计方案。</li><li>构建交互式版本。</li><li>设计评估。</li></ol><h2 id="圈复杂度的计算"><a href="#圈复杂度的计算" class="headerlink" title="圈复杂度的计算"></a>圈复杂度的计算</h2><p>V(G) &#x3D; e - n + 2 &#x3D; 边数 - 结点数 + 2</p><p>​e表示控制流图中边的数量，n表示控制流图中结点的数量</p><p>V(G) &#x3D; 区域数 &#x3D; 判定结点数 + 1</p><h2 id="表驱动编程"><a href="#表驱动编程" class="headerlink" title="表驱动编程"></a>表驱动编程</h2>]]></content>
      
      
      <categories>
          
          <category> 复习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 期末复习 </tag>
            
            <tag> 成都工业学院 </tag>
            
            <tag> 软件构造 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>大三上离散数学期末复习提纲</title>
      <link href="/posts/c38173de/"/>
      <url>/posts/c38173de/</url>
      
        <content type="html"><![CDATA[<h1 id="大三上离散数学期末复习提纲"><a href="#大三上离散数学期末复习提纲" class="headerlink" title="大三上离散数学期末复习提纲"></a>大三上离散数学期末复习提纲</h1><h2 id="命题逻辑"><a href="#命题逻辑" class="headerlink" title="命题逻辑"></a>命题逻辑</h2><h3 id="命题及其表示"><a href="#命题及其表示" class="headerlink" title="命题及其表示"></a>命题及其表示</h3><p><strong>具有唯一真值的陈述句称为命题</strong></p><p>原子命题：没有联结词的命题</p><p>复合命题：有联结词的命题</p><p>命题通常使用大写字母<strong>P,Q,R</strong>等表示</p><p>命题变元，命题常元</p><p>命题常元如：<code>P:今天下雨</code></p><h3 id="逻辑联结词"><a href="#逻辑联结词" class="headerlink" title="逻辑联结词"></a>逻辑联结词</h3><ol><li><p>否定</p><table><thead><tr><th align="center">P</th><th align="center">非P</th></tr></thead><tbody><tr><td align="center">0</td><td align="center">1</td></tr><tr><td align="center">1</td><td align="center">0</td></tr></tbody></table></li><li><p>合取</p><table><thead><tr><th>P</th><th>Q</th><th>P ^ Q</th></tr></thead><tbody><tr><td>0</td><td>0</td><td>0</td></tr><tr><td>0</td><td>1</td><td>0</td></tr><tr><td>1</td><td>0</td><td>0</td></tr><tr><td>1</td><td>1</td><td>1</td></tr></tbody></table></li><li><p>析取</p><table><thead><tr><th>P</th><th>Q</th><th>P v Q</th></tr></thead><tbody><tr><td>0</td><td>0</td><td>0</td></tr><tr><td>0</td><td>1</td><td>1</td></tr><tr><td>1</td><td>0</td><td>1</td></tr><tr><td>1</td><td>1</td><td>1</td></tr></tbody></table></li><li><p>条件</p><table><thead><tr><th>P</th><th>Q</th><th>P -&gt; Q</th></tr></thead><tbody><tr><td>0</td><td>0</td><td>1</td></tr><tr><td>0</td><td>1</td><td>1</td></tr><tr><td>1</td><td>0</td><td>0</td></tr><tr><td>1</td><td>1</td><td>1</td></tr></tbody></table></li><li><p>双条件</p><table><thead><tr><th>P</th><th>Q</th><th>P ^ Q</th></tr></thead><tbody><tr><td>0</td><td>0</td><td>1</td></tr><tr><td>0</td><td>1</td><td>0</td></tr><tr><td>1</td><td>0</td><td>0</td></tr><tr><td>1</td><td>1</td><td>1</td></tr></tbody></table></li></ol><h3 id="命题公式与符号化"><a href="#命题公式与符号化" class="headerlink" title="命题公式与符号化"></a>命题公式与符号化</h3><p>单个的命题变元也是命题公式</p><p>命题符号化案例</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">张三和李四都是班干部</span><br><span class="line"></span><br><span class="line">设 P：张三是班干部，  Q：李四是班干部。</span><br><span class="line">则命题符号化为： P <span class="built_in">^</span> Q</span><br></pre></td></tr></table></figure><h3 id="真值表与等价公式"><a href="#真值表与等价公式" class="headerlink" title="真值表与等价公式"></a>真值表与等价公式</h3><p>一般，在含有n个命题变元的命题公式中，共有<code>2^n</code>种指派</p><h3 id="蕴含式"><a href="#蕴含式" class="headerlink" title="蕴含式"></a>蕴含式</h3><h3 id="最小联结词组"><a href="#最小联结词组" class="headerlink" title="最小联结词组"></a>最小联结词组</h3><h3 id="范式"><a href="#范式" class="headerlink" title="范式"></a>范式</h3><h3 id="推理理论"><a href="#推理理论" class="headerlink" title="推理理论"></a>推理理论</h3><h2 id="谓词逻辑"><a href="#谓词逻辑" class="headerlink" title="谓词逻辑"></a>谓词逻辑</h2><h3 id="谓词的基本概念"><a href="#谓词的基本概念" class="headerlink" title="谓词的基本概念"></a>谓词的基本概念</h3><h3 id="谓词公式与翻译"><a href="#谓词公式与翻译" class="headerlink" title="谓词公式与翻译"></a>谓词公式与翻译</h3><h3 id="变元的约束"><a href="#变元的约束" class="headerlink" title="变元的约束"></a>变元的约束</h3><h3 id="谓词演算的等价式与蕴含式"><a href="#谓词演算的等价式与蕴含式" class="headerlink" title="谓词演算的等价式与蕴含式"></a>谓词演算的等价式与蕴含式</h3><h3 id="谓词公式的范式"><a href="#谓词公式的范式" class="headerlink" title="谓词公式的范式"></a>谓词公式的范式</h3><h3 id="谓词演算的推理理论"><a href="#谓词演算的推理理论" class="headerlink" title="谓词演算的推理理论"></a>谓词演算的推理理论</h3><h2 id="集合与关系"><a href="#集合与关系" class="headerlink" title="集合与关系"></a>集合与关系</h2><h3 id="集合的基本概念"><a href="#集合的基本概念" class="headerlink" title="集合的基本概念"></a>集合的基本概念</h3><h3 id="集合的运算"><a href="#集合的运算" class="headerlink" title="集合的运算"></a>集合的运算</h3><h3 id="序偶与笛卡尔积"><a href="#序偶与笛卡尔积" class="headerlink" title="序偶与笛卡尔积"></a>序偶与笛卡尔积</h3><h3 id="关系及其表示"><a href="#关系及其表示" class="headerlink" title="关系及其表示"></a>关系及其表示</h3><h3 id="关系的性质及其判定方法"><a href="#关系的性质及其判定方法" class="headerlink" title="关系的性质及其判定方法"></a>关系的性质及其判定方法</h3><h3 id="复合关系和逆运算"><a href="#复合关系和逆运算" class="headerlink" title="复合关系和逆运算"></a>复合关系和逆运算</h3><h3 id="关系的闭包运算"><a href="#关系的闭包运算" class="headerlink" title="关系的闭包运算"></a>关系的闭包运算</h3><h3 id="等价关系与相融关系"><a href="#等价关系与相融关系" class="headerlink" title="等价关系与相融关系"></a>等价关系与相融关系</h3><h3 id="偏序关系"><a href="#偏序关系" class="headerlink" title="偏序关系"></a>偏序关系</h3><h2 id="代数系统"><a href="#代数系统" class="headerlink" title="代数系统"></a>代数系统</h2><h3 id="代数系统的概念"><a href="#代数系统的概念" class="headerlink" title="代数系统的概念"></a>代数系统的概念</h3><h3 id="半群与含幺半群"><a href="#半群与含幺半群" class="headerlink" title="半群与含幺半群"></a>半群与含幺半群</h3><ul><li>半群<ul><li>运算是封闭的</li><li>运算是可结合的</li></ul></li><li>含幺半群<ul><li>运算是可封闭的</li><li>运算时可结合的</li><li>含有幺元<code>e</code></li></ul></li></ul><h3 id="群与子群"><a href="#群与子群" class="headerlink" title="群与子群"></a>群与子群</h3><h4 id="群"><a href="#群" class="headerlink" title="群"></a>群</h4><p><strong>定义（四个条件）</strong></p><ol><li><p>运算是封闭的</p></li><li><p>运算是可结合的</p></li><li><p>含有幺元<code>e</code></p></li><li><p>每个成员都含有逆元（成员与逆元运算后的结果为幺元<code>e</code>）</p></li></ol><h4 id="子群"><a href="#子群" class="headerlink" title="子群"></a>子群</h4><h3 id="几类特殊的群"><a href="#几类特殊的群" class="headerlink" title="几类特殊的群"></a>几类特殊的群</h3><ol><li><p>交换群</p><p>运算满足交换律</p></li><li><p>循环群</p><p>群中存在一个元素a，使得群中任意元素都是a的幂</p><p>任何一个循环群都是交换群</p></li></ol><h3 id="代数系统的同态与同构"><a href="#代数系统的同态与同构" class="headerlink" title="代数系统的同态与同构"></a>代数系统的同态与同构</h3><h3 id="环与域"><a href="#环与域" class="headerlink" title="环与域"></a>环与域</h3><p>设X是非空集合，&lt;X,Δ，<code>*</code>&gt;是代数系统，Δ和<code>*</code>都是二元运算。如果：</p><ol><li><p>&lt;X,Δ&gt;是交换群</p></li><li><p>&lt;X,*&gt;是半群</p></li><li><p>运算*对于运算Δ是可分配的</p><p>即<code>任意a,b,c ∈ Z，有 a * (b Δ c) = (a * b) Δ (a * c) 和 (b Δ c) * a = (a * b) Δ (c * a)</code></p><p>则称<code>&lt;X,Δ,*&gt;</code>是环。在环<code>&lt;X,Δ,*&gt;</code>中，若运算<code>*</code>是可交换的，则称环<code>&lt;X,Δ,*&gt;</code>为交换环，否则称为非交换环。</p></li></ol><h2 id="格与布尔代数"><a href="#格与布尔代数" class="headerlink" title="格与布尔代数"></a>格与布尔代数</h2><h3 id="格"><a href="#格" class="headerlink" title="格"></a>格</h3><p><strong>任意两个元素都有上、下确界，把具体这种性质的偏序集称为格</strong></p><h2 id="图论初步"><a href="#图论初步" class="headerlink" title="图论初步"></a>图论初步</h2><h3 id="图的基本概念"><a href="#图的基本概念" class="headerlink" title="图的基本概念"></a>图的基本概念</h3><p>定义：一个图G是一个二元组<code>&lt;V,E&gt;</code>，简记<code>G = &lt;V,E&gt;</code>，其中V是一个<strong>非空</strong>的结点集合，E是边的集合</p><p>有向边的关系序偶用<code>&lt;x,y&gt;</code>表示，无向边的关系序偶用<code>(x,y)</code>表示</p><h5 id="名词概念"><a href="#名词概念" class="headerlink" title="名词概念"></a>名词概念</h5><ul><li>孤立点：不与任何结点邻接的结点称为孤立点（就是只有一个点，没边）</li><li>零图：全由孤立点构成的图（就是这个图就只有点，没有边）</li><li>平凡图：一阶零图（即零图的一种特殊情况，只有一个点）</li><li>有向图：每一条边都是有向边的图</li><li>无向图：每一条边都是无向边的图</li><li>混合图：既有有向边，又有无向边的图</li><li>基础图：将有向图中的有向边的方向去掉，就得到一个无向图，则称得到的无向图为这个有向图的基础图</li><li>度：结点所关联的边数称为度d(v)<ul><li>如果无向图中有自回路则一个回路算2度</li><li>出度：d+(v)，<code>+</code>是上标，有向图中分为出度和入度，有多少边出去则有多少出度</li><li>入度：d-(v)，<code>-</code>是上标，有多少边进来则有多少入度</li></ul></li><li>奇结点：度数为基数的结点</li><li>偶结点：度数为偶数的结点</li><li>子图：结点集合包含于原图结点集合，边的集合包含于原图边的集合</li><li>生成子图：（支撑子图）结点集合等于原图结点集合，边的集合包含与原图边的集合</li><li>导出子图：以图G的顶点集V的非空子集V1为顶点集，以两端点均在V1中的全体边为边集的G的子图，称为V1导出的导出子图</li><li>完全图：（无向完全图）任意两个不同结点都是相邻接的，具有n个结点的完全图记作Kn（n为下标）</li></ul><h5 id="定理"><a href="#定理" class="headerlink" title="定理"></a>定理</h5><ol><li>如果无向图有<strong>m</strong>条边，那么它的总度数为<strong>2m</strong>度</li><li>无向图中奇结点的个数必须为<strong>偶数</strong>个</li><li>有向图的<strong>总出度 &#x3D; 总入度 &#x3D; 边数</strong></li><li><strong>最大度数 &lt;&#x3D; 结点数-1</strong></li></ol><h3 id="图的连通性"><a href="#图的连通性" class="headerlink" title="图的连通性"></a>图的连通性</h3><h5 id="路与回路"><a href="#路与回路" class="headerlink" title="路与回路"></a>路与回路</h5><p>路中边的数目n称为该路的长度</p><p>若路的始点与终点相同，则称为回路</p><p>如果路中所有边互不相同，则称为<strong>迹（或简单路）</strong>，若回路中的所有边互不相同，则称为<strong>简单回路</strong></p><p>如果路中所有结点互不相同（当然所有边也互不相同），则称为<strong>初级路（或基本路）</strong>，如果为回路的话，则为<strong>初级回路（或圈或基本回路）</strong></p><h3 id="图的矩阵表示"><a href="#图的矩阵表示" class="headerlink" title="图的矩阵表示"></a>图的矩阵表示</h3><h4 id="邻接矩阵"><a href="#邻接矩阵" class="headerlink" title="邻接矩阵"></a>邻接矩阵</h4><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">设图D＝&lt;V，E&gt;，其中V＝｛v1,v2,v3,v4｝，E＝｛&lt;v¬1,v2&gt;, &lt;v¬2,v3&gt;, &lt;v¬2,v4&gt;, &lt;v3,v2&gt;, &lt;v¬3,v4&gt;, &lt;v¬3,v1&gt;, &lt;v4,v1&gt;｝</span><br><span class="line">邻接矩阵如下，表示结点到结点有多少条长度为1的路径，则可以使用邻接矩阵求出度序列与入度序列</span><br><span class="line"><span class="built_in">_</span><span class="built_in">_</span>            <span class="built_in">_</span><span class="built_in">_</span></span><br><span class="line">|  0  1  0  0  |</span><br><span class="line">|  0  0  1  1  |</span><br><span class="line">|  1  1  0  1  |</span><br><span class="line">|  1  0  0  0  |</span><br><span class="line"><span class="built_in">_</span><span class="built_in">_</span>            <span class="built_in">_</span><span class="built_in">_</span></span><br><span class="line">出度序列：1,2,3,1</span><br><span class="line">入度序列：2,2,1,2</span><br><span class="line">度序列：3,4,4,3</span><br></pre></td></tr></table></figure><h4 id="可达性矩阵"><a href="#可达性矩阵" class="headerlink" title="可达性矩阵"></a>可达性矩阵</h4><p>首先求出n阶图的邻接矩阵，然后再求邻接矩阵的次方，如是m次方则代表结点到结点有多少条长度为m的路径，最多求到n次方就会循环</p><p>此时将各个邻接矩阵的次方相加，如果元素不为0则变为1，得到的元素只有0,1的矩阵就是可达性矩阵，1表示可达，0表示不可达</p><h3 id="欧拉图和哈密顿图"><a href="#欧拉图和哈密顿图" class="headerlink" title="欧拉图和哈密顿图"></a>欧拉图和哈密顿图</h3><h4 id="欧拉图"><a href="#欧拉图" class="headerlink" title="欧拉图"></a>欧拉图</h4><h5 id="名词概念-1"><a href="#名词概念-1" class="headerlink" title="名词概念"></a>名词概念</h5><ul><li><p>欧拉路：每条边走一次的路</p></li><li><p>欧拉回路：每条边走一次并且回到原点的路</p></li></ul><p>定义：<strong>具有欧拉回路的图称为欧拉图</strong></p><h5 id="定理-1"><a href="#定理-1" class="headerlink" title="定理"></a><strong>定理</strong></h5><ol><li>无向图G具有一条欧拉路当且仅当G是连通的并且有零个或2个奇结点</li><li>一个无向图是欧拉图的充要条件是该图是<strong>连通的</strong>并且它的<strong>结点全是偶结点</strong></li></ol><h4 id="哈密顿图"><a href="#哈密顿图" class="headerlink" title="哈密顿图"></a>哈密顿图</h4><p>哈密顿路：把图中每个结点走一次且仅走一次的路</p><p>哈密顿回路：把图中每个结点走一次且仅走一次能够回到出发结点的路</p><p><strong>具有哈密顿回路的图称为哈密顿图</strong></p><p><strong>n阶图（n&gt;&#x3D;3）中每一对不相邻的结点的度的和都&gt;&#x3D;n，则为哈密顿图</strong></p><p><strong>n阶图（n&gt;&#x3D;3）中每一对结点的度的和都&gt;&#x3D;n-1，则存在一条哈密顿路，如果每一对结点的度的和&gt;&#x3D;n，则存在一条哈密顿回路</strong></p><h3 id="树"><a href="#树" class="headerlink" title="树"></a>树</h3><p><strong>一个连通无回路的无向图称为无向树，简称树，记为T</strong></p><p><strong>树中度数为1的结点称为树叶；度数大于1的结点称为分支点（内部结点）</strong></p><p><code>m = n - 1</code>，树的 边数 等于 节点数-1</p><h3 id="平面图与欧拉公式"><a href="#平面图与欧拉公式" class="headerlink" title="平面图与欧拉公式"></a>平面图与欧拉公式</h3><h4 id="欧拉公式"><a href="#欧拉公式" class="headerlink" title="欧拉公式"></a>欧拉公式</h4><p><strong>设G是一个连通平面图，则有</strong><code>n - m + r = 2</code>，其中<code>n,m,r</code>分别是图G的<strong>结点数、边数、面数</strong></p><h3 id="二部图"><a href="#二部图" class="headerlink" title="二部图"></a>二部图</h3>]]></content>
      
      
      <categories>
          
          <category> 复习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 离散数学 </tag>
            
            <tag> 期末复习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>大型语言模型ChatGPT使用教程</title>
      <link href="/posts/ea4e2c5a/"/>
      <url>/posts/ea4e2c5a/</url>
      
        <content type="html"><![CDATA[<h1 id="ChatGPT注册与使用"><a href="#ChatGPT注册与使用" class="headerlink" title="ChatGPT注册与使用"></a>ChatGPT注册与使用</h1><h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><p>最近国外的一个大型语言模型<a href="https://openai.com/blog/chatgpt/">ChatGPT</a>非常火，但是却不对中国用户开放。</p><p>那么它能能干吗呢，来看看它自己的回答：</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/register/chatgpt/image-20230211162527685.png" alt="image-20230211162527685"></p><p>如果你想体验这个强大的AI聊天机器人，那么需要以下技能：</p><ol><li>会使用<em>魔法</em></li><li>拥有国外手机号</li></ol><p>如果都没有，那么也没有关系，咱们现学。</p><h2 id="内容在这儿"><a href="#内容在这儿" class="headerlink" title="内容在这儿"></a>内容在这儿</h2><p>步骤原理都是一样的，只是不同的平台实际操作起来有些不一样，这里以Windows为例：</p><h3 id="学习魔法"><a href="#学习魔法" class="headerlink" title="学习魔法"></a>学习<em>魔法</em></h3><p>这个不敢说太详细，可以自己<a href="https://cn.bing.com/">bing一下</a></p><p><a href="https://clashforwindows.org/">Clash for Windows 教程</a></p><h3 id="接码平台"><a href="#接码平台" class="headerlink" title="接码平台"></a>接码平台</h3><p>使用接码平台代替<strong>拥有国外手机号</strong>的技能，虽然能够让我们的账号绑定手机号，但是这个手机号并不属于我们，如果介意可以换其他的方法。</p><p>我这里使用的是<a href="https://sms-activate.org/#">sms-activate国外接码平台</a>，最近的服务好像在涨价，所以要注册就快一点。</p><h4 id="充值"><a href="#充值" class="headerlink" title="充值"></a>充值</h4><p>此网站目前不需要<em>魔法</em>，进入网站后进行注册，完成登录后依次点击<strong>余额下的数字-&gt;充值-&gt;支付宝-&gt;应付金额</strong></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/register/chatgpt/image-20230211180609210.png" alt="image-20230211180609210"></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/register/chatgpt/image-20230211180814034.png" alt="下拉找到支付宝"></p><p>目前最低充值金额为1美元，大概7块的样子，就充1美元就行了，点击支付，然后用支付宝扫码支付，余额没变就刷新一下网页，或者等待一下</p><h4 id="购买"><a href="#购买" class="headerlink" title="购买"></a>购买</h4><p>我们需要注册OpenAI的账号，在主页搜索OpenAI服务</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/register/chatgpt/image-20230211181413853.png" alt="image-20230211181413853"></p><p>点击搜索出来的OpenAI服务，然后根据你想绑定哪个国家的手机号选择国家，这里我选的目前最便宜的国家<em>印度尼西亚</em>，直接点击它旁边的购物车图标就能购买了</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/register/chatgpt/image-20230211181832036.png" alt="image-20230211181832036"></p><p>购买后会出现在<em>激活</em>里面，有20分钟的有效时间，所以我们需要快一点注册，如果注册中号码有问题可以点击<code>x</code>按钮删除，然后重新购买，不会产生费用</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/register/chatgpt/image-20230211182257151.png" alt="image-20230211182257151"></p><h3 id="官网注册"><a href="#官网注册" class="headerlink" title="官网注册"></a>官网注册</h3><p>万事具备，接下来我们就能安心注册了</p><p>首先将代理软件关闭，然后进入这个链接地址<a href="https://chat.openai.com/">TRY CHATGPT</a>，会出现以下画面，如果不是这个画面就多刷新一下</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/register/chatgpt/image-20230211182652109.png" alt="image-20230211182652109"></p><p>点击<em>Sign up</em>进行注册，输入你的邮箱地址，然后点击<em>Continue</em></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/register/chatgpt/image-20230211182831810.png" alt="image-20230211182831810"></p><p>然后输入你的自定义密码，再次点击<em>Continue</em>，成功之后会出现以下界面，然后让你验证你的邮箱，点击邮件里的验证链接</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/register/chatgpt/image-20230211183233560.png" alt="image-20230211183233560"></p><p>然后刷新页面，会提示不支持你的国家，内容如下：</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Not available</span><br><span class="line">OpenAI&#x27;s services are not available in your country.</span><br></pre></td></tr></table></figure><p>这个时候就需要用到<em>魔法</em>了，打开代理软件，开启全局代理，选择国外节点，我这里选择的是日本</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/register/chatgpt/image-20230211184856949.png" alt="image-20230211184856949"></p><p>然后到浏览器页面按<code>F12</code>打开开发者控制台，输入<code>window.localStorage.removeItem(Object.keys(window.localStorage).find(i=&gt;i.startsWith(&#39;@@auth0spajs&#39;)))</code>这串神秘代码，回车</p><p>如果是手机浏览器，那么改为在地址栏输入<code>javascript:window.localStorage.removeItem(Object.keys(window.localStorage).find(i=&gt;i.startsWith(&#39;@@auth0spajs&#39;)))</code>，注意这里的<code>javascript:</code>不能复制，只能手动输入</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/register/chatgpt/image-20230211185250990.png" alt="image-20230211185250990"></p><p>刷新网页后出现一个填名字的页面，随便填好后点击<code>Continue</code>，出现以下画面</p><p>选择在接码平台购买服务对应的国家，然后填入复制好的手机号，点击<code>Send code</code> via SMS发送验证码</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/register/chatgpt/image-20230211185843163.png" alt="image-20230211185843163"></p><p>如果出现爆红，或者是收不到验证码，那么估计是手机号的问题，按照上小节的说法，删除重新购买就行了，然后重新填入新的手机号，再次验证</p><p>这个还是得看运气，我重新购买了很多次才成功，将收到的验证码填入到注册页面中就行了</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/register/chatgpt/image-20230211190545806.png" alt="image-20230211190545806"></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/register/chatgpt/image-20230211190617797.png" alt="image-20230211190617797"></p><p>这个时候会发现我们的网页一直在加载，关掉网页，并且关掉代理软件，重新进入<a href="https://chat.openai.com/auth/login">登录页面</a></p><p>点击<em>Log in</em>，输入邮箱后点击<em>Continue</em>，输入密码后点击<em>Continue</em>，然后就会出现一个警号，内容如下：</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Oops!</span><br><span class="line">OpenAI&#x27;s services are not available in your country. (error=unsupported<span class="built_in">_</span>country)</span><br><span class="line">Go back</span><br></pre></td></tr></table></figure><p>打开代理软件，需要全局模式，我这里用的是日本节点</p><p>在此网页再次使用神秘代码<code>window.localStorage.removeItem(Object.keys(window.localStorage).find(i=&gt;i.startsWith(&#39;@@auth0spajs&#39;)))</code>，操作与上一次一样</p><p>然后在此网页回退到登录的页面（有<em>Log in</em>按钮的那个页面）重新登录一下，然后就登录成功了！</p><p>这时候我们就可以将代理软件关闭，并且之后也不用使用了，除非需要重新登录。</p><p>开始有ChatGPT介绍弹窗，点击<em>Next</em>，最后点击<em>Done</em>就行了。</p><p>PS: 关闭代理后刷新一下网页</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/register/chatgpt/image-20230211192138267.png" alt="image-20230211192138267"></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/register/chatgpt/image-20230211192521358.png" alt="image-20230211192521358"></p><h2 id="写在最后"><a href="#写在最后" class="headerlink" title="写在最后"></a>写在最后</h2><p>本片博文参考的博文有：</p><ul><li><a href="https://www.cnblogs.com/chatgpt/p/how-to-register-chatgpt-in-china.html">如何注册 ChatGPT ：最新手把手亲测可用教程 - chatgpt - 博客园</a></li><li><a href="https://cloud.tencent.com/developer/article/2190198#:~:text=%E9%94%99%E8%AF%AF%E8%A7%A3%E5%86%B3%20%E5%87%BA%E7%8E%B0OpenAI%E2%80%99s%20services%20are%20not%20available%20in,your%20country%20%E9%94%99%E8%AF%AF%E4%B8%BB%E8%A6%81%E6%98%AF%E5%9C%B0%E5%8C%BA%E4%B8%8D%E5%85%81%E8%AE%B8%E5%AF%BC%E8%87%B4%EF%BC%8C%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95%E5%A6%82%E4%B8%8B%201.%E9%9C%80%E8%A6%81%E4%BD%A0%E5%BC%80%E5%90%AF%E5%85%A8%E5%B1%80%E4%BB%A3%E7%90%86%EF%BC%8C%E4%B8%8D%E5%8F%AF%E4%BB%A5%E6%98%AF%E9%A6%99%E6%B8%AF%E7%9A%84%E4%BB%A3%E7%90%86%EF%BC%8C%E9%A6%99%E6%B8%AF%E7%9A%84%E4%BB%A3%E7%90%86%E6%98%AF%E6%97%A0%E6%B3%95%E4%BD%BF%E7%94%A8%E7%9A%84%202.%E5%BB%BA%E8%AE%AE%E5%88%87%E6%8D%A2%E5%88%B0%E9%9F%A9%E5%9B%BD%EF%BC%8C%E4%BA%B2%E6%B5%8B%E6%9C%89%E6%95%88%203.%E6%B5%8F%E8%A7%88%E5%99%A8%E8%BF%9B%E8%A1%8C%E5%A6%82%E4%B8%8B%E6%93%8D%E4%BD%9C%20%E5%A4%8D%E5%88%B6%E4%B8%8B%E9%9D%A2%E8%BF%99%E8%A1%8C%E4%BB%A3%E7%A0%81">OpenAI‘s services are not available in your country 完美解决方案 - 腾讯云开发者社区-腾讯云</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 注册 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ChatGPT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL绿色版下载与配置</title>
      <link href="/posts/534db896/"/>
      <url>/posts/534db896/</url>
      
        <content type="html"><![CDATA[<h1 id="MySQL5-7绿色版下载与配置"><a href="#MySQL5-7绿色版下载与配置" class="headerlink" title="MySQL5.7绿色版下载与配置"></a>MySQL5.7绿色版下载与配置</h1><h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p><a href="https://mirrors.tuna.tsinghua.edu.cn/">清华大学开源软件镜像站</a></p><p><a href="https://mirrors.tuna.tsinghua.edu.cn/mysql/downloads/MySQL-5.7/mysql-5.7.36-winx64.zip">MySQL5.7 Windows64位解压版下载链接</a></p><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><h3 id="Windows11"><a href="#Windows11" class="headerlink" title="Windows11"></a>Windows11</h3><p>将下载好的压缩包解压到你想安装的路径下</p><h4 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h4><p>创建<code>my.ini</code>配置文件，可以按照我给的例子，需修改路径为你MySQL解压的路径，<strong>路径分割一定要用双斜线，否则可能会出错</strong></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[mysqld]</span></span><br><span class="line"><span class="attr">port</span>=<span class="number">3306</span> <span class="comment"># MySQL端口号</span></span><br><span class="line"><span class="attr">basedir</span>=E:\\software-for-support\\mysql-<span class="number">5.7</span>.<span class="number">36</span>-winx64 <span class="comment"># MySQL的安装目录</span></span><br><span class="line"><span class="attr">datadir</span>=E:\\software-for-support\\mysql-<span class="number">5.7</span>.<span class="number">36</span>-winx64\\data <span class="comment"># 数据存放目录</span></span><br><span class="line"><span class="attr">max_connections</span>=<span class="number">200</span> <span class="comment"># 允许的最大连接数</span></span><br><span class="line"><span class="attr">max_connect_errors</span>=<span class="number">10</span> <span class="comment"># 允许连接失败的次数</span></span><br><span class="line"><span class="attr">character-set-server</span>=utf8mb4 <span class="comment"># 服务端使用的默认字符集</span></span><br><span class="line"><span class="attr">collation-server</span>=utf8mb4_unicode_ci</span><br><span class="line"></span><br><span class="line"><span class="section">[mysql]</span></span><br><span class="line"><span class="attr">default-character-set</span>=utf8mbr <span class="comment"># 客户端使用的默认字符集</span></span><br><span class="line"></span><br><span class="line"><span class="section">[client]</span></span><br><span class="line"><span class="attr">port</span>=<span class="number">3306</span> <span class="comment"># 客户端默认端口号</span></span><br><span class="line"><span class="attr">default-character-set</span> = utf8mb4</span><br></pre></td></tr></table></figure><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><h5 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h5><p>使用<strong>管理员</strong>打开<code>cmd</code>命令窗口，并进入到MySQL根目录下的<code>bin</code>目录，键入<code>mysqld --initialize </code>，根据配置文件初始化数据库</p><p>如果提示<strong>xxx.dll文件缺失</strong>，请使用<strong>DirectX</strong>程序修复一下，一般都能够解决</p><p>如果没有这个程序，可以<a href="https://pan.baidu.com/s/1_FrBFET1I40MlDM4NS_kIA">点击此链接</a>进行下载，提取码<strong>8888</strong>，解压后运行<code>.exe</code>的那个文件点击修复就行了</p><p>然后重新键入<code>mysqld --initialize</code>，运行成功后不会出现任何提示</p><h5 id="安装服务"><a href="#安装服务" class="headerlink" title="安装服务"></a>安装服务</h5><p>依旧使用<strong>管理员</strong>打开<code>cmd</code>命令窗口，并进入到MySQL根目录下的<code>bin</code>目录，键入<code>mysqld --install</code>命令安装mysql服务</p><p>安装成功会提示：<strong>Service successfully installed</strong></p><h5 id="开启服务"><a href="#开启服务" class="headerlink" title="开启服务"></a>开启服务</h5><p>使用<strong>管理员</strong><code>cmd</code>窗口开关<strong>mysql服务</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ net start mysql <span class="comment"># 开启mysql服务</span></span><br><span class="line">$ net stop mysql <span class="comment"># 关闭mysql服务</span></span><br></pre></td></tr></table></figure><h5 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h5><p>要想在所有目录都能使用mysql命令，那么需要将mysql命令添加到<code>Path</code>中</p><p><strong>此电脑-&gt;属性-&gt;高级系统设置-&gt;高级-&gt;环境变量-&gt;系统变量-&gt;新建</strong>，增加<code>MYSQL_HOME</code>环境变量，值为你MySQL的根目录</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/mysql5-7/image-20230123210627037.png" alt="image-20230123210627037"></p><p>再修改<code>Path</code>环境变量，添加新值<code>%MYSQL_HOME%/bin</code>，如果编辑时不是列表形式则在值的行尾添加<code>;%MYSQL_HOME%/bin</code></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/mysql5-7/image-20230123210914192.png" alt="image-20230123210914192"></p><p>依次点击确定，直到退出编辑</p><h5 id="修改密码"><a href="#修改密码" class="headerlink" title="修改密码"></a>修改密码</h5><p>在初始化MySQL时会为root生成一个默认的密码，存放在<code>my.ini</code>中设置的<code>data</code>文件夹下的后缀为<code>.err</code>的文件中</p><p>文件名称为你的计算机名（不知道你的是不是，反正我的是），后缀为<code>.err</code>（应该就一个文件的后缀是这个）</p><p>进入文件搜索关键字：<strong>A temporary password is generated for root@localhost</strong>，应该就能找到了，我的格式如下</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2023-01-23T12:48:17.108409Z 1 [Note] A temporary password is generated for root@localhost: H<span class="comment">%NHtLwNs6mi</span></span><br></pre></td></tr></table></figure><p>密码就是最后那串莫名其妙的字符<strong>H%NHtLwNs6mi</strong></p><p>打开一个<code>cmd</code>命令窗口，键入<code>mysql -uroot -p</code>回车，再输入你的随机密码，就能进入MySQL数据库系统了</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/mysql5-7/image-20230123211737735.png" alt="image-20230123211737735"></p><p>通过<code> ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED WITH mysql_native_password BY &#39;xxxxxx&#39;;</code>语句来修改root的密码，其中<strong>xxxxxx</strong>为你需要修改的密码</p><p>提示**Query OK, 0 rows affected (0.00 sec)**，则表示修改成功，键入<code>\quit</code>退出系统，重新键入<code>mysql -uroot -p</code>，再加上你修改的密码，就能进入系统啦</p><h5 id="增加用户"><a href="#增加用户" class="headerlink" title="增加用户"></a>增加用户</h5><p>使用<strong>root</strong>账户，执行<code>CREATE USER &#39;username&#39;@&#39;host&#39; IDENTIFIED BY &#39;password&#39;;</code>命令以创建新用户</p><p>例：<code>CREATE USER &#39;manager&#39;@&#39;%&#39; IDENTIFIED BY &#39;123456&#39;;</code></p><h5 id="授权"><a href="#授权" class="headerlink" title="授权"></a>授权</h5><p>创建数据库并指定字符集（其实不用指定，因为在<code>my.ini</code>中就已经指定了默认字符集）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE test DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;</span><br></pre></td></tr></table></figure><p>其中<strong>test</strong>表示数据库名称</p><p>将<strong>test</strong>数据库中所有表的所有权限都授权给<strong>manager</strong>用户</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GRANT ALL ON test.* TO &#x27;manager&#x27;@&#x27;%&#x27;;</span><br></pre></td></tr></table></figure><p>以<strong>manager</strong>身份登录MySQL就能看到<strong>test</strong>数据库以及它下面的所有表了</p>]]></content>
      
      
      <categories>
          
          <category> 软件配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL5.7 </tag>
            
            <tag> 绿色解压 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Maven3.6绿色解压版下载与配置</title>
      <link href="/posts/3b114fe3/"/>
      <url>/posts/3b114fe3/</url>
      
        <content type="html"><![CDATA[<h1 id="Maven3-6绿色解压版下载与配置"><a href="#Maven3-6绿色解压版下载与配置" class="headerlink" title="Maven3.6绿色解压版下载与配置"></a>Maven3.6绿色解压版下载与配置</h1><h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p>在安装前应安装好JDK（1.7及以上版本）并配置好环境变量，可以看博主之前写的文章<a href="/posts/47bb621c/" title="JDK1.8绿色解压版安装教程">JDK1.8绿色版下载及配置</a></p><p>到<a href="https://archive.apache.org/dist/maven/maven-3/3.6.3/binaries/">官网历史版本库</a>下载<strong>maven</strong>，这里是<code>3.6.3</code>的版本</p><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><h3 id="Windows11"><a href="#Windows11" class="headerlink" title="Windows11"></a>Windows11</h3><p>将下载好的zip文件解压后，里面还有一个文件夹，将此文件夹剪切到你想安装maven的路径下</p><p>如图，我粘贴在了<code>E:\software-for-support</code>这个目录下</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/maven/image-20230122205902234.png" alt="image-20230122205902234"></p><p>将maven命令放到<code>Path</code>环境变量下</p><p>新建<code>MAVEN_HOME</code>系统环境变量，变量值为<code>E:\software-for-support\apache-maven-3.6.3</code></p><p><strong>此电脑-&gt;属性-&gt;高级系统设置-&gt;高级-&gt;环境变量-&gt;系统变量-&gt;新建</strong></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/maven/image-20230122210252337.png" alt="image-20230122210252337"></p><p>修改<code>Path</code>环境变量，增加一行值为<code>%MAVEN_HOME%\bin</code>，如果编辑时不是列表形式，则在值的行尾添加<code>;%MAVEN_HOME%\bin</code></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/maven/image-20230122210548032.png" alt="image-20230122210548032"></p><p>设置好后依次点击确定，直到退出编辑</p><h3 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h3><p><code>win+r</code>键入<code>cmd</code>打开命令行窗口，输入<code>mvn -v</code>，看是否打印版本信息</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/maven/image-20230122210746985.png" alt="image-20230122210746985"></p><h3 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h3><h4 id="镜像"><a href="#镜像" class="headerlink" title="镜像"></a>镜像</h4><p>由于maven默认是从中央仓库下载第三方jar包的，所以会有些慢，可以配置第三方的maven镜像仓库</p><p>编辑maven配置文件<code>maven安装目录\conf\settings.xml</code>，建议在编辑前备份一份儿，方便后期重置，然后进行修改</p><p>在xml配置文件中找到<code>mirrors</code>节点，添加以下子节点</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 阿里镜像源 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>alimaven<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun maven<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/repositories/central/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="本地仓库"><a href="#本地仓库" class="headerlink" title="本地仓库"></a>本地仓库</h4><p>找到<code>settings</code>节点，在其下添加<code>localRepository</code>子节点，并键入你想要存放远程仓库下载的第三方包的位置</p><p>我的位置如下</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">localRepository</span>&gt;</span>E:/software-for-support/appdata/maven-repository<span class="tag">&lt;/<span class="name">localRepository</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 程序配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JDK1.8绿色解压版安装教程</title>
      <link href="/posts/47bb621c/"/>
      <url>/posts/47bb621c/</url>
      
        <content type="html"><![CDATA[<h2 id="Windows11"><a href="#Windows11" class="headerlink" title="Windows11"></a>Windows11</h2><p>你可以选择<a href="https://www.oracle.com/java/technologies/downloads/#java8-windows">下载官方的安装包</a>，进行安装。</p><p>这里以绿色解压为例，<a href="https://pan.baidu.com/s/1DnGEq2b_GaDfHorAm8ScmQ">下载JDK1.8-351</a>，<span class="hide-inline"><button type="button" class="hide-button" style="background-color: #49B1F5;color: #fff">查看提取码  </button><span class="hide-content">8888</span></span></p><p>将下载好的zip文件解压缩，放到你想安装的路径下</p><p><strong>此电脑</strong>（右键）-&gt;<strong>属性</strong>-&gt;<strong>高级系统设置</strong>-&gt;<strong>高级</strong>-&gt;<strong>环境变量</strong>-&gt;<strong>系统变量</strong></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/jdk8/image-20230122102428336.png" alt="image-20230122102428336"></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/jdk8/image-20230122102616141.png" alt="image-20230122102616141"></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/jdk8/image-20230122102806311.png" alt="image-20230122102806311"></p><p>新建<code>JAVA_HOME</code>系统变量，值为JDK解压根目录，例如我这里是<code>E:\software-for-support\jdk-8u351</code></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/jdk8/image-20230122103039476.png" alt="image-20230122103039476"></p><p>新建<code>CLASHPATH</code>系统变量，值为<code>.;%JAVA_HOME%\lib\dt.jar;%JAVA_HOME%\lib\tools.jar</code></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/jdk8/image-20230122103227110.png" alt="image-20230122103227110"></p><p>修改<code>Path</code>系统变量，在末尾增加新值<code>%JAVA_HOME%\bin</code>，如果不是列表形式添加，只有一行的话就在该行末尾增加<code>;%JAVA_HOME%\bin</code></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/jdk8/image-20230122103505071.png" alt="image-20230122103505071"></p><p>依次点击确定，知道退出所有编辑框，<code>win+r</code>打开<code>cmd</code>命令行进行验证</p><p>依次输入<code>java -version</code>与<code>javac -version</code>看是否出现版本号</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/jdk8/image-20230122103858354.png" alt="image-20230122103858354"></p><p>可以编写一个HelloWorld程序看是否能够编译运行</p><p>新建<code>HelloWorld.java</code>文件，使用记事本打开并编写如下内容</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloWorld</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello World!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用<code>cmd</code>打开并进入到该文件所在的目录</p><p>输入<code>javac HelloWorld.java</code>命令进行编译，此时会生成<code>HelloWorld.class</code>二进制文件</p><p>输入<code>java HelloWorld</code>命令运行生成的二进制文件，在屏幕打印出<code>Hello World!</code>表示配置成功</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/jdk8/image-20230122104646184.png" alt="image-20230122104646184"></p><h2 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h2><p>到<a href="https://www.oracle.com/java/technologies/downloads/#java8">官网下载</a>JDK1.8的<code>tar.gz</code>包。</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/jdk8/image-20230722084017423.png" alt="image-20230722084017423"></p><p>将下载好的文件上传到<code>/opt/java</code>目录，并使用<code>tar -zxvf xxx.tar.gz</code>进行解压，下面是我解压后的路径，你也可以自己选择目录。</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/jdk8/image-20230722084236099.png" alt="image-20230722084236099"></p><p>如果你希望终端在任意目录下都能快速使用Java8，那你需要配置环境变量。</p><p>使用<code>sudo vim /etc/profile</code>，在文件的最末尾添加以下内容：</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export JAVA<span class="built_in">_</span>HOME=/opt/java/jdk1.8.0<span class="built_in">_</span>381<span class="params">#</span> 你的JDK目录</span><br><span class="line">export PATH=<span class="built_in">$</span>JAVA<span class="built_in">_</span>HOME/bin:<span class="built_in">$</span>PATH</span><br><span class="line">export CLASSPATH=.:<span class="built_in">$</span>JAVA<span class="built_in">_</span>HOME/lib/dt.jar:<span class="built_in">$</span>JAVA<span class="built_in">_</span>HOME/lib</span><br></pre></td></tr></table></figure><p>然后使用<code>:wq</code>保存文件，使用<code>source /etc/profile</code>刷新配置文件。</p><p>在终端键入<code>java -version</code>和<code>javac -version</code>，终端正常打印版本信息则表示配置成功。</p><p>下面信息是JDK17的内容，JDK1.8的打印信息类似。</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/jdk8/image-20230722085200520.png" alt="image-20230722085200520"></p>]]></content>
      
      
      <categories>
          
          <category> 软件配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> JDK </tag>
            
            <tag> Software </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VMware多台虚拟机网络配置</title>
      <link href="/posts/29f97851/"/>
      <url>/posts/29f97851/</url>
      
        <content type="html"><![CDATA[<h1 id="VMware17pro多台linux虚拟机网络配置"><a href="#VMware17pro多台linux虚拟机网络配置" class="headerlink" title="VMware17pro多台linux虚拟机网络配置"></a>VMware17pro多台linux虚拟机网络配置</h1><h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><p><strong>使用NAT模式默认就能互通，我不能互通是因为不知道自己干过什么，然后重装系统，重装虚拟机就好了</strong></p><p>第一次在物理机配置多台虚拟机，其中很多道理不清楚，只知道这样就能用了</p><p>本次案例能够使本地linux虚拟机访问外网并且能够互相访问，物理机也能够与虚拟机互相访问</p><h3 id="参考博文"><a href="#参考博文" class="headerlink" title="参考博文"></a>参考博文</h3><p><a href="https://zhuanlan.zhihu.com/p/585286548">VMware17pro学习用激活码</a></p><p><a href="https://blog.csdn.net/forest_black/article/details/124308104?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-0-124308104-blog-120212253.pc_relevant_landingrelevant&spm=1001.2101.3001.4242.1&utm_relevant_index=3">为VMware的多台虚拟机配置静态ip和联网</a></p><p><a href="https://blog.csdn.net/weixin_43705953/article/details/120212253">VM多台虚拟机网络设置</a></p><h3 id="官网"><a href="#官网" class="headerlink" title="官网"></a>官网</h3><p><a href="https://www.vmware.com/cn/products/workstation-pro/workstation-pro-evaluation.html">VMware Workstation Pro 17</a></p><p><a href="https://mirrors.aliyun.com/centos/7.9.2009/isos/x86_64/?spm=a2c6h.25603864.0.0.5ecdf5admRdl1z">CentOS7 阿里镜像源</a></p><h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><h3 id="VMware-Workstation-Pro-17"><a href="#VMware-Workstation-Pro-17" class="headerlink" title="VMware Workstation Pro 17"></a>VMware Workstation Pro 17</h3><p>可能因为我的电脑是windows11专业工作站版，在安装时有个选项，好像是关于super-v的选项，这里打上勾</p><ul><li><input checked="" disabled="" type="checkbox"> <strong>自动安装 Windows Hypervisor Platform （WHP）</strong></li></ul><h3 id="安装CentOS7"><a href="#安装CentOS7" class="headerlink" title="安装CentOS7"></a>安装CentOS7</h3><p><a href="https://mirrors.aliyun.com/centos/7.9.2009/isos/x86_64/?spm=a2c6h.25603864.0.0.5ecdf5admRdl1z">CentOS7 阿里镜像源</a></p><p>随便找个教程安装就行，网络适配器模式设置为NAT模式</p><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><h3 id="网关"><a href="#网关" class="headerlink" title="网关"></a>网关</h3><p>依次按照<strong>编辑</strong>-&gt;<strong>虚拟网络编辑器</strong>-&gt;<strong>VMnet8</strong>-&gt;<strong>NAT设置</strong>查看网关</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure-software/vmware-network-linux/image-20230120211827978.png" alt="image-20230120211827978"></p><p>例如我这里就是<code>192.168.232.2</code>，记住这个IP地址</p><p>使用以下命令编辑网络配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vi /etc/sysconfig/network-scripts/ifcfg-ens33  </span><br></pre></td></tr></table></figure><p>更改以下内容</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">BOOTPROTO</span>=<span class="string">static</span></span><br><span class="line"><span class="attr">ONBOOT</span>=<span class="string">yes</span></span><br></pre></td></tr></table></figure><p>增加以下内容，这里我自定义虚拟机的局域网地址为<code>192.168.2.10</code>，网关就设置之前我们在<strong>NAT</strong>记下的网关</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">IPADDR</span>=<span class="string">192.168.2.10</span></span><br><span class="line"><span class="attr">NETMASK</span>=<span class="string">255.255.255.0</span></span><br><span class="line"><span class="attr">GATEWAY</span>=<span class="string">192.168.232.2</span></span><br><span class="line"><span class="attr">DNS1</span>=<span class="string">114.114.114.114</span></span><br></pre></td></tr></table></figure><p>设置好以后保存并退出编辑，输入以下命令重启网络</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ service network restart</span><br></pre></td></tr></table></figure><p>使用命令ping一下<code>www.baidu.com</code>，看是否能够ping通</p><h3 id="防火墙"><a href="#防火墙" class="headerlink" title="防火墙"></a>防火墙</h3><p>开启对应端口才能够让物理机访问虚拟机，否则只能够虚拟机访问物理机</p><p>CentOS7常用防火墙命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ systemctl status firewalld <span class="comment"># 查看防火墙状态</span></span><br><span class="line">$ systemctl start firewalld <span class="comment"># 开启防火墙</span></span><br><span class="line">$ systemctl stop firewalld <span class="comment"># 关闭防火墙</span></span><br><span class="line">$ firewall-cmd --zone=public --list-ports <span class="comment"># 查看所有打开的端口</span></span><br><span class="line">$ firewall-cmd --zone=public --add-port=80/tcp --permanent <span class="comment"># 开放80端口</span></span><br><span class="line">$ firewall-cmd --zone=public --remove-port=80/tcp --permanent <span class="comment"># 关闭80端口</span></span><br><span class="line">$ firewall-cmd --reload <span class="comment"># 配置立即生效</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 软件配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vmware </tag>
            
            <tag> centos </tag>
            
            <tag> network </tag>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot整合Mybatis</title>
      <link href="/posts/1b5afac3/"/>
      <url>/posts/1b5afac3/</url>
      
        <content type="html"><![CDATA[<h1 id="SpringBoot整合Mybatis"><a href="#SpringBoot整合Mybatis" class="headerlink" title="SpringBoot整合Mybatis"></a>SpringBoot整合Mybatis</h1><h2 id="创建项目"><a href="#创建项目" class="headerlink" title="创建项目"></a>创建项目</h2><p>使用Intellij IDEA快速创建SpringBoot项目</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure/spring-boot-mybatis/image-20230104172223592.png" alt="image-20230104172223592"></p><p>选择springboot版本号，并且勾选MyBatis与MySQL驱动</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure/spring-boot-mybatis/image-20230104183449780.png" alt="image-20230104183449780"></p><h2 id="配置MyBatis"><a href="#配置MyBatis" class="headerlink" title="配置MyBatis"></a>配置MyBatis</h2><p>SpringBoot项目配置MyBatis特别简单，只需要在配置文件中填写所需的连接信息就行了</p><p>在<code>application.yml</code>配置文件中添加连接信息</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/test</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">manager</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">mk123456</span></span><br></pre></td></tr></table></figure><p>这样就配置完成了，是不是非常简单</p><h2 id="创建实体类"><a href="#创建实体类" class="headerlink" title="创建实体类"></a>创建实体类</h2><p>创建一个用户装载数据库中的表的数据的实体类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.main;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring-boot</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 用户实体类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2023/01/04 18:45:13</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String gender;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line">    <span class="keyword">private</span> Double balance;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(Integer id, String name, String gender, Integer age, String phone, Date birthday, Double balance)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.gender = gender;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">        <span class="built_in">this</span>.phone = phone;</span><br><span class="line">        <span class="built_in">this</span>.birthday = birthday;</span><br><span class="line">        <span class="built_in">this</span>.balance = balance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, gender=&#x27;&quot;</span> + gender + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&quot;, phone=&#x27;&quot;</span> + phone + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, birthday=&quot;</span> + birthday +</span><br><span class="line">                <span class="string">&quot;, balance=&quot;</span> + balance +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getGender</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> gender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGender</span><span class="params">(String gender)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.gender = gender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(Integer age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPhone</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> phone;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPhone</span><span class="params">(String phone)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.phone = phone;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Date <span class="title function_">getBirthday</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBirthday</span><span class="params">(Date birthday)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.birthday = birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Double <span class="title function_">getBalance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> balance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBalance</span><span class="params">(Double balance)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.balance = balance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="创建持久层访问类"><a href="#创建持久层访问类" class="headerlink" title="创建持久层访问类"></a>创建持久层访问类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.main.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Mapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Select;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring-boot</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 用户持久层访问</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2023/01/04 18:55:06</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 让Mybatis知道这是一个持久层访问的接口，并且交给SpringBoot管理</span></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="meta">@Select(&quot;select * from t_user&quot;)</span></span><br><span class="line">    List&lt;User&gt; <span class="title function_">queryAll</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="创建服务类"><a href="#创建服务类" class="headerlink" title="创建服务类"></a>创建服务类</h2><p>创建服务接口</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.main.User;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring-boot</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 用户服务接口</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2023/01/04 18:51:37</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    List&lt;User&gt; <span class="title function_">getAllUsers</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>实现服务类接口</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.dao.UserDao;</span><br><span class="line"><span class="keyword">import</span> com.example.main.User;</span><br><span class="line"><span class="keyword">import</span> com.example.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring-boot</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 用户服务类接口实现</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2023/01/04 18:53:40</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">getAllUsers</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userDao.queryAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="创建持久层访问接口"><a href="#创建持久层访问接口" class="headerlink" title="创建持久层访问接口"></a>创建持久层访问接口</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.main.User;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Mapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Select;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring-boot</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 用户持久层访问</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2023/01/04 18:55:06</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 让Mybatis知道这是一个持久层访问的接口，并且交给SpringBoot管理</span></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="meta">@Select(&quot;select * from t_user&quot;)</span></span><br><span class="line">    List&lt;User&gt; <span class="title function_">queryAll</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="编写测试代码"><a href="#编写测试代码" class="headerlink" title="编写测试代码"></a>编写测试代码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring-boot</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2023/01/04 19:00:17</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserServiceTest</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">getAllUsers</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(userService.getAllUsers());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果输出正确，表示配置成功</p>]]></content>
      
      
      <categories>
          
          <category> 程序配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> springboot </tag>
            
            <tag> mybatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot多环境配置文件</title>
      <link href="/posts/2de52e68/"/>
      <url>/posts/2de52e68/</url>
      
        <content type="html"><![CDATA[<h1 id="SpringBoot多环境配置文件方案"><a href="#SpringBoot多环境配置文件方案" class="headerlink" title="SpringBoot多环境配置文件方案"></a>SpringBoot多环境配置文件方案</h1><h2 id="yaml"><a href="#yaml" class="headerlink" title="yaml"></a>yaml</h2><p>在<code>/src/main/resources/</code>下创建配置文件<code>application.yml</code>，写入以下内容</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置启用的环境</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">dev</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># 开发环境</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># 生产</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span> <span class="string">pro</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">81</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># 测试</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span> <span class="string">test</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">82</span></span><br></pre></td></tr></table></figure><p>如果使用<code>spring.profiles</code>的话会提示已过时，可以使用<code>spring.config.activate.on-profile</code>来代替</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置启用的环境</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">dev</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># 开发环境</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">config:</span></span><br><span class="line">    <span class="attr">activate:</span></span><br><span class="line">      <span class="attr">on-profile:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># 生产</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">config:</span></span><br><span class="line">    <span class="attr">activate:</span></span><br><span class="line">      <span class="attr">on-profile:</span> <span class="string">pro</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">81</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># 测试</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">config:</span></span><br><span class="line">    <span class="attr">activate:</span></span><br><span class="line">      <span class="attr">on-profile:</span> <span class="string">test</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">82</span></span><br></pre></td></tr></table></figure><h2 id="profile"><a href="#profile" class="headerlink" title="profile"></a>profile</h2><p>在<code>/src/main/resources/</code>下创建配置文件<code>application.properties</code>，写入以下内容</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置启用的环境</span></span><br><span class="line"><span class="attr">spring.profiles.active</span>=<span class="string">dev</span></span><br></pre></td></tr></table></figure><p>如果在<code>application.properties</code>配置的是dev，那么就会在<code>/src/main/resources/</code>下找<code>application-dev.properties</code>这个配置文件</p><p>创建<code>application-dev.properties</code>配置文件，写入以下内容</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="string">8080</span></span><br></pre></td></tr></table></figure><p>如果有其他环境，创建对应的<code>application-xxx.properties</code>配置文件，然后再在<code>application.properties</code>主配置文件中配置就行了</p><h2 id="环境切换"><a href="#环境切换" class="headerlink" title="环境切换"></a>环境切换</h2><p>如果每次更改环境就将配置文件更改一次然后重新编译项目，这是非常麻烦的</p><p>使用maven打包为jar包后，只需要在运行命令中添加参数就能够更改项目的运行环境</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ java -jar xxx.jar --spring.profiles.active=<span class="built_in">test</span></span><br></pre></td></tr></table></figure><p>并且不是只能使用一个参数，可以使用很多个参数，这样就可以修改很多的值</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ java -jar xxx.jar --spring.profiles.active=<span class="built_in">test</span> --server.port=88</span><br></pre></td></tr></table></figure><h2 id="maven环境"><a href="#maven环境" class="headerlink" title="maven环境"></a>maven环境</h2><p>当然，maven也有多环境配置，并且maven的配置优先级还高一些，因为jar包是由maven来打包的</p><p>在<code>pom.xml</code>中的<code>build</code>节点和<code>profiles</code>节点配置以下内容</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-test-03<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>spring-boot-test-03<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>spring-boot-test-03<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- springboot打包插件 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 将maven中的变量引用到配置文件中的插件 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-resources-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">encoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">encoding</span>&gt;</span></span><br><span class="line">                    <span class="comment">&lt;!-- 使用默认分隔符，不太清楚什么意思 --&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">useDefaultDelimiters</span>&gt;</span>true<span class="tag">&lt;/<span class="name">useDefaultDelimiters</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">profiles</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 开发环境 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>dev<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 设置配置变量 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">profile.active</span>&gt;</span>test<span class="tag">&lt;/<span class="name">profile.active</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">activation</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 设置为默认配置 --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">activeByDefault</span>&gt;</span>true<span class="tag">&lt;/<span class="name">activeByDefault</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">activation</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 生产环境 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>pro<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 设置配置变量 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">profile.active</span>&gt;</span>pro<span class="tag">&lt;/<span class="name">profile.active</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 测试环境 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>test<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 设置配置变量 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">profile.active</span>&gt;</span>test<span class="tag">&lt;/<span class="name">profile.active</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">profiles</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>pom.xml</code>配置好后，还需要在yaml中配置我们定义好的变量，使用<code>$&#123;&#125;</code>即可引用</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置启用的环境</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">$&#123;profile.active&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># 开发环境</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">config:</span></span><br><span class="line">    <span class="attr">activate:</span></span><br><span class="line">      <span class="attr">on-profile:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># 生产</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">config:</span></span><br><span class="line">    <span class="attr">activate:</span></span><br><span class="line">      <span class="attr">on-profile:</span> <span class="string">pro</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">81</span></span><br><span class="line"></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="comment"># 测试</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">config:</span></span><br><span class="line">    <span class="attr">activate:</span></span><br><span class="line">      <span class="attr">on-profile:</span> <span class="string">test</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">82</span></span><br></pre></td></tr></table></figure><h2 id="配置文件优先级"><a href="#配置文件优先级" class="headerlink" title="配置文件优先级"></a>配置文件优先级</h2><p>具体优先级可到官网进行查看</p><p>以下列出我目前已知的优先级（自上而下，优先级由高到低）</p><ol><li><p>运行打包好的jar的命令所携带的参数</p></li><li><p>在打包好的jar包的同级目录创建一个<code>config</code>目录在目录中添加的配置文件</p></li><li><p>在打包好的jar包的同级目录创建的配置文件</p></li><li><p>在项目源代码<code>/src/main/resources/config</code>目录下创建的配置文件</p></li><li><p>在项目源代码<code>/src/main/resources</code>目录下创建的配置文件</p></li></ol><p>具体的优先级如上，文件优先级如下（从左到右，优先级由高到低）</p><p><code>application.properties</code> -&gt; <code>application.yml</code> -&gt; <code>application.yaml</code></p><h3 id="四级配置文件"><a href="#四级配置文件" class="headerlink" title="四级配置文件"></a>四级配置文件</h3><p>SpringBoot中分为4级配置文件（自上而下，优先级由高到低）</p><ol><li>file: config&#x2F;application.yml</li><li>file: application.yml</li><li>classpath: config&#x2F;application.yml</li><li>classpath: application.yml（Intllij IDEA中创建的配置文件，默认就是这级配置文件，优先级最低）</li></ol>]]></content>
      
      
      <categories>
          
          <category> 程序配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> springboot </tag>
            
            <tag> yaml </tag>
            
            <tag> profile </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>springboot配置文件</title>
      <link href="/posts/e6f75dd7/"/>
      <url>/posts/e6f75dd7/</url>
      
        <content type="html"><![CDATA[<h2 id="配置文件类型"><a href="#配置文件类型" class="headerlink" title="配置文件类型"></a>配置文件类型</h2><p>主要有两种，分别为<strong>properties</strong>格式的和<strong>yaml</strong>格式的</p><h3 id="properties"><a href="#properties" class="headerlink" title="properties"></a>properties</h3><p>此配置文件注重格式，不同等级使用<code>.</code>分割，如下</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="string">80</span></span><br><span class="line"><span class="attr">server.xxx.xxx</span>=<span class="string">xxx</span></span><br><span class="line"><span class="attr">server.xxx.xxx.xxx</span>=<span class="string">xxx</span></span><br></pre></td></tr></table></figure><h3 id="yaml"><a href="#yaml" class="headerlink" title="yaml"></a>yaml</h3><p>此配置文件后缀分为两种，一种是以<code>.yml</code>结尾，较为常用，一种是以<code>.yaml</code>结尾，他们的格式都是一样的，只是文件后缀不一样</p><p>此配置文件的格式注重数据，以空格<code> </code>分级，空格不限次数，建议使用两个空格分级，案例如下</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">student:</span></span><br><span class="line">  <span class="attr">school:</span> <span class="string">&quot;成都工业学院&quot;</span></span><br><span class="line">  <span class="attr">clazz:</span> <span class="string">&quot;软件工程22级专升本1班&quot;</span></span><br><span class="line">  <span class="attr">name:</span> <span class="string">&quot;马某人&quot;</span></span><br><span class="line">  <span class="attr">phone:</span> <span class="string">&quot;19960798888&quot;</span></span><br><span class="line">  <span class="attr">age:</span> <span class="number">21</span></span><br><span class="line">  <span class="attr">hobbies:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;跑步&quot;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;骑自行车&quot;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&quot;狂吃一顿&quot;</span></span><br></pre></td></tr></table></figure><p><strong>yaml的数据类型</strong></p><p>yaml的数据类型分为四种</p><ol><li>字符串（String）：表示文本内容，可以使用单引号或双引号括起来。例如：<code>name: &#39;John&#39;</code>。</li><li>数字（Number）：表示数值。可以是整数或浮点数。例如：<code>age: 25</code>。</li><li>布尔值（Boolean）：表示真或假。可以是true或false。例如：<code>isStudent: true</code>。</li><li>列表（List）：表示有序的元素列表。使用短横线（-）作为前缀，并使用缩进表示层级关系。</li></ol><p><strong>其中</strong>：如果字符串不用引号分隔，则会自动解析，如果使用引号则表示为字符串，并且<code>&#39;&#39;</code>包裹的字符串内的内容不会转义，<code>&quot;&quot;</code>包裹的字符串会进行转义。</p><h2 id="读取YAML配置文件"><a href="#读取YAML配置文件" class="headerlink" title="读取YAML配置文件"></a>读取YAML配置文件</h2><p>首先SpringBoot默认会去读取项目根目录下<code>src/main/resources</code>目录下的<code>application.properties</code>，<code>application.yml</code>，<code>application.yaml</code>这三个配置文件</p><p>并且优先级按从左到右依次降低，SpringBoot读取YAML配置文件分为三种方法</p><h3 id="value"><a href="#value" class="headerlink" title="value"></a>value</h3><p>在类中直接使用<code>@value</code>注解来获取，使用<code>$&#123;&#125;</code>来获取YAML中的数据，案例如下</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Value(&quot;$&#123;student.hobbies[0]&#125;&quot;)</span></span><br><span class="line"><span class="keyword">private</span> String hobbit;</span><br></pre></td></tr></table></figure><h3 id="Environment"><a href="#Environment" class="headerlink" title="Environment"></a>Environment</h3><p>SpringBoot在容器中已经有了一个装了YAML中所有内容的类，类名为<code>org.springframework.core.env.Environment</code></p><p>自动注入即可，案例如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> Environment environment;</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping(&quot;/environment/student/name&quot;)</span></span><br><span class="line"><span class="keyword">public</span> JsonData <span class="title function_">getStudentNameByEnvironment</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">JsonData</span>(<span class="number">0</span>, environment.getProperty(<span class="string">&quot;student.name&quot;</span>), <span class="string">&quot;处理成功！&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="自定义类"><a href="#自定义类" class="headerlink" title="自定义类"></a>自定义类</h3><p>给需要装载数据的类打上注解，并让Spring容器进行管理。</p><p>其中<code>@ConfigurationProperties(prefix = &quot;student&quot;)</code>注解中的prefix是必须要写的，并且要与配置文件中的对象名保持一致。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring-boot</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/29 13:42:08</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// 读取YAML中student节点的数据</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;student&quot;)</span></span><br><span class="line"><span class="comment">// 交给Spring容器管理</span></span><br><span class="line"><span class="meta">@Repository</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String school;</span><br><span class="line">    <span class="keyword">private</span> String clazz;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String[] hobbies;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Student</span><span class="params">(String school, String clazz, String name, String phone, Integer age, String[] hobbies)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.school = school;</span><br><span class="line">        <span class="built_in">this</span>.clazz = clazz;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.phone = phone;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">        <span class="built_in">this</span>.hobbies = hobbies;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Student&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;school=&#x27;&quot;</span> + school + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, clazz=&#x27;&quot;</span> + clazz + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, phone=&#x27;&quot;</span> + phone + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&quot;, hobbies=&quot;</span> + Arrays.toString(hobbies) +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getSchool</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> school;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSchool</span><span class="params">(String school)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.school = school;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getClazz</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> clazz;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setClazz</span><span class="params">(String clazz)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.clazz = clazz;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPhone</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> phone;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPhone</span><span class="params">(String phone)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.phone = phone;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(Integer age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String[] getHobbies() &#123;</span><br><span class="line">        <span class="keyword">return</span> hobbies;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setHobbies</span><span class="params">(String[] hobbies)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.hobbies = hobbies;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>光完成上面两步还不够，这时候IDEA会有警告，需要在pom配置文件中添加一个依赖坐标，就不会有警告了</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>使用方法如下</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> Student student;</span><br><span class="line"></span><br><span class="line"><span class="meta">@GetMapping(&quot;/yaml/student&quot;)</span></span><br><span class="line"><span class="keyword">public</span> JsonData <span class="title function_">getYamlStudentByDomain</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">JsonData</span>(<span class="number">0</span>, student, <span class="string">&quot;处理成功！&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="多配置文件"><a href="#多配置文件" class="headerlink" title="多配置文件"></a>多配置文件</h2><p>通常开发中，项目需要运行在许多环境中，例如：开发环境、测试环境与生产环境。</p><p>如果每次移动项目就需要更改配置文件是特别麻烦的，多配置文件能帮助我们解决这个问题。</p><h3 id="多文档"><a href="#多文档" class="headerlink" title="多文档"></a>多文档</h3><p>多配置文件命名规则：<code>application-xxx.properties</code>，当然，使用<code>yaml</code>也是可以的。</p><p>需要执行哪个配置，就在<code>application.properties</code>中配置<code>spring.profiles.active=xxx</code>就行了。</p><h3 id="yaml多文档"><a href="#yaml多文档" class="headerlink" title="yaml多文档"></a>yaml多文档</h3><p>yaml使用<code>---</code>来分隔不同的配置，并使用<code>spring.profiles=xxx</code>在不同配置区域为配置命名，使用<code>spring.profiles.active=xxx</code>激活配置。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8081</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span> <span class="string">dev</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8082</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span> <span class="string">test</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8083</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span> <span class="string">pro</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="comment"># 激活哪个配置</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">dev</span></span><br></pre></td></tr></table></figure><h3 id="外部激活"><a href="#外部激活" class="headerlink" title="外部激活"></a>外部激活</h3><p>上面两种都是在项目内部使用<code>spring.profiles.active=xxx</code>激活配置文件的，下面介绍两种项目外部激活配置的方式。</p><ol><li>虚拟机参数：在VM options指定：<code>-Dspring.profiles.active=dev</code></li><li>命令行参数：运行jar包时指定配置文件：<code>java –jar xxx.jar  --spring.profiles.active=xxx</code></li></ol>]]></content>
      
      
      <categories>
          
          <category> 程序配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> springboot </tag>
            
            <tag> yaml </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用IDEA快速创建Springboot项目</title>
      <link href="/posts/9033cfe3/"/>
      <url>/posts/9033cfe3/</url>
      
        <content type="html"><![CDATA[<h1 id="快速创建SpringBoot项目"><a href="#快速创建SpringBoot项目" class="headerlink" title="快速创建SpringBoot项目"></a>快速创建SpringBoot项目</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>SpringBoot是Spring家族特别重要的一员，能够大大简化spring的配置。</p><p><a href="https://spring.io/projects/spring-boot">SpringBoot官网</a></p><h2 id="快速创建SpringBoot项目-1"><a href="#快速创建SpringBoot项目-1" class="headerlink" title="快速创建SpringBoot项目"></a>快速创建SpringBoot项目</h2><p>进入快速创建SpringBoot项目的<a href="https://start.spring.io/">官网</a></p><p>配置好对应的选项</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure/spring-boot/image-20221219152851678.png" alt="image-20221219152851678"></p><p>点击右侧的<code>ADD DEPENDENCIES</code>选项，添加<code>spring web</code>依赖包</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure/spring-boot/image-20221219153025959.png" alt="image-20221219153025959"></p><p>点击<code>GENERATE</code>按钮，会让你下载一个zip包，这就是我们的springboot项目</p><h2 id="使用IntelliJ-IDEA创建SpringBoot项目"><a href="#使用IntelliJ-IDEA创建SpringBoot项目" class="headerlink" title="使用IntelliJ IDEA创建SpringBoot项目"></a>使用IntelliJ IDEA创建SpringBoot项目</h2><p>当然，IDEA也为我们提供了快速创建Springboot项目的方法，用的就是上面Spring官网的接口</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure/spring-boot/image-20221219160208489.png" alt="image-20221219160208489"></p><p>选择web，点击创建</p><p>创建UserController类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring-boot</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 用户控制类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/19 17:34:48</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUserById</span><span class="params">(<span class="meta">@PathVariable</span> <span class="type">int</span> id)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;id ---&gt; &quot;</span> + id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;hello Spring boot&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>点击启动，控制台出现以下内容，表示启动成功</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure/spring-boot/image-20221219173925854.png" alt="image-20221219173925854"></p><p>访问<code>http://127.0.0.1:8080/user/1</code>，如果显示<strong>hello Spring boot</strong>，表示访问成功</p>]]></content>
      
      
      <categories>
          
          <category> 程序配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> spring </tag>
            
            <tag> springboot </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>软件质量保证与测试期末复习提纲</title>
      <link href="/posts/be326573/"/>
      <url>/posts/be326573/</url>
      
        <content type="html"><![CDATA[<h1 id="软件质量保证与测试期末复习提纲"><a href="#软件质量保证与测试期末复习提纲" class="headerlink" title="软件质量保证与测试期末复习提纲"></a>软件质量保证与测试期末复习提纲</h1><h2 id="第一章-软件质量和软件测试概述"><a href="#第一章-软件质量和软件测试概述" class="headerlink" title="第一章 软件质量和软件测试概述"></a>第一章 软件质量和软件测试概述</h2><h3 id="1-ISO-IEC-25010中定义的软件产品质量模型包括下列的八个质量特性（掌握）"><a href="#1-ISO-IEC-25010中定义的软件产品质量模型包括下列的八个质量特性（掌握）" class="headerlink" title="1. ISO&#x2F;IEC 25010中定义的软件产品质量模型包括下列的八个质量特性（掌握）"></a>1. ISO&#x2F;IEC 25010中定义的软件产品质量模型包括下列的八个质量特性（掌握）</h3><p>功能适应性、性能效率、兼容性、易用性、可靠性、安全性、可维护性、可移植性</p><h3 id="2-软件错误、缺陷和失效（掌握）"><a href="#2-软件错误、缺陷和失效（掌握）" class="headerlink" title="2. 软件错误、缺陷和失效（掌握）"></a>2. 软件错误、缺陷和失效（掌握）</h3><p>错误：所有人都会犯错误，发生错误的原因有很多种</p><p>缺陷：bug，因为程序有误，在软件运行时出现不正常操作，导致系统宕机、忽然终端或数据丢失等问题</p><p>失效：如果执行了存在缺陷的代码，就有可能导致失效，但不一定在所有情况下都是这样。</p><h3 id="3-软件缺陷的主要类型（掌握）"><a href="#3-软件缺陷的主要类型（掌握）" class="headerlink" title="3. 软件缺陷的主要类型（掌握）"></a>3. 软件缺陷的主要类型（掌握）</h3><p>软件未实现产品说明书要求的功能，即该有的功能没有</p><p>软件出现产品说明书指明不该出现的错误</p><p>软件实现了产品说明书未说明的功能，即出现不该有的功能</p><p>软件未实现产品说明书未明确提及但应实现的目标，即该有的隐含功能没有</p><p>软件难以理解，不好用，运行速度慢，或软件测试人员、最终用户认为软件不好</p><h3 id="4-测试和调试（掌握）"><a href="#4-测试和调试（掌握）" class="headerlink" title="4. 测试和调试（掌握）"></a>4. 测试和调试（掌握）</h3><table><thead><tr><th align="left"></th><th></th><th></th></tr></thead><tbody><tr><td align="left">项目</td><td>测试</td><td>调试</td></tr><tr><td align="left">目的</td><td>证明程序存在缺陷</td><td>定位并解决程序缺陷</td></tr><tr><td align="left">条件与结果是否已知</td><td>条件和预期结果已知，实际结果未知</td><td>内部条件未知，结果未知</td></tr><tr><td align="left">有无计划</td><td>有计划，设计测试用例</td><td>无计划，不受时间缺陷</td></tr><tr><td align="left">执行有无规程</td><td>执行有规程</td><td>执行往往靠灵感</td></tr><tr><td align="left">执行主题</td><td>测试人员执行</td><td>开发人员执行</td></tr></tbody></table><h3 id="5-动态测试和静态测试（掌握）"><a href="#5-动态测试和静态测试（掌握）" class="headerlink" title="5. 动态测试和静态测试（掌握）"></a>5. 动态测试和静态测试（掌握）</h3><ul><li>静态测试<ul><li>是指不运行被测体本身，对需求规格说明书、软件设计说明书、源程序做结构分析、流程图分析、符号执行来找错。</li><li>静态测试包括：对于程序测试，主要是测试代码是否符合相应的标准和规范。</li></ul></li><li>动态测试<ul><li>是指通过运行被测体，检查运行结果与预期结果的差异，并分析运行效率、正确性和健壮性等性能。</li></ul></li></ul><h3 id="6-测试阶段及级别：组件测试、集成测试、系统测试及验收测试（掌握）"><a href="#6-测试阶段及级别：组件测试、集成测试、系统测试及验收测试（掌握）" class="headerlink" title="6. 测试阶段及级别：组件测试、集成测试、系统测试及验收测试（掌握）"></a>6. 测试阶段及级别：组件测试、集成测试、系统测试及验收测试（掌握）</h3><ul><li>组件测试<ul><li>是指对软件中的最小可测试组件进行检查和验证。</li><li>桩模块是指模拟被测模块所调用的模块。</li><li>驱动模块是指模拟被测模块的上级模块。</li><li>驱动模块用来接收测试数据，启动被测模块并输出结果。</li></ul></li><li>集成测试<ul><li>是组件测试的下一阶段，是指将通过测试的组件模块组装成系统或子系统，再进行测试，重点测试不同模块的接口部分。</li><li>集成测试就是用来检查各个组件模块结合到一起能否协同配合，正常运行。</li></ul></li><li>系统测试<ul><li>指的是将整个软件系统看作一个整体进行测试，包括对功能、性能以及软件所运行的软硬件环境进行测试。</li><li>系统测试的主要依据是《系统需求规格说明书》文档</li></ul></li><li>验收测试<ul><li>指的是在系统测试的后期，以用户测试为主，或有测色hi人员等质量保障人员共同参与的测试，它也是软件正式交给用户使用的最后一道工序。</li><li>验收测试又分为α测试与β测试，其中，α测试指的是由用户、测试人员、开发人员等共同参与的内部测试，而β测试指的是内测后的公测，即完全交给最终用户测试。</li></ul></li></ul><h2 id="第二章-软件质量和软件测试概述"><a href="#第二章-软件质量和软件测试概述" class="headerlink" title="第二章 软件质量和软件测试概述"></a>第二章 软件质量和软件测试概述</h2><h3 id="1-ISO-IEC-IEEE-12207-过程组（了解）"><a href="#1-ISO-IEC-IEEE-12207-过程组（了解）" class="headerlink" title="1. ISO&#x2F;IEC&#x2F;IEEE 12207 过程组（了解）"></a>1. ISO&#x2F;IEC&#x2F;IEEE 12207 过程组（了解）</h3><p>书上<strong>22</strong>页</p><h3 id="2-CMM（了解）"><a href="#2-CMM（了解）" class="headerlink" title="2. CMM（了解）"></a>2. CMM（了解）</h3><p>书上<strong>28</strong>页</p><h3 id="3-CMM软件过程成熟度等级（了解）"><a href="#3-CMM软件过程成熟度等级（了解）" class="headerlink" title="3. CMM软件过程成熟度等级（了解）"></a>3. CMM软件过程成熟度等级（了解）</h3><p>书上<strong>29</strong>页</p><ol><li>初始级</li><li>可重复级</li><li>已定义级</li><li>已管理级</li><li>优化级</li></ol><h3 id="4-CMMI（掌握）"><a href="#4-CMMI（掌握）" class="headerlink" title="4. CMMI（掌握）"></a>4. CMMI（掌握）</h3><p>书上<strong>31</strong>页</p><h2 id="第三章-软件全面质量管理"><a href="#第三章-软件全面质量管理" class="headerlink" title="第三章 软件全面质量管理"></a>第三章 软件全面质量管理</h2><h3 id="1-全面质量管理-Total-Quality-Management，TQM-概念（理解）"><a href="#1-全面质量管理-Total-Quality-Management，TQM-概念（理解）" class="headerlink" title="1. 全面质量管理(Total Quality Management，TQM)概念（理解）"></a>1. 全面质量管理(Total Quality Management，TQM)概念（理解）</h3><p>书上<strong>39</strong>页</p><h3 id="2-PDCA循环（理解）"><a href="#2-PDCA循环（理解）" class="headerlink" title="2. PDCA循环（理解）"></a>2. PDCA循环（理解）</h3><p>书上<strong>41</strong>页</p><h3 id="3-六西格玛-6-Sigma，6σ-（理解）"><a href="#3-六西格玛-6-Sigma，6σ-（理解）" class="headerlink" title="3. 六西格玛(6 Sigma，6σ)（理解）"></a>3. 六西格玛(6 Sigma，6σ)（理解）</h3><p>书上<strong>45</strong>页</p><h3 id="4-六西格玛（6σ）管理简介-人员组织结构（了解）"><a href="#4-六西格玛（6σ）管理简介-人员组织结构（了解）" class="headerlink" title="4. 六西格玛（6σ）管理简介-人员组织结构（了解）"></a>4. 六西格玛（6σ）管理简介-人员组织结构（了解）</h3><p>书上<strong>47</strong>页</p><h2 id="第四章-软件质量保证"><a href="#第四章-软件质量保证" class="headerlink" title="第四章 软件质量保证"></a>第四章 软件质量保证</h2><h3 id="1-软件质量保证活动（掌握）"><a href="#1-软件质量保证活动（掌握）" class="headerlink" title="1. 软件质量保证活动（掌握）"></a>1. 软件质量保证活动（掌握）</h3><p>书上<strong>62</strong>页</p><h3 id="2-软件质量保证过程（了解）"><a href="#2-软件质量保证过程（了解）" class="headerlink" title="2. 软件质量保证过程（了解）"></a>2. 软件质量保证过程（了解）</h3><p>书上<strong>65</strong>页</p><h2 id="第五章-软件测试基础"><a href="#第五章-软件测试基础" class="headerlink" title="第五章 软件测试基础"></a>第五章 软件测试基础</h2><h3 id="1-软件测试的目的（理解）"><a href="#1-软件测试的目的（理解）" class="headerlink" title="1. 软件测试的目的（理解）"></a>1. 软件测试的目的（理解）</h3><ul><li>测试是为了发现程序中的错误而执行程序的过程</li><li>好的测试方案是极可能发现迄今为止尚未发现的错误的测试方案</li><li>成功的测试是发现了至今为止尚未发现的错误的测试</li><li>测试并不仅仅是为了找出错误。通过分析错误产生的原因和错误的发生趋势，可以帮助项目管理者发现当前软件开发过程中的缺陷，以便及时改进。</li><li>测试分析能帮助测试人员设计出有针对性的测试方法，改善测试的效率和有效性。</li><li>没有发现错误的测试也是有价值的，完整的测试是评定软件测试的一种方法。</li><li>根据测试目的的不同，还有回归测试、压力测试、性能测试等，分别为了检验修改或优化过程是否引发新的问题、软件所能打得到的处理能力和是否达到预期的处理能力等。</li></ul><h3 id="2-软件测试目标包括哪些内容（理解）"><a href="#2-软件测试目标包括哪些内容（理解）" class="headerlink" title="2. 软件测试目标包括哪些内容（理解）"></a>2. 软件测试目标包括哪些内容（理解）</h3><ul><li>评估工作产品。</li><li>验证是否实现了所有指定的需求。</li><li>确认测试对象是否完成，并按照用户和其他干系人期望的那样工作。</li><li>建立对被测对象质量级别的信心。</li><li>预防缺陷。</li><li>发现失效和缺陷。</li><li>降低软件质量不足所带来的风险。</li><li>遵守合同、法律或法规要求或标准和（或）验证测试对象是否符合这些要求或标准。</li></ul><h3 id="3-7条软件测试的基本原则（掌握）"><a href="#3-7条软件测试的基本原则（掌握）" class="headerlink" title="3. 7条软件测试的基本原则（掌握）"></a>3. 7条软件测试的基本原则（掌握）</h3><ol><li>测试说明缺陷的存在，而不能说明缺陷不存在。</li><li>穷尽测试时不可能的。</li><li>测试的尽早介入可以节省时间和成本。</li><li>缺陷的集群效应。</li><li>杀虫剂悖论。</li><li>测试活动依赖于测试内容和情境。</li><li>不存在缺陷的谬论。</li></ol><h3 id="4-测试过程的主要活动（掌握）"><a href="#4-测试过程的主要活动（掌握）" class="headerlink" title="4. 测试过程的主要活动（掌握）"></a>4. 测试过程的主要活动（掌握）</h3><p>测试过程主要由<strong>测试计划和监控、测试分析、测试设计、测试实施、测试执行、测试评估和报告、测试结束</strong>等主要的活动组成。</p><h2 id="第六章-软件生命周期中的测试"><a href="#第六章-软件生命周期中的测试" class="headerlink" title="第六章 软件生命周期中的测试"></a>第六章 软件生命周期中的测试</h2><h3 id="1-常见的软件测试模型（了解）"><a href="#1-常见的软件测试模型（了解）" class="headerlink" title="1. 常见的软件测试模型（了解）"></a>1. 常见的软件测试模型（了解）</h3><ul><li>V模型</li><li>W模型</li><li>H模型</li><li>X模型</li><li>前置测试模型</li></ul><h3 id="2-V模型的特点、优缺点及适用（掌握）"><a href="#2-V模型的特点、优缺点及适用（掌握）" class="headerlink" title="2. V模型的特点、优缺点及适用（掌握）"></a>2. V模型的特点、优缺点及适用（掌握）</h3><p>书上<strong>87</strong>页</p><h3 id="3-W模型的特点、优缺点及适用（掌握）"><a href="#3-W模型的特点、优缺点及适用（掌握）" class="headerlink" title="3. W模型的特点、优缺点及适用（掌握）"></a>3. W模型的特点、优缺点及适用（掌握）</h3><p>书上<strong>88</strong>页</p><h3 id="4-四个测试级别，每个测试级别指什么、重点测试什么？（掌握）"><a href="#4-四个测试级别，每个测试级别指什么、重点测试什么？（掌握）" class="headerlink" title="4. 四个测试级别，每个测试级别指什么、重点测试什么？（掌握）"></a>4. 四个测试级别，每个测试级别指什么、重点测试什么？（掌握）</h3><ol><li>组件测试<ul><li>驱动模块</li><li>桩模块</li></ul></li><li>集成测试<ul><li>非增量式测试</li><li>增量式测试</li></ul></li><li>系统测试</li><li>验收测试<ul><li>测试依据</li><li>测试对象</li><li>典型的缺陷</li><li>特定的方法和职责</li><li>验收测试形式</li><li>验收测试技术</li></ul></li></ol><h3 id="5-性能测试包括哪些？（掌握）"><a href="#5-性能测试包括哪些？（掌握）" class="headerlink" title="5. 性能测试包括哪些？（掌握）"></a>5. 性能测试包括哪些？（掌握）</h3><p>书上<strong>105</strong>页</p><ol><li>常规性能测试</li><li>压力测试</li><li>负载测试</li><li>可靠性测试</li><li>大数据量测试</li></ol><h3 id="6-压力测试（掌握），负载测试（掌握），对比"><a href="#6-压力测试（掌握），负载测试（掌握），对比" class="headerlink" title="6. 压力测试（掌握），负载测试（掌握），对比"></a>6. 压力测试（掌握），负载测试（掌握），对比</h3><ul><li><p>压力测试</p><p>压力测试是指持续不断地给被测系统增加压力，直到被测系统被压垮。</p></li><li><p>负载测试</p><p>负载测试与压力测试十分相似，通常是让被测系统在其能忍受的压力极限范围内（或临界状态下）连续运行，来测试系统的稳定性。其目的是找到系统的处理极限，为系统调优提供依据。</p></li></ul><h3 id="7-自动化测试（掌握），满足的条件（掌握）"><a href="#7-自动化测试（掌握），满足的条件（掌握）" class="headerlink" title="7. 自动化测试（掌握），满足的条件（掌握）"></a>7. 自动化测试（掌握），满足的条件（掌握）</h3><ol><li>需求变动不频繁</li><li>项目周期足够长</li><li>自动发测试脚本可重复使用</li></ol><h3 id="8-白盒测试（掌握），黑盒测试（掌握），对比和应用"><a href="#8-白盒测试（掌握），黑盒测试（掌握），对比和应用" class="headerlink" title="8. 白盒测试（掌握），黑盒测试（掌握），对比和应用"></a>8. 白盒测试（掌握），黑盒测试（掌握），对比和应用</h3><p>书上<strong>110</strong>页</p><table><thead><tr><th align="center">比较项</th><th align="center">黑盒测试</th><th align="center">白盒测试</th></tr></thead><tbody><tr><td align="center">测试规划</td><td align="center">功能的测试</td><td align="center">结构的测试</td></tr><tr><td align="center">优点</td><td align="center">能确保从用户的角度出发进行测试</td><td align="center">能对程序内部的特定部位进行覆盖测试</td></tr><tr><td align="center">缺点</td><td align="center">无法测试程序内部特定部位；当规格说明有误时，则不能发现问题。</td><td align="center">无法检查程序的外部特征；无法对未实现规格说明的程序内部欠缺部分进行测试</td></tr></tbody></table><h2 id="第7章-软件静态测试技术"><a href="#第7章-软件静态测试技术" class="headerlink" title="第7章 软件静态测试技术"></a>第7章 软件静态测试技术</h2><h3 id="1-静态测试（理解）"><a href="#1-静态测试（理解）" class="headerlink" title="1. 静态测试（理解）"></a>1. 静态测试（理解）</h3><p>书上<strong>114</strong>页</p><h3 id="2-静态测试技术（理解）"><a href="#2-静态测试技术（理解）" class="headerlink" title="2. 静态测试技术（理解）"></a>2. 静态测试技术（理解）</h3><p>书上<strong>115</strong>页</p><h3 id="3-正式评审过程（了解）"><a href="#3-正式评审过程（了解）" class="headerlink" title="3. 正式评审过程（了解）"></a>3. 正式评审过程（了解）</h3><ol><li>计划</li><li>评审启动会</li><li>独立评审</li><li>事件交流和分析</li><li>修正和报告</li><li>跟踪</li></ol><h3 id="4-评审角色和职责（了解）"><a href="#4-评审角色和职责（了解）" class="headerlink" title="4. 评审角色和职责（了解）"></a>4. 评审角色和职责（了解）</h3><ol><li><p>作者</p><p>作者为被评审工作产品的创建者或修复工作产品评审过程中发现的缺陷。</p></li><li><p>管理者</p><p>负责制定评审计划；决定是否需要进行评审；分配人员、预算和时间；监督进行中的成本、效益；当产出不充分时，执行控制决策。</p></li><li><p>评审会主持人</p><p>党召开评审会时，主持人保证评审会议的有效进行，需要时再评审的不同观点之间进行协调。主持人通常是评审成功与否的关键人物。</p></li><li><p>评审组长</p><p>全面负责评审，决定哪些人员参加评审，并组织何时何地进行评审。</p></li><li><p>评审员</p><p>可能是专题相关专家、项目工作人员、对工作产品感兴趣的干系人和（或）具有特定技术或业务背景的人员。在评审中识别工作产品中的潜在缺陷。可能代表测试员、程序员、用户、操作员、业务分析师、易用性专家等不同的角度。</p></li><li><p>记录员</p></li></ol><h3 id="5-控制流图4个元素（掌握）"><a href="#5-控制流图4个元素（掌握）" class="headerlink" title="5. 控制流图4个元素（掌握）"></a>5. 控制流图4个元素（掌握）</h3><ol><li>过程块</li><li>决策点</li><li>汇聚点</li><li>域</li></ol><h3 id="6-控制流分析步骤（掌握）"><a href="#6-控制流分析步骤（掌握）" class="headerlink" title="6. 控制流分析步骤（掌握）"></a>6. 控制流分析步骤（掌握）</h3><p>书上<strong>137</strong>页</p><h2 id="第8章-软件测试设计技术"><a href="#第8章-软件测试设计技术" class="headerlink" title="第8章 软件测试设计技术"></a>第8章 软件测试设计技术</h2><h3 id="1-等价类划分（掌握）"><a href="#1-等价类划分（掌握）" class="headerlink" title="1. 等价类划分（掌握）"></a>1. 等价类划分（掌握）</h3><p>书上<strong>154</strong>页</p><ul><li>有效等价类</li><li>无效等价类</li></ul><h3 id="2-边界值分析（掌握）"><a href="#2-边界值分析（掌握）" class="headerlink" title="2. 边界值分析（掌握）"></a>2. 边界值分析（掌握）</h3><p>书上<strong>159</strong>页</p><ul><li><p>二值测试法</p><p>取一个边界值，一个刚好超过边界的值</p></li><li><p>三值测试法</p><p>取一个不超过边界，一个在边界上，一个超过边界的值</p></li></ul><h3 id="3-决策表（掌握）"><a href="#3-决策表（掌握）" class="headerlink" title="3. 决策表（掌握）"></a>3. 决策表（掌握）</h3><p>书上<strong>162</strong>页</p><p>也叫<strong>判定表</strong></p><ul><li>条件桩：列出了问题的所有条件。通常认为列出的条件的次序无关紧要，位于表的左上部分</li><li>动作桩：列出了问题规定可能采取的操作。这些操作的排列顺序没有约束，位于表的左下角部分。</li><li>条件项：列出针对它所列条件的取值，在所有可能情况下的真假值，位于表的右上角部分。</li><li>动作项：列出在条件项的各种取值情况下应该采取的动作，位于表的右下角部分。</li></ul><table><thead><tr><th align="center"></th><th align="center">规则1</th><th align="center">规则2</th><th align="center">……</th><th align="center">规则n</th></tr></thead><tbody><tr><td align="center">条件桩1</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr><td align="center">条件桩2</td><td align="center"></td><td align="center">条件项</td><td align="center"></td><td align="center"></td></tr><tr><td align="center">……</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center">条件项</td></tr><tr><td align="center">条件桩n</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr><td align="center">动作桩1</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr><td align="center">动作桩2</td><td align="center">动作项</td><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr><td align="center">……</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr><tr><td align="center">动作桩n</td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center">动作项</td></tr></tbody></table><p>例子：现有某图书馆应用系统中软件的一张阅读指南决策表，读者对表中问题给予回答，若回答为肯定，标注<em>Y</em>（程序取真值），若回答为否定，标注<em>N</em>（程序取假值）。阅读建议在动作域中列出。</p><p><strong>原始决策表</strong></p><table><thead><tr><th></th><th>规则1</th><th>规则2</th><th>规则3</th><th>规则4</th><th>规则5</th><th>规则6</th><th>规则7</th><th>规则8</th></tr></thead><tbody><tr><td>条件1：感觉疲倦吗？</td><td>Y</td><td>Y</td><td>Y</td><td>Y</td><td>N</td><td>N</td><td>N</td><td>N</td></tr><tr><td>条件2：感兴趣吗？</td><td>Y</td><td>Y</td><td>N</td><td>N</td><td>Y</td><td>Y</td><td>N</td><td>N</td></tr><tr><td>条件3：感觉糊涂吗？</td><td>Y</td><td>N</td><td>Y</td><td>N</td><td>Y</td><td>N</td><td>Y</td><td>N</td></tr><tr><td>动作1：重读</td><td></td><td></td><td></td><td></td><td>√</td><td></td><td></td><td></td></tr><tr><td>动作2：继续</td><td></td><td></td><td></td><td></td><td></td><td>√</td><td></td><td></td></tr><tr><td>动作3：跳下一章</td><td></td><td></td><td></td><td></td><td></td><td></td><td>√</td><td>√</td></tr><tr><td>动作4：休息</td><td>√</td><td>√</td><td>√</td><td>√</td><td></td><td></td><td></td><td></td></tr></tbody></table><p><strong>化简后的决策表</strong></p><table><thead><tr><th></th><th>规则1~4</th><th>规则5</th><th>规则6</th><th>规7~8</th></tr></thead><tbody><tr><td>条件1：感觉疲倦吗？</td><td>Y</td><td>N</td><td>N</td><td>N</td></tr><tr><td>条件2：感兴趣吗？</td><td>-</td><td>Y</td><td>Y</td><td>N</td></tr><tr><td>条件3：感觉糊涂吗？</td><td>-</td><td>Y</td><td>N</td><td>-</td></tr><tr><td>动作1：重读</td><td></td><td>√</td><td></td><td></td></tr><tr><td>动作2：继续</td><td></td><td></td><td>√</td><td></td></tr><tr><td>动作3：跳下一章</td><td></td><td></td><td></td><td>√</td></tr><tr><td>动作4：休息</td><td>√</td><td></td><td></td><td></td></tr></tbody></table><h3 id="4-基于状态的测试，基于用例的测试，基于用户故事-敏捷开发-的测试。思想，优缺点及应用（理解）"><a href="#4-基于状态的测试，基于用例的测试，基于用户故事-敏捷开发-的测试。思想，优缺点及应用（理解）" class="headerlink" title="4. 基于状态的测试，基于用例的测试，基于用户故事(敏捷开发)的测试。思想，优缺点及应用（理解）"></a>4. 基于状态的测试，基于用例的测试，基于用户故事(敏捷开发)的测试。思想，优缺点及应用（理解）</h3><ul><li><p>基于状态的测试</p><p>书上<strong>166</strong>页</p></li><li><p>基于用例的测试</p><p>书上<strong>170</strong>页</p></li><li><p>基于用户故事（敏捷开发）的测试</p><p>书上<strong>172</strong>页</p></li></ul><h3 id="5-黑盒测试技术的比较与选择（掌握）"><a href="#5-黑盒测试技术的比较与选择（掌握）" class="headerlink" title="5. 黑盒测试技术的比较与选择（掌握）"></a>5. 黑盒测试技术的比较与选择（掌握）</h3><p>书上<strong>174</strong>页</p><ul><li>首先进行等价类划分，包括输入条件和输出条件的等价划分，将无限测试变成有限测试，这是减少工作量和提高测试效率最有效的方法。</li><li>在任何情况下都必须使用边界值分析方法。经验表明，用这种方法设计出的测试用例发现程序错误的能力最强。</li><li>如果程序的功能说明中含有输入条件的组合情况，则一开始就可以选用判定表法。</li><li>如果测试对象输出结果或行为方式不仅要受当前输入数据的影响，同时还要与测试对象的当前运行执行情况或其之前的事件，或之前输入数据有关，则需要采用基于状态的测试方法。</li><li>对照程序逻辑，检查已设计出的测试用例的逻辑覆盖程度。如果没有达到要求的覆盖标准，应当再补充足够的测试用例。</li></ul><h3 id="6-基于经验的测试技术，三种（掌握）"><a href="#6-基于经验的测试技术，三种（掌握）" class="headerlink" title="6. 基于经验的测试技术，三种（掌握）"></a>6. 基于经验的测试技术，三种（掌握）</h3><p>书上<strong>178</strong>页</p><ol><li>错误推测法</li><li>基于检查表测试</li><li>探索性测试</li></ol><h3 id="7-白盒测试技术，有哪些（掌握）"><a href="#7-白盒测试技术，有哪些（掌握）" class="headerlink" title="7. 白盒测试技术，有哪些（掌握）"></a>7. 白盒测试技术，有哪些（掌握）</h3><ol><li>语句覆盖</li><li>判定覆盖</li><li>条件覆盖</li><li>路径测试</li><li>基本路径测试</li></ol><h3 id="8-语句覆盖、判断覆盖、条件覆盖，应用（掌握）"><a href="#8-语句覆盖、判断覆盖、条件覆盖，应用（掌握）" class="headerlink" title="8. 语句覆盖、判断覆盖、条件覆盖，应用（掌握）"></a>8. 语句覆盖、判断覆盖、条件覆盖，应用（掌握）</h3><p>书上<strong>183</strong>页</p><h3 id="9-基本路径测试，应用（掌握）"><a href="#9-基本路径测试，应用（掌握）" class="headerlink" title="9. 基本路径测试，应用（掌握）"></a>9. 基本路径测试，应用（掌握）</h3><p>书上<strong>187</strong>页</p><h2 id="第9章-软件测试管理"><a href="#第9章-软件测试管理" class="headerlink" title="第9章 软件测试管理"></a>第9章 软件测试管理</h2><h3 id="1-测试组织开展测试工作的人员角色，职责（理解）"><a href="#1-测试组织开展测试工作的人员角色，职责（理解）" class="headerlink" title="1. 测试组织开展测试工作的人员角色，职责（理解）"></a>1. 测试组织开展测试工作的人员角色，职责（理解）</h3><ul><li>测试总监负责组织级测试管理工作</li><li>测试经理专注于特定软件项目的测试工作，协调资源做好项目测试管理工作。</li><li>测试员负责开发测试可交付成果，并完成与动态测试过程相关的过程。</li><li>（软件）用户是使用软件的人。通常，用户进行验收测试，包括用户验收测试和产品软件的α测试、β测试。</li></ul><h3 id="2-TMMi，五个级别（掌握）"><a href="#2-TMMi，五个级别（掌握）" class="headerlink" title="2. TMMi，五个级别（掌握）"></a>2. TMMi，五个级别（掌握）</h3><ol><li>初始级别</li><li>已管理级</li><li>已定义级</li><li>已测量级</li><li>优化级</li></ol>]]></content>
      
      
      <categories>
          
          <category> 复习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 期末复习 </tag>
            
            <tag> 软件测试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringMVC配置（三）</title>
      <link href="/posts/15d7bb25/"/>
      <url>/posts/15d7bb25/</url>
      
        <content type="html"><![CDATA[<h1 id="Spring-MVC入门配置"><a href="#Spring-MVC入门配置" class="headerlink" title="Spring-MVC入门配置"></a>Spring-MVC入门配置</h1><h2 id="REST风格"><a href="#REST风格" class="headerlink" title="REST风格"></a>REST风格</h2><h3 id="REST介绍"><a href="#REST介绍" class="headerlink" title="REST介绍"></a>REST介绍</h3><p>一种比较好的url风格</p><p>没有使用REST</p><ul><li>&#x2F;user&#x2F;findById?id&#x3D;1查找用户</li><li>&#x2F;user&#x2F;deleteById?id&#x3D;1      删除用户</li></ul><p>使用了REST</p><ul><li><p>&#x2F;user&#x2F;1 get查找用户</p></li><li><p>&#x2F;user&#x2F;1         delete     删除用户</p></li><li><p>&#x2F;user           post       保存用户</p></li><li><p>&#x2F;user           put        更新用户</p></li></ul><p>也是使用url+方法的方式来区分url的功能</p><h3 id="SpringMVC中的实现"><a href="#SpringMVC中的实现" class="headerlink" title="SpringMVC中的实现"></a>SpringMVC中的实现</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.example.domain.JsonResult;</span><br><span class="line"><span class="keyword">import</span> org.example.domain.User;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 用户控制器</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/11 16:32:22</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// 让Spring容器进行管理</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    <span class="comment">// 请求的url</span></span><br><span class="line">    <span class="comment">// 设置请求的方法，使用REST风格</span></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/user&quot;, method = RequestMethod.POST)</span></span><br><span class="line">    <span class="comment">// 让方法返回的结果就作为响应的响应体，不做处理</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> JsonResult <span class="title function_">save</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">JsonResult</span>(<span class="number">200</span>, <span class="string">&quot;保存成功！&quot;</span>, user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/user&quot;, method = RequestMethod.PUT)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> JsonResult <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">JsonResult</span>(<span class="number">200</span>, <span class="string">&quot;更新成功！&quot;</span>, user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/user/&#123;id&#125;&quot;, method = RequestMethod.DELETE)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> JsonResult <span class="title function_">deleteById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">JsonResult</span>(<span class="number">200</span>, id + <span class="string">&quot;删除成功！&quot;</span>, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(value = &quot;/user/&#123;id&#125;&quot;, method = RequestMethod.GET)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> JsonResult <span class="title function_">findById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">JsonResult</span>(<span class="number">200</span>, id + <span class="string">&quot;查找成功！&quot;</span>, <span class="keyword">new</span> <span class="title class_">User</span>());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="简化"><a href="#简化" class="headerlink" title="简化"></a>简化</h3><p>通过上面的代码发现有很多重复的地方，写起来非常繁琐，可以简化为如下</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.example.domain.JsonResult;</span><br><span class="line"><span class="keyword">import</span> org.example.domain.User;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 用户控制器</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/11 16:32:22</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// 让Spring容器进行管理</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="comment">// 表示所有的方法都将返回结果作为响应体</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="comment">// 将url公共部分提取出来，即url前缀</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="keyword">public</span> JsonResult <span class="title function_">save</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">JsonResult</span>(<span class="number">200</span>, <span class="string">&quot;保存成功！&quot;</span>, user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PutMapping</span></span><br><span class="line">    <span class="keyword">public</span> JsonResult <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">JsonResult</span>(<span class="number">200</span>, <span class="string">&quot;更新成功！&quot;</span>, user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> JsonResult <span class="title function_">deleteById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">JsonResult</span>(<span class="number">200</span>, id + <span class="string">&quot;删除成功！&quot;</span>, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> JsonResult <span class="title function_">findById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">JsonResult</span>(<span class="number">200</span>, id + <span class="string">&quot;查找成功！&quot;</span>, <span class="keyword">new</span> <span class="title class_">User</span>());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>其中<code>@Controller</code>注解可以与<code>@ResponseBody</code>注解融合成一个注解，即<code>@RestController</code>，最终简化如下</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.example.domain.JsonResult;</span><br><span class="line"><span class="keyword">import</span> org.example.domain.User;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 用户控制器</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/11 16:32:22</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// 表示所有的方法都将返回结果作为响应体，并让Spring容器进行管理</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="comment">// 将url公共部分提取出来，即url前缀</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="keyword">public</span> JsonResult <span class="title function_">save</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">JsonResult</span>(<span class="number">200</span>, <span class="string">&quot;保存成功！&quot;</span>, user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PutMapping</span></span><br><span class="line">    <span class="keyword">public</span> JsonResult <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">JsonResult</span>(<span class="number">200</span>, <span class="string">&quot;更新成功！&quot;</span>, user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> JsonResult <span class="title function_">deleteById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">JsonResult</span>(<span class="number">200</span>, id + <span class="string">&quot;删除成功！&quot;</span>, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> JsonResult <span class="title function_">findById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">JsonResult</span>(<span class="number">200</span>, id + <span class="string">&quot;查找成功！&quot;</span>, <span class="keyword">new</span> <span class="title class_">User</span>());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>程序中会出现一系列的异常，我们不能保证能够捕获所有的异常，可以使用spring的aop为表现层的方法设置异常捕获切面</p><h3 id="创建异常通知"><a href="#创建异常通知" class="headerlink" title="创建异常通知"></a>创建异常通知</h3><p>创建org.example.controller.aop.ProjectExceptionAdvice异常通知类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.controller.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.example.domain.JsonResult;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ExceptionHandler;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestControllerAdvice;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 异常处理</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/12 15:35:54</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 让springmvc将此类处理为异常通知，并将处理方法的返回值作为响应体</span></span><br><span class="line"><span class="meta">@RestControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProjectExceptionAdvice</span> &#123;</span><br><span class="line">    <span class="comment">// 处理所有异常</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(Exception.class)</span></span><br><span class="line">    <span class="keyword">public</span> JsonResult <span class="title function_">exceptionHandler</span><span class="params">(Exception exception)</span> &#123;</span><br><span class="line">        <span class="comment">// 表示处理所有的异常，并返回一个对象消息</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">JsonResult</span>(<span class="number">500</span>, exception.getMessage(), <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>重启服务将会开启全局异常处理</p><h3 id="细分异常"><a href="#细分异常" class="headerlink" title="细分异常"></a>细分异常</h3><p>通常我们会对不同层面的异常有不同的处理方案</p><p>例如如果因为用户的输入不正确导致的表现层异常那么我们就只需要提醒用户输入正确就行了</p><p>但是如果是系统异常，那么我们需要记录日志并且通知运维人员及时修复</p><p>如果是未知的系统异常，那么我们也需要记录日志并且通知程序员进行修复，如果不是程序员的错误，程序员只需要将此错误重新归类到系统异常或者业务异常就行了</p><h4 id="创建业务异常"><a href="#创建业务异常" class="headerlink" title="创建业务异常"></a>创建业务异常</h4><p>创建org.example.exception.BusinessException</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.exception;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 业务异常</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/12 15:47:56</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BusinessException</span> <span class="keyword">extends</span> <span class="title class_">RuntimeException</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer code;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BusinessException</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BusinessException</span><span class="params">(Integer code)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BusinessException</span><span class="params">(Integer code, String message)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(message);</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCode</span><span class="params">(Integer code)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="创建系统异常"><a href="#创建系统异常" class="headerlink" title="创建系统异常"></a>创建系统异常</h4><p>创建org.example.exception.SystemException</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.exception;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 系统异常</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/12 15:47:22</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SystemException</span> <span class="keyword">extends</span> <span class="title class_">RuntimeException</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer code;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SystemException</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SystemException</span><span class="params">(Integer code)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SystemException</span><span class="params">(Integer code, String message)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(message);</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCode</span><span class="params">(Integer code)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="添加异常处理"><a href="#添加异常处理" class="headerlink" title="添加异常处理"></a>添加异常处理</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.controller.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.example.domain.JsonResult;</span><br><span class="line"><span class="keyword">import</span> org.example.exception.BusinessException;</span><br><span class="line"><span class="keyword">import</span> org.example.exception.SystemException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ExceptionHandler;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestControllerAdvice;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 异常处理</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/12 15:35:54</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 让springmvc将此类处理为异常通知，并将处理方法的返回值作为响应体</span></span><br><span class="line"><span class="meta">@RestControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProjectExceptionAdvice</span> &#123;</span><br><span class="line">    <span class="comment">// 处理系统异常</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(SystemException.class)</span></span><br><span class="line">    <span class="keyword">public</span> JsonResult <span class="title function_">businessException</span><span class="params">(SystemException systemException)</span> &#123;</span><br><span class="line">        <span class="comment">// 记录日志</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 给运维发送邮件（消息）</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">JsonResult</span>(<span class="number">500</span>, <span class="string">&quot;系统繁忙，请稍后再试&quot;</span>, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 处理业务异常</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(BusinessException.class)</span></span><br><span class="line">    <span class="keyword">public</span> JsonResult <span class="title function_">businessException</span><span class="params">(BusinessException businessException)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">JsonResult</span>(<span class="number">400</span>, <span class="string">&quot;请不要使用违规操作&quot;</span>, <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 处理未知异常</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(Exception.class)</span></span><br><span class="line">    <span class="keyword">public</span> JsonResult <span class="title function_">exceptionHandler</span><span class="params">(Exception exception)</span> &#123;</span><br><span class="line">        <span class="comment">// 记录日志</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 给程序员发送邮件（消息）</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 返回一个对象消息</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">JsonResult</span>(<span class="number">500</span>, exception.getMessage(), <span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h4><p>写一个有异常的controller处理方法来进行测试</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping(&quot;/test/exception/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> JsonResult <span class="title function_">testException</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (id == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BusinessException</span>();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">SystemException</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>访问<code>http://127.0.0.1/user/test/exception/1</code>，出现以下结果</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="number">400</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;请不要使用违规操作&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>访问<code>http://127.0.0.1/user/test/exception/2</code>，出现以下结果</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="number">500</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;系统繁忙，请稍后再试&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="开放静态资源"><a href="#开放静态资源" class="headerlink" title="开放静态资源"></a>开放静态资源</h2><h3 id="创建支持类"><a href="#创建支持类" class="headerlink" title="创建支持类"></a>创建支持类</h3><p>创建org.example.config.SpringMvcSupport支持类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurationSupport;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 支持类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/12 16:09:08</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringMvcSupport</span> <span class="keyword">extends</span> <span class="title class_">WebMvcConfigurationSupport</span> &#123;</span><br><span class="line">    <span class="comment">// 增加资源处理器</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> &#123;</span><br><span class="line">        <span class="comment">// 表示将webapp目录下的pages目录下的所有文件都映射在/pages/**这个url地址中</span></span><br><span class="line">        registry.addResourceHandler(<span class="string">&quot;/pages/**&quot;</span>).addResourceLocations(<span class="string">&quot;/pages/&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="载入容器中"><a href="#载入容器中" class="headerlink" title="载入容器中"></a>载入容器中</h3><p>在org.example.config.SpringMvcConfig中添加扫描</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ComponentScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.EnableWebMvc;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> mvc配置类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/11 16:35:55</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// 让此类以配置类的角色交给Spring容器管理</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">// 配置控制器扫描</span></span><br><span class="line"><span class="meta">@ComponentScan(&#123;&quot;org.example.controller&quot;, &quot;org.example.config&quot;&#125;)</span></span><br><span class="line"><span class="comment">// 开启功能</span></span><br><span class="line"><span class="meta">@EnableWebMvc</span></span><br><span class="line"><span class="comment">// 载入支持配置</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringMvcConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在webapp文件夹下创建pages文件夹，在pages文件夹下创建一个index.html文件</p><p>访问<code>http://127.0.0.1/pages/index.html</code>即可获取到页面</p><h3 id="简化代码"><a href="#简化代码" class="headerlink" title="简化代码"></a>简化代码</h3><p>不需要创建名为org.example.config.SpringMvcSupport的支持类，直接在org.example.config.SpringMvcConfig中进行支持的编写</p><p>删除org.example.config.SpringMvcSupport类，并修改org.example.config.SpringMvcConfig配置类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ComponentScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.EnableWebMvc;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> mvc配置类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/11 16:35:55</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// 让此类以配置类的角色交给Spring容器管理</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">// 配置控制器扫描</span></span><br><span class="line"><span class="meta">@ComponentScan(&#123;&quot;org.example.controller&quot;&#125;)</span></span><br><span class="line"><span class="comment">// 开启功能</span></span><br><span class="line"><span class="meta">@EnableWebMvc</span></span><br><span class="line"><span class="comment">// 载入支持配置</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringMvcConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line">    <span class="comment">// 增加资源处理器</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> &#123;</span><br><span class="line">        <span class="comment">// 表示将webapp目录下的pages目录下的所有文件都映射在/pages/**这个url地址中</span></span><br><span class="line">        registry.addResourceHandler(<span class="string">&quot;/pages/**&quot;</span>).addResourceLocations(<span class="string">&quot;/pages/&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>访问<code>http://127.0.0.1/pages/index.html</code>依然可行</p><h2 id="拦截器"><a href="#拦截器" class="headerlink" title="拦截器"></a>拦截器</h2><h3 id="简介-1"><a href="#简介-1" class="headerlink" title="简介"></a>简介</h3><p>拦截器与过滤器有很大的区别，过滤器是servlet的技术，范围较大</p><p>而拦截器是SpringMVC的技术，范围较小，而且与SpringMVC配合起来更加灵活</p><h3 id="创建拦截器"><a href="#创建拦截器" class="headerlink" title="创建拦截器"></a>创建拦截器</h3><p>创建org.example.controller.interceptor.ProjectInterceptor拦截器类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.controller.interceptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 拦截器</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/12 16:05:02</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 交给SpringMVC容器管理</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProjectInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line">    <span class="comment">// 运行在控制器处理方法之前</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;preHandle&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 运行在控制器处理方法之后</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;postHandle&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 运行在控制器处理方法完成之后</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterCompletion&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="更新Spring配置"><a href="#更新Spring配置" class="headerlink" title="更新Spring配置"></a>更新Spring配置</h3><p>因为之前使用了支持的简化方法，所以在SpringMvcConfig配置类中添加拦截器支持</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.example.controller.interceptor.ProjectInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ComponentScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.EnableWebMvc;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.InterceptorRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> mvc配置类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/11 16:35:55</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// 让此类以配置类的角色交给Spring容器管理</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">// 配置控制器扫描</span></span><br><span class="line"><span class="meta">@ComponentScan(&#123;&quot;org.example.controller&quot;&#125;)</span></span><br><span class="line"><span class="comment">// 开启功能</span></span><br><span class="line"><span class="meta">@EnableWebMvc</span></span><br><span class="line"><span class="comment">// 载入支持配置</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringMvcConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line">    <span class="comment">// 自动注入容器中我们之前写的拦截器</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ProjectInterceptor projectInterceptor;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">        <span class="comment">// 表示匹配/user路径与/user/下所有的路径</span></span><br><span class="line">        <span class="comment">// 被匹配的路径就会按照编写的拦截器进行拦截</span></span><br><span class="line">        registry.addInterceptor(projectInterceptor).addPathPatterns(<span class="string">&quot;/user&quot;</span>,<span class="string">&quot;/user/**&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 增加资源处理器</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addResourceHandlers</span><span class="params">(ResourceHandlerRegistry registry)</span> &#123;</span><br><span class="line">        <span class="comment">// 表示将webapp目录下的pages目录下的所有文件都映射在/pages/**这个url地址中</span></span><br><span class="line">        registry.addResourceHandler(<span class="string">&quot;/pages/**&quot;</span>).addResourceLocations(<span class="string">&quot;/pages/&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>配置完成，访问<code>http://127.0.0.1/user</code>出现以下打印表示配置正确</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">preHandle</span><br><span class="line">postHandle</span><br><span class="line">afterCompletion</span><br></pre></td></tr></table></figure><h3 id="多个拦截器配置"><a href="#多个拦截器配置" class="headerlink" title="多个拦截器配置"></a>多个拦截器配置</h3><p>多个拦截器也是一样的步骤，先创建一个新的拦截器，然后再在Spring配置类中添加就行了，如：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">   <span class="comment">// 自动注入容器中我们之前写的拦截器</span></span><br><span class="line">   <span class="meta">@Autowired</span></span><br><span class="line">   <span class="keyword">private</span> ProjectInterceptor projectInterceptor;</span><br><span class="line"><span class="comment">// 创建的第二个拦截器</span></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">   <span class="keyword">private</span> ProjectInterceptor2 projectInterceptor2;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> &#123;</span><br><span class="line">       <span class="comment">// 表示匹配/user路径与/user/下所有的路径</span></span><br><span class="line">       <span class="comment">// 被匹配的路径就会按照编写的拦截器进行拦截</span></span><br><span class="line">       registry.addInterceptor(projectInterceptor).addPathPatterns(<span class="string">&quot;/user&quot;</span>,<span class="string">&quot;/user/**&quot;</span>);</span><br><span class="line">       <span class="comment">// 添加第二个拦截器规则，会形成包裹</span></span><br><span class="line">       registry.addInterceptor(projectInterceptor2).addPathPatterns(<span class="string">&quot;/user&quot;</span>,<span class="string">&quot;/user/**&quot;</span>);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h3 id="拦截器中的参数"><a href="#拦截器中的参数" class="headerlink" title="拦截器中的参数"></a>拦截器中的参数</h3><p>目前只列出了以下内容，还有更多的需要自己去探索</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.controller.interceptor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line"><span class="keyword">import</span> org.example.domain.JsonResult;</span><br><span class="line"><span class="keyword">import</span> org.example.domain.User;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.method.HandlerMethod;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.HandlerInterceptor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 拦截器</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/12 16:05:02</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 交给SpringMVC容器管理</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProjectInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line">    <span class="comment">// 运行在控制器处理方法之前</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// 获取请求头Content-Type的属性值</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">header</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;Content-Type&quot;</span>);</span><br><span class="line">        System.out.println(header);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取控制器对应的那个处理方法，也就是controller中的那个方法</span></span><br><span class="line">        <span class="type">HandlerMethod</span> <span class="variable">handlerMethod</span> <span class="operator">=</span> (HandlerMethod) handler;</span><br><span class="line">        <span class="comment">// 打印对应controller的类型</span></span><br><span class="line">        System.out.println(handlerMethod.getBeanType());</span><br><span class="line">        <span class="comment">// 执行对应controller中对应的方法</span></span><br><span class="line">        handlerMethod.getMethod().invoke(handlerMethod.getBean(), <span class="keyword">new</span> <span class="title class_">User</span>());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (request.getRequestURI().equals(<span class="string">&quot;/user&quot;</span>)) &#123;</span><br><span class="line">            response.setHeader(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;application/json&quot;</span>);</span><br><span class="line">            <span class="comment">// 获取写入响应体数据的流</span></span><br><span class="line">            <span class="type">PrintWriter</span> <span class="variable">writer</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">            <span class="comment">// 写入经jackson对象处理后的JsonResult的json字符串</span></span><br><span class="line">            writer.write(<span class="keyword">new</span> <span class="title class_">ObjectMapper</span>().writeValueAsString(<span class="keyword">new</span> <span class="title class_">JsonResult</span>(<span class="number">200</span>, <span class="string">&quot;please login first&quot;</span>, <span class="literal">null</span>)));</span><br><span class="line">            <span class="comment">// 刷新输出流</span></span><br><span class="line">            writer.flush();</span><br><span class="line">            <span class="comment">// 关闭输出流</span></span><br><span class="line">            writer.close();</span><br><span class="line">            <span class="comment">// 不再往后执行</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 放行</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 运行在控制器处理方法之后</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;postHandle&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 运行在控制器处理方法完成之后</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterCompletion&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 程序配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> spring </tag>
            
            <tag> mvc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring-MVC配置（二）</title>
      <link href="/posts/7c40f56/"/>
      <url>/posts/7c40f56/</url>
      
        <content type="html"><![CDATA[<h1 id="SpringMVC基础配置"><a href="#SpringMVC基础配置" class="headerlink" title="SpringMVC基础配置"></a>SpringMVC基础配置</h1><p>上一节已经将SpringMVC的框架搭好了，就不再多说</p><h2 id="接收参数"><a href="#接收参数" class="headerlink" title="接收参数"></a>接收参数</h2><h3 id="url中的参数"><a href="#url中的参数" class="headerlink" title="url中的参数"></a>url中的参数</h3><p>请求路径为<code>http://127.0.0.1/user/test?name=john&amp;age=10</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 请求的url地址</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user/test&quot;)</span></span><br><span class="line"><span class="comment">// 让方法返回的结果就作为响应的响应体，不做处理</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="comment">// @RequestParam表示它为请求中的一个参数单元，不使用value属性，那么变量名一样要与参数名相同</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">save</span><span class="params">(<span class="meta">@RequestParam(value = &quot;name&quot;)</span> String name,<span class="meta">@RequestParam(value = &quot;age&quot;)</span> Integer age)</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;name:&quot;</span> + name + <span class="string">&quot;,age:&quot;</span> + age);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;/user/test&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="表单中的参数"><a href="#表单中的参数" class="headerlink" title="表单中的参数"></a>表单中的参数</h3><p>与url中的参数的访问方式一样</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 请求的url地址</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user/test&quot;)</span></span><br><span class="line"><span class="comment">// 让方法返回的结果就作为响应的响应体，不做处理</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="comment">// @RequestParam表示它为请求中的一个参数单元，不使用value属性，那么变量名一样要与参数名相同</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">save</span><span class="params">(<span class="meta">@RequestParam(value = &quot;name&quot;)</span> String name,<span class="meta">@RequestParam(value = &quot;age&quot;)</span> Integer age)</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;name:&quot;</span> + name + <span class="string">&quot;,age:&quot;</span> + age);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;/user/test&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><p>请求路径为<code>http://127.0.0.1/user/test?likes=game&amp;likes=tv&amp;likes=reading</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 请求的url地址</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user/test&quot;)</span></span><br><span class="line"><span class="comment">// 让方法返回的结果就作为响应的响应体，不做处理</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="comment">// 如果使用list存储数组参数，那么一定要设置@RequsetParam</span></span><br><span class="line"><span class="comment">// 否则spring不会把list认为是一个参数，而是认为是用它的属性接收多个参数</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">save</span><span class="params">(<span class="meta">@RequestParam(value = &quot;likes&quot;)</span> List&lt;String&gt; likes)</span> &#123;</span><br><span class="line">    System.out.println(likes);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;/user/test&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="用对象的属性接收"><a href="#用对象的属性接收" class="headerlink" title="用对象的属性接收"></a>用对象的属性接收</h3><p>使用对象的属性接收，属性变量名必须与参数名相同，否则不会识别</p><p>请求路径为<code>http://127.0.0.1/user/test?name=john&amp;age=20&amp;balance=100&amp;gender=male&amp;address.province=sichuan&amp;address.city=chengdu</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 请求的url地址</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user/test&quot;)</span></span><br><span class="line"><span class="comment">// 让方法返回的结果就作为响应的响应体，不做处理</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="comment">// 使用user对象接收，参数名与对象的属性名需要一致</span></span><br><span class="line"><span class="comment">// 如果对象属性有引用类型，使用对象属性名.对象属性名进行传参</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">save</span><span class="params">(User user)</span> &#123;</span><br><span class="line">    System.out.println(user);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;/user/test&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>打印如下</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">User&#123;id=null, name=&#x27;john&#x27;, gender=&#x27;male&#x27;, age=20, phone=&#x27;null&#x27;, birthday=null, balance=100.0, address=Address&#123;province=&#x27;sichuan&#x27;, city=&#x27;chengdu&#x27;&#125;&#125;</span><br></pre></td></tr></table></figure><h3 id="接收时间类型的参数"><a href="#接收时间类型的参数" class="headerlink" title="接收时间类型的参数"></a>接收时间类型的参数</h3><p>请求路径为<code>http://127.0.0.1/user/test?date=2001/06/24</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 请求的url地址</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user/test&quot;)</span></span><br><span class="line"><span class="comment">// 让方法返回的结果就作为响应的响应体，不做处理</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="comment">// 使用@DateTimeFormat的pattern属性定义格式，将字符串转为日期类型</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">save</span><span class="params">(<span class="meta">@DateTimeFormat(pattern = &quot;yyyy/MM/dd&quot;)</span> Date date)</span> &#123;</span><br><span class="line">    System.out.println(date);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;/user/test&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>打印如下</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Sun Jun 24 00:00:00 CST 2001</span><br></pre></td></tr></table></figure><h2 id="全局配置"><a href="#全局配置" class="headerlink" title="全局配置"></a>全局配置</h2><h3 id="配置json数据的读取"><a href="#配置json数据的读取" class="headerlink" title="配置json数据的读取"></a>配置json数据的读取</h3><p>导入jackson坐标用于json处理</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- jackson坐标 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>在org.example.config.SpringMvcConfig中开启功能</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ComponentScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.EnableWebMvc;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> mvc配置类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/11 16:35:55</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// 让此类以配置类的角色交给Spring容器管理</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">// 配置控制器扫描</span></span><br><span class="line"><span class="meta">@ComponentScan(&#123;&quot;org.example.controller&quot;&#125;)</span></span><br><span class="line"><span class="comment">// 开启功能</span></span><br><span class="line"><span class="meta">@EnableWebMvc</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringMvcConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>设置json格式的请求，在json格式的请求体中写入以下信息</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;马昆&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;gender&quot;</span><span class="punctuation">:</span><span class="string">&quot;male&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">21</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;phone&quot;</span><span class="punctuation">:</span><span class="string">&quot;19960798888&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;birthday&quot;</span><span class="punctuation">:</span><span class="string">&quot;2001-06-24&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;balance&quot;</span><span class="punctuation">:</span><span class="number">100.00</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;province&quot;</span><span class="punctuation">:</span><span class="string">&quot;四川&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;city&quot;</span><span class="punctuation">:</span><span class="string">&quot;眉山&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>控制器接收</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 请求的url地址</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user/test&quot;)</span></span><br><span class="line"><span class="comment">// 让方法返回的结果就作为响应的响应体，不做处理</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="comment">// 使用@RequsetBody表示这是一个json格式的请求体</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">save</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> &#123;</span><br><span class="line">    System.out.println(user);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;/user/test&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="json格式数据的发送"><a href="#json格式数据的发送" class="headerlink" title="json格式数据的发送"></a>json格式数据的发送</h3><p>创建一个专属的消息类org.example.domain.JsonResult</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.domain;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> json格式的消息</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/12 14:27:51</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JsonResult</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer code;</span><br><span class="line">    <span class="keyword">private</span> String message;</span><br><span class="line">    <span class="keyword">private</span> Object data;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">JsonResult</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">JsonResult</span><span class="params">(Integer code, String message, Object data)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.message = message;</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;JsonResult&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;code=&quot;</span> + code +</span><br><span class="line">                <span class="string">&quot;, message=&#x27;&quot;</span> + message + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, data=&quot;</span> + data +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCode</span><span class="params">(Integer code)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getMessage</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> message;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setMessage</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.message = message;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getData</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setData</span><span class="params">(Object data)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>更改控制器方法的返回值</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 请求的url地址</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user/test&quot;)</span></span><br><span class="line"><span class="comment">// 让方法返回的结果就作为响应的响应体，不做处理</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="comment">// 使用@RequsetBody表示这是一个json格式的请求体</span></span><br><span class="line"><span class="comment">// 因为导入了jackson的坐标，并且使用@EnableWebMvc开启了功能</span></span><br><span class="line"><span class="comment">// 使用@ResponseBody会自动将对象转化为json字符串</span></span><br><span class="line"><span class="keyword">public</span> JsonResult <span class="title function_">save</span><span class="params">(<span class="meta">@RequestBody</span> User user)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">JsonResult</span>(<span class="number">200</span>, <span class="string">&quot;配置成功！&quot;</span>, user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果请求的格式正确，出现返回以下结果，时间格式传递的是一个时间戳</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="number">200</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;配置成功！&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;马昆&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;gender&quot;</span><span class="punctuation">:</span> <span class="string">&quot;male&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">21</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;phone&quot;</span><span class="punctuation">:</span> <span class="string">&quot;19960798888&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;birthday&quot;</span><span class="punctuation">:</span> <span class="number">993340800000</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;balance&quot;</span><span class="punctuation">:</span> <span class="number">100.0</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;province&quot;</span><span class="punctuation">:</span> <span class="string">&quot;四川&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;city&quot;</span><span class="punctuation">:</span> <span class="string">&quot;眉山&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="解析中文"><a href="#解析中文" class="headerlink" title="解析中文"></a>解析中文</h3><p>在请求体中增加中文字段，出现以下情况</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="number">200</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;配置成功！&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ä¸­æ&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>在org.example.config.ServletControllerInitConfig中添加过滤器</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 过滤器</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">protected</span> Filter[] getServletFilters() &#123;</span><br><span class="line">    <span class="comment">// springmvc有一个自带的处理字符的过滤器</span></span><br><span class="line">    <span class="type">CharacterEncodingFilter</span> <span class="variable">encodingFilter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CharacterEncodingFilter</span>();</span><br><span class="line">    <span class="comment">// 设置字符集</span></span><br><span class="line">    encodingFilter.setEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Filter</span>[]&#123;encodingFilter&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>重启服务再次访问，数据获取正常</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="number">200</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;配置成功！&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="string">&quot;中文&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 程序配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> spring </tag>
            
            <tag> mvc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringMVC配置（一）</title>
      <link href="/posts/68dff4af/"/>
      <url>/posts/68dff4af/</url>
      
        <content type="html"><![CDATA[<h1 id="SpringMVC基础配置"><a href="#SpringMVC基础配置" class="headerlink" title="SpringMVC基础配置"></a>SpringMVC基础配置</h1><h2 id="Spring-MVC"><a href="#Spring-MVC" class="headerlink" title="Spring-MVC"></a>Spring-MVC</h2><p>之前使用servlet来做表现层非常繁琐，使用spring-mvc能够让表现层的编写更简单</p><h2 id="创建Spring-MVC项目"><a href="#创建Spring-MVC项目" class="headerlink" title="创建Spring-MVC项目"></a>创建Spring-MVC项目</h2><h3 id="新建模块"><a href="#新建模块" class="headerlink" title="新建模块"></a>新建模块</h3><p>使用IntelliJ IDEA创建一个maven的web项目</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure/spring-mvc/image-20221211162042337.png" alt="image-20221211162042337"></p><h3 id="导入所需坐标"><a href="#导入所需坐标" class="headerlink" title="导入所需坐标"></a>导入所需坐标</h3><p>Spring-MVC需要<strong>spring-webmvc</strong>坐标，我这里使用<code>5.2.10.RELEASE</code>版本，导入<strong>sevlet</strong>坐标，我这里使用<code>3.1.0</code>，因为这里使用的servlet会和后面的tomcat冲突，所以需要配置作用域</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-webmvc --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/javax.servlet/javax.servlet-api --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="创建源码目录"><a href="#创建源码目录" class="headerlink" title="创建源码目录"></a>创建源码目录</h3><p>创建源码目录并增加controller包与config包</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure/spring-mvc/image-20221211163129855.png" alt="image-20221211163129855"></p><h3 id="创建控制器"><a href="#创建控制器" class="headerlink" title="创建控制器"></a>创建控制器</h3><p>创建org.example.controller.UserController控制器</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 用户控制器</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/11 16:32:22</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// 让Spring容器进行管理</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line">    <span class="comment">// 请求的url地址</span></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/user/save&quot;)</span></span><br><span class="line">    <span class="comment">// 让方法返回的结果就作为响应的响应体，不做处理</span></span><br><span class="line">    <span class="meta">@ResponseBody</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">save</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;/user/save&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;&#123;\&quot;username\&quot;:\&quot;John\&quot;&#125;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="创建配置类"><a href="#创建配置类" class="headerlink" title="创建配置类"></a>创建配置类</h3><p>创建org.example.config.SpringMVCConfig配置类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ComponentScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> mvc配置类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/11 16:35:55</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// 让此类以配置类的角色交给Spring容器管理</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">// 配置控制器扫描</span></span><br><span class="line"><span class="meta">@ComponentScan(&#123;&quot;org.example.controller&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringMVCConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>创建org.example.config.ServletControllerInitConfig配置类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.web.context.WebApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.context.support.AnnotationConfigWebApplicationContext;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.support.AbstractDispatcherServletInitializer;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> servlet初始化配置</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/11 16:38:54</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletControllerInitConfig</span> <span class="keyword">extends</span> <span class="title class_">AbstractDispatcherServletInitializer</span> &#123;</span><br><span class="line">    <span class="comment">// 配置Webapp的容器</span></span><br><span class="line">    <span class="keyword">protected</span> WebApplicationContext <span class="title function_">createServletApplicationContext</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">AnnotationConfigWebApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigWebApplicationContext</span>();</span><br><span class="line">        <span class="comment">// 配置容器的配置类</span></span><br><span class="line">        context.register(SpringMVCConfig.class);</span><br><span class="line">        <span class="keyword">return</span> context;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 配置哪些请求url交割springmvc处理</span></span><br><span class="line">    <span class="keyword">protected</span> String[] getServletMappings() &#123;</span><br><span class="line">        <span class="comment">// 表示将所有的请求都交割SpringMVC处理</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;/&quot;</span>&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 配置全局的容器</span></span><br><span class="line">    <span class="keyword">protected</span> WebApplicationContext <span class="title function_">createRootApplicationContext</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="配置Maven插件"><a href="#配置Maven插件" class="headerlink" title="配置Maven插件"></a>配置Maven插件</h3><p>配置maven的tomcat插件</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// 根节点下添加</span><br><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 配置tomcat插件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat.maven<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat7-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">port</span>&gt;</span>80<span class="tag">&lt;/<span class="name">port</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">path</span>&gt;</span>/<span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="运行配置"><a href="#运行配置" class="headerlink" title="运行配置"></a>运行配置</h3><p>配置IntelliJ IDEA运行调试配置</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure/spring-mvc/image-20221211165609106.png" alt="image-20221211165609106"></p><p>运行访问<code>http://127.0.0.1:80/user/save</code>出现以下结果表示成功</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure/spring-mvc/image-20221211172219107.png" alt="image-20221211172219107"></p>]]></content>
      
      
      <categories>
          
          <category> 程序配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> spring </tag>
            
            <tag> mvc </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>spring事务配置</title>
      <link href="/posts/580f6036/"/>
      <url>/posts/580f6036/</url>
      
        <content type="html"><![CDATA[<h1 id="Spring事务控制"><a href="#Spring事务控制" class="headerlink" title="Spring事务控制"></a>Spring事务控制</h1><h2 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h2><h3 id="什么是事务"><a href="#什么是事务" class="headerlink" title="什么是事务"></a>什么是事务</h3><p>在处理一件事情的时候，可能会涉及多个需要与数据库交互的操作，如果这件事中途出现问题，那么所有修改数据库的操作都应该撤回</p><p>这一件事情就是事务，我们希望处理一件事时，修改数据库的操作要么一起成功或者一起失败（也有可能部分一定要成功，如日志功能）</p><h2 id="配置事务管理"><a href="#配置事务管理" class="headerlink" title="配置事务管理"></a>配置事务管理</h2><h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><p>我们使用的DataSource是阿里云的Druid，使用的数据层访问框架是Mybatis，他们底层的事务控制都是JDBC，刚好Spring自带的事务控制也是使用的JDBC，所以不用导入新的坐标，直接往Spring容器中添加一个事务控制的实现类，然后使用它就行了。</p><h3 id="创建事务管理的Bean"><a href="#创建事务管理的Bean" class="headerlink" title="创建事务管理的Bean"></a>创建事务管理的Bean</h3><p>在org.example.config.JdbcConfig配置类中添加一个叫做<strong>PlatformTransactionManager</strong>平台事务管理器的Bean</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.druid.pool.DruidDataSource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.jdbc.datasource.DataSourceTransactionManager;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.PlatformTransactionManager;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> jdbc配置类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/08 20:43:30</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JdbcConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.driver&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String driver;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.url&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.username&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.password&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DruidDataSource <span class="title function_">druidDataSource</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">DruidDataSource</span> <span class="variable">druidDataSource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">        druidDataSource.setDriverClassName(driver);</span><br><span class="line">        druidDataSource.setUrl(url);</span><br><span class="line">        druidDataSource.setUsername(username);</span><br><span class="line">        druidDataSource.setPassword(password);</span><br><span class="line">        <span class="keyword">return</span> druidDataSource;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> PlatformTransactionManager <span class="title function_">platformTransactionManager</span><span class="params">(DataSource dataSource)</span> &#123;</span><br><span class="line">        <span class="comment">// 创建它的实现类</span></span><br><span class="line">        <span class="type">DataSourceTransactionManager</span> <span class="variable">dataSourceTransactionManager</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DataSourceTransactionManager</span>();</span><br><span class="line">        <span class="comment">// 为它注入容器中的Datasource</span></span><br><span class="line">        dataSourceTransactionManager.setDataSource(dataSource);</span><br><span class="line">        <span class="keyword">return</span> dataSourceTransactionManager;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="配置事务"><a href="#配置事务" class="headerlink" title="配置事务"></a>配置事务</h3><p>指定哪些服务是需要事务的，将注释加在接口上，实现类上都可以，方法上也行</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.example.dao.UserDao;</span><br><span class="line"><span class="keyword">import</span> org.example.domain.User;</span><br><span class="line"><span class="keyword">import</span> org.example.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.Transactional;</span><br><span class="line"><span class="keyword">import</span> javax.annotation.PostConstruct;</span><br><span class="line"><span class="keyword">import</span> javax.annotation.PreDestroy;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> User服务实现类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/08 21:13:35</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="comment">// 自动装配</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 事务测试</span></span><br><span class="line">    <span class="meta">@Transactional</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">transfer</span><span class="params">(Integer reference, Integer dest, Double money)</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user1</span> <span class="operator">=</span> userDao.findById(reference);</span><br><span class="line">        user1.setBalance(user1.getBalance() - money);</span><br><span class="line">        <span class="comment">// 减钱</span></span><br><span class="line">        userDao.update(user1);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 创建一个异常</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span> / <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> userDao.findById(dest);</span><br><span class="line">        user2.setBalance(user2.getBalance() + money);</span><br><span class="line">        <span class="comment">// 加钱</span></span><br><span class="line">        userDao.update(user2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="开启事务注解"><a href="#开启事务注解" class="headerlink" title="开启事务注解"></a>开启事务注解</h3><p>在org.example.config.SpringConfig配置类中开启事务注解</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.transaction.annotation.EnableTransactionManagement;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> Spring配置类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/08 20:07:29</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// 表示这是一个配置类</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">// 表示需要扫描哪里，将有对应注解的类创建对象并添加到容器中</span></span><br><span class="line"><span class="meta">@ComponentScan(&#123;&quot;org.example.service&quot;,&quot;org.example.aop&quot;&#125;)</span></span><br><span class="line"><span class="comment">// 读取配置文件</span></span><br><span class="line"><span class="meta">@PropertySource(&#123;&quot;classpath:jdbc.properties&quot;&#125;)</span></span><br><span class="line"><span class="comment">// 导入jdbc配置类，Mybatis配置类</span></span><br><span class="line"><span class="meta">@Import(&#123;JdbcConfig.class, MybatisConfig.class&#125;)</span></span><br><span class="line"><span class="comment">// 开启切面自动代理</span></span><br><span class="line"><span class="meta">@EnableAspectJAutoProxy</span></span><br><span class="line"><span class="comment">// 开启事务注解</span></span><br><span class="line"><span class="meta">@EnableTransactionManagement</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="测试是否成功"><a href="#测试是否成功" class="headerlink" title="测试是否成功"></a>测试是否成功</h3><p>编写测试类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.example.config.SpringConfig;</span><br><span class="line"><span class="keyword">import</span> org.example.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.ContextConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringJUnit4ClassRunner;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/11 14:42:18</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="meta">@ContextConfiguration(classes = &#123;SpringConfig.class&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImplTest</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testTransfer</span><span class="params">()</span> &#123;</span><br><span class="line">        userService.transfer(<span class="number">1</span>,<span class="number">2</span>,<span class="number">50D</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果运行后，数据库中数据没有发生变换表示配置成功</p><h2 id="事务扩展使用"><a href="#事务扩展使用" class="headerlink" title="事务扩展使用"></a>事务扩展使用</h2><h3 id="事务角色"><a href="#事务角色" class="headerlink" title="事务角色"></a>事务角色</h3><ol><li>事务管理员：发起事务方</li><li>事务协调员：加入事务方</li></ol><p>事务有很多属性，可以百度一下，新手入门</p>]]></content>
      
      
      <categories>
          
          <category> 程序配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> spring </tag>
            
            <tag> transaction </tag>
            
            <tag> 事务 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring配置AOP</title>
      <link href="/posts/bb6d58d4/"/>
      <url>/posts/bb6d58d4/</url>
      
        <content type="html"><![CDATA[<h1 id="Spring配置面向切面编程"><a href="#Spring配置面向切面编程" class="headerlink" title="Spring配置面向切面编程"></a>Spring配置面向切面编程</h1><h2 id="AOP"><a href="#AOP" class="headerlink" title="AOP"></a>AOP</h2><h3 id="什么是AOP"><a href="#什么是AOP" class="headerlink" title="什么是AOP"></a>什么是AOP</h3><p>我也是刚学，就说一下我的个人理解，肯定是有点儿问题的</p><p>AOP就是面向切面编程英文的缩写，它的目的就是用来增强已经开发好的功能的，并且不用更改之前的功能代码</p><p>AOP的概念中有一些名词，我的解释有些模糊</p><ol><li>连接点<ol><li>在Spring的AOP中，连接点就是一个类中所有的方法</li></ol></li><li>切入点<ol><li>就是你需要增强的方法</li></ol></li><li>通知<ol><li>需要增强的功能</li></ol></li><li>切面<ol><li>是通知与切入点的关系</li></ol></li></ol><h3 id="如何实现的"><a href="#如何实现的" class="headerlink" title="如何实现的"></a>如何实现的</h3><p>配置好规则后，Spring会将需要增强的类的bean替换成代理对象，使用的其实是代理类，不是目标对象</p><h2 id="在Spring中配置AOP"><a href="#在Spring中配置AOP" class="headerlink" title="在Spring中配置AOP"></a>在Spring中配置AOP</h2><h3 id="导入所需要的坐标"><a href="#导入所需要的坐标" class="headerlink" title="导入所需要的坐标"></a>导入所需要的坐标</h3><p>spring-aop在导入spring-context坐标时就已经被包含在其中了，所以不用导此坐标</p><p>还需要一个面向切面编程的实现包，导入<strong>aspectjweaver</strong>坐标，我使用的是<code>1.9.6</code>版本</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.aspectj/aspectjweaver --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="创建切面类"><a href="#创建切面类" class="headerlink" title="创建切面类"></a>创建切面类</h3><p>创建org.example.aop.MyAspect切面类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Aspect;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Before;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Pointcut;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 我的切面</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/09 12:48:26</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// 让Spring将通知装入容器中</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="comment">// 将类声明为切面，让Spring识别里面与切面相关的的注解</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAspect</span> &#123;</span><br><span class="line">    <span class="comment">// 定义切入点，表示匹配org.example.service.impl.UserServiceImpl类中所有为find前缀的public方法，不管形参有多少</span></span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(public * org.example.service.impl.UserServiceImpl.find*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">servicePointCut</span><span class="params">()</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 定义前置通知，配置设置好的切入点</span></span><br><span class="line">    <span class="meta">@Before(&quot;MyAspect.servicePointCut()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;我是前置通知&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="增加一些配置"><a href="#增加一些配置" class="headerlink" title="增加一些配置"></a>增加一些配置</h3><p>在SpringConfig配置类中添加org.example.aop包的扫描，并开启切面自动代理</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> Spring配置类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/08 20:07:29</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// 表示这是一个配置类</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">// 表示需要扫描哪里，将有对应注解的类创建对象并添加到容器中</span></span><br><span class="line"><span class="meta">@ComponentScan(&#123;&quot;org.example.service&quot;,&quot;org.example.aop&quot;&#125;)</span></span><br><span class="line"><span class="comment">// 读取配置文件</span></span><br><span class="line"><span class="meta">@PropertySource(&#123;&quot;classpath:jdbc.properties&quot;&#125;)</span></span><br><span class="line"><span class="comment">// 导入jdbc配置类，Mybatis配置类</span></span><br><span class="line"><span class="meta">@Import(&#123;JdbcConfig.class, MybatisConfig.class&#125;)</span></span><br><span class="line"><span class="comment">// 开启切面自动代理</span></span><br><span class="line"><span class="meta">@EnableAspectJAutoProxy</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="测试是否成功"><a href="#测试是否成功" class="headerlink" title="测试是否成功"></a>测试是否成功</h3><p>运行启动类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.example.config.SpringConfig;</span><br><span class="line"><span class="keyword">import</span> org.example.domain.User;</span><br><span class="line"><span class="keyword">import</span> org.example.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.AnnotationConfigApplicationContext;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">( String[] args )</span> &#123;</span><br><span class="line">        <span class="comment">// 创建Spring容器的上下文，并传入我们的配置类</span></span><br><span class="line">        <span class="type">AnnotationConfigApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);</span><br><span class="line">        <span class="comment">// 获取容器中的UsrServiceImpl</span></span><br><span class="line">        <span class="type">UserService</span> <span class="variable">service</span> <span class="operator">=</span> context.getBean(UserService.class);</span><br><span class="line">        <span class="comment">// 查找所有用户</span></span><br><span class="line">        List&lt;User&gt; users = service.findAll();</span><br><span class="line">        <span class="comment">// 打印所有用户</span></span><br><span class="line">        System.out.println(users);</span><br><span class="line">        <span class="comment">// 关闭钩子</span></span><br><span class="line">        context.registerShutdownHook();</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        * 关闭</span></span><br><span class="line"><span class="comment">        * context.close();</span></span><br><span class="line"><span class="comment">        * */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果执行了前置通知方法表示配置正确，以下是我的输出</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">UserServiceImpl被创建了</span><br><span class="line">我是前置通知</span><br><span class="line">十二月 09, 2022 1:14:44 下午 com.alibaba.druid.support.logging.JakartaCommonsLoggingImpl info</span><br><span class="line">信息: &#123;dataSource-1&#125; inited</span><br><span class="line">[User&#123;id=1, name=&#x27;马昆&#x27;, gender=&#x27;male&#x27;, age=18, phone=&#x27;19960796404&#x27;, birthday=2001-06-24&#125;, User&#123;id=2, name=&#x27;马强&#x27;, gender=&#x27;female&#x27;, age=23, phone=&#x27;18328195555&#x27;, birthday=1999-09-24&#125;, User&#123;id=3, name=&#x27;罗海人&#x27;, gender=&#x27;female&#x27;, age=22, phone=&#x27;13547682222&#x27;, birthday=2000-11-03&#125;]</span><br><span class="line">UserServiceImpl要被销毁了</span><br></pre></td></tr></table></figure><h2 id="常用的一些通知"><a href="#常用的一些通知" class="headerlink" title="常用的一些通知"></a>常用的一些通知</h2><p>所有案例</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.JoinPoint;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.ProceedingJoinPoint;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.Signature;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> 我的切面</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/09 12:48:26</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// 让Spring将通知装入容器中</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="comment">// 将类声明为切面，让Spring识别里面与切面相关的的注解</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAspect</span> &#123;</span><br><span class="line">    <span class="comment">// 定义切入点匹配规则，表示匹配org.example.service.impl.UserServiceImpl类中所有为find前缀的public方法，不管形参有多少</span></span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(public * org.example.service.impl.UserServiceImpl.find*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">servicePointCut</span><span class="params">()</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 定义切入点匹配规则，用来测试我的后置异常通知</span></span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(public void org.example.service.impl.UserServiceImpl.testException())&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">serviceExceptionPointCut</span><span class="params">()</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 定义前置通知，配置设置好的切入点匹配规则</span></span><br><span class="line">    <span class="meta">@Before(&quot;MyAspect.servicePointCut()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;我是前置通知&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 定义后置通知</span></span><br><span class="line">    <span class="meta">@After(&quot;MyAspect.servicePointCut()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;我是后置通知&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 定义环绕通知</span></span><br><span class="line">    <span class="meta">@Around(&quot;MyAspect.servicePointCut()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">around</span><span class="params">(ProceedingJoinPoint proceedingJoinPoint)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="comment">// 用于获取切入点方法的签名</span></span><br><span class="line">        <span class="type">Signature</span> <span class="variable">signature</span> <span class="operator">=</span> proceedingJoinPoint.getSignature();</span><br><span class="line">        <span class="comment">// 获取方法的类名</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">declaringTypeName</span> <span class="operator">=</span> signature.getDeclaringTypeName();</span><br><span class="line">        <span class="comment">// 获取方法名</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> signature.getName();</span><br><span class="line">        <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="comment">// 使用此方法执行切入点的方法</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> proceedingJoinPoint.proceed();</span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="comment">// 打印方法执行花费时间</span></span><br><span class="line">        System.out.println(declaringTypeName + <span class="string">&quot;.&quot;</span> + name + <span class="string">&quot;使用了&quot;</span> + (end - start) + <span class="string">&quot;ms&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 定义后置返回通知，将返回结果与形参绑定，如果使用JoinPoint，那么一定要放在第一个形参</span></span><br><span class="line">    <span class="meta">@AfterReturning(value = &quot;MyAspect.servicePointCut()&quot;, returning = &quot;result&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">afterReturn</span><span class="params">(JoinPoint joinPoint, Object result)</span> &#123;</span><br><span class="line">        <span class="type">Signature</span> <span class="variable">signature</span> <span class="operator">=</span> joinPoint.getSignature();</span><br><span class="line">        System.out.println(<span class="string">&quot;这是&quot;</span> + signature.getName() + <span class="string">&quot;方法&quot;</span>);</span><br><span class="line">        System.out.println(result);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 定义后置返回通知，将异常结果与形参绑定，如果使用JoinPoint，那么还是需要放在形参的第一个位置</span></span><br><span class="line">    <span class="meta">@AfterThrowing(value = &quot;MyAspect.serviceExceptionPointCut()&quot;, throwing = &quot;throwable&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterException</span><span class="params">(JoinPoint joinPoint, Throwable throwable)</span> &#123;</span><br><span class="line">        System.out.println(joinPoint.getSignature().getName() + <span class="string">&quot;发生了&quot;</span> + throwable.getMessage() + <span class="string">&quot;异常&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="前置通知"><a href="#前置通知" class="headerlink" title="前置通知"></a>前置通知</h3><p>用于切入点方法执行前</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义前置通知，配置设置好的切入点匹配规则</span></span><br><span class="line"><span class="meta">@Before(&quot;MyAspect.servicePointCut()&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;我是前置通知&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="后置通知"><a href="#后置通知" class="headerlink" title="后置通知"></a>后置通知</h3><p>用于切入点方法执行后</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义后置通知</span></span><br><span class="line"><span class="meta">@After(&quot;MyAspect.servicePointCut()&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;我是后置通知&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="环绕通知"><a href="#环绕通知" class="headerlink" title="环绕通知"></a>环绕通知</h3><p><strong>这个通知非常常用</strong></p><p>用于包裹住切入点方法的执行</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义环绕通知</span></span><br><span class="line"><span class="meta">@Around(&quot;MyAspect.servicePointCut()&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">around</span><span class="params">(ProceedingJoinPoint proceedingJoinPoint)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">    <span class="comment">// 用于获取切入点方法的签名</span></span><br><span class="line">    <span class="type">Signature</span> <span class="variable">signature</span> <span class="operator">=</span> proceedingJoinPoint.getSignature();</span><br><span class="line">    <span class="comment">// 获取方法的类名</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">declaringTypeName</span> <span class="operator">=</span> signature.getDeclaringTypeName();</span><br><span class="line">    <span class="comment">// 获取方法名</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> signature.getName();</span><br><span class="line">    <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    <span class="comment">// 使用此方法执行切入点的方法</span></span><br><span class="line">    <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> proceedingJoinPoint.proceed();</span><br><span class="line">    <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">    <span class="comment">// 打印方法执行花费时间</span></span><br><span class="line">    System.out.println(declaringTypeName + <span class="string">&quot;.&quot;</span> + name + <span class="string">&quot;使用了&quot;</span> + (end - start) + <span class="string">&quot;ms&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="后置返回通知"><a href="#后置返回通知" class="headerlink" title="后置返回通知"></a>后置返回通知</h3><p>用于方法执行完成后</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义后置返回通知，将返回结果与形参绑定，如果使用JoinPoint，那么一定要放在第一个形参</span></span><br><span class="line"><span class="meta">@AfterReturning(value = &quot;MyAspect.servicePointCut()&quot;, returning = &quot;result&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Object <span class="title function_">afterReturn</span><span class="params">(JoinPoint joinPoint, Object result)</span> &#123;</span><br><span class="line">    <span class="type">Signature</span> <span class="variable">signature</span> <span class="operator">=</span> joinPoint.getSignature();</span><br><span class="line">    System.out.println(<span class="string">&quot;这是&quot;</span> + signature.getName() + <span class="string">&quot;方法&quot;</span>);</span><br><span class="line">    System.out.println(result);</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="后置异常通知"><a href="#后置异常通知" class="headerlink" title="后置异常通知"></a>后置异常通知</h3><p>用于方法抛出异常后</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义后置返回通知，将异常结果与形参绑定，如果使用JoinPoint，那么还是需要放在形参的第一个位置</span></span><br><span class="line"><span class="meta">@AfterThrowing(value = &quot;MyAspect.serviceExceptionPointCut()&quot;, throwing = &quot;throwable&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterException</span><span class="params">(JoinPoint joinPoint, Throwable throwable)</span> &#123;</span><br><span class="line">    System.out.println(joinPoint.getSignature().getName() + <span class="string">&quot;发生了&quot;</span> + throwable.getMessage() + <span class="string">&quot;异常&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>需要定义一个会抛异常的切入点</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testException</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span> / <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="执行结果"><a href="#执行结果" class="headerlink" title="执行结果"></a>执行结果</h3><p>配置上述所有的通知后，执行启动类代码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.example.config.SpringConfig;</span><br><span class="line"><span class="keyword">import</span> org.example.domain.User;</span><br><span class="line"><span class="keyword">import</span> org.example.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.AnnotationConfigApplicationContext;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">( String[] args )</span> &#123;</span><br><span class="line">        <span class="comment">// 创建Spring容器的上下文，并传入我们的配置类</span></span><br><span class="line">        <span class="type">AnnotationConfigApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);</span><br><span class="line">        <span class="comment">// 获取容器中的UsrServiceImpl</span></span><br><span class="line">        <span class="type">UserService</span> <span class="variable">service</span> <span class="operator">=</span> context.getBean(UserService.class);</span><br><span class="line">        <span class="comment">// 查找所有用户</span></span><br><span class="line">        List&lt;User&gt; users = service.findAll();</span><br><span class="line">        <span class="comment">// 测试后置异常通知</span></span><br><span class="line">        service.testException();</span><br><span class="line">        <span class="comment">// 关闭钩子</span></span><br><span class="line">        context.registerShutdownHook();</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        * 关闭</span></span><br><span class="line"><span class="comment">        * context.close();</span></span><br><span class="line"><span class="comment">        * */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>执行结果如下</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">UserServiceImpl被创建了</span><br><span class="line">我是前置通知</span><br><span class="line">十二月 09, 2022 1:47:51 下午 com.alibaba.druid.support.logging.JakartaCommonsLoggingImpl info</span><br><span class="line">信息: &#123;dataSource-1&#125; inited</span><br><span class="line">这是findAll方法</span><br><span class="line">[User&#123;id=1, name=&#x27;马昆&#x27;, gender=&#x27;male&#x27;, age=18, phone=&#x27;19960796404&#x27;, birthday=2001-06-24&#125;, User&#123;id=2, name=&#x27;马强&#x27;, gender=&#x27;female&#x27;, age=23, phone=&#x27;18328195555&#x27;, birthday=1999-09-24&#125;, User&#123;id=3, name=&#x27;罗海人&#x27;, gender=&#x27;female&#x27;, age=22, phone=&#x27;13547682222&#x27;, birthday=2000-11-03&#125;]</span><br><span class="line">我是后置通知</span><br><span class="line">org.example.service.UserService.findAll使用了222ms</span><br><span class="line">testException发生了/ by zero异常</span><br><span class="line">Exception in thread &quot;main&quot; java.lang.ArithmeticException: / by zero</span><br><span class="line">at org.example.service.impl.UserServiceImpl.testException(UserServiceImpl.java:47)</span><br><span class="line">at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line">at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)</span><br><span class="line">at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)</span><br><span class="line">at java.lang.reflect.Method.invoke(Method.java:498)</span><br><span class="line">at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)</span><br><span class="line">at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198)</span><br><span class="line">at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)</span><br><span class="line">at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:64)</span><br><span class="line">at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)</span><br><span class="line">at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)</span><br><span class="line">at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)</span><br><span class="line">at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)</span><br><span class="line">at com.sun.proxy.<span class="built_in">$</span>Proxy37.testException(Unknown Source)</span><br><span class="line">at org.example.App.main(App.java:18)</span><br><span class="line"></span><br><span class="line">进程已结束,退出代码1</span><br></pre></td></tr></table></figure><h2 id="切入点的匹配规则"><a href="#切入点的匹配规则" class="headerlink" title="切入点的匹配规则"></a>切入点的匹配规则</h2><ol><li><code>*</code>表示单位内随意</li><li><code>..</code>表示任意个随意</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义切入点匹配规则，表示匹配org.example.service.impl.UserServiceImpl类中所有为find前缀的public方法，不管形参有多少</span></span><br><span class="line"><span class="meta">@Pointcut(&quot;execution(public * org.example.service.impl.UserServiceImpl.find*(..))&quot;)</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">servicePointCut</span><span class="params">()</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 表示匹配所有为find开头的方法</span></span><br><span class="line"><span class="meta">@Pointcut(&quot;execution(* * ..find*(..))&quot;)</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">servicePointCut</span><span class="params">()</span> &#123;&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 程序配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
            <tag> AOP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring配置Mybatis与Junit</title>
      <link href="/posts/bf28c670/"/>
      <url>/posts/bf28c670/</url>
      
        <content type="html"><![CDATA[<h1 id="在Maven中配置Sping与Mybatis和Junit的整合"><a href="#在Maven中配置Sping与Mybatis和Junit的整合" class="headerlink" title="在Maven中配置Sping与Mybatis和Junit的整合"></a>在Maven中配置Sping与Mybatis和Junit的整合</h1><h2 id="创建Maven项目"><a href="#创建Maven项目" class="headerlink" title="创建Maven项目"></a>创建Maven项目</h2><p><strong>使用Intellij IDEA快速创建Maven项目</strong></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure/spring-mybatis-junit/image-20221208194747004.png" alt="image-20221208194747004"></p><p><strong>配置好后会自动加上Junit的坐标，但是版本较老，后面会更换</strong></p><p>测试目录也自动生成了，并且有自带的启动入口</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure/spring-mybatis-junit/image-20221208195351476.png" alt="image-20221208195351476"></p><h2 id="配置Spring"><a href="#配置Spring" class="headerlink" title="配置Spring"></a>配置Spring</h2><h3 id="导入Spring坐标"><a href="#导入Spring坐标" class="headerlink" title="导入Spring坐标"></a>导入Spring坐标</h3><p>可以到一个<a href="https://mvnrepository.com/">特别方便的网站</a>来检索你需要的Maven坐标，我们这里先搜索<strong>spring-context</strong></p><p>选择第一个搜索到的结果，我这里选择的是<code>5.3.18</code>版本</p><p>进去后复制<strong>Maven坐标</strong>，粘贴到项目的pom.xml的dependencies节点下，然后刷新Maven</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-context --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.18<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="创建实体类"><a href="#创建实体类" class="headerlink" title="创建实体类"></a>创建实体类</h3><p>创建一个实体类，对应你数据库的表，我数据库中的表格式如下</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">+----+-----------+--------+-----+-------------+------------+</span><br><span class="line">| id | name      | gender | age | phone       | birthday   |</span><br><span class="line">+----+-----------+--------+-----+-------------+------------+</span><br><span class="line">|  1 | 马昆      | male   |  18 | 19960790000 | 2001-06-24 |</span><br><span class="line">|  2 | 马强      | female |  23 | 18328195555 | 1999-09-24 |</span><br><span class="line">|  3 | 罗海人    | female |  22 | 13547682222 | 2000-11-03 |</span><br><span class="line">+----+-----------+--------+-----+-------------+------------+</span><br></pre></td></tr></table></figure><p>实体类我是创建在org.example.domain包下的，可以先给User类添加上<code>@component</code>注解，用于后面测试Spring，代码如下</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Date;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> User实体类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/08 20:03:13</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String gender;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, gender=&#x27;&quot;</span> + gender + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&quot;, phone=&#x27;&quot;</span> + phone + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, birthday=&quot;</span> + birthday +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getGender</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> gender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGender</span><span class="params">(String gender)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.gender = gender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(Integer age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPhone</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> phone;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPhone</span><span class="params">(String phone)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.phone = phone;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Date <span class="title function_">getBirthday</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBirthday</span><span class="params">(Date birthday)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.birthday = birthday;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="创建Spring配置类"><a href="#创建Spring配置类" class="headerlink" title="创建Spring配置类"></a>创建Spring配置类</h3><p>在org.example.config包下创建SpringConfig配置类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ComponentScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> Spring配置类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/08 20:07:29</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// 表示这是一个配置类</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">// 表示需要扫描哪里，将有对应注解的类创建对象并添加到容器中</span></span><br><span class="line"><span class="meta">@ComponentScan(&#123;&quot;org.example.domain&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="测试是否成功"><a href="#测试是否成功" class="headerlink" title="测试是否成功"></a>测试是否成功</h3><p>清理App启动类中的代码，并测试Spring是否配置好</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.example.config.SpringConfig;</span><br><span class="line"><span class="keyword">import</span> org.example.domain.User;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.AnnotationConfigApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">( String[] args )</span> &#123;</span><br><span class="line">        <span class="comment">// 创建Spring容器的上下文，并传入我们的配置类</span></span><br><span class="line">        <span class="type">AnnotationConfigApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);</span><br><span class="line">        <span class="comment">// 获取容器中的User</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> context.getBean(User.class);</span><br><span class="line">        <span class="comment">// 看是否新建成功</span></span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行后如果是以下结果表示配置成功</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">User&#123;id=null, name=&#x27;null&#x27;, gender=&#x27;null&#x27;, age=null, phone=&#x27;null&#x27;, birthday=null&#125;</span><br></pre></td></tr></table></figure><h2 id="配置阿里Druid数据源"><a href="#配置阿里Druid数据源" class="headerlink" title="配置阿里Druid数据源"></a>配置阿里Druid数据源</h2><h3 id="导入Druid的坐标"><a href="#导入Druid的坐标" class="headerlink" title="导入Druid的坐标"></a>导入Druid的坐标</h3><p>在那个网站搜索<strong>mysql connector java</strong>，我使用的是<code>5.1.38</code>版本</p><p>在网站中搜索阿里的<strong>Druid</strong>连接池，我使用的是<code>1.1.10</code>版本</p><p>将这两个坐标加入到pom.xml中</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.38<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/com.alibaba/druid --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="创建配置文件"><a href="#创建配置文件" class="headerlink" title="创建配置文件"></a>创建配置文件</h3><p>在项目的<code>/src/main/</code>下创建resource文件夹，并表明为资源文件夹</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/configure/spring-mybatis-junit/image-20221208202635732.png" alt="image-20221208202635732"></p><p>在文件夹下创建<code>jdbc.properties</code>配置文件，填写你的数据库连接信息</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 选择mysql的官方驱动</span></span><br><span class="line"><span class="attr">jdbc.driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="comment"># 后面对应为主机，mysql服务端口，数据库名</span></span><br><span class="line"><span class="attr">jdbc.url</span>=<span class="string">jdbc:mysql://127.0.0.1:3306/test</span></span><br><span class="line"><span class="comment"># 数据库连接用户名</span></span><br><span class="line"><span class="attr">jdbc.username</span>=<span class="string">manager</span></span><br><span class="line"><span class="comment"># 用户密码</span></span><br><span class="line"><span class="attr">jdbc.password</span>=<span class="string">mk123456</span></span><br></pre></td></tr></table></figure><p>在org.example.config.SpringConfig中配置jdbc.properties的读取</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ComponentScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.PropertySource;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> Spring配置类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/08 20:07:29</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// 表示这是一个配置类</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">// 表示需要扫描哪里，将有对应注解的类创建对象并添加到容器中</span></span><br><span class="line"><span class="meta">@ComponentScan(&#123;&quot;org.example.domain&quot;&#125;)</span></span><br><span class="line"><span class="comment">// 读取配置文件</span></span><br><span class="line"><span class="meta">@PropertySource(&#123;&quot;classpath:jdbc.properties&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="创建JDBC配置类"><a href="#创建JDBC配置类" class="headerlink" title="创建JDBC配置类"></a>创建JDBC配置类</h3><p>创建org.example.config.JdbcConfig配置类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.druid.pool.DruidDataSource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> jdbc配置类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/08 20:43:30</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JdbcConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.driver&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String driver;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.url&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.username&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.password&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DruidDataSource <span class="title function_">druidDataSource</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">DruidDataSource</span> <span class="variable">druidDataSource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">        druidDataSource.setDriverClassName(driver);</span><br><span class="line">        druidDataSource.setUrl(url);</span><br><span class="line">        druidDataSource.setUsername(username);</span><br><span class="line">        druidDataSource.setPassword(password);</span><br><span class="line">        <span class="keyword">return</span> druidDataSource;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在org.example.config.SpringConfig中导入jdbc的配置</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ComponentScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Import;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.PropertySource;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> Spring配置类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/08 20:07:29</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// 表示这是一个配置类</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">// 表示需要扫描哪里，将有对应注解的类创建对象并添加到容器中</span></span><br><span class="line"><span class="meta">@ComponentScan(&#123;&quot;org.example.domain&quot;&#125;)</span></span><br><span class="line"><span class="comment">// 读取配置文件</span></span><br><span class="line"><span class="meta">@PropertySource(&#123;&quot;classpath:jdbc.properties&quot;&#125;)</span></span><br><span class="line"><span class="comment">// 导入jdbc配置类</span></span><br><span class="line"><span class="meta">@Import(&#123;JdbcConfig.class&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="测试是否成功-1"><a href="#测试是否成功-1" class="headerlink" title="测试是否成功"></a>测试是否成功</h3><p>在org.example.App中添加一些代码，修改后的代码如下</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.example.config.SpringConfig;</span><br><span class="line"><span class="keyword">import</span> org.example.domain.User;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.AnnotationConfigApplicationContext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">( String[] args )</span> &#123;</span><br><span class="line">        <span class="comment">// 创建Spring容器的上下文，并传入我们的配置类</span></span><br><span class="line">        <span class="type">AnnotationConfigApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);</span><br><span class="line">        <span class="comment">// 获取容器中的User</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> context.getBean(User.class);</span><br><span class="line">        <span class="comment">// 看是否新建成功</span></span><br><span class="line">        System.out.println(user);</span><br><span class="line">        <span class="comment">// 获取容器中的DataSource</span></span><br><span class="line">        <span class="type">DataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> context.getBean(DataSource.class);</span><br><span class="line">        System.out.println(dataSource);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果运行打印如下结果表示配置成功</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">User&#123;id=null, name=&#x27;null&#x27;, gender=&#x27;null&#x27;, age=null, phone=&#x27;null&#x27;, birthday=null&#125;</span><br><span class="line">&#123;</span><br><span class="line">CreateTime:&quot;2022-12-08 20:49:46&quot;,</span><br><span class="line">ActiveCount:0,</span><br><span class="line">PoolingCount:0,</span><br><span class="line">CreateCount:0,</span><br><span class="line">DestroyCount:0,</span><br><span class="line">CloseCount:0,</span><br><span class="line">ConnectCount:0,</span><br><span class="line">Connections:[</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="配置Mybatis-Spring"><a href="#配置Mybatis-Spring" class="headerlink" title="配置Mybatis-Spring"></a>配置Mybatis-Spring</h2><h3 id="导入Mybatis所需坐标"><a href="#导入Mybatis所需坐标" class="headerlink" title="导入Mybatis所需坐标"></a>导入Mybatis所需坐标</h3><p>搜索<strong>spring-jdbc</strong>，我使用的是<code>5.3.18</code>版本</p><p>继续搜索<strong>mybatis</strong>，我使用的是<code>3.4.6</code>版本</p><p>还需要搜索Mybatis的Spring整合包，在网站搜索<strong>mybatis-spring</strong>，我使用的是<code>1.3.2</code>版本</p><p>将以上三个坐标添加到pom.xml中</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-jdbc --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.18<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis-spring --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="创建Mybatis配置类"><a href="#创建Mybatis配置类" class="headerlink" title="创建Mybatis配置类"></a>创建Mybatis配置类</h3><p>创建org.example.config.MybatisConfig配置类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.SqlSessionFactoryBean;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.mapper.MapperScannerConfigurer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> Mybatis配置类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/08 21:00:19</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisConfig</span> &#123;</span><br><span class="line">    <span class="comment">// 在属性中填写的应用类型参数，Spring会帮忙注入</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> SqlSessionFactoryBean <span class="title function_">sqlSessionFactoryBean</span><span class="params">(DataSource dataSource)</span> &#123;</span><br><span class="line">        <span class="type">SqlSessionFactoryBean</span> <span class="variable">sqlSessionFactoryBean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBean</span>();</span><br><span class="line">        <span class="comment">// 设置数据源</span></span><br><span class="line">        sqlSessionFactoryBean.setDataSource(dataSource);</span><br><span class="line">        <span class="comment">// 设置实体类的包</span></span><br><span class="line">        sqlSessionFactoryBean.setTypeAliasesPackage(<span class="string">&quot;org.example.domain&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> sqlSessionFactoryBean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MapperScannerConfigurer <span class="title function_">mapperScannerConfigurer</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">MapperScannerConfigurer</span> <span class="variable">mapperScannerConfigurer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MapperScannerConfigurer</span>();</span><br><span class="line">        <span class="comment">// 设置sql映射的包</span></span><br><span class="line">        mapperScannerConfigurer.setBasePackage(<span class="string">&quot;org.example.dao&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> mapperScannerConfigurer;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在SpringConfig配置类中导入Mybatis配置类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ComponentScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Import;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.PropertySource;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> Spring配置类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/08 20:07:29</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// 表示这是一个配置类</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">// 表示需要扫描哪里，将有对应注解的类创建对象并添加到容器中</span></span><br><span class="line"><span class="meta">@ComponentScan(&#123;&quot;org.example.domain&quot;&#125;)</span></span><br><span class="line"><span class="comment">// 读取配置文件</span></span><br><span class="line"><span class="meta">@PropertySource(&#123;&quot;classpath:jdbc.properties&quot;&#125;)</span></span><br><span class="line"><span class="comment">// 导入jdbc配置类，Mybatis配置类</span></span><br><span class="line"><span class="meta">@Import(&#123;JdbcConfig.class&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="创建持久层访问接口"><a href="#创建持久层访问接口" class="headerlink" title="创建持久层访问接口"></a>创建持久层访问接口</h3><p>创建org.example.dao.UserDao持久层访问接口</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Delete;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Insert;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Select;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Update;</span><br><span class="line"><span class="keyword">import</span> org.example.domain.User;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/08 20:06:28</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Insert(&quot;insert into t_user(name, gender, age, phone, birthday) values(#&#123;name&#125;,#&#123;gender&#125;,#&#123;age&#125;,#&#123;phone&#125;,#&#123;birthday&#125;)&quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(User account)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Delete(&quot;delete from t_user where id = #&#123;id&#125; &quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Update(&quot;update t_user set name = #&#123;name&#125; , gender = #&#123;gender&#125;, age = #&#123;age&#125;, phone = #&#123;phone&#125;, birthday = #&#123;birthday&#125; where id = #&#123;id&#125; &quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;select * from t_user&quot;)</span></span><br><span class="line">    List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;select * from t_user where id = #&#123;id&#125; &quot;)</span></span><br><span class="line">    User <span class="title function_">findById</span><span class="params">(Integer id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="创建服务类"><a href="#创建服务类" class="headerlink" title="创建服务类"></a>创建服务类</h3><p>创建org.example.service.UserService服务类接口</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.example.domain.User;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> User服务类接口</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/08 21:11:37</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(User account)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">    List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    User <span class="title function_">findById</span><span class="params">(Integer id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>创建org.example.service.impl.UserServiceImpl服务实现类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.example.dao.UserDao;</span><br><span class="line"><span class="keyword">import</span> org.example.domain.User;</span><br><span class="line"><span class="keyword">import</span> org.example.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> User服务实现类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/08 21:13:35</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="comment">// 自动装配</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(User account)</span> &#123;</span><br><span class="line">        userDao.save(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        userDao.deleteById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        userDao.update(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userDao.findAll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">findById</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userDao.findById(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>设置SpringConfig配置类的组件扫描选项，并删除用户类之前用于测试的<code>@Component</code>注解</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ComponentScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Import;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.PropertySource;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> Spring配置类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/08 20:07:29</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// 表示这是一个配置类</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">// 表示需要扫描哪里，将有对应注解的类创建对象并添加到容器中</span></span><br><span class="line"><span class="meta">@ComponentScan(&#123;&quot;org.example.service&quot;&#125;)</span></span><br><span class="line"><span class="comment">// 读取配置文件</span></span><br><span class="line"><span class="meta">@PropertySource(&#123;&quot;classpath:jdbc.properties&quot;&#125;)</span></span><br><span class="line"><span class="comment">// 导入jdbc配置类，Mybatis配置类</span></span><br><span class="line"><span class="meta">@Import(&#123;JdbcConfig.class, MybatisConfig.class&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="测试是否成功-2"><a href="#测试是否成功-2" class="headerlink" title="测试是否成功"></a>测试是否成功</h3><p>重新编写org.example.App主程序</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.example.config.SpringConfig;</span><br><span class="line"><span class="keyword">import</span> org.example.domain.User;</span><br><span class="line"><span class="keyword">import</span> org.example.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.AnnotationConfigApplicationContext;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">( String[] args )</span> &#123;</span><br><span class="line">        <span class="comment">// 创建Spring容器的上下文，并传入我们的配置类</span></span><br><span class="line">        <span class="type">AnnotationConfigApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);</span><br><span class="line">        <span class="comment">// 获取容器中的UsrServiceImpl</span></span><br><span class="line">        <span class="type">UserService</span> <span class="variable">service</span> <span class="operator">=</span> context.getBean(UserService.class);</span><br><span class="line">        <span class="comment">// 查找所有用户</span></span><br><span class="line">        List&lt;User&gt; users = service.findAll();</span><br><span class="line">        <span class="comment">// 打印所有用户</span></span><br><span class="line">        System.out.println(users);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>刚刚踩了一些坑</strong></p><ol><li>SpringConfig中没有导入所有的配置，导致有些对象没有加载到容器中</li><li>JdbcConfig中使用properties中的数据没有对应正确，导致数据库一直连接不上</li><li>JdbcConfig中DruidDataSource的set没有set正确，导致数据库连接不上</li></ol><p>解决以上的问题后，运行程序，能够打印出你数据库中的数据就算成功了，我的输入如下</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">十二月 08, 2022 9:41:39 下午 com.alibaba.druid.support.logging.JakartaCommonsLoggingImpl info</span><br><span class="line">信息: &#123;dataSource-1&#125; inited</span><br><span class="line">[User&#123;id=1, name=&#x27;马昆&#x27;, gender=&#x27;male&#x27;, age=18, phone=&#x27;19960796404&#x27;, birthday=2001-06-24&#125;, User&#123;id=2, name=&#x27;马强&#x27;, gender=&#x27;female&#x27;, age=23, phone=&#x27;18328195555&#x27;, birthday=1999-09-24&#125;, User&#123;id=3, name=&#x27;罗海人&#x27;, gender=&#x27;female&#x27;, age=22, phone=&#x27;13547682222&#x27;, birthday=2000-11-03&#125;]</span><br></pre></td></tr></table></figure><h2 id="配置Spring-test与Junit"><a href="#配置Spring-test与Junit" class="headerlink" title="配置Spring-test与Junit"></a>配置Spring-test与Junit</h2><h3 id="导入测试所需坐标"><a href="#导入测试所需坐标" class="headerlink" title="导入测试所需坐标"></a>导入测试所需坐标</h3><p><strong>先删除之前创建maven项目的时候自动生成的junit坐标</strong></p><p>在网站中搜索<strong>spring-test</strong>与<strong>junit</strong></p><p>我使用的版本分别是<code>5.3.18</code>与<code>4.12</code></p><p>将坐标导入到pom.xml中</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-test --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.18<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/junit/junit --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="配置测试类"><a href="#配置测试类" class="headerlink" title="配置测试类"></a>配置测试类</h3><p>重写<code>/src/test/java/</code>目录下org.example.AppTest测试类的代码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.example.config.SpringConfig;</span><br><span class="line"><span class="keyword">import</span> org.example.domain.User;</span><br><span class="line"><span class="keyword">import</span> org.example.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.ContextConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringJUnit4ClassRunner;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 配置类启动器</span></span><br><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="comment">// 设置Spring环境对应的配置类</span></span><br><span class="line"><span class="meta">@ContextConfiguration(classes = SpringConfig.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppTest</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFindById</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.findById(<span class="number">1</span>);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFindAll</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;User&gt; users = userService.findAll();</span><br><span class="line">        System.out.println(users);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>看是否输出正常，我的输出如下</p><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">十二月 08, 2022 10:07:06 下午 com.alibaba.druid.support.logging.JakartaCommonsLoggingImpl info</span><br><span class="line">信息: &#123;dataSource-1&#125; inited</span><br><span class="line">[User&#123;id=1, name=&#x27;马昆&#x27;, gender=&#x27;male&#x27;, age=18, phone=&#x27;19960796404&#x27;, birthday=2001-06-24&#125;, User&#123;id=2, name=&#x27;马强&#x27;, gender=&#x27;female&#x27;, age=23, phone=&#x27;18328195555&#x27;, birthday=1999-09-24&#125;, User&#123;id=3, name=&#x27;罗海人&#x27;, gender=&#x27;female&#x27;, age=22, phone=&#x27;13547682222&#x27;, birthday=2000-11-03&#125;]</span><br><span class="line">User&#123;id=1, name=&#x27;马昆&#x27;, gender=&#x27;male&#x27;, age=18, phone=&#x27;19960796404&#x27;, birthday=2001-06-24&#125;</span><br></pre></td></tr></table></figure><h2 id="完成后的所有内容"><a href="#完成后的所有内容" class="headerlink" title="完成后的所有内容"></a>完成后的所有内容</h2><p><strong>到此为止就已经完成了配置，项目所有的文件内容列在下边儿</strong></p><h3 id="main"><a href="#main" class="headerlink" title="main"></a>main</h3><h4 id="java"><a href="#java" class="headerlink" title="java"></a>java</h4><h5 id="org-example-config"><a href="#org-example-config" class="headerlink" title="org.example.config"></a>org.example.config</h5><p>JdbcConfig</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.druid.pool.DruidDataSource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> jdbc配置类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/08 20:43:30</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JdbcConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.driver&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String driver;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.url&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.username&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;jdbc.password&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DruidDataSource <span class="title function_">druidDataSource</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">DruidDataSource</span> <span class="variable">druidDataSource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">        druidDataSource.setDriverClassName(driver);</span><br><span class="line">        druidDataSource.setUrl(url);</span><br><span class="line">        druidDataSource.setUsername(username);</span><br><span class="line">        druidDataSource.setPassword(password);</span><br><span class="line">        <span class="keyword">return</span> druidDataSource;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>MybatisConfig</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.SqlSessionFactoryBean;</span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.mapper.MapperScannerConfigurer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> javax.sql.DataSource;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> Mybatis配置类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/08 21:00:19</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisConfig</span> &#123;</span><br><span class="line">    <span class="comment">// 在属性中填写的应用类型参数，Spring会帮忙注入</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> SqlSessionFactoryBean <span class="title function_">sqlSessionFactoryBean</span><span class="params">(DataSource dataSource)</span> &#123;</span><br><span class="line">        <span class="type">SqlSessionFactoryBean</span> <span class="variable">sqlSessionFactoryBean</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBean</span>();</span><br><span class="line">        <span class="comment">// 设置实体类的包</span></span><br><span class="line">        sqlSessionFactoryBean.setTypeAliasesPackage(<span class="string">&quot;org.example.domain&quot;</span>);</span><br><span class="line">        <span class="comment">// 设置数据源</span></span><br><span class="line">        sqlSessionFactoryBean.setDataSource(dataSource);</span><br><span class="line">        <span class="keyword">return</span> sqlSessionFactoryBean;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MapperScannerConfigurer <span class="title function_">mapperScannerConfigurer</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">MapperScannerConfigurer</span> <span class="variable">mapperScannerConfigurer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MapperScannerConfigurer</span>();</span><br><span class="line">        <span class="comment">// 设置sql映射的包</span></span><br><span class="line">        mapperScannerConfigurer.setBasePackage(<span class="string">&quot;org.example.dao&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> mapperScannerConfigurer;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>SpringConfig</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.ComponentScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Import;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.PropertySource;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> Spring配置类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/08 20:07:29</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// 表示这是一个配置类</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="comment">// 表示需要扫描哪里，将有对应注解的类创建对象并添加到容器中</span></span><br><span class="line"><span class="meta">@ComponentScan(&#123;&quot;org.example.service&quot;&#125;)</span></span><br><span class="line"><span class="comment">// 读取配置文件</span></span><br><span class="line"><span class="meta">@PropertySource(&#123;&quot;classpath:jdbc.properties&quot;&#125;)</span></span><br><span class="line"><span class="comment">// 导入jdbc配置类，Mybatis配置类</span></span><br><span class="line"><span class="meta">@Import(&#123;JdbcConfig.class, MybatisConfig.class&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="org-example-dao"><a href="#org-example-dao" class="headerlink" title="org.example.dao"></a>org.example.dao</h5><p>UserDao</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Delete;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Insert;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Select;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Update;</span><br><span class="line"><span class="keyword">import</span> org.example.domain.User;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/08 20:06:28</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Insert(&quot;insert into t_user(name, gender, age, phone, birthday) values(#&#123;name&#125;,#&#123;gender&#125;,#&#123;age&#125;,#&#123;phone&#125;,#&#123;birthday&#125;)&quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(User account)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Delete(&quot;delete from t_user where id = #&#123;id&#125; &quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Update(&quot;update t_user set name = #&#123;name&#125; , gender = #&#123;gender&#125;, age = #&#123;age&#125;, phone = #&#123;phone&#125;, birthday = #&#123;birthday&#125; where id = #&#123;id&#125; &quot;)</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;select * from t_user&quot;)</span></span><br><span class="line">    List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Select(&quot;select * from t_user where id = #&#123;id&#125; &quot;)</span></span><br><span class="line">    User <span class="title function_">findById</span><span class="params">(Integer id)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="org-example-domain"><a href="#org-example-domain" class="headerlink" title="org.example.domain"></a>org.example.domain</h5><p>User</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Date;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> User实体类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/08 20:03:13</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String gender;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line">    <span class="keyword">private</span> String phone;</span><br><span class="line">    <span class="keyword">private</span> Date birthday;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, name=&#x27;&quot;</span> + name + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, gender=&#x27;&quot;</span> + gender + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&quot;, phone=&#x27;&quot;</span> + phone + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, birthday=&quot;</span> + birthday +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getGender</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> gender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGender</span><span class="params">(String gender)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.gender = gender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(Integer age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPhone</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> phone;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPhone</span><span class="params">(String phone)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.phone = phone;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Date <span class="title function_">getBirthday</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> birthday;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBirthday</span><span class="params">(Date birthday)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.birthday = birthday;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="org-example-service"><a href="#org-example-service" class="headerlink" title="org.example.service"></a>org.example.service</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.example.domain.User;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> User服务类接口</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/08 21:11:37</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(User account)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(Integer id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(User user)</span>;</span><br><span class="line"></span><br><span class="line">    List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    User <span class="title function_">findById</span><span class="params">(Integer id)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h6 id="org-example-service-impl"><a href="#org-example-service-impl" class="headerlink" title="org.example.service.impl"></a>org.example.service.impl</h6><p>UserServiceImpl</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.example.dao.UserDao;</span><br><span class="line"><span class="keyword">import</span> org.example.domain.User;</span><br><span class="line"><span class="keyword">import</span> org.example.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.PostConstruct;</span><br><span class="line"><span class="keyword">import</span> javax.annotation.PreDestroy;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> makun</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@project</span> spring</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> User服务实现类</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2022/12/08 21:13:35</span></span><br><span class="line"><span class="comment"> * version 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="comment">// 自动装配</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(User account)</span> &#123;</span><br><span class="line">        userDao.save(account);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        userDao.deleteById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(User user)</span> &#123;</span><br><span class="line">        userDao.update(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userDao.findAll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">findById</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userDao.findById(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 构造之后执行</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;UserServiceImpl被创建了&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 被销毁之前执行</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PreDestroy</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;UserServiceImpl要被销毁了&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="org-example-App"><a href="#org-example-App" class="headerlink" title="org.example.App"></a>org.example.App</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.example.config.SpringConfig;</span><br><span class="line"><span class="keyword">import</span> org.example.domain.User;</span><br><span class="line"><span class="keyword">import</span> org.example.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.AnnotationConfigApplicationContext;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">( String[] args )</span> &#123;</span><br><span class="line">        <span class="comment">// 创建Spring容器的上下文，并传入我们的配置类</span></span><br><span class="line">        <span class="type">AnnotationConfigApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);</span><br><span class="line">        <span class="comment">// 获取容器中的UsrServiceImpl</span></span><br><span class="line">        <span class="type">UserService</span> <span class="variable">service</span> <span class="operator">=</span> context.getBean(UserService.class);</span><br><span class="line">        <span class="comment">// 查找所有用户</span></span><br><span class="line">        List&lt;User&gt; users = service.findAll();</span><br><span class="line">        <span class="comment">// 打印所有用户</span></span><br><span class="line">        System.out.println(users);</span><br><span class="line">        <span class="comment">// 关闭钩子</span></span><br><span class="line">        context.registerShutdownHook();</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        * 关闭</span></span><br><span class="line"><span class="comment">        * context.close();</span></span><br><span class="line"><span class="comment">        * */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="resources"><a href="#resources" class="headerlink" title="resources"></a>resources</h4><p>jdbc.properties</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 选择mysql的官方驱动</span></span><br><span class="line"><span class="attr">jdbc.driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="comment"># 后面对应为主机，mysql服务端口，数据库名</span></span><br><span class="line"><span class="attr">jdbc.url</span>=<span class="string">jdbc:mysql://127.0.0.1:3306/test?useSSL=true</span></span><br><span class="line"><span class="comment"># 数据库连接用户名</span></span><br><span class="line"><span class="attr">jdbc.username</span>=<span class="string">manager</span></span><br><span class="line"><span class="comment"># 用户密码</span></span><br><span class="line"><span class="attr">jdbc.password</span>=<span class="string">mk123456</span></span><br></pre></td></tr></table></figure><h3 id="test"><a href="#test" class="headerlink" title="test"></a>test</h3><h4 id="java-1"><a href="#java-1" class="headerlink" title="java"></a>java</h4><h5 id="org-example-AppTest"><a href="#org-example-AppTest" class="headerlink" title="org.example.AppTest"></a>org.example.AppTest</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.example.config.SpringConfig;</span><br><span class="line"><span class="keyword">import</span> org.example.domain.User;</span><br><span class="line"><span class="keyword">import</span> org.example.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.ContextConfiguration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringJUnit4ClassRunner;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 配置类启动器</span></span><br><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="comment">// 设置Spring环境对应的配置类</span></span><br><span class="line"><span class="meta">@ContextConfiguration(classes = SpringConfig.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppTest</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFindById</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.findById(<span class="number">1</span>);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFindAll</span><span class="params">()</span> &#123;</span><br><span class="line">        List&lt;User&gt; users = userService.findAll();</span><br><span class="line">        System.out.println(users);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-mybatis-junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>jar<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>spring-mybatis-junit<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.apache.org<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Spring框架坐标 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.18<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- mybatis --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- JDBC --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.18<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.38<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- test --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.18<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 程序配置 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
            <tag> Mybatis </tag>
            
            <tag> Junit </tag>
            
            <tag> IntelliJ IDEA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Maven入门笔记（1）</title>
      <link href="/posts/e5124b35/"/>
      <url>/posts/e5124b35/</url>
      
        <content type="html"><![CDATA[<h1 id="哔哩哔哩黑马程序员Maven全套教程学习"><a href="#哔哩哔哩黑马程序员Maven全套教程学习" class="headerlink" title="哔哩哔哩黑马程序员Maven全套教程学习"></a>哔哩哔哩黑马程序员Maven全套教程学习</h1><p><a href="https://www.bilibili.com/video/BV1Ah411S7ZE?p=1">视频链接地址</a></p><h2 id="Maven是什么"><a href="#Maven是什么" class="headerlink" title="Maven是什么"></a>Maven是什么</h2><p>Maven的本质是一个项目管理工具，将项目开发和管理过程抽象成一个项目对象模型(POM)<br>POM (Project Object Model) :项目对象模型</p><h3 id="下载与安装"><a href="#下载与安装" class="headerlink" title="下载与安装"></a>下载与安装</h3><p><a href="https://maven.apache.org/download.cgi">官网地址</a></p><p>需要配置JAVA_HOME与MAVEN_HOME</p><h3 id="仓库"><a href="#仓库" class="headerlink" title="仓库"></a>仓库</h3><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/notes/maven-1/image-20221205102107977.png" alt="image-20221205102107977"></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/notes/maven-1/image-20221205102129144.png" alt="image-20221205102129144"></p><h3 id="坐标"><a href="#坐标" class="headerlink" title="坐标"></a>坐标</h3><p><a href="https://repo1.maven.org/">查找Jar包</a></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/notes/maven-1/image-20221205102720877.png" alt="image-20221205102720877"></p><h3 id="Maven项目构建"><a href="#Maven项目构建" class="headerlink" title="Maven项目构建"></a>Maven项目构建</h3><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/notes/maven-1/image-20221205110056101.png" alt="image-20221205110056101"></p><h2 id="依赖管理"><a href="#依赖管理" class="headerlink" title="依赖管理"></a>依赖管理</h2><h3 id="依赖配置与依赖传递"><a href="#依赖配置与依赖传递" class="headerlink" title="依赖配置与依赖传递"></a>依赖配置与依赖传递</h3><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/notes/maven-1/image-20221205113953270.png" alt="image-20221205113953270"></p><h3 id="可选依赖"><a href="#可选依赖" class="headerlink" title="可选依赖"></a>可选依赖</h3><h3 id="排除依赖"><a href="#排除依赖" class="headerlink" title="排除依赖"></a>排除依赖</h3><h3 id="依赖范围"><a href="#依赖范围" class="headerlink" title="依赖范围"></a>依赖范围</h3><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/notes/maven-1/image-20221205114649766.png" alt="image-20221205114649766"></p><h2 id="周期与插件"><a href="#周期与插件" class="headerlink" title="周期与插件"></a>周期与插件</h2><h3 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h3><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/notes/maven-1/image-20221205115154942.png" alt="image-20221205115154942"></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/notes/maven-1/image-20221205115253620.png" alt="image-20221205115253620"></p>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Maven </tag>
            
            <tag> Maven入门 </tag>
            
            <tag> 学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue2入门笔记（4）</title>
      <link href="/posts/5501e1f2/"/>
      <url>/posts/5501e1f2/</url>
      
        <content type="html"><![CDATA[<h1 id="Bilibili黑马程序员Vue2"><a href="#Bilibili黑马程序员Vue2" class="headerlink" title="Bilibili黑马程序员Vue2"></a><a href="https://www.bilibili.com/video/BV1zq4y1p7ga/?vd_source=43f3f41b9a99cfe3d5248db59a3897c7">Bilibili黑马程序员Vue2</a></h1><p>基于<a href="https://www.bilibili.com/video/BV1zq4y1p7ga/?vd_source=43f3f41b9a99cfe3d5248db59a3897c7">Bilibili黑马程序员Vue2+vue3</a>教程的学习笔记（4）</p><h2 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h2><p>路由就是对应关系，Hash地址（锚链接）与组件之间的对应关系</p><p>使用锚链接不会导致页面刷新，并且能产生浏览历史</p><p>URL地址从<code>#</code>开始，<code>#</code>加它后面的部分就是Hash地址</p><p>通过<code>window.location.hash</code>可以查看页面的hash地址</p><h3 id="前端路由的工作方式"><a href="#前端路由的工作方式" class="headerlink" title="前端路由的工作方式"></a>前端路由的工作方式</h3><ol><li><p>用户点击了页面上的路由链接</p></li><li><p>导致了URL地址栏中的Hash值发生了变化</p></li><li><p>前端路由监听了到Hash地址的变化</p></li><li><p>前端路由把当前Hash地址对应的组件渲染都浏览器中</p></li></ol><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/notes/vue2-4/image-20221127164723111.png" alt="image-20221127164723111"></p><p>原生JS使用<code>window.onhashchange</code>就能监听页面hash地址的变化</p><h3 id="vue-router"><a href="#vue-router" class="headerlink" title="vue-router"></a>vue-router</h3><p>vue-router是vue.js官方给出的路由解决方案。它只能结合vue项目进行使用，能够轻松的管理SPA项目中组件的切换。</p><p><a href="https://router.vuejs.org/zh/">官网地址</a></p><ol><li><p>安装vue-router包</p><ol><li><code>npm install vue-router@3.5.2 -S</code></li></ol></li><li><p>创建路由模块</p><ol><li><p>在src 源代码目录下，新建router&#x2F;index.js路由模块，并初始化如下的代码:</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1．导入Vue和VueRouter 的包</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2．调用Vue.use()函数，把 VueRouter安装为Vue的插件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueRouter</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3．创建路由的实例对象</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4．向外共享路由的实例对象</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure></li></ol></li><li><p>导入并挂载路由模块</p><ol><li>在main.js中挂载路由 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js可以省略</span></span><br><span class="line"><span class="comment">// 在模块化导入的时候，如果只给了路径，则默认导入这个文件夹下，名字叫做index.js的文件</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@/router/index.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>),</span><br><span class="line">    <span class="comment">// 路由的实例对象</span></span><br><span class="line">    router</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure></li></ol></li><li><p>声明路由链接和占位符</p><ol><li><p>只要在项目中安装和配置了vue-router，就可以使用router-view这个组件了，用作占位符</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">        &lt;a href=&quot;#/home&quot;&gt;&lt;/a&gt;</span><br><span class="line">        &lt;a href=&quot;#/movie&quot;&gt;&lt;/a&gt;</span><br><span class="line">        &lt;a href=&quot;#/about&quot;&gt;&lt;/a&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// router/index.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/Home.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Movie</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/Movie.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/About.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">    <span class="comment">// routes是一个数组，作用:定义“hash地址”与“组件之间的对应关系</span></span><br><span class="line">    <span class="attr">routes</span>: [</span><br><span class="line">        &#123; <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>, <span class="attr">componnent</span>: <span class="title class_">Home</span>&#125;,</span><br><span class="line">        &#123; <span class="attr">path</span>: <span class="string">&#x27;/movie&#x27;</span>, <span class="attr">componnent</span>: <span class="title class_">Movie</span>&#125;,</span><br><span class="line">        &#123; <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>, <span class="attr">componnent</span>: <span class="title class_">About</span>&#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ol></li></ol><h3 id="router-link"><a href="#router-link" class="headerlink" title="router-link"></a>router-link</h3><p>当安装和配置了vue-router后，就可以使用router-link来替代普通的a链接了</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;router-link to=&quot;/home&quot;&gt;首页&lt;/router-link&gt;</span><br><span class="line">    &lt;router-link to=&quot;/movie&quot;&gt;首页&lt;/router-link&gt;</span><br><span class="line">    &lt;router-link to=&quot;/about&quot;&gt;首页&lt;/router-link&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h3 id="路由重定向"><a href="#路由重定向" class="headerlink" title="路由重定向"></a>路由重定向</h3><p>路由重定向指的是:用户在访问地址A的时候，强制用户跳转到地址C，从而展示特定的组件页面。通过路由规则的redirect属性，指定一个新的路由地址，可以很方便地设置路由的重定向:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">    <span class="attr">routes</span>: [</span><br><span class="line">        <span class="comment">// 使用重定向</span></span><br><span class="line">        &#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, <span class="attr">redirect</span>: <span class="string">&#x27;/home&#x27;</span>&#125;,</span><br><span class="line">        &#123; <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>, <span class="attr">componnent</span>: <span class="title class_">Home</span>&#125;,</span><br><span class="line">        &#123; <span class="attr">path</span>: <span class="string">&#x27;/movie&#x27;</span>, <span class="attr">componnent</span>: <span class="title class_">Movie</span>&#125;,</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="嵌套路由"><a href="#嵌套路由" class="headerlink" title="嵌套路由"></a>嵌套路由</h3><p>通过路由实现组件的嵌套展示，叫做嵌套路由。</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/notes/vue2-4/image-20221128114341148.png" alt="image-20221128114341148"></p><p>通过children属性声明子路由规则</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/notes/vue2-4/image-20221128114525533.png" alt="image-20221128114525533"></p><h3 id="动态路由"><a href="#动态路由" class="headerlink" title="动态路由"></a>动态路由</h3><p>动态路由指的是:把Hash地址中可变的部分定义为参数项从而提高路由规则的复用性。</p><p>在vue-router中使用英文的冒号（:）来定义路由的参数项。示例代码如下:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//路由中的动态参数以︰进行声明，冒号后面的是动态参数的名称</span></span><br><span class="line"><span class="comment">// 如何在Movie组件中获取Movie的ID值</span></span><br><span class="line">&#123; <span class="attr">path</span>: <span class="string">&#x27;/movie/:id&#x27;</span> , <span class="attr">component</span>: <span class="title class_">Movie</span> &#125;</span><br></pre></td></tr></table></figure><p>在Movie组件中可以使用<code>this.$route.params.id</code>获取哈希地址名为id的动态地址参数</p><p><code>this.$route</code>是路由的参数对象</p><p><code>this.$router</code>是路由的“导航对象”</p><h3 id="开启props传参"><a href="#开启props传参" class="headerlink" title="开启props传参"></a>开启props传参</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在路由模块中定义，开启props</span></span><br><span class="line">&#123; <span class="attr">path</span>: <span class="string">&#x27;/movie/mid&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Movie</span>, <span class="attr">props</span>: <span class="literal">true</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在组件中接收</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">props</span>: [<span class="string">&#x27;mid&#x27;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="params和query"><a href="#params和query" class="headerlink" title="params和query"></a>params和query</h3><p>路径参数和查询参数</p><ol><li><p><code>/</code>后面的是路径参数，使用<code>this.$route.params</code>来获取</p></li><li><p><code>?</code>后面的是查询参数，使用<code>this.$route.query</code>来获取</p></li><li><p>需要完成路径使用<code>this.$route.fullPath</code>，只要路径使用<code>this.$route.path</code></p></li></ol><h3 id="编程式导航"><a href="#编程式导航" class="headerlink" title="编程式导航"></a>编程式导航</h3><p>在浏览器中，点击链接实现导航的方式，叫做声明式导航。例如:</p><p>普通网页中点击<code>&lt;a&gt;</code>链接、vue项目中点击<code>&lt;router-link&gt;</code>都属于声明式导航</p><p>在浏览器中，调用API方法实现导航的方式，叫做编程式导航。例如:</p><p>普通网页中调用<code>location.href</code>跳转到新页面的方式，属于编程式导航</p><p><strong>vue-router提供了许多编程式导航的API，（router是导航对象），其中最常用的导航API分别是:</strong></p><ol><li><code>this.$router.push(&#39;hash地址&#39;)</code><ol><li>跳转到指定hash 地址，并增加一条历史记录</li></ol></li><li><code>this.$router.replace(&#39;hash地址&#39;)</code><ol><li>跳转到指定的hash地址，并替换掉当前的历史记录</li></ol></li><li><code>this.$router.go(数值n)</code><ol><li>可以在浏览历史中前进和后退。</li><li>如果后退的层数超过上限，则原地不动</li></ol></li></ol><p>在实际开发中，一般只会前进和后退一层页面。因此 vue-router提供了如下两个便捷方法:</p><ol><li><code>$router.back()</code>后退一层</li><li><code>$router.forward()</code>前进一层</li></ol><p><strong>在行内使用编程式导航跳转的时候,<code>this</code>必须要省略，否则会报错!</strong></p><h3 id="导航守卫"><a href="#导航守卫" class="headerlink" title="导航守卫"></a>导航守卫</h3><p>导航守卫可以控制路由的访问权限。示意图如下:</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/notes/vue2-4/image-20221128123448389.png" alt="image-20221128123448389"></p><p><strong>全局前置守卫</strong></p><p>每次发生路由的导航跳转时，都会触发全局前置守卫。因此在全局前置守卫中，程序员可以对每个路由进行访问权限的控制:</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/notes/vue2-4/image-20221128132040472.png" alt="image-20221128132040472"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 只要发生了路由的跳转，必然会触发beforeEach指定的 function回调函数</span></span><br><span class="line"><span class="comment">// to 是将要访问的路由的信息对象</span></span><br><span class="line"><span class="comment">// from是将要离开的路由的信息对象</span></span><br><span class="line"><span class="comment">// next 是一个函数，调用next()表示放行，允许这次路由导航</span></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="keyword">function</span>(<span class="params">to, <span class="keyword">from</span>, next</span>) &#123;</span><br><span class="line">    <span class="comment">// next()函数表示放行的意思</span></span><br><span class="line">    <span class="title function_">next</span>()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>next函数的3种调用方式</strong></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/notes/vue2-4/image-20221128133552767.png" alt="image-20221128133552767"></p><p><strong>控制后台主页的访问权限</strong></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/notes/vue2-4/image-20221128134257115.png" alt="image-20221128134257115"></p><h2 id="Vant组件库"><a href="#Vant组件库" class="headerlink" title="Vant组件库"></a>Vant组件库</h2><p><a href="https://vant-contrib.gitee.io/vant-weapp/0.x/#/intro">官网地址</a></p><p><a href="https://youzan.github.io/vant-weapp/#/quickstart">帮助文档</a></p><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>vue2项目使用<code>npm install vant -S</code>安装，vue3项目使用<code>npm install vant@next -S</code>安装</p>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue2 </tag>
            
            <tag> 学习 </tag>
            
            <tag> Vue入门 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue2入门笔记（3）</title>
      <link href="/posts/c8d6d94b/"/>
      <url>/posts/c8d6d94b/</url>
      
        <content type="html"><![CDATA[<h1 id="Bilibili黑马程序员Vue2"><a href="#Bilibili黑马程序员Vue2" class="headerlink" title="Bilibili黑马程序员Vue2"></a><a href="https://www.bilibili.com/video/BV1zq4y1p7ga/?vd_source=43f3f41b9a99cfe3d5248db59a3897c7">Bilibili黑马程序员Vue2</a></h1><p>基于<a href="https://www.bilibili.com/video/BV1zq4y1p7ga/?vd_source=43f3f41b9a99cfe3d5248db59a3897c7">Bilibili黑马程序员Vue2+vue3</a>教程的学习笔记（3）</p><h2 id="动态组件"><a href="#动态组件" class="headerlink" title="动态组件"></a>动态组件</h2><p>动态切换组件的显示与隐藏</p><h3 id="component标签"><a href="#component标签" class="headerlink" title="component标签"></a>component标签</h3><p>vue提供了一个内置的<code>&lt;component&gt;</code>组件，专门用来实现动态组件的渲染。</p><p><code>&lt;component&gt;</code>基本使用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">// 使用component的is属性，插入其他组件，component就相当于一个占位符</span><br><span class="line">&lt;component is=&quot;Left&quot;&gt;&lt;/component&gt;</span><br><span class="line">// 绑定动态的属性，方便后期修改</span><br><span class="line">&lt;omponent :is=&quot;comName&quot;&gt;&lt;/omponent&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    import Left from &#x27;@/components/Left.vue&#x27;</span><br><span class="line">    import Right from &#x27;@/components/Right.vue&#x27;</span><br><span class="line">    </span><br><span class="line">export default &#123;</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                comName: &#x27;Right&#x27;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        components: &#123;</span><br><span class="line">            Left,</span><br><span class="line">            Right</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="动态切换组件的显示与隐藏"><a href="#动态切换组件的显示与隐藏" class="headerlink" title="动态切换组件的显示与隐藏"></a>动态切换组件的显示与隐藏</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">// 绑定动态的属性，方便后期修改</span><br><span class="line">&lt;omponent :is=&quot;comName&quot;&gt;&lt;/omponent&gt;</span><br><span class="line">&lt;button @click=&quot;comName = &#x27;Left&#x27;&quot;&gt;显示Left&lt;/button&gt;</span><br><span class="line">&lt;button @click=&quot;comName = &#x27;Right&#x27;&quot;&gt;显示Right&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    import Left from &#x27;@/components/Left.vue&#x27;</span><br><span class="line">    import Right from &#x27;@/components/Right.vue&#x27;</span><br><span class="line">    </span><br><span class="line">export default &#123;</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                comName: &#x27;Right&#x27;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        components: &#123;</span><br><span class="line">            Left,</span><br><span class="line">            Right</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="keep-alive的使用"><a href="#keep-alive的使用" class="headerlink" title="keep-alive的使用"></a><code>keep-alive</code>的使用</h3><p>动态创建和隐藏组件会被销毁或者重新创建，组件的状态不会被保存</p><p>使用<code>keep-alive</code>标签可以解决以上问题</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">// keep-alive可以把内部的组件进行缓存，而不是销毁组件</span><br><span class="line">&lt;keep-alive&gt;</span><br><span class="line">     // 绑定动态的属性，方便后期修改</span><br><span class="line">        &lt;omponent :is=&quot;comName&quot;&gt;&lt;/omponent&gt;</span><br><span class="line">    &lt;/keep-alive&gt;</span><br><span class="line">&lt;button @click=&quot;comName = &#x27;Left&#x27;&quot;&gt;显示Left&lt;/button&gt;</span><br><span class="line">&lt;button @click=&quot;comName = &#x27;Right&#x27;&quot;&gt;显示Right&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    import Left from &#x27;@/components/Left.vue&#x27;</span><br><span class="line">    import Right from &#x27;@/components/Right.vue&#x27;</span><br><span class="line">    </span><br><span class="line">export default &#123;</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                comName: &#x27;Right&#x27;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        components: &#123;</span><br><span class="line">            Left,</span><br><span class="line">            Right</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><code>keep-alive</code>对应的生命周期函数</p><ol><li>当组件被缓存，会触发deactivated</li><li>当组件被激活，会触发activated</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="comment">// 当组件第一次被创建的时候，既会执行created生命周期，也会执行activated生命周期</span></span><br><span class="line">    <span class="comment">// 当组件被激活的时候，只会触发activated生命周期，不再触发created，因为组件没有被重新创建</span></span><br><span class="line">    <span class="title function_">ceated</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;组件被创建了&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">activated</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;组件被激活了&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">deactivated</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;组件被缓存了&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="keep-alive的属性"><a href="#keep-alive的属性" class="headerlink" title="keep-alive的属性"></a><code>keep-alive</code>的属性</h3><h4 id="include属性"><a href="#include属性" class="headerlink" title="include属性"></a><code>include</code>属性</h4><p>include属性用来指定: 只有名称匹配的组件会被缓存。</p><p>多个组件名之间使用英文的逗号<code>,</code>分隔</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">// 表示Left，Right都会被缓存</span><br><span class="line">&lt;keep-alive include=&quot;Left,Right&quot;&gt;</span><br><span class="line">    &lt;omponent :is=&quot;comName&quot;&gt;&lt;/omponent&gt;</span><br><span class="line">    &lt;/keep-alive&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h4 id="exclude属性"><a href="#exclude属性" class="headerlink" title="exclude属性"></a><code>exclude</code>属性</h4><p>与<code>include</code>相反，<strong>这两个属性不能同时使用</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">// 表示Left组件不会被缓存</span><br><span class="line">&lt;keep-alive exclude=&quot;Left&quot;&gt;</span><br><span class="line">    &lt;omponent :is=&quot;comName&quot;&gt;&lt;/omponent&gt;</span><br><span class="line">    &lt;/keep-alive&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h3 id="组件声明的name属性"><a href="#组件声明的name属性" class="headerlink" title="组件声明的name属性"></a>组件声明的name属性</h3><p>在组件默认导出时，使用name节点为组件取名</p><p>如果使用了<code>name</code>那么<code>include</code>和<code>exclude</code>就需要传<code>name</code>中的名字了</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="comment">// 如果不适用name节点，那么名字默认为组件被注册时的名称</span></span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;MyRight&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>组件注册名称主要是用来以标签形式使用</strong></p><p>对比:</p><ol><li>组件的注册名称的主要应用场景时：以标签形式，把注册好的组件，渲染和使用到页面结构之中</li><li>组件声明的<code>name</code>名称主要的应用场景：结合<code>&lt;keep-alive&gt;</code>标签实现组件缓存功能，以及在调试工具中看到组件的<code>name</code>名称</li></ol><h2 id="插槽"><a href="#插槽" class="headerlink" title="插槽"></a>插槽</h2><p>插槽（Slot)是vue为组件的封装者提供的能力。允许开发者在封装组件时，把不确定的、希望由用户指定的部分定义为插槽。</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/notes/vue2-3/image-20221127122256094.png" alt="image-20221127122256094"></p><p>如果组件没有定义插槽，那么使用组件时传入的自定义内容会被丢弃</p><h3 id="v-solt"><a href="#v-solt" class="headerlink" title="v-solt"></a><code>v-solt</code></h3><p>vue官方规定，每一个slot插槽，都要有一个name名称</p><p>如果省略了slot的name属性，则有一个默认名称叫做default</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;!-- 声明一个插槽区域 --&gt;</span><br><span class="line">&lt;solt name=&quot;default&quot;&gt;&lt;/solt&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><p>默认情况下，在使用组件的时候，提供的内容都会被填充到名字为default的插槽之中</p><p>使用<code>v-slot</code>可以将自定义内容填充到指定的<code>slot</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;template v-slot:default&gt;</span><br><span class="line">        &lt;p&gt;</span><br><span class="line">         这是Left组件的内容区域，名称的p标签   </span><br><span class="line">    &lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;template #default&gt;</span><br><span class="line">&lt;p&gt;</span><br><span class="line">            这是我的自定义内容</span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><p><strong>注意</strong></p><ol><li>如果要把内容填充到指定名称的插槽中，需要使用<code>v-slot:</code>这个指令</li><li><code>v-slot:</code>后面要跟上插槽的名字</li><li><code>v-slot:</code>指令不能直接用在元素身上，必须用在<code>template</code>标签上</li><li><code>template</code>这个标签，它是一个虚拟的标签，只起到包裹性质的作用，但是，不会被渲染为任何实质性的html元素</li><li><code>v-slot:</code>指令的简与形式是<code>#</code></li><li>如果需要定义插槽的默认内容，直接写在组件的<code>slot</code>标签中</li></ol><h3 id="具名插槽"><a href="#具名插槽" class="headerlink" title="具名插槽"></a>具名插槽</h3><p>插槽取了名字，能够传入多个自定义内容</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 要被使用的带插槽的组件 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;slot name=&quot;article&quot;&gt;&lt;/slot&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;Home&gt;</span><br><span class="line">    &lt;template v-slot:article&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">            &lt;p&gt;这是一篇文章中的一段话&lt;/p&gt; </span><br><span class="line">                &lt;p&gt;这是一篇文章中的一段话&lt;/p&gt;</span><br><span class="line">                &lt;p&gt;这是一篇文章中的一段话&lt;/p&gt;</span><br><span class="line">                &lt;p&gt;这是一篇文章中的一段话&lt;/p&gt;</span><br><span class="line">                &lt;p&gt;这是一篇文章中的一段话&lt;/p&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">    &lt;/Home&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    import Home from &#x27;@/components/Home.vue&#x27;</span><br><span class="line">    </span><br><span class="line">export default &#123;</span><br><span class="line">        components: &#123;</span><br><span class="line">            Home</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="作用域插槽"><a href="#作用域插槽" class="headerlink" title="作用域插槽"></a>作用域插槽</h3><p>通过插槽可以获取插槽组件中定义的数据</p><p>在封装组件时，为预留的<code>&lt;slot&gt;</code>提供属性对应的值，这种用法，叫做”作用域插槽“（插槽中带数据）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;slot name=&quot;article&quot; msg=&quot;hello world&quot; :user=&quot;userInfo&quot;&gt;&lt;/slot&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;Home&gt;</span><br><span class="line">        &lt;!-- 建议使用scope来接收插槽数据 --&gt;</span><br><span class="line">    &lt;template v-slot:article=&quot;scope&quot;&gt;</span><br><span class="line">&#123;&#123; scope.userInfo &#125;&#125;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">    &lt;/Home&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    import Home from &#x27;@/components/Home.vue&#x27;</span><br><span class="line">    </span><br><span class="line">export default &#123;</span><br><span class="line">        components: &#123;</span><br><span class="line">            Home</span><br><span class="line">        &#125;,</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                userInfo: &#123;</span><br><span class="line">                    name: &#x27;张三&#x27;,</span><br><span class="line">                    age: 20</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="自定义指令"><a href="#自定义指令" class="headerlink" title="自定义指令"></a>自定义指令</h2><p>vue官方提供了<code>v-text</code>、<code>v-for</code>、<code>v-mogel</code>、<code>v-if</code>等常用的指令。除此之外vue还允许开发者自定义指令。</p><p>vue中有<strong>私有自定义指令</strong>和<strong>全局自定义指令</strong></p><h3 id="私有自定义指令"><a href="#私有自定义指令" class="headerlink" title="私有自定义指令"></a>私有自定义指令</h3><p>在每个vue 组件中，可以在 directives节点下声明私有自定义指令。示例代码如下:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="comment">// 私有自定义指令的节点</span></span><br><span class="line">    <span class="attr">directives</span>: &#123;</span><br><span class="line">        <span class="comment">// 定义一个color指令，指向一个配置对象</span></span><br><span class="line">        <span class="attr">color</span>: &#123;</span><br><span class="line">            <span class="comment">// 当指令第一次被绑定到元素上的时候，会立即触发bind函数</span></span><br><span class="line">            <span class="comment">// 形参中的el表示当前指令所绑定的那个DOM对象</span></span><br><span class="line">            <span class="title function_">bind</span>(<span class="params">el</span>) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;触发了v-color的bind函数&#x27;</span>)</span><br><span class="line">               el.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&#x27;red&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="获取指令绑定的值"><a href="#获取指令绑定的值" class="headerlink" title="获取指令绑定的值"></a>获取指令绑定的值</h3><p>使用<code>binding.value</code>来获取传递的值</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;p v-color=&quot;color&quot;&gt;这是一段话&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">        data() &#123;</span><br><span class="line">          return &#123;</span><br><span class="line">                color: &#x27;blue&#x27;</span><br><span class="line">            &#125;  </span><br><span class="line">        &#125;,</span><br><span class="line">    // 私有自定义指令的节点</span><br><span class="line">        directives: &#123;</span><br><span class="line">            // 定义一个color指令，指向一个配置对象</span><br><span class="line">            color: &#123;</span><br><span class="line">                // 当指令第一次被绑定到元素上的时候，会立即触发bind函数</span><br><span class="line">                // 形参中的el表示当前指令所绑定的那个DOM对象</span><br><span class="line">                // 第二个参数推荐使用binding</span><br><span class="line">                bind(el,binding) &#123;</span><br><span class="line">                    console.log(&#x27;触发了v-color的bind函数&#x27;)</span><br><span class="line">                    el.style.color = binding.value</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="update函数"><a href="#update函数" class="headerlink" title="update函数"></a>update函数</h3><p>bind函数只调用1次:当指令第一次绑定到元素时调用，当DOM更新时 bind函数不会被触发。update数会在每次DOM更新时被调用。示例代码如下:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;p v-color=&quot;color&quot;&gt;这是一段话&lt;/p&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">        data() &#123;</span><br><span class="line">          return &#123;</span><br><span class="line">                color: &#x27;blue&#x27;</span><br><span class="line">            &#125;  </span><br><span class="line">        &#125;,</span><br><span class="line">    // 私有自定义指令的节点</span><br><span class="line">        directives: &#123;</span><br><span class="line">            // 定义一个color指令，指向一个配置对象</span><br><span class="line">            color: &#123;</span><br><span class="line">                // 当指令第一次被绑定到元素上的时候，会立即触发bind函数</span><br><span class="line">                // 形参中的el表示当前指令所绑定的那个DOM对象</span><br><span class="line">                // 第二个参数推荐使用binding</span><br><span class="line">                bind(el,binding) &#123;</span><br><span class="line">                    console.log(&#x27;触发了v-color的bind函数&#x27;)</span><br><span class="line">                    el.style.color = binding.value</span><br><span class="line">                &#125;,</span><br><span class="line">             // 在DOM更新的时候，会触发update函数</span><br><span class="line">                update(el,binding) &#123;</span><br><span class="line">                    console.log(&#x27;触发了v-color的bind函数&#x27;)</span><br><span class="line">                    el.style.color = binding.value</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="函数简写"><a href="#函数简写" class="headerlink" title="函数简写"></a>函数简写</h3><p>如果bind和update函数中的逻辑完全相同，则对象格式的自定义指令可以简写成函数格式:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">color</span>: <span class="string">&#x27;blue&#x27;</span></span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 私有自定义指令的节点</span></span><br><span class="line">    <span class="attr">directives</span>: &#123;</span><br><span class="line">        <span class="title function_">color</span>(<span class="params">el,binding</span>) &#123;</span><br><span class="line">            el.<span class="property">style</span>.<span class="property">color</span> = binding.<span class="property">value</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="全局自定义指令"><a href="#全局自定义指令" class="headerlink" title="全局自定义指令"></a>全局自定义指令</h3><p>全局共享的自定义指令需要通过<code>Vue.directive()</code>进行声明，示例代码如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 参数1:字符串，表示全局自定义指令的名字</span></span><br><span class="line"><span class="comment">// 参数2:对象，用来接收指令的参数值</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;color&#x27;</span>, &#123;</span><br><span class="line">    <span class="title function_">bind</span>(<span class="params">el, binding</span>) &#123;</span><br><span class="line">        el.<span class="property">style</span>.<span class="property">color</span> = binding.<span class="property">value</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">update</span>(<span class="params">el, binding</span>) &#123;</span><br><span class="line">        el.<span class="property">style</span>.<span class="property">color</span> = binding.<span class="property">value</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果bind与update的处理一样，则同样可以简写</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;color&#x27;</span>, <span class="keyword">function</span>(<span class="params">el, binding</span>) &#123;</span><br><span class="line">    el.<span class="property">style</span>.<span class="property">color</span> = binding.<span class="property">value</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="main-js中的小提示"><a href="#main-js中的小提示" class="headerlink" title="main.js中的小提示"></a>main.js中的小提示</h2><p><code>Vue.config.productionTip = false</code>表示是否能看到vue在控制台的提示信息</p><h2 id="ESLint"><a href="#ESLint" class="headerlink" title="ESLint"></a>ESLint</h2><p>可组装的JavaScript和JSX检查工具</p><p><a href="http://eslint.cn/">官网地址</a></p><p>vscode安装vetur插件，并更改vscode缩进为2格</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/notes/vue2-3/image-20221127134002900.png" alt="image-20221127134002900"></p><p>设置粘贴的代码格式化和保存时代码格式化</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/notes/vue2-3/image-20221127134240057.png" alt="image-20221127134240057"></p><h3 id="配置文件的rules规则"><a href="#配置文件的rules规则" class="headerlink" title="配置文件的rules规则"></a>配置文件的rules规则</h3><p>创建一个带ESLint的vue项目</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建vue项目</span></span><br><span class="line">$ vue create demo</span><br><span class="line"></span><br><span class="line"><span class="comment"># 选择CSS预处理器 CSS Pre-processors</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 选择vue2</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 选择Less</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 选择ESLint的规范 ESLint + Standard config</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 选择In dedicated config files，单独存放配置文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 选择Lint on save，保存时格式化</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 不用保存配置，输入n</span></span><br></pre></td></tr></table></figure><p>项目根目录中的<code>.eslintrc.js</code>文件就是ESLint的配置文件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">root</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">env</span>: &#123;</span><br><span class="line">    <span class="attr">node</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">extends</span>: [</span><br><span class="line">    <span class="string">&#x27;plugin:vue/essential&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;@vue/standard&#x27;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">parserOptions</span>: &#123;</span><br><span class="line">    <span class="attr">parser</span>: <span class="string">&#x27;@babel/eslint-parser&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">rules</span>: &#123;</span><br><span class="line">    <span class="comment">// 表示在开发阶段不报错，在发布阶段报错</span></span><br><span class="line">    <span class="string">&#x27;no-console&#x27;</span>: process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&#x27;production&#x27;</span> ? <span class="string">&#x27;warn&#x27;</span> : <span class="string">&#x27;off&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;no-debugger&#x27;</span>: process.<span class="property">env</span>.<span class="property">NODE_ENV</span> === <span class="string">&#x27;production&#x27;</span> ? <span class="string">&#x27;warn&#x27;</span> : <span class="string">&#x27;off&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>配置文件的rules节点下的配置含义可以在<a href="http://eslint.cn/docs/rules/">官方文档</a>中查到</p><h3 id="配置Visual-Studio-Code"><a href="#配置Visual-Studio-Code" class="headerlink" title="配置Visual Studio Code"></a>配置Visual Studio Code</h3><p>VSCode插件，我只配了ESLint</p><h4 id="ESLint-1"><a href="#ESLint-1" class="headerlink" title="ESLint"></a>ESLint</h4> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在settions.json配置对象根节点中添加如下配置</span></span><br><span class="line"><span class="comment">// ESLint插件的配置</span></span><br><span class="line"><span class="string">&quot;editor.codeActionsOnSave&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;source.fixAll&quot;</span>: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="axios"><a href="#axios" class="headerlink" title="axios"></a>axios</h2><p>如果有很多个组件都要使用axios，每个组件都import以下，很麻烦</p><h3 id="挂载axios"><a href="#挂载axios" class="headerlink" title="挂载axios"></a>挂载axios</h3><p>因为每个组件都是Vue的一个实例，就可以为Vue挂载一个属性，在main.js为Vue挂载</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义请求根路径,这样在后面使用axios的请求路径就不用加上这一段了</span></span><br><span class="line">axios.<span class="property">defaults</span>.<span class="property">baseURL</span> = <span class="string">&#x27;http://www.baidu.com:8089&#x27;</span></span><br><span class="line"><span class="comment">// 挂在在$http中，也可以是其他属性，但是这样规范些</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$http</span> = axios</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>)</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><p><strong>挂载axios在Vue上的方法不太好，不能实现api接口的复用</strong></p>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue2 </tag>
            
            <tag> 学习 </tag>
            
            <tag> Vue入门 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringBoot2学习笔记（1）基础篇</title>
      <link href="/posts/3c2a06ae/"/>
      <url>/posts/3c2a06ae/</url>
      
        <content type="html"><![CDATA[<h1 id="黑马程序员SpringBoot2学习笔记"><a href="#黑马程序员SpringBoot2学习笔记" class="headerlink" title="黑马程序员SpringBoot2学习笔记"></a>黑马程序员SpringBoot2学习笔记</h1><p><a href="https://www.bilibili.com/video/BV15b4y1a7yG">Bilibili视频地址</a></p><h2 id="SpringBoot简介"><a href="#SpringBoot简介" class="headerlink" title="SpringBoot简介"></a>SpringBoot简介</h2><p><a href="https://spring.io/">Spring官网</a></p><p>SpringBoot是Spring中的老大</p>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java </tag>
            
            <tag> 学习 </tag>
            
            <tag> SpringBoot入门 </tag>
            
            <tag> Spring2.x </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue2入门笔记（2）</title>
      <link href="/posts/706abe2e/"/>
      <url>/posts/706abe2e/</url>
      
        <content type="html"><![CDATA[<h1 id="Bilibili黑马程序员Vue2"><a href="#Bilibili黑马程序员Vue2" class="headerlink" title="Bilibili黑马程序员Vue2"></a><a href="https://www.bilibili.com/video/BV1zq4y1p7ga/?vd_source=43f3f41b9a99cfe3d5248db59a3897c7">Bilibili黑马程序员Vue2</a></h1><p>基于<a href="https://www.bilibili.com/video/BV1zq4y1p7ga/?vd_source=43f3f41b9a99cfe3d5248db59a3897c7">Bilibili黑马程序员Vue2+vue3</a>教程的学习笔记（2）</p><h2 id="Vue-cli"><a href="#Vue-cli" class="headerlink" title="Vue-cli"></a>Vue-cli</h2><p>什么是单页面应用程序，SPA（Single Page Application）</p><p>所有的功能与交互都在这唯一的一个页面内完成。</p><p>vue-cli是Vue.js开发的标准工具。简化了程序员基于webpack创建工程化的Vue项目的工程。</p><p><a href="https://cli.vuejs.org/zh/">中文官网</a></p><h3 id="安装和使用"><a href="#安装和使用" class="headerlink" title="安装和使用"></a>安装和使用</h3><p>它是npm上的一个全局包使用<code>npm install -g @vue/cli</code>来进行安装，安装完成后使用<code>vue --version</code>来查看是否安装成功</p><p><strong>创建项目</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建项目</span></span><br><span class="line">$ vue create &lt;项目名&gt;</span><br></pre></td></tr></table></figure><p>会出现如下提示，并选择手动</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Vue CLI v5.0.8</span><br><span class="line">? Please pick a preset:</span><br><span class="line">  <span class="comment"># vue3预设</span></span><br><span class="line">&gt; Default ([Vue 3] babel, eslint)</span><br><span class="line">  <span class="comment"># vue2预设</span></span><br><span class="line">  Default ([Vue 2] babel, eslint)</span><br><span class="line">  <span class="comment"># 手动选择要安装哪些功能</span></span><br><span class="line">  Manually <span class="keyword">select</span> features</span><br></pre></td></tr></table></figure><p>使用空格选择与取消部分选项，然后回车</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/notes/vue2-2/image-20221125163616553.png" alt="选择需要的下载"></p><p>选择vue2.x，然后回车</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/notes/vue2-2/image-20221125163924064.png" alt="选择vue2.x"></p><p>选择Less，回车</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/notes/vue2-2/image-20221125164020628.png" alt="选择Less"></p><p>选择第一项，将babel等插件的配置项，放到自己独立的文件中，回车</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/notes/vue2-2/image-20221125164240909.png" alt="选择独立配置"></p><p>输入y保存我们的选项作为预设，回车</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/notes/vue2-2/image-20221125164417096.png" alt="保存预设"></p><p>输入为预设取的别名，然后回车</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/notes/vue2-2/image-20221125164516315.png" alt="为预设取别名"></p><p>等待加载完成后，进入项目目录，执行<code>npm run serve</code>命令让项目跑起来，打开控制台打印的url地址，查看效果。</p><h3 id="src目录和构成"><a href="#src目录和构成" class="headerlink" title="src目录和构成"></a>src目录和构成</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">assets文件夹：存放项目中用到的静态资源文件，例如：css样式表、图片资源</span><br><span class="line">components文件夹：程序员封装的、可复用的组件，都要放到componts目录下</span><br><span class="line">main.js文件：项目的入口，整个项目的运行，要先执行main.js</span><br><span class="line">App.vue：是项目的根组件</span><br></pre></td></tr></table></figure><h3 id="vue项目的运行流程"><a href="#vue项目的运行流程" class="headerlink" title="vue项目的运行流程"></a>vue项目的运行流程</h3><p>通过main.js把App.vue渲染到index.html的指定区域中</p><ol><li>App.vue 用来编写待渲染的模板结构</li><li>index.html中需要预留一个<strong>el区域</strong></li><li>mian.js把App.vue渲染到了index.html所预留的区域中</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>),</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// $mount(&#x27;#app&#x27;)就相当于el: &#x27;#app&#x27;</span></span><br></pre></td></tr></table></figure><h2 id="vue组件"><a href="#vue组件" class="headerlink" title="vue组件"></a>vue组件</h2><p>只要是<code>.vue</code>结尾的文件，就是vue组件</p><h3 id="vue组件的三个组成部分"><a href="#vue组件的三个组成部分" class="headerlink" title="vue组件的三个组成部分"></a>vue组件的三个组成部分</h3><ol><li>template组件的模板结构</li><li>script         组件的JavaScript行为</li><li>style          组件的样式</li></ol><p><strong>script</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;test-box&quot;&gt;</span><br><span class="line">        &lt;h3&gt;这是用户自定义的Test.vue---&#123;&#123; username &#125;&#125;&lt;/h3&gt;</span><br><span class="line">        &lt;button @click=&quot;changeName&quot;&gt;修改用户名&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// 默认导出，这是固定写法</span><br><span class="line">    export default &#123;</span><br><span class="line">        // .vue组件中的data不能像之前一样，不能指向对象。</span><br><span class="line">        // 组件中的data必须是一个函数</span><br><span class="line">        /*data: &#123;</span><br><span class="line">            username: &#x27;张三&#x27;</span><br><span class="line">        &#125;*/</span><br><span class="line">        data() &#123;</span><br><span class="line">            // 这个return出去的对象中，可以定义数据</span><br><span class="line">            return &#123;</span><br><span class="line">                username: &#x27;张三&#x27;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        method: &#123;</span><br><span class="line">            changeName() &#123;</span><br><span class="line">                // 在组件中，this就表示当前组件的实例对象</span><br><span class="line">                console.log(this);</span><br><span class="line">                this.username = &#x27;李四&#x27;;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        // 当前组件中的侦听器</span><br><span class="line">        watch: &#123;</span><br><span class="line">            </span><br><span class="line">        &#125;,</span><br><span class="line">        // 当前组件中的计算属性</span><br><span class="line">        computed: &#123;</span><br><span class="line">            </span><br><span class="line">        &#125;,</span><br><span class="line">        // 当前组件的过滤器</span><br><span class="line">filters: &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">    .test-box &#123;</span><br><span class="line">     background-color: pink;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p><strong>在template节点下只能有一个根元素</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 错误示范 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;test-box&quot;&gt;</span><br><span class="line">        &lt;h3&gt;这是用户自定义的Test.vue---&#123;&#123; username &#125;&#125;&lt;/h3&gt;</span><br><span class="line">        &lt;button @click=&quot;changeName&quot;&gt;修改用户名&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">        </span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 正确示范 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">        &lt;div class=&quot;test-box&quot;&gt;</span><br><span class="line">        &lt;h3&gt;这是用户自定义的Test.vue---&#123;&#123; username &#125;&#125;&lt;/h3&gt;</span><br><span class="line">        &lt;button @click=&quot;changeName&quot;&gt;修改用户名&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            </span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><p><strong>在style节点支持less语法</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 支持less --&gt;</span><br><span class="line">&lt;style lang=&quot;less&quot;&gt;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 不支持less，支持css，可不写 --&gt;</span><br><span class="line">&lt;style lang=&quot;css&quot;&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h3 id="组件之间的父子关系"><a href="#组件之间的父子关系" class="headerlink" title="组件之间的父子关系"></a>组件之间的父子关系</h3><p>组件封装好之后，彼此之间是相互独立的，不存在父子关系</p><p>在使用组件时，根据彼此的嵌套关系，形成了父子关系，兄弟关系</p><h3 id="使用组件的三个步骤"><a href="#使用组件的三个步骤" class="headerlink" title="使用组件的三个步骤"></a>使用组件的三个步骤</h3><ol><li>使用import语法导入需要的组件</li><li>使用components节点注册组件</li><li>以标签的形式使用刚才注册的组件</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;box&quot;&gt;</span><br><span class="line">        &lt;!-- 以标签形式，使用注册好的组件 --&gt;</span><br><span class="line">        &lt;Left&gt;&lt;/Left&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// 导入需要使用的.vue组件</span><br><span class="line">import Left from &#x27;@/components/left.vue&#x27;;</span><br><span class="line">    import Right from &#x27;@/components/right.vue&#x27;;</span><br><span class="line">    </span><br><span class="line">    export default &#123;</span><br><span class="line">        components: &#123;</span><br><span class="line">            &#x27;Left&#x27;: Left,</span><br><span class="line">            &#x27;Right&#x27;: Right</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>visual studio code 路径提示插件<code>Path Autocomplete</code></p><h3 id="注册全局组件"><a href="#注册全局组件" class="headerlink" title="注册全局组件"></a>注册全局组件</h3><p>之前使用components注册的是私有组件，只能在被导入的组件里使用</p><p>在vue项目的<strong>main.js</strong>入口文件中，通过<code>Vue.component()</code>方法，可以注册全局组件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Count</span> <span class="keyword">from</span> <span class="string">&#x27;@/components/Count.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 第一个参数是组件注册名，第二个参数是需要注册的组件</span></span><br><span class="line"><span class="comment">// 组件注册名建议大写开头</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">componnent</span>(<span class="string">&#x27;MyCount&#x27;</span>,<span class="title class_">Count</span>)</span><br></pre></td></tr></table></figure><p>Visual Studio Code自动补齐标签插件<code>Auto Close Tag</code></p><h3 id="组件里的props"><a href="#组件里的props" class="headerlink" title="组件里的props"></a>组件里的props</h3><p>组件的自定义属性，在封装通用组件的时候，合理使用props可以极大提高组件的复用性</p><p>封装者通过props可以让使用者在使用组件时传参</p><p>props中的数据，可以直接在模板结构中使用，不能直接修改props的值，props中的值是只读的（可写，但是会报错）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="comment">// props是自定义属性，允许使用者通过自定义属性，为当前组件指定初始值</span></span><br><span class="line">    <span class="comment">// 在使用标签引入时使用属性来传值</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    &lt;MyCount init=&quot;9&quot;&gt;&lt;/MyCount&gt;</span></span><br><span class="line"><span class="comment">    传数字</span></span><br><span class="line"><span class="comment">    &lt;MyCount v-bind:init=&quot;9&quot;&gt;&lt;/MyCount&gt;</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="attr">props</span>: [<span class="string">&#x27;init&#x27;</span>]</span><br><span class="line">    </span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="comment">// 把props的值赋值给变量</span></span><br><span class="line">            <span class="attr">count</span>: <span class="variable language_">this</span>.<span class="property">init</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>props default默认值</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line"><span class="comment">// 只能通过对象方式初始化值</span></span><br><span class="line">    <span class="attr">props</span>: &#123;</span><br><span class="line">        <span class="comment">// 自定义属性A</span></span><br><span class="line">        <span class="comment">// 自定义属性B</span></span><br><span class="line">        <span class="comment">// 自定义配置C</span></span><br><span class="line">        <span class="attr">init</span>: &#123;</span><br><span class="line">        <span class="comment">// 如果外界使用此组件时，如果没看又传init值，则默认值生效</span></span><br><span class="line">            <span class="attr">default</span>: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>props  type值类型</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line"><span class="comment">// 只能通过对象方式初始化值</span></span><br><span class="line">    <span class="attr">props</span>: &#123;</span><br><span class="line">        <span class="comment">// 自定义属性A</span></span><br><span class="line">        <span class="comment">// 自定义属性B</span></span><br><span class="line">        <span class="comment">// 自定义配置C</span></span><br><span class="line">        <span class="attr">init</span>: &#123;</span><br><span class="line">        <span class="comment">// 如果外界使用此组件时，如果没看又传init值，则默认值生效</span></span><br><span class="line">            <span class="attr">default</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="comment">// 如果传递过来的值与type不相符，那么终端会报错</span></span><br><span class="line">            <span class="attr">type</span>: <span class="title class_">Number</span></span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>props required必填项</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line"><span class="comment">// 只能通过对象方式初始化值</span></span><br><span class="line">    <span class="attr">props</span>: &#123;</span><br><span class="line">        <span class="comment">// 自定义属性A</span></span><br><span class="line">        <span class="comment">// 自定义属性B</span></span><br><span class="line">        <span class="comment">// 自定义配置C</span></span><br><span class="line">        <span class="attr">init</span>: &#123;</span><br><span class="line">        <span class="comment">// 如果外界使用此组件时，如果没看又传init值，则默认值生效</span></span><br><span class="line">            <span class="attr">default</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="comment">// 如果传递过来的值与type不相符，那么终端会报错</span></span><br><span class="line">            <span class="attr">type</span>: <span class="title class_">Number</span>,</span><br><span class="line">            <span class="comment">// 必填项校验，如果使用此组件时没有传init的值，会报错</span></span><br><span class="line">            <span class="attr">required</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="样式冲突"><a href="#样式冲突" class="headerlink" title="样式冲突"></a>样式冲突</h3><p>写在.vue组件中的样式会全局生效，会造成多个组件样式冲突的问题。</p><p>为组件中的style标签加上<code>scoped</code>属性，可以解决这个问题。</p><p><strong>scoped原理：为组件中每个标签添加一个自定义属性，在style中使用属性选择器。</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line">    h3 &#123;</span><br><span class="line">        color: red;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p>如果使用<code>scoped</code>属性，那么它的父元素就不能修改它的样式，就需要用到<code>/deep/</code>修改子组件的样式</p><p>当使用第三方组件库的时候，如果需要更改第三方默认样式，则需要用到<code>/deep/</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;style lang=&quot;less&quot; scoped&gt;</span><br><span class="line">    /deep/ h5 &#123;</span><br><span class="line">        color: red;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h3 id="vue组件的实例对象"><a href="#vue组件的实例对象" class="headerlink" title="vue组件的实例对象"></a>vue组件的实例对象</h3><p>浏览器并不能识别.vue文件，是由<code>vue-template-compiler</code>包编译成JS交给浏览器来执行。</p><p>以标签形式引用组件才会创建组件实例。</p><h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><p>一个组件从创建 -&gt; 运行 -&gt; 销毁的整个阶段，强调的是一个时间段。</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/notes/vue2-2/image-20221126104840924.png" alt="image-20221126104840924"></p><p><a href="https://v2.cn.vuejs.org/">vue2官方文档</a></p><p>一使用组件的标签就相当于new了一个组件实例</p><h3 id="组件创建阶段"><a href="#组件创建阶段" class="headerlink" title="组件创建阶段"></a>组件创建阶段</h3><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/notes/vue2-2/image-20221126113123020.png" alt="image-20221126113123020"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">message</span>: <span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 组件的props/data/methods都尚未被创建，处于不可用状态</span></span><br><span class="line">    <span class="title function_">beforeCreate</span>(<span class="params"></span>) &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 组件的props/data/methods都已被创建，但是组件的模板结构尚未生成</span></span><br><span class="line">    <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">        concole.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">message</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 将要把内存中编译好的HTML结构渲染到浏览器中，此时浏览器中还没有当前组件的DOM结构。</span></span><br><span class="line">    <span class="comment">// 几乎不会被用到</span></span><br><span class="line">    <span class="title function_">beforMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 已将把内存中的HTML结构，渲染到了浏览器</span></span><br><span class="line">    <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="comment">// 可以在此操作DOM元素 </span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 数据发生了变化，但页面元素还没更新</span></span><br><span class="line">    <span class="title function_">beforeUpdate</span>(<span class="params"></span>) &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 已根据最新的数据完成了组件DOM元素的重新渲染</span></span><br><span class="line">    <span class="title function_">updated</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 当数据变化后希望操作最新的DOM结构在此操作</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 组件将要被销毁时（组件还没有被销毁）</span></span><br><span class="line">    <span class="title function_">beforeDestroy</span>(<span class="params"></span>) &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>created生命周期函数非常常用，经常在它里面调用methods中的方法，请求服务器的数据，并且将请求到的数据，转存到data中，供template模板渲染使用</strong></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/notes/vue2-2/image-20221126134313003.png" alt="image-20221126134313003"></p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/notes/vue2-2/image-20221126134334379.png" alt="image-20221126134334379"></p><h3 id="组件运行阶段"><a href="#组件运行阶段" class="headerlink" title="组件运行阶段"></a>组件运行阶段</h3><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/notes/vue2-2/image-20221126135131635.png" alt="image-20221126135131635"></p><h3 id="组件销毁阶段"><a href="#组件销毁阶段" class="headerlink" title="组件销毁阶段"></a>组件销毁阶段</h3><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/notes/vue2-2/image-20221126201935215.png" alt="image-20221126201935215"></p><h2 id="父子传值"><a href="#父子传值" class="headerlink" title="父子传值"></a>父子传值</h2><h3 id="父向子使用自定义属性"><a href="#父向子使用自定义属性" class="headerlink" title="父向子使用自定义属性"></a>父向子使用自定义属性</h3><p>父类在标签中使用props传值+标签传值，子组件定义自定义属性</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--子组件中定义 --&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">        props: [&#x27;init&#x27;]</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 父组件中定义 --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;Son :init=&quot;msg&quot;&gt;&lt;/Son&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                msg: &#x27;hello&#x27;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><strong>不要修改props的值</strong></p><h3 id="子向父使用自定义事件"><a href="#子向父使用自定义事件" class="headerlink" title="子向父使用自定义事件"></a>子向父使用自定义事件</h3><p>子向父共享数据使用自定义事件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 子组件 --&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                count: 0</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            add() &#123;</span><br><span class="line">                this.count += 1;</span><br><span class="line">                // 修改数据时，通过$emit()触发自定义事件</span><br><span class="line">                this.$emit(&#x27;numchange&#x27;, this.count);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 父组件 --&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;!-- 绑定自定义事件 --&gt;</span><br><span class="line">&lt;Son @numchange=&quot;getNumCount&quot;&gt;&lt;/Son&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                countFromSon: 0</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            getNewCount(val) &#123;</span><br><span class="line">                this.countFromSon = val</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="兄弟组件之间的数据共享"><a href="#兄弟组件之间的数据共享" class="headerlink" title="兄弟组件之间的数据共享"></a>兄弟组件之间的数据共享</h3><p>Vue2中，兄弟组件之间数据共享的方案是EventBus</p><p>这是一种现成的解决方案</p><p><img src="https://image.insectmk.cn/hexo-gitee-blog/article/_post/notes/vue2-2/image-20221126211531540.png" alt="image-20221126211531540"></p><p><strong>使用步骤</strong></p><ol><li>创建eventBus.js模块，并向外共享一个Vue的实例对象</li><li>在数据发送方，调用<code>bus.$emit(&#39;事件名称&#39;,要发送的数据)</code>方法触发自定义事件</li><li>在数据接收方，调用<code>bus.$(&#39;事件名称&#39;,事件处理函数)</code>方法注册一个自定义事件</li></ol><h2 id="ref引用"><a href="#ref引用" class="headerlink" title="ref引用"></a>ref引用</h2><p>在vue中，程序员不需要操作DOM，只需要将数据维护好。（数据驱动视图）</p><p>在vue项目中，强烈不建议安装和使用jQuery</p><p>ref辅助程序员在不依赖jQuery的情况下，获取DOM元素或组件的引用</p><p>每个vue的组件实例上，都包含一个<code>$refs</code>对象，里面存储看对应的DOM元素或组件的引用。默认情况下，组件的<code>$refs</code>指向一个空对象。</p><h3 id="ref引用DOM"><a href="#ref引用DOM" class="headerlink" title="ref引用DOM"></a>ref引用DOM</h3><p><strong>如何拿到某个DOM元素的引用</strong></p><ol><li>为标签添加<code>ref</code>属性，一个组件里属性的值不能重复</li><li>使用<code>$refs</code>对象获取标签指定的<code>ref</code>值</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;h5 ref=&quot;myTag&quot;&gt;&lt;/h5&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">        created() &#123;</span><br><span class="line">            console.log(this.$refs.myTag);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="ref应用组件"><a href="#ref应用组件" class="headerlink" title="ref应用组件"></a>ref应用组件</h3><p><strong>ref也可以用在组件的标签引用上，用<code>$refs</code>访问后是组件的实例对象，就可以访问它的属性和方法</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;h5 ref=&quot;myTag&quot;&gt;&lt;/h5&gt;</span><br><span class="line">&lt;MyComp ref=&quot;MyComp&quot;&gt;&lt;/MyComp&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    import MyComp from &#x27;@/components/MyComp.vue&#x27;</span><br><span class="line">    </span><br><span class="line">export default &#123;</span><br><span class="line">        created() &#123;</span><br><span class="line">            console.log(this.$refs.myTag);</span><br><span class="line">        &#125;,</span><br><span class="line">        components: &#123;</span><br><span class="line">            MyComp</span><br><span class="line">        &#125;,</span><br><span class="line">        created() &#123;</span><br><span class="line">            console.log(this.$refs.myTag);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="this-nextTick-callback"><a href="#this-nextTick-callback" class="headerlink" title="this.$nextTick(callback)"></a><code>this.$nextTick(callback)</code></h3><p><strong>将callback函数在页面重新渲染好后再执行。</strong></p><p>因为有时候页面还没更新就获取<code>ref</code>的值，那个时候<code>ref</code>还并没有出现，所以需要用到<code>this.$nextTick(callback)</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;h5 v-if=&quot;isShow&quot; ref=&quot;myTag&quot;&gt;&lt;/h5&gt;</span><br><span class="line">&lt;h2 v-else ref=&quot;myTag2&quot;&gt;&lt;/h2&gt;</span><br><span class="line">&lt;button @click=&quot;doSome&quot;&gt;显示h2&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                isShow: true</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        methods: &#123;</span><br><span class="line">            doSome() &#123;</span><br><span class="line">                this.isShow = false;</span><br><span class="line">                // 因为数据更新了，但是DOM还没有重新加载，所以要使用$nextTick方法</span><br><span class="line">                this.$nextTick(() =&gt; &#123;</span><br><span class="line">                    console.log(this.$refs.myTag)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="数组中的方法"><a href="#数组中的方法" class="headerlink" title="数组中的方法"></a>数组中的方法</h2><h3 id="some循环"><a href="#some循环" class="headerlink" title="some循环"></a>some循环</h3><p>forEach循环一旦开始就无法在中间停止</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>,<span class="string">&#x27;e&#x27;</span>,<span class="string">&#x27;f&#x27;</span>]</span><br><span class="line"></span><br><span class="line">arr.<span class="title function_">some</span>(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (item === c) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(item)</span><br><span class="line">        <span class="comment">// 在找到对应的项之后，可以通过return true来终止循环</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="every循环"><a href="#every循环" class="headerlink" title="every循环"></a>every循环</h3><p>能用来判断数组中每个对象的某个属性，例如判断是否被全选</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [</span><br><span class="line">    &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;香蕉&#x27;</span>, <span class="attr">state</span>: <span class="literal">true</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;苹果&#x27;</span>, <span class="attr">state</span>: <span class="literal">true</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>: <span class="number">3</span>, <span class="attr">name</span>: <span class="string">&#x27;梨子&#x27;</span>, <span class="attr">state</span>: <span class="literal">true</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>: <span class="number">4</span>, <span class="attr">name</span>: <span class="string">&#x27;橘子&#x27;</span>, <span class="attr">state</span>: <span class="literal">true</span>&#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 需求：判断数组中，水果是否被全选了</span></span><br><span class="line"><span class="keyword">const</span> result = arr.<span class="title function_">every</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">state</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result)</span><br></pre></td></tr></table></figure><h3 id="reduce基本使用"><a href="#reduce基本使用" class="headerlink" title="reduce基本使用"></a>reduce基本使用</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [</span><br><span class="line">    &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;香蕉&#x27;</span>, <span class="attr">state</span>: <span class="literal">true</span>, <span class="attr">price</span>: <span class="number">10</span>, <span class="attr">count</span>: <span class="number">1</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;苹果&#x27;</span>, <span class="attr">state</span>: <span class="literal">false</span>, <span class="attr">price</span>: <span class="number">80</span>, <span class="attr">count</span>: <span class="number">2</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>: <span class="number">3</span>, <span class="attr">name</span>: <span class="string">&#x27;梨子&#x27;</span>, <span class="attr">state</span>: <span class="literal">false</span>, <span class="attr">price</span>: <span class="number">22</span>, <span class="attr">count</span>: <span class="number">2</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>: <span class="number">4</span>, <span class="attr">name</span>: <span class="string">&#x27;橘子&#x27;</span>, <span class="attr">state</span>: <span class="literal">true</span>, <span class="attr">price</span>: <span class="number">24</span>, <span class="attr">count</span>: <span class="number">5</span>&#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 需求： 把购物车数组中，已勾选的水果，总价累加起来</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">arr.filter(item =&gt; item.state).reduce((累加的结果，当前循环项) =&gt; &#123;</span></span><br><span class="line"><span class="comment">    </span></span><br><span class="line"><span class="comment">&#125;,初始值)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">let</span> amt</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result = arr.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">state</span>).<span class="title function_">reduce</span>(<span class="function">(<span class="params">amt, item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> amt += item.<span class="property">price</span> * item.<span class="property">count</span></span><br><span class="line">&#125;,<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result)</span><br></pre></td></tr></table></figure><h3 id="reduce简化写法"><a href="#reduce简化写法" class="headerlink" title="reduce简化写法"></a>reduce简化写法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> amt</span><br><span class="line"><span class="keyword">const</span> result = arr.<span class="title function_">filter</span>(<span class="function"><span class="params">item</span> =&gt;</span> item.<span class="property">state</span>).<span class="title function_">reduce</span>(<span class="function">(<span class="params">amt, item</span>) =&gt;</span> amt += item.<span class="property">price</span> * item.<span class="property">count</span>,<span class="number">0</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue2 </tag>
            
            <tag> 学习 </tag>
            
            <tag> Vue入门 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue2入门笔记（1）</title>
      <link href="/posts/62df11c0/"/>
      <url>/posts/62df11c0/</url>
      
        <content type="html"><![CDATA[<h1 id="Bilibili黑马程序员Vue2"><a href="#Bilibili黑马程序员Vue2" class="headerlink" title="Bilibili黑马程序员Vue2"></a><a href="https://www.bilibili.com/video/BV1zq4y1p7ga/?vd_source=43f3f41b9a99cfe3d5248db59a3897c7">Bilibili黑马程序员Vue2</a></h1><p>基于<a href="https://www.bilibili.com/video/BV1zq4y1p7ga/?vd_source=43f3f41b9a99cfe3d5248db59a3897c7">Bilibili黑马程序员Vue2+vue3</a>教程的学习笔记（1）</p><h2 id="前端工程化"><a href="#前端工程化" class="headerlink" title="前端工程化"></a>前端工程化</h2><ul><li>模块化</li><li>组件化</li><li>规范化</li><li>自动化<br>比如开发时热部署</li></ul><p>前端工程化具体解决方案：<strong>webpack</strong>（还有其他的，但是这个较为流行）</p><h2 id="webpack"><a href="#webpack" class="headerlink" title="webpack"></a>webpack</h2><p>webpack是前端项目工程化的具体解决方案。</p><p>能够压缩代码、处理浏览器端JavaScript兼容性、性能优化。</p><h3 id="webpack的基本使用"><a href="#webpack的基本使用" class="headerlink" title="webpack的基本使用"></a>webpack的基本使用</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建node项目</span></span><br><span class="line">$ npm init -y</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在项目根目录中创建src源代码目录</span></span><br><span class="line">$ <span class="built_in">mkdir</span> src</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在src中创建index.html与index.js</span></span><br><span class="line">$ <span class="built_in">cd</span> src</span><br><span class="line">$ <span class="built_in">touch</span> index.html</span><br><span class="line">$ <span class="built_in">touch</span> index.js</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装JQuery</span></span><br><span class="line">$ npm install npm jquery --save</span><br><span class="line">$ npm install npm jquery -S</span><br></pre></td></tr></table></figure><p>使用ES6导入JQuery</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入jquery第三方包，并使用变量$接收</span></span><br><span class="line"><span class="keyword">import</span> $ <span class="keyword">from</span> <span class="string">&#x27;jquery&#x27;</span></span><br><span class="line"></span><br><span class="line">$(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 实现奇偶变色</span></span><br><span class="line">  $(<span class="string">&#x27;li:odd&#x27;</span>).<span class="title function_">css</span>(<span class="string">&#x27;background-color&#x27;</span>,<span class="string">&#x27;red&#x27;</span>);</span><br><span class="line">  $(<span class="string">&#x27;li:even&#x27;</span>).<span class="title function_">css</span>(<span class="string">&#x27;background-color&#x27;</span>,<span class="string">&#x27;pink&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>在index.html中导入包含以上代码的index.js文件后，会出现语法错误，因为浏览器不支持ES6语法。可以使用webpack来帮我们解决。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装webpack相关的两个包，--save-dev让包保存在devDependencies节点中</span></span><br><span class="line"><span class="comment"># --save-dev表示只在开发阶段使用到的包（4.7.2版本好像有问题，目前直接安装最新版本就能解决）</span></span><br><span class="line">$ npm install webpack@5.42.1 webpack-cli@4.7.2 --save-dev</span><br><span class="line">$ npm install webpack@5.42.1 webpack-cli@4.7.2 --D</span><br></pre></td></tr></table></figure><p>在项目根目录中，创建名为webpack.config.js的webpack配置文件，初始化内容：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 向外导出一个webpack配置对象</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>  <span class="comment">// mode用来指定构建模式，development（开发） production（生产）</span></span><br><span class="line">  <span class="comment">// 使用development打包速度快，代码不会压缩，项目体积大</span></span><br><span class="line">  <span class="comment">// 使用production打包速度慢，代码会压缩，项目体积小</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在package.json的scripts阶段下，新增dev脚本（也可以叫其他的名字）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;dev&quot;</span>: <span class="string">&quot;webpack&quot;</span> <span class="comment">// 使用npm run xxx执行对应脚本，如：npm run dev</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用<code>$ npm run dev</code>来使用webpack工具，它会先读取webpack.config.js这个文件，然后根据配置在项目根目录生成一个dist目标目录，其中有一个main.js脚本文件，并且这个main.js包含index.js与jquery.js的代码</p><p>然后再在index.html中引入main.js代码，就能够运行了，没有兼容性问题。</p><p>webpack4.x与5.x默认打包的入口文件为&#x2F;src&#x2F;index.js，默认输出文件的路径为&#x2F;dist&#x2F;main.js，可以在webpack.config.js配置文件中可以修改默认配置，通过entry节点可以指定导报的入口，通过output节点指定打包的出口。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">  <span class="attr">entry</span>: path.<span class="title function_">join</span>(__dirname,<span class="string">&#x27;./src/index.js&#x27;</span>),</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.<span class="title function_">join</span>(__dirname,<span class="string">&#x27;./dist&#x27;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;bundle.js&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="webpack中的插件"><a href="#webpack中的插件" class="headerlink" title="webpack中的插件"></a>webpack中的插件</h3><p>可以拓展webpack的能力</p><h4 id="webpack-dev-server"><a href="#webpack-dev-server" class="headerlink" title="webpack-dev-server"></a>webpack-dev-server</h4><p>每当修改了源代码，就会对项目进行构建和打包</p><p>使用<code>$ npm install webpack-dev-server@3.11.2 --save-dev</code>安装</p><p>安装后需要对package.json &gt; script中的dev命令进行修改</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;dev&quot;</span>: <span class="string">&quot;webpack serve&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用<code>$ npm run dev</code>运行项目，会发现程序一直在监听而不会退出，一旦源码进行修改项目就会重新打包。<strong>每次重新部署生成的目标文件并不会放在物理磁盘上，而是在内存中，能够通过控制台提示的地址访问</strong></p><p>默认访问此插件提供的http服务地址，是访问项目根目录，为了能够打开地址能够直接访问index首页，可以将&#x2F;src&#x2F;index.html复制一份放在项目根目录中，这里就可以用<strong>web-webpack-plugin</strong>第三方插件来帮我们完成</p><h4 id="web-webpack-plugin"><a href="#web-webpack-plugin" class="headerlink" title="web-webpack-plugin"></a>web-webpack-plugin</h4><p>使用<code>$ npm install html-webpack-plugin@5.3.2 -save-dev</code>安装此插件</p><p>在webpack.config.js配置文件中中配置html-webpack-plugin</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 得到构造函数</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">HtmlPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建HTML插件实例对象</span></span><br><span class="line"><span class="keyword">const</span> htmlPlugin = <span class="keyword">new</span> <span class="title class_">HtmlPlugin</span>(&#123;</span><br><span class="line">  <span class="attr">template</span>: <span class="string">&#x27;./src/index.html&#x27;</span>,   <span class="comment">// 指定源文件的存放路径</span></span><br><span class="line">  <span class="attr">filename</span>: <span class="string">&#x27;./index.html&#x27;</span>        <span class="comment">// 指定生成文件的存放路径</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">  <span class="attr">plugins</span>: [htmlPlugin]           <span class="comment">// 通过plugins节点，使htmlPlugin插件生效</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可以让webpack自动打开浏览器，也可以配置端口。需要在webpack.config.js的配置对象中配置devServer节点</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">devServer</span>: &#123;</span><br><span class="line">  <span class="attr">open</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">host</span>: <span class="string">&#x27;127.0.0.1&#x27;</span>,</span><br><span class="line">  <span class="attr">port</span>: <span class="number">80</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="webpack中的loader（加载器）"><a href="#webpack中的loader（加载器）" class="headerlink" title="webpack中的loader（加载器）"></a>webpack中的loader（加载器）</h3><p>webpack默认只能处理.js文件，为了处理其他文件就需要对应的loader</p><p>使用<code>$ npm install style-loader@3.0.0 css-loader@5.2.6 -D</code>安装处理CSS文件的加载器，然后在webpack.config.js配置对象的module节点增加rules节点</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">module</span>: &#123;</span><br><span class="line">  <span class="comment">// 所有第三方模块的匹配规则</span></span><br><span class="line">  <span class="attr">rules</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="comment">// 文件后缀为.css</span></span><br><span class="line">      <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">      <span class="comment">// 使用到的插件</span></span><br><span class="line">      <span class="attr">use</span>: [</span><br><span class="line">        <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;css-loader&#x27;</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>处理less文件</p><ul><li>Less是一门CSS预处理语言，css是一种用来表现HTML或XML等文件样式的计算机语言。</li><li>less扩展了CSS语言，增加了变量、Mixin、函数等特性。</li><li>css可以被浏览器直接识别，less需要先编译为css。</li></ul><p>运行<code>$ npm install less-loader@10.0.1 less@4.1.1 -D</code>命令下载对应加载器（可以不用下载less，因为less-loader依赖less，会自动安装），并在webpack.config.js配置对象的module &gt; rules数组进行配置。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">module</span>: &#123;</span><br><span class="line">  <span class="comment">// 所有第三方模块的匹配规则</span></span><br><span class="line">  <span class="attr">rules</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="comment">// 文件后缀为.css</span></span><br><span class="line">      <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">      <span class="comment">// 使用到的插件</span></span><br><span class="line">      <span class="attr">use</span>: [</span><br><span class="line">        <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;css-loader&#x27;</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;,&#123;</span><br><span class="line">      <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">      <span class="attr">use</span>: [</span><br><span class="line">        <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;less-loader&#x27;</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br></pre></td></tr></table></figure><p>小图片优化：base64，精灵图</p><p>运行<code>$ npm install url-loader@4.1.1 file-loader@6.2.0 -D</code>命令，在webpack.config.js配置对象的module &gt; rules数组中添加规则</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">module</span>: &#123;</span><br><span class="line">  <span class="attr">rules</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">test</span>: <span class="string">&#x27;/\.jpg|png|gif$/&#x27;</span>,</span><br><span class="line">      <span class="comment">// ?后为参数项</span></span><br><span class="line">      <span class="comment">// limit指定图片大小，（byte），只有小于等于这个大小的图片才会被转为base64格式的图片</span></span><br><span class="line">      <span class="attr">use</span>: <span class="string">&#x27;url-loader?limit=2229&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="处理高级语法"><a href="#处理高级语法" class="headerlink" title="处理高级语法"></a>处理高级语法</h4><p>支持装饰器语法</p><p>运行<code>npm install babel-loader@8.2.2 @babel/core@7.14.6 @babel/plugin-proposal-decorators@7.14.5 -D</code>下载webpack对应的babel加载器和babel的插件</p><p><strong>@babel&#x2F;<a href="mailto:&#x63;&#111;&#x72;&#x65;&#64;&#x37;&#46;&#x31;&#52;&#x2e;&#54;">&#x63;&#111;&#x72;&#x65;&#64;&#x37;&#46;&#x31;&#52;&#x2e;&#54;</a></strong></p><p>这个前面的@babel表示babel公司的私有包，&#x2F;core表示这个公司名下的core第三方包，@7.14.6表示版本</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">module</span>: &#123;</span><br><span class="line">  <span class="attr">rules</span>: [</span><br><span class="line">     &#123;</span><br><span class="line">          <span class="attr">test</span>: <span class="regexp">/\.js/</span>,</span><br><span class="line">          <span class="attr">use</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">          <span class="comment">// 排除项，不处理第三方包</span></span><br><span class="line">          <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span></span><br><span class="line">        &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>以上只是匹配了规则，在项目根目录中还要创建babel.config.js的配置文件，来应用bale旗下的插件（插件的插件）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// 生命babel可用的插件</span></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    [<span class="string">&#x27;@babel/plugin-proposal-decorators&#x27;</span>,&#123;<span class="attr">legacy</span>: <span class="literal">true</span>&#125;]</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="build配置"><a href="#build配置" class="headerlink" title="build配置"></a>build配置</h2><p>目前配置后webpack只能将项目生成在内存中，如果想发布项目怎么办？</p><p>在package.json文件中的scripts中添加build节点</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;webpack --mode production&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="自动清理dist文件夹"><a href="#自动清理dist文件夹" class="headerlink" title="自动清理dist文件夹"></a>自动清理dist文件夹</h2><p>使用<code>$ npm install clean-webpack-plugin --save-dev</code>命令进行安装</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;<span class="title class_">CleanWebpackPlugin</span>&#125; = <span class="built_in">require</span>(<span class="string">&#x27;clean-webpack-plugin&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line"><span class="attr">plugins</span>: [</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">CleanWebpackPlugin</span>()</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Source-Map"><a href="#Source-Map" class="headerlink" title="Source Map"></a>Source Map</h2><p>因为生成的代码与源代码不一致，就导致报错位置不能与源代码对应，Source Map保存信息文件，存储生成代码位置信息。在webpack.config.js的配置对象中添加节点<code>devtool: &#39;eval-source-map&#39;</code>，只在开发时使用此工具。</p><h3 id="只定位行号不暴露源码"><a href="#只定位行号不暴露源码" class="headerlink" title="只定位行号不暴露源码"></a>只定位行号不暴露源码</h3><p><code>devtool: &#39;nosources-source-map&#39;</code></p><h2 id="webpack取别名"><a href="#webpack取别名" class="headerlink" title="webpack取别名"></a>webpack取别名</h2><p>将@表示源码根目录，在webpack.config.js配置对象节点中添加以下内容</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">resolve</span>: &#123;</span><br><span class="line"><span class="attr">alias</span>: &#123;</span><br><span class="line"><span class="string">&#x27;@&#x27;</span>: path.<span class="title function_">join</span>(__dirname,<span class="string">&#x27;./src/&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="安装浏览器vue调试工具"><a href="#安装浏览器vue调试工具" class="headerlink" title="安装浏览器vue调试工具"></a>安装浏览器vue调试工具</h2><p>在Chrome安装vue调试工具</p><p><a href="https://devtools.vuejs.org/">下载浏览器插件</a></p><p>更多 -&gt; 更多工具 -&gt; 扩展工具 -&gt; 开发者模式 -&gt; 安装插件</p><p>配置插件 -&gt; 详情 -&gt; 允许访问文件网址 </p><h2 id="Vue"><a href="#Vue" class="headerlink" title="Vue"></a>Vue</h2><p>用于构建用户界面的前端框架</p><p>需要学习vue框架的规范</p><p>vue的指令、组件、路由、Vuex、Vue组件库</p><h3 id="Vue的特性"><a href="#Vue的特性" class="headerlink" title="Vue的特性"></a>Vue的特性</h3><h4 id="数据驱动视图"><a href="#数据驱动视图" class="headerlink" title="数据驱动视图"></a>数据驱动视图</h4><p>Vue将获取到的数据自动渲染到页面结构</p><h4 id="双向数据绑定"><a href="#双向数据绑定" class="headerlink" title="双向数据绑定"></a>双向数据绑定</h4><p>在网页中，form表单负责采集数据，ajax负责传递数据</p><h4 id="工作原理：MVVM"><a href="#工作原理：MVVM" class="headerlink" title="工作原理：MVVM"></a>工作原理：MVVM</h4><p>Model、View、ViewModel</p><p>Model：表示当前页面渲染时所依赖的数据源<br>View： 表示当前页面所渲染的DOM结构<br>ViewModel： 表示vue的示例，他是MVVM的核心</p><h3 id="Vue基本使用"><a href="#Vue基本使用" class="headerlink" title="Vue基本使用"></a>Vue基本使用</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 引入Vue --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vue@2.7.10/dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- username表示接收传入数据的变量 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span>&#123;&#123; username &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 需要被控制的dom，选择器只会控制第一个被选择的元素</span></span></span><br><span class="line"><span class="language-javascript"><span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 传入的数据</span></span></span><br><span class="line"><span class="language-javascript"><span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">username</span>: <span class="string">&#x27;zhangsan&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="Vue指令"><a href="#Vue指令" class="headerlink" title="Vue指令"></a>Vue指令</h4><p>指令是为开发者提供的模板语法，用于辅助开发者渲染页面的基本结构</p><p>指令分为六大类</p><ul><li>内容渲染指令</li><li>属性绑定指令</li><li>事件绑定指令</li><li>双向绑定指令</li><li>条件渲染指令</li><li>列表渲染指令</li></ul><h5 id="内容渲染指令"><a href="#内容渲染指令" class="headerlink" title="内容渲染指令"></a>内容渲染指令</h5><p>用在内容节点的指令，指令的模板引擎不仅能插入数值，还能执行简单的javascript运算</p><h6 id="v-text"><a href="#v-text" class="headerlink" title="v-text"></a>v-text</h6><p>会覆盖元素中所有的内容</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-text</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-text</span>=<span class="string">&quot;gender&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">username</span>: <span class="string">&#x27;lisi&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">gender</span>: <span class="string">&#x27;man&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h6 id="插值表达式"><a href="#插值表达式" class="headerlink" title="插值表达式"></a>插值表达式</h6><p>插值表达式就是两个大括号，英文名Mustache，只是内容的占位符，不会覆盖原有的内容。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; username &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; gender &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">username</span>: <span class="string">&#x27;lisi&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">gender</span>: <span class="string">&#x27;man&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h6 id="v-html"><a href="#v-html" class="headerlink" title="v-html"></a><code>v-html</code></h6><p><code>v-text</code>和插值表达式只能渲染文本内容，不能渲染html标签内容，<code>v-html</code>能解决这个问题</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-html</span>=<span class="string">&quot;info&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">info</span>: <span class="string">&#x27;&lt;h1&gt;哈哈哈哈哈哈&lt;/h1&gt;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="属性渲染指令"><a href="#属性渲染指令" class="headerlink" title="属性渲染指令"></a>属性渲染指令</h5><p>用在属性节点的指令</p><h6 id="v-bind"><a href="#v-bind" class="headerlink" title="v-bind"></a><code>v-bind</code></h6><p>加在属性的前面并加一个冒号，也可省略<code>v-bind</code>，只加冒号</p><p>例：<code>v-bind:img=&quot;变量&quot;</code>or<code>:img=&quot;变量&quot;</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">v-bind:src</span>=<span class="string">&quot;photo&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">photo</span>: <span class="string">&#x27;http://xxx.com/xxx.img&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="事件绑定指令"><a href="#事件绑定指令" class="headerlink" title="事件绑定指令"></a>事件绑定指令</h5><h6 id="v-on事件绑定"><a href="#v-on事件绑定" class="headerlink" title="v-on事件绑定"></a><code>v-on</code>事件绑定</h6><p>可以使用<code>@</code>来省略<code>v-on:</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; count &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;add&quot;</span>&gt;</span>点击加<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;sub&quot;</span>&gt;</span>点击减<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">count</span>: <span class="number">0</span></span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">add</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ok&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">sub</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;okk&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>如何传参</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; count &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;add(2)&quot;</span>&gt;</span>点击加<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;sub(1)&quot;</span>&gt;</span>点击减<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">count</span>: <span class="number">0</span></span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">add</span>: <span class="keyword">function</span>(<span class="params">num</span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(num);</span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">sub</span>: <span class="keyword">function</span>(<span class="params">num</span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(num);</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>使用<code>@</code>简写事件绑定指令</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; count &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;add(2)&quot;</span>&gt;</span>点击加<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;sub(1)&quot;</span>&gt;</span>点击减<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">count</span>: <span class="number">0</span></span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">add</span>: <span class="keyword">function</span>(<span class="params">num</span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(num);</span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">sub</span>: <span class="keyword">function</span>(<span class="params">num</span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(num);</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Vue有内置对象，$event表示js原生事件对象</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; count &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;add($event,2)&quot;</span>&gt;</span>点击加<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;sub(1)&quot;</span>&gt;</span>点击减<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">count</span>: <span class="number">0</span></span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">add</span>: <span class="keyword">function</span>(<span class="params">e,num</span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">target</span>);</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(num);</span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">sub</span>: <span class="keyword">function</span>(<span class="params">num</span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(num);</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>事件修饰符</strong></p><p>加在事件绑定的后面</p><table><thead><tr><th align="left">事件修饰符</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">.prevent</td><td align="left">阻止默认行为</td></tr><tr><td align="left">.stop</td><td align="left">阻止事件冒泡</td></tr><tr><td align="left">.capture</td><td align="left">以捕获模式出发当前的事件处理函数</td></tr><tr><td align="left">.once</td><td align="left">绑定的事件只触发一次</td></tr><tr><td align="left">.self</td><td align="left">只有在event.target是当前元素自身时触发事件处理函数</td></tr></tbody></table><p><strong>阻止默认事件</strong></p><p><code>@click.prevent=&quot;show()&quot;</code></p><p><strong>按键修饰符</strong></p><table><thead><tr><th align="left">按键修饰符</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">.enter</td><td align="left">按键是enter时才触发事件</td></tr><tr><td align="left">.esc</td><td align="left">按键时esc时才触发事件</td></tr><tr><td align="left">…</td><td align="left">…</td></tr></tbody></table><h5 id="双向绑定指令"><a href="#双向绑定指令" class="headerlink" title="双向绑定指令"></a>双向绑定指令</h5><p>使用<code>v-model</code>设置双向绑定数据，dom能够改变变量，变量也能改变dom</p><p><code>v-bind</code>即<code>:</code>是单向绑定，不会改变变量的值，只会变量改变dom</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;content&quot;</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">content</span>: <span class="string">&#x27;hello world&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>在表单元素中使用才有意义</strong></p><p><code>v-model</code>指令的修饰符</p><table><thead><tr><th align="left"><code>v-model</code>修饰符</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">.number</td><td align="left">识别绑定的数据为数值</td></tr><tr><td align="left">.trim</td><td align="left">自动去除首尾空格</td></tr><tr><td align="left">.lazy</td><td align="left">中间的变化过程不会同步到变量中</td></tr></tbody></table><h5 id="条件渲染指令"><a href="#条件渲染指令" class="headerlink" title="条件渲染指令"></a>条件渲染指令</h5><p>按需控制DOM的显示与隐藏</p><h6 id="v-if"><a href="#v-if" class="headerlink" title="v-if"></a><code>v-if</code></h6><p>每次动态创建或移除元素</p><p>如果刚进入页面，某些页面默认不需要被展示，而且后期也很可能不需要被展示出来，这时<code>v-if</code>性能更好</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-if</span>=<span class="string">&quot;flag&quot;</span>&gt;</span>这是被v-if控制的元素<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">flag</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h6 id="v-show"><a href="#v-show" class="headerlink" title="v-show"></a><code>v-show</code></h6><p>是动态为元素添加<code>display: none</code>样式，来实现元素的显示和隐藏</p><p>如果频繁显示隐藏，用<code>v-show</code>的性能要高</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-show</span>=<span class="string">&quot;flag&quot;</span>&gt;</span>这是被v-show控制的元素<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">flag</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h6 id="v-else-v-else-if"><a href="#v-else-v-else-if" class="headerlink" title="v-else&amp;v-else-if"></a><code>v-else</code>&amp;<code>v-else-if</code></h6><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;&lt;条件&gt;&quot;</span>&gt;</span>优秀<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else-if</span>=<span class="string">&quot;&lt;条件&gt;&quot;</span>&gt;</span>良好<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else-if</span>=<span class="string">&quot;&lt;条件&gt;&quot;</span>&gt;</span>一般<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else</span>&gt;</span>差<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="列表渲染指令（循环指令v-for）"><a href="#列表渲染指令（循环指令v-for）" class="headerlink" title="列表渲染指令（循环指令v-for）"></a>列表渲染指令（循环指令<code>v-for</code>）</h5><p>使用语法<code>item in items</code>，其中<code>in</code>是固定指令，items接收data中的数组，item接收items中的元素</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">th</span>&gt;</span>姓名<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">th</span>&gt;</span>性别<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">v-for</span>=<span class="string">&quot;item in items&quot;</span> <span class="attr">:title</span>=<span class="string">&quot;item.name&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; item.name &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; item.gender &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">item</span>: [</span></span><br><span class="line"><span class="language-javascript">&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">gender</span>: <span class="string">&#x27;男&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript">&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">name</span>: <span class="string">&#x27;李四&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">gender</span>: <span class="string">&#x27;女&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">]</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>使用语法<code>(item,index) in items</code>，其中<code>in</code>是固定指令，items接收data中的数组，item接收items中的元素，index是元素下标，从0起标</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">th</span>&gt;</span>序号<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">th</span>&gt;</span>姓名<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">th</span>&gt;</span>性别<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">v-for</span>=<span class="string">&quot;(item,index) in items&quot;</span> <span class="attr">:title</span>=<span class="string">&quot;item.name + (index + 1)&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; index + 1 &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; item.name &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; item.gender &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">item</span>: [</span></span><br><span class="line"><span class="language-javascript">&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">gender</span>: <span class="string">&#x27;男&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript">&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">name</span>: <span class="string">&#x27;李四&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">gender</span>: <span class="string">&#x27;女&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">]</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>官方建议：</strong>只要用到了<code>v-for</code>指令，那么一定要绑定一个<code>:key</code>属性，并且尽量把<code>item.id</code>作为<code>:key</code>的值，这个值只能是字符串或者是数字类型，<code>:key</code>的值不能重复，否则会报错<code>Buplicat keys detected</code></p><p>使用index的值作为key的值并没有任何意义，因为这个index与内容并没有绑定关系，他是和元素顺序有关</p><p>指定key的值既能提升性能、又防止列表状态絮乱</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">v-for</span>=<span class="string">&quot;(item,index) in items&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;item.id&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123; item.name &#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="Vue过滤器（Filters）"><a href="#Vue过滤器（Filters）" class="headerlink" title="Vue过滤器（Filters）"></a>Vue过滤器（Filters）</h4><p>常用于文本格式化，可和<code>v-bind</code>属性绑定，管道符<code>|</code></p><p>前面的变量作为管道后面过滤函数的参数，过滤器函数应定义到filters节点下</p><p><strong>私有过滤器</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; message | toUp &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">message</span>: <span class="string">&#x27;hello&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">filter</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">toUp</span>: <span class="keyword">function</span>(<span class="params">message</span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(message);</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">return</span> message + <span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>全局过滤器</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="title class_">Vue</span>.<span class="title function_">filter</span>(<span class="string">&#x27;capi&#x27;</span>,<span class="keyword">function</span>(<span class="params">str</span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> first = str.<span class="title function_">charAt</span>(<span class="number">0</span>).<span class="title function_">toUpperCase</span>();</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> other = str.<span class="title function_">slice</span>(<span class="number">1</span>);</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">return</span> first + other;</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>过滤器也能够串联调用，例：<code>item.time | dateformat | xxx | yyy | zzz</code></p><h4 id="Vue侦听器（watch）"><a href="#Vue侦听器（watch）" class="headerlink" title="Vue侦听器（watch）"></a>Vue侦听器（watch）</h4><p>定义在watch节点下，方法名与需要监听的数据变量名一致，监视数据的变化</p><p><strong>方法格式侦听器</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;username&quot;</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">username</span>: <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">watch</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">username</span>(<span class="params">newVal,oldVal</span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;新值：&#x27;</span> + newVal);</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;旧值：&#x27;</span> + oldVal);</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;监听到了username值的变化&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>以上的方法侦听器无法在初始化页面时就执行一次，可以使用对象格式实现自动触发一次</p><p>也无法监听对象中的属性变化，可以使用对象格式的deep选项</p><p><strong>对象格式侦听器</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;username&quot;</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">username</span>: <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">watch</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">username</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 侦听器处理函数</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">handler</span> (newVal,oldVal) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;新值：&#x27;</span> + newVal);</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;旧值：&#x27;</span> + oldVal);</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;监听到了username值的变化&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 控制侦听器是否触发一次，默认为false</span></span></span><br><span class="line"><span class="language-javascript"><span class="attr">immediate</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>深度监听</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;info.username&quot;</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">info</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">username</span>: <span class="string">&#x27;admin&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">watch</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">info</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">handler</span>(<span class="params">newVal,oldVal</span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(newVal);</span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 开启深度监听，只要对象中任何一个属性变化，都会触发对象侦听器，默认为false</span></span></span><br><span class="line"><span class="language-javascript"><span class="attr">deep</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>直接侦听对象中的某个属性</strong></p><p>方法名包裹单引号</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;info.username&quot;</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">info</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">username</span>: <span class="string">&#x27;admin&#x27;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">watch</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="string">&#x27;info.username&#x27;</span>(newVal) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(newVal);</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="Vue计算属性"><a href="#Vue计算属性" class="headerlink" title="Vue计算属性"></a>Vue计算属性</h4><p>通过一系列运算后，最终得到的属性值（实现代码复用），放在computed节点下</p><p>依赖的属性变化后会自动重新求值</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">r:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;r&quot;</span> &gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">g:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;g&quot;</span> &gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">b:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;b&quot;</span> &gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">:style</span>=<span class="string">&quot;&#x27;background-color:&#x27; + rgb&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-text</span>=<span class="string">&quot;rgb&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;show&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">r</span>: <span class="number">100</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">g</span>: <span class="number">100</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">b</span>: <span class="number">100</span></span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">show</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">rgb</span>);</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 所有的计算属性，都要定义到computed节点下</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 计算属性在定义的时候，要定义成方法格式</span></span></span><br><span class="line"><span class="language-javascript"><span class="attr">computed</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="comment">// rgb作为一个计算属性，被定义成了方法格式</span></span></span><br><span class="line"><span class="language-javascript"><span class="comment">// 最终要返回一个生成好的rgb(x,y,z)格式字符串</span></span></span><br><span class="line"><span class="language-javascript"><span class="title function_">rgb</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">return</span> <span class="string">`rgb(<span class="subst">$&#123;<span class="variable language_">this</span>.r&#125;</span>,<span class="subst">$&#123;<span class="variable language_">this</span>.g&#125;</span>,<span class="subst">$&#123;<span class="variable language_">this</span>.b&#125;</span>)`</span>;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="axios"><a href="#axios" class="headerlink" title="axios"></a>axios</h4><p>axios是一个专注于网络请求的库，jQuery还有很多其他的功能，过于庞大</p><p>cdn<code>&lt;script src=&quot;https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js&quot;&gt;&lt;/script&gt;</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// axios的基本用法</span></span><br><span class="line"><span class="title function_">axios</span>(&#123;</span><br><span class="line"><span class="attr">method</span>: <span class="string">&#x27;请求的类型&#x27;</span>,</span><br><span class="line"><span class="attr">url</span>: <span class="string">&#x27;请求的url地址&#x27;</span></span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="comment">// 处理函数</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result.<span class="property">data</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>axios给收到的响应套了一层壳</p><ul><li>config</li><li>data:{}真实的数据</li><li>headers</li><li>request</li><li>status</li><li>statusText</li></ul><p><strong>axios传参</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">aixos</span>(&#123;</span><br><span class="line"><span class="comment">// 请求方式</span></span><br><span class="line"><span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line"><span class="attr">url</span>: <span class="string">&#x27;http://www.baidu.com&#x27;</span>,</span><br><span class="line"><span class="comment">// url参数</span></span><br><span class="line"><span class="attr">params</span>: &#123;</span><br><span class="line"><span class="attr">id</span>: <span class="number">1</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// 请求体参数</span></span><br><span class="line"><span class="attr">data</span>: &#123;</span><br><span class="line"><span class="attr">password</span>: <span class="string">&#x27;13424&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="function">(<span class="params">result</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result.<span class="property">data</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>axios返回的是Promise对象</strong></p><p><a href="https://blog.csdn.net/weixin_41817034/article/details/80492315">Promise参考博文</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;#btnPost&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">async</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line"><span class="comment">// 如果调用某个方法返回值是Promise实例，则前面可以添加await</span></span><br><span class="line"><span class="comment">// await只能用在被async“修饰的方法中”</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 解构后重命名</span></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="attr">data</span>: res &#125; = <span class="keyword">await</span> <span class="title function_">axios</span>(&#123;</span><br><span class="line"><span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line"><span class="attr">url</span>: <span class="string">&#x27;http://www.liulongbin.top:3006/api/post&#x27;</span>,</span><br><span class="line"><span class="attr">data</span>: &#123;</span><br><span class="line"><span class="attr">name</span>: <span class="string">&#x27;zs&#x27;</span>,</span><br><span class="line"><span class="attr">age</span>: <span class="number">20</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>axios直接发送请求</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">axios.<span class="title function_">get</span>(<span class="string">&#x27;url地址&#x27;</span>,&#123;</span><br><span class="line"><span class="comment">// 参数</span></span><br><span class="line"><span class="attr">params</span>: &#123;&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">axios.<span class="title function_">post</span>(<span class="string">&#x27;url地址&#x27;</span>,&#123;post请求体数据&#125;)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue2 </tag>
            
            <tag> 学习 </tag>
            
            <tag> Vue入门 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>NodeJS入门笔记</title>
      <link href="/posts/441e328e/"/>
      <url>/posts/441e328e/</url>
      
        <content type="html"><![CDATA[<h1 id="Bilibili黑马程序员NodeJS"><a href="#Bilibili黑马程序员NodeJS" class="headerlink" title="Bilibili黑马程序员NodeJS"></a><a href="https://www.bilibili.com/video/BV1a34y167AZ">Bilibili黑马程序员NodeJS</a></h1><p>基于<a href="https://www.bilibili.com/video/BV1a34y167AZ">Bilibili黑马程序员NodeJS教程</a>的学习记录</p><h2 id="什么是nodejs"><a href="#什么是nodejs" class="headerlink" title="什么是nodejs"></a>什么是nodejs</h2><p>nodejs是基于谷歌v8引擎的js解释器，nodejs包含npm，npm是node包管理工具</p><h2 id="如何运行js代码"><a href="#如何运行js代码" class="headerlink" title="如何运行js代码"></a>如何运行js代码</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 执行当前目录下名为xx.js的js源文件</span></span><br><span class="line">$ node xx.js</span><br></pre></td></tr></table></figure><h2 id="内置模块"><a href="#内置模块" class="headerlink" title="内置模块"></a>内置模块</h2><p>nodejs也和chrome的v8一样，有一些内置模块供我们使用</p><ul><li><p>fs文件模块</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入fs模块</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br></pre></td></tr></table></figure></li><li><p>path路径模块</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入path模块</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br></pre></td></tr></table></figure></li><li><p>http服务模块</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入http模块</span></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br></pre></td></tr></table></figure></li></ul><h2 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1、标准</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 或者</span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">xx</span> = xxx;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2、简洁</span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">xx</span> = xxx;</span><br></pre></td></tr></table></figure><h2 id="npm使用"><a href="#npm使用" class="headerlink" title="npm使用"></a>npm使用</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 因为npm默认下载包的地址在国外，可以切换国内的镜像源</span></span><br><span class="line"><span class="comment"># 下载镜像源快速切换工具nrm</span></span><br><span class="line">$ npm install -g nrm</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看镜像源列表</span></span><br><span class="line">$ nrm <span class="built_in">ls</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用列表中的镜像，例：</span></span><br><span class="line">$ nrm use taobao</span><br><span class="line"></span><br><span class="line"><span class="comment"># 下载某个包</span></span><br><span class="line">$ npm install xxxx[@version] [--save]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 卸载某个包</span></span><br><span class="line">$ npm uninstall xxxx[@version] [--save]</span><br></pre></td></tr></table></figure><h2 id="express"><a href="#express" class="headerlink" title="express"></a>express</h2><p>优秀的第三方模块，能够快速开发中间件</p><h3 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 文件1</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Router</span> = express.<span class="title class_">Router</span>();</span><br><span class="line"><span class="title class_">Router</span>.<span class="title function_">get</span>(<span class="string">&#x27;path1&#x27;</span>,func1);</span><br><span class="line"><span class="title class_">Router</span>.<span class="title function_">post</span>(<span class="string">&#x27;path2&#x27;</span>,func2);</span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title class_">Router</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 文件2</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Router</span> = <span class="built_in">require</span>(<span class="string">&#x27;./文件1&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;前缀&#x27;</span>,<span class="title class_">Router</span>);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">listen</span>(端口,funciton;</span><br></pre></td></tr></table></figure><h3 id="中间件"><a href="#中间件" class="headerlink" title="中间件"></a>中间件</h3><p>express在收到请求时会先调用中间件</p><p>中间件的调用会根据中间件注册的顺序执行，而且会共用一个res和req，也就是说可以在上游中间件给res对象和req对象加入一些属性或方法供下游中间件使用。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建中间件</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">mw1</span>(<span class="params">req,res,next</span>) &#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    你的代码</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"><span class="title function_">next</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">mw2</span>(<span class="params">req,res,next</span>) &#123;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">你的代码</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="title function_">next</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 注册全局生效中间件</span></span><br><span class="line">app.<span class="title function_">use</span>(mw1);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 注册局部生效的中间件</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;path&#x27;</span>,mw2,func);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 注册多个局部生效的中间件</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;path&#x27;</span>,[mw1,mw2],func);</span><br><span class="line"><span class="comment">// or</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;path&#x27;</span>,mw1,mw2,func);</span><br></pre></td></tr></table></figure><p><strong>注意事项</strong></p><ul><li>中间件的注册应当放在路由的前面</li><li>中间件函数中的业务完成后应当调用next函数，否则请求会停止在此中间件</li><li>中间件函数应当最后调用next函数，不能在next函数调用后还继续写代码，否则会造成代码混乱</li></ul><h3 id="中间件的分类"><a href="#中间件的分类" class="headerlink" title="中间件的分类"></a>中间件的分类</h3><ul><li><p>应用级别中间件<br>注册在app上的中间件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">mw</span> = (<span class="params">req,res,next</span>) =&gt; &#123;</span><br><span class="line"><span class="title function_">next</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 直接注册在app上</span></span><br><span class="line">app.<span class="title function_">use</span>(mw);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 注册在app的路由上</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;path&#x27;</span>,mw,func);</span><br></pre></td></tr></table></figure></li><li><p>路由级别中间件</p></li></ul><p>注册在Router上的中间件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Router</span> = express.<span class="title class_">Router</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">mw</span> = (<span class="params">req,res,next</span>) =&gt; &#123;</span><br><span class="line"><span class="title function_">next</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Router</span>.<span class="title function_">use</span>(mw);</span><br></pre></td></tr></table></figure><ul><li>错误级别中间件</li></ul><p>用于处理错误，防止系统崩溃的中间件，一定要在路由后注册</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义错误中间件，相较于普通中间件多了一个err参数</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">mw</span> = (<span class="params">err,req,res,next</span>) =&gt; &#123;</span><br><span class="line"><span class="title function_">next</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;path&#x27;</span>,func);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在路由后注册才会有err对象，否则err为undefined</span></span><br><span class="line">app.<span class="title function_">use</span>(mw);</span><br></pre></td></tr></table></figure><ul><li>内置中间件</li></ul><p>express自带的中间件</p><ul><li>内置中间件-express.static()</li></ul><p>快速托管静态资源</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;prefix&#x27;</span>,express.<span class="title function_">static</span>(<span class="string">&#x27;path&#x27;</span>));</span><br></pre></td></tr></table></figure><ul><li>内置中间件-express.json()</li></ul><p>解析请求体中的json数据</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">json</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过req对象的body属性获取</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;path&#x27;</span>,<span class="function">(<span class="params">req,res</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">let</span> body = req.<span class="property">body</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(body);</span><br><span class="line">res.<span class="title function_">send</span>(body);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>内置中间件-express.urlencoded()</li></ul><p>解析请求体中url-www-extended（好像叫这个吧，忘了）的数据</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 传入一个对象（我也不太清楚什么意思）</span></span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">urlencoded</span>(&#123;</span><br><span class="line"><span class="attr">extended</span>: <span class="literal">false</span>;</span><br><span class="line">&#125;));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过req对象的body属性获取</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;path&#x27;</span>,<span class="function">(<span class="params">req,res</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">let</span> body = req.<span class="property">body</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(body);</span><br><span class="line">res.<span class="title function_">send</span>(body);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>第三方中间件</li></ul><p>别人写的优秀的第三方中间件，例如body-parser，但是<a href="mailto:&#101;&#120;&#x70;&#114;&#x65;&#x73;&#x73;&#64;&#52;&#46;&#49;&#x36;&#x2e;&#48;">&#101;&#120;&#x70;&#114;&#x65;&#x73;&#x73;&#64;&#52;&#46;&#49;&#x36;&#x2e;&#48;</a>以后就自带了这个东西<br>就是express.urlencoded()，它是基于body-parser的封装<br>首先要下载body-parser包</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install body-parser --save</span><br></pre></td></tr></table></figure><p>使用方法与express.encoded()差不多</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">&#x27;body-parser&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 传入一个对象（我也不太清楚什么意思）</span></span><br><span class="line">app.<span class="title function_">use</span>(bodyParser.<span class="title function_">urlencoded</span>(&#123;</span><br><span class="line"><span class="attr">extended</span>: <span class="literal">false</span>;</span><br><span class="line">&#125;));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 通过req对象的body属性获取</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;path&#x27;</span>,<span class="function">(<span class="params">req,res</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">let</span> body = req.<span class="property">body</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(body);</span><br><span class="line">res.<span class="title function_">send</span>(body);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="跨域问题"><a href="#跨域问题" class="headerlink" title="跨域问题"></a>跨域问题</h2><p><strong>什么是跨域问题</strong></p><p>在浏览器控制台中会出现类似以下的报错</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Access to XMLHttpRequest at &#x27;http://127.0.0.1/api/get?id=2206831544&amp;name=%E9%A9%AC%E6%9F%90&amp;gender=%E7%94%B7&#x27; from origin &#x27;null&#x27; has been blocked by CORS policy: No &#x27;Access-Control-Allow-Origin&#x27; header is present on the requested resource.</span><br></pre></td></tr></table></figure><p>协议、域名、端口号的不同导致的跨域问题</p><p><strong>解决方案</strong></p><p>CORS（主流的解决方案，推荐使用）<br>JSONP（有缺陷的解决方案，只支持get请求）</p><h3 id="使用cors第三方中间件"><a href="#使用cors第三方中间件" class="headerlink" title="使用cors第三方中间件"></a>使用cors第三方中间件</h3><p>cors是express解决跨域问题的第三方中间件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载cors第三方包</span></span><br><span class="line">$ npm install cors --save</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> cors = <span class="built_in">require</span>(<span class="string">&#x27;cors&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在引入路由之前注册cors中间件</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">cors</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在此写入路由</span></span><br></pre></td></tr></table></figure><p><strong>指定域名通过跨域请求</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 指定http://19maken.top才能跨域访问</span></span><br><span class="line">res.<span class="title function_">setHeader</span>(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>,<span class="string">&#x27;http://19maken.top&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 指定所有域名都能跨域访问</span></span><br><span class="line">res.<span class="title function_">setHeader</span>(<span class="string">&#x27;Access-Control-Allow-Origin&#x27;</span>,<span class="string">&#x27;*&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 指定请求允许的请求方法</span></span><br><span class="line">res.<span class="title function_">setHeader</span>(<span class="string">&#x27;Access-Control-Allow-Methods&#x27;</span>,<span class="string">&#x27;POST,GET,DELETE,HEAD&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 指定允许所有的请求</span></span><br><span class="line">res.<span class="title function_">setHeader</span>(<span class="string">&#x27;Access-Control-Allow-Methods&#x27;</span>,<span class="string">&#x27;*&#x27;</span>);</span><br></pre></td></tr></table></figure><p>预检请求<br>有些请求不是简单请求，会先发送OPTION请求进行预检</p><p><strong>jsonp</strong></p><p>这个东西我也不太清楚，说是要如果配置了cors，就要配置在cors的前面，然后前端会使用script标签来解析响应的内容。</p><h2 id="mysql模块"><a href="#mysql模块" class="headerlink" title="mysql模块"></a>mysql模块</h2><p>这也是第三方模块，用于数据库的连接与操作。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 下载第三方包</span></span><br><span class="line">$ npm install mysql</span><br></pre></td></tr></table></figure><p>导入mysql模块并使用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入mysql第三方包</span></span><br><span class="line"><span class="keyword">const</span> mysql = <span class="built_in">require</span>(<span class="string">&#x27;mysql&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建连接</span></span><br><span class="line"><span class="keyword">const</span> connection = mysql.<span class="title function_">createConnection</span>(&#123;</span><br><span class="line"><span class="attr">host</span>: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line"><span class="attr">user</span>: <span class="string">&#x27;user&#x27;</span>,</span><br><span class="line"><span class="attr">password</span>: <span class="string">&#x27;secret&#x27;</span>,</span><br><span class="line"><span class="attr">database</span>: <span class="string">&#x27;database&#x27;</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 连接</span></span><br><span class="line">connection.<span class="title function_">connect</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 操作连接</span></span><br><span class="line"><span class="keyword">const</span> sql = <span class="string">&#x27;SELECT 1+1 AS solution&#x27;</span>;</span><br><span class="line">connection.<span class="title function_">query</span>(sql,<span class="keyword">function</span>(<span class="params">error,results,fields</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (error) <span class="keyword">throw</span> error;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;The solution is:&#x27;</span>, results[<span class="number">0</span>],solution);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 关闭连接</span></span><br><span class="line">connection.<span class="title function_">end</span>();</span><br></pre></td></tr></table></figure><p>使用带占位符的sql语句，PS：占位符使用?</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1、多个占位符，使用数据传数据</span></span><br><span class="line"><span class="keyword">const</span> sql = <span class="string">&#x27;SELECT * FROM table WHERE age &gt; ? and gender = ?&#x27;</span>;</span><br><span class="line">connection.<span class="title function_">query</span>(sql,[<span class="number">18</span>,<span class="string">&#x27;男&#x27;</span>],<span class="keyword">function</span>(<span class="params">error,results,fields</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (error) <span class="keyword">throw</span> error;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(results);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2、如果占位符太多，可以使用对象</span></span><br><span class="line"><span class="keyword">const</span> sql = <span class="string">&#x27;INSERT INTO table (fields) values (?)&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> data = &#123;</span><br><span class="line"><span class="attr">field1</span>: field1,</span><br><span class="line"><span class="attr">field2</span>: field2,</span><br><span class="line">...</span><br><span class="line">&#125;</span><br><span class="line">connection.<span class="title function_">query</span>(sql,data,<span class="keyword">function</span>(<span class="params">error,results,fields</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (error) <span class="keyword">throw</span> error;</span><br><span class="line"><span class="comment">// 查看受影响的行数</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(results.<span class="property">affectedRows</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3、如果只有一个占位符，那么就可以不用使用数组传数据，直接使用数据</span></span><br><span class="line"><span class="keyword">const</span> sql = <span class="string">&#x27;SELECT * FROM table WHERE age &gt; ?&#x27;</span>;</span><br><span class="line">connection.<span class="title function_">query</span>(sql,<span class="number">18</span>,<span class="keyword">function</span>(<span class="params">error,results,fields</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (error) <span class="keyword">throw</span> error;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(results);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><strong>注意事项</strong></p><p>在执行操作的时候，如果执行的语句是查询语句，那么results就是一个数组，如果执行的是一个更新语句或者是删除语句，那么results就是一个对象，其中results的affectedRows属性可以查看执行后的语句所影响的行数。</p><h2 id="Web开发模式"><a href="#Web开发模式" class="headerlink" title="Web开发模式"></a>Web开发模式</h2><p>SEO?</p><p>服务端渲染</p><p>对SEO友好，但对服务器压力过大</p><p>前后端分离</p><p>服务器压力小，不用渲染页面，前端注重页面，后端注重API，对SEO不友好，但能使用VUE等框架提供的服务</p><p>如何选择？</p><p>不同的场景使用不同的模式，例如管理系统不怎么需要SEO，就可以使用前后端分离。有些网站也采用首页使用服务端渲染，其他页面使用前后端分离。</p><p><strong>身份验证</strong></p><ul><li>服务端渲染推荐使用Session认证机制。</li></ul><p>使用Cookie，它是存储在用户浏览器中一段不超过4KB的字符串，由一个名称（name）、一个值（value）和其他几个用于控制Cookie有效期、安全性和使用范围的可选属性组成。每当发起请求，会将未过期的Cookie一同发送到对应域名的服务器。服务端可以通过响应头发送Cookie给客户端。但是Cookie不安全，因为谁都可以看，会很好仿造。所以使用Cookie+Session认证。<strong>因为Session中的数据是对应客户端的</strong>客户端只能访问属于自己的session数据，而不能访问别的客户端的session数据。</p><ul><li>前后端分离推荐使用JWT认证机制。</li></ul><h2 id="在Express中使用Session认证"><a href="#在Express中使用Session认证" class="headerlink" title="在Express中使用Session认证"></a>在Express中使用Session认证</h2><p>下载express-session中间件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install express-session</span><br></pre></td></tr></table></figure><p>注册express-session中间件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> session = <span class="built_in">require</span>(<span class="string">&#x27;express-session&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">session</span>(&#123;</span><br><span class="line"><span class="attr">secret</span>: <span class="string">&#x27;keyboard cat&#x27;</span>,<span class="comment">// secret属性的值可以为任意字符串</span></span><br><span class="line"><span class="attr">resave</span>: <span class="literal">false</span>,<span class="comment">// 固定写法</span></span><br><span class="line"><span class="attr">saveUninitialized</span>: <span class="literal">true</span><span class="comment">// 固定写法</span></span><br><span class="line">&#125;));</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/user/login&#x27;</span>,<span class="keyword">function</span>(<span class="params">req,res</span>) &#123;</span><br><span class="line"><span class="comment">// 往session中存储数据</span></span><br><span class="line">req.<span class="property">session</span>.<span class="property">xxx1</span> = xxx1;</span><br><span class="line">req.<span class="property">session</span>.<span class="property">xxx2</span> = xxx2;</span><br><span class="line">res.<span class="title function_">send</span>(<span class="string">&#x27;success&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/user/getXxx&#x27;</span>,<span class="keyword">function</span>(<span class="params">req,res</span>) &#123;</span><br><span class="line"><span class="comment">// 取session中的数据</span></span><br><span class="line">res.<span class="title function_">send</span>(req.<span class="property">session</span>.<span class="property">xxx1</span> + <span class="string">&#x27;\n&#x27;</span> + req.<span class="property">session</span>.<span class="property">xxx2</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/user/logout&#x27;</span>,<span class="keyword">function</span>(<span class="params">req,res</span>) &#123;</span><br><span class="line"><span class="comment">// 清空Session中的数据</span></span><br><span class="line">req.<span class="property">session</span>.<span class="title function_">destroy</span>();</span><br><span class="line">res.<span class="title function_">send</span>(<span class="string">&#x27;success&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="JWT跨域认证"><a href="#JWT跨域认证" class="headerlink" title="JWT跨域认证"></a>JWT跨域认证</h2><p>由于Cookie默认不支持跨域，如果使用Session+Cookie作为身份验证机制，配置会很麻烦。JWT（JSON Web Token）是目前最流行的跨域认证解决方案。</p><p><strong>JWT工作流程</strong></p><p>首先客户端（浏览器）会发送登陆请求，服务器接收到请求后先验证账号和密码，验证通过后会将用户的信息对象经过加密后生成Token字符串（服务端不会存储这个字符串），然后响应给客户端，客户端收到响应后会将Token存放在浏览器的LocalStorage或者SessionStorage中，当客户端再次发送请求的时候会通过请求头的Authorization字段将Token发送给服务器，服务器验证这个Token是否合法，解析为之前打包所对应的数据，然后针对数据发送对应的响应。<strong>JWT中不要携带密码信息</strong></p><p>JWT组成部分，三部分，使用“.”分隔</p><p>Header(头部).Payload(有效荷载).Signature(签名)</p><p>Header与Signature只与安全有关，防止破解。Payload是加密后的用户信息。</p><p><strong>客户端如何使用JWT？</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 推荐做法：将JWT放在HTTP请求同的Authorization字段中。</span><br><span class="line">Authorization: Bearer &lt;token&gt;</span><br></pre></td></tr></table></figure><h2 id="在Express中使用JWT"><a href="#在Express中使用JWT" class="headerlink" title="在Express中使用JWT"></a>在Express中使用JWT</h2><p>安装JWT相关的包</p><p>jsonwebtoken 用于生成JWT字符串</p><p>express-jwt 用于将JWT字符串解析还原成JSON数据包</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装如下两个JWT相关的包</span></span><br><span class="line">$ npm install jsonwebtoken express-jwt</span><br></pre></td></tr></table></figure><p>定义secret密钥：用于JWT加密与解密，建议命名为secretKey</p><p>使用方法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> jwt = <span class="built_in">require</span>(<span class="string">&#x27;jsonwebtoken&#x27;</span>);</span><br><span class="line"><span class="comment">// 新版使用方法(7.7.7)，expressJWT为接收变量名，可任意更换</span></span><br><span class="line"><span class="keyword">var</span> &#123;<span class="attr">expressjwt</span>: expressJWT&#125; = <span class="built_in">require</span>(<span class="string">&#x27;express-jwt&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义secret密钥（随意字符串）</span></span><br><span class="line"><span class="keyword">const</span> secretKey = <span class="string">&#x27;XXXX xxxx II&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 配置JWT解析中间件</span></span><br><span class="line"><span class="comment">// 这个algorithms必须配置，好像是配置加密算法</span></span><br><span class="line"><span class="comment">// expressJWT(&#123;&#125;)：配置解析</span></span><br><span class="line"><span class="comment">// expressJWT(&#123;&#125;).unless(&#123;&#125;)：配置哪些不使用解析</span></span><br><span class="line"><span class="comment">// 添加expressJWT中间件后，express会将解析的token信息挂载在req.user中</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="title function_">expressJWT</span>(&#123;</span><br><span class="line"><span class="attr">secret</span>: secretKey,</span><br><span class="line"><span class="attr">algorithms</span>: [<span class="string">&quot;HS256&quot;</span>]</span><br><span class="line">&#125;).<span class="title function_">unless</span>(&#123;</span><br><span class="line"><span class="attr">path</span>: [<span class="regexp">/^\/api\//</span>]</span><br><span class="line">&#125;));</span><br><span class="line"><span class="comment">// 解析请求体JSON数据</span></span><br><span class="line">app.<span class="title function_">use</span>(express.<span class="title function_">json</span>());</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/api/user/login/action&#x27;</span>,<span class="keyword">function</span>(<span class="params">req,res</span>) &#123;</span><br><span class="line"><span class="keyword">const</span> user = req.<span class="property">body</span>;</span><br><span class="line"><span class="keyword">if</span> (user.<span class="property">name</span> === <span class="string">&#x27;admin&#x27;</span> &amp;&amp; user.<span class="property">pwd</span> === <span class="string">&#x27;123456&#x27;</span>) &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;登陆成功！&#x27;</span>);</span><br><span class="line"><span class="comment">// 参数1：加密信息，必须为一个对象！</span></span><br><span class="line"><span class="comment">// 参数2：加密密钥</span></span><br><span class="line"><span class="comment">// 参数3：配置，有很多参数，这里只配置了token有效期为30秒</span></span><br><span class="line"><span class="keyword">const</span> tokenStr = jwt.<span class="title function_">sign</span>(&#123;<span class="attr">username</span>: user.<span class="property">name</span>&#125;,secretKey,&#123;<span class="attr">expiresIn</span>: <span class="string">&#x27;30s&#x27;</span>&#125;);</span><br><span class="line"></span><br><span class="line">res.<span class="title function_">send</span>(&#123;</span><br><span class="line"><span class="attr">status</span>: <span class="number">200</span>,</span><br><span class="line"><span class="attr">message</span>: <span class="string">&#x27;登陆成功！&#x27;</span>,</span><br><span class="line"><span class="attr">token</span>: tokenStr</span><br><span class="line">&#125;);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;登陆失败！&#x27;</span>);</span><br><span class="line">res.<span class="title function_">send</span>(&#123;</span><br><span class="line"><span class="attr">status</span>: <span class="number">200</span>,</span><br><span class="line"><span class="attr">message</span>: <span class="string">&#x27;登陆失败！&#x27;</span>,</span><br><span class="line"><span class="attr">token</span>: <span class="literal">null</span></span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 请求此接口时应该在请求头的Authorization中添加token信息</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/user/info&#x27;</span>,<span class="keyword">function</span>(<span class="params">req,res</span>) &#123;</span><br><span class="line"><span class="keyword">const</span> user = req.<span class="property">user</span>;</span><br><span class="line"><span class="comment">// username为之前生成token时需要打包的数据中的字段</span></span><br><span class="line"><span class="keyword">if</span> (user.<span class="property">username</span> === admin) &#123;</span><br><span class="line">res.<span class="title function_">send</span>(&#123;</span><br><span class="line"><span class="attr">code</span>: <span class="number">200</span>,</span><br><span class="line"><span class="attr">msg</span>: <span class="string">&#x27;请求成功！&#x27;</span>,</span><br><span class="line"><span class="attr">data</span>: &#123;</span><br><span class="line"><span class="attr">name</span>: <span class="string">&#x27;admin&#x27;</span>,</span><br><span class="line"><span class="attr">age</span>: <span class="number">19</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加token解析异常中间件处理</span></span><br><span class="line">app.<span class="title function_">use</span>(<span class="function">(<span class="params">err,req,res,next</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">if</span> (err.<span class="property">name</span> === <span class="string">&#x27;UnauthorizedError&#x27;</span>) &#123;</span><br><span class="line"><span class="keyword">return</span> res.<span class="title function_">send</span>(&#123;</span><br><span class="line"><span class="attr">code</span>: <span class="number">401</span>,</span><br><span class="line"><span class="attr">msg</span>: <span class="string">&#x27;无效的token&#x27;</span>,</span><br><span class="line">&#125;);</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果不是token错误</span></span><br><span class="line">res.<span class="title function_">send</span>(&#123;</span><br><span class="line"><span class="attr">code</span>: <span class="number">500</span>,</span><br><span class="line"><span class="attr">msg</span>: <span class="string">&#x27;未知的错误&#x27;</span>,</span><br><span class="line">&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 学习 </tag>
            
            <tag> NodeJS入门 </tag>
            
            <tag> NodeJS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo建站感言</title>
      <link href="/posts/9b7de2ae/"/>
      <url>/posts/9b7de2ae/</url>
      
        <content type="html"><![CDATA[<h2 id="Hexo-建站感言"><a href="#Hexo-建站感言" class="headerlink" title="Hexo 建站感言"></a>Hexo 建站感言</h2><h3 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h3><p>历时三天，终于搞了一个基本能用的博客，非常激动！</p><p>其实之前我已经搭建过两三次博客了，但是都是照猫画虎，不知道为什么这样干，导致我最后无法维护我的博客，再加上搭建后就不想管了，之前的博客就逐渐被废弃了。</p><p>虽然之前已经搭建过博客，但是本次重新搭建的期间还是遇到了很多的问题，只有疯狂百度，看别的博主发布的教程，最后还是都解决了，心累啊~</p><h3 id="为什么建设本站"><a href="#为什么建设本站" class="headerlink" title="为什么建设本站"></a>为什么建设本站</h3><p>首先就是因为周边的同学有，所以自己也想搞一个。而且写一些技术文章不仅能巩固知识，还能在以后重新踩坑时提供帮助，说不定也能帮助其他人。</p><p>其实有很多的博客平台，例如CSDN和博客园之类的，但是它们的网站自由度不是很高，网站上不能挂自己想挂的东西，自己搭建的博客就有比较高的自由度了，可以按照自己喜欢的风格自定义。</p><p>选择<a href="https://hexo.io/zh-cn/index.html">Hexo</a>搭建博客的初衷就是能够实现<strong>0费用</strong>搭建博客，但是如今自己购入了服务器，以后可能会选择其他的内容管理系统，例如<a href="https://cn.wordpress.org/">WordPress</a>。</p><p>不过以我懒得折腾的性格，emmmmmmm……</p><h3 id="对本站的打算"><a href="#对本站的打算" class="headerlink" title="对本站的打算"></a>对本站的打算</h3><p>前面也说到之前做过的博客网站都逐渐废弃了，但是这次决定要好好维护，一定要做到不抛弃不放弃！</p><p>看到别人的博客有很多的文章，真的很羡慕啊，我也想要！</p><p>之后打算把博客当成长日志和分享用，记录一些编程学习过程中比较难记忆的内容，或者是自己踩过的坑，也或者是其他想分享给你的内容。</p><p>当然，博客不仅仅局限于这些内容，会随缘更新的！</p><h3 id="写在最后"><a href="#写在最后" class="headerlink" title="写在最后"></a>写在最后</h3><p>本博客使用<a href="https://hexo.io/zh-cn/">Hexo博客框架</a>+<a href="https://butterfly.js.org/">butterfly博客主题</a>+<a href="https://gitee.com/help/articles/4136">Gitee Pages服务</a>+<a href="https://www.aliyun.com/product/oss">aliyunOSS对象存储服务</a>构建，有前人栽树搭建起来真的很方便啊，特别感谢<a href="https://hexo.io/zh-cn/">Hexo</a>以及<a href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a>开源主题。</p><p>在此感谢我亲爱的室友<a href="https://gitee.com/jiaxinxiaobinggan">小马同学</a>画的背景图和头像，真的很好看呐。</p><h3 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h3><ul><li>[2024-01-27] 更新内容将不会记录到此，查看更新内容请移步至<a href="/website/log/">网站日志</a>。</li><li>[2023-07-19] 部署方式更新，之前是作为<strong>Node项目</strong>部署在服务器上，现在将编译好的文件作为<strong>纯静态项目</strong>部署在服务器上，减轻服务器的压力。</li><li>[2023-06-07] 由于博客需要外网访问确实太离谱了，图床改为<strong>腾讯云COS对象存储</strong>，搭配<strong>腾讯云轻量级服务器</strong>使用，体验非常好。</li><li>[2023-05-31] 购入新域名<strong>insectmk.cn</strong>，保持与博客同名。</li><li>[2023-05-24] 由于使用的<strong>阿里云香港轻量级服务器</strong>IP无法访问，转为<strong>腾讯云上海轻量级服务器</strong>。</li><li>[2023-05-11] 由于图床资费的原因，本博客不再使用<strong>阿里云OSS对象存储服务</strong>，而直接使用<strong>Github</strong>搭建个人图床，缺点就是大部分时间访问不了图片，需要外网访问。</li><li>[2023-05-11] 由于<strong>Gitee Pages</strong>的审核问题，本博客不再使用<strong>Gitee Pages服务</strong>，而转向了<strong>Github Pages</strong>服务。</li></ul>]]></content>
      
      
      <categories>
          
          <category> 总结 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 个人博客 </tag>
            
            <tag> 聊一聊 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo博客管理</title>
      <link href="/posts/7df4820a/"/>
      <url>/posts/7df4820a/</url>
      
        <content type="html"><![CDATA[<h2 id="Hexo博客管理项目"><a href="#Hexo博客管理项目" class="headerlink" title="Hexo博客管理项目"></a>Hexo博客管理项目</h2><h3 id="基本使用方法"><a href="#基本使用方法" class="headerlink" title="基本使用方法"></a>基本使用方法</h3><p>常用命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ npm install<span class="comment"># 下载hexo博客管理依赖包</span></span><br><span class="line"></span><br><span class="line">$ hexo clean<span class="comment"># 清除之前生成的静态博客</span></span><br><span class="line"></span><br><span class="line">$ hexo generate<span class="comment"># 生成静态文件博客</span></span><br><span class="line"></span><br><span class="line">$ hexo server<span class="comment"># 启动本地博客服务</span></span><br><span class="line"></span><br><span class="line">$ hexo deploy<span class="comment"># 将静态博客发布到gitee</span></span><br></pre></td></tr></table></figure><p><strong>如使用的是Gitee的Pages服务，应当在发布成功后更新pages服务</strong></p><h3 id="新建文章"><a href="#新建文章" class="headerlink" title="新建文章"></a>新建文章</h3><p>如果不指定模板，创建的文章模板为post模板，并且会默认生成在&#x2F;source&#x2F;_posts目录中</p><p>创建post文章</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1、指定创建post文章的目录</span></span><br><span class="line">$ hexo new --paht &lt;指定目录/文件名&gt; <span class="string">&quot;&lt;文章标题&gt;&quot;</span></span><br><span class="line"><span class="comment"># 例：如下命令表示在/source/_post目录下创建一个名为test/notes的目录</span></span><br><span class="line"><span class="comment"># 文章的文件名为vue2.md，并且会创建一个名为vue2的文件夹用于装此文章的图片资源等等，文章的标题为 Vue2入门笔记</span></span><br><span class="line">$ hexo new --path <span class="built_in">test</span>/notes/vue2 <span class="string">&quot;Vue2入门笔记&quot;</span></span><br></pre></td></tr></table></figure><p>指定Front-matter，就是每篇文章的基本信息，写在文章md文件的最前面，用—定义作用域。例：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">&lt;!-- 文章标题 --&gt;</span><br><span class="line">title: Hexo建站感言</span><br><span class="line">&lt;!-- 文章封面 --&gt;</span><br><span class="line">cover: https://image.insectmk.cn/hexo-gitee-blog/article/<span class="emphasis">_post/summary/hello-world/cover.jpg</span></span><br><span class="line"><span class="emphasis">&lt;!-- 是否开启评论 --&gt;</span></span><br><span class="line"><span class="emphasis">comments: true</span></span><br><span class="line"><span class="emphasis">&lt;!-- 文章分类，只能有一个 --&gt;</span></span><br><span class="line"><span class="emphasis">categories:</span></span><br><span class="line"><span class="emphasis">  - 总结</span></span><br><span class="line"><span class="emphasis">&lt;!-- 文章标签，可以有多个 --&gt;</span></span><br><span class="line"><span class="emphasis">tags:</span></span><br><span class="line"><span class="emphasis">  - 个人博客</span></span><br><span class="line"><span class="emphasis">  - 聊一聊</span></span><br><span class="line"><span class="emphasis">&lt;!-- 文章创建时间 --&gt;</span></span><br><span class="line"><span class="emphasis">date: 2022-11-04 15:41:22</span></span><br><span class="line"><span class="emphasis">&lt;!-- 文章更新时间 --&gt;</span></span><br><span class="line"><span class="emphasis">updated: 2022-11-07 13:16:22</span></span><br><span class="line"><span class="emphasis">&lt;!-- 文章置顶排序，数字越大越靠前 --&gt;</span></span><br><span class="line"><span class="emphasis">sticky: 100</span></span><br><span class="line"><span class="emphasis">---</span></span><br></pre></td></tr></table></figure><h3 id="Hexo博客管理相关链接"><a href="#Hexo博客管理相关链接" class="headerlink" title="Hexo博客管理相关链接"></a>Hexo博客管理相关链接</h3><ul><li><a href="https://console.leancloud.app/apps">LeanCloud</a>-Waline评论的数据库</li><li><a href="https://vercel.com/">vercel管理</a>-Waline评论的服务端部署</li><li><a href="https://butterfly.js.org/">hexo-theme-butterfly</a>-博客的主题</li><li><a href="https://hexo.io/zh-cn/">Hexo</a>-快速搭建纯静态博客的Node项目</li></ul>]]></content>
      
      
      <categories>
          
          <category> 程序运行 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 个人博客 </tag>
            
            <tag> 命令 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
